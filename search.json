[{"title":"testtest","url":"/blog.github.io/2024/09/17/testtest/","content":"\nğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯ğŸ˜¯  \n\nğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜  \n\nğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜  \n\n![20201113_131809000_iOS.PNG](https://s2.loli.net/2024/09/30/X2fA7Cm3lSvWLGI.png)\n"},{"title":"Windows-ä½¿ç”¨PSWæŸ¥è©¢è·¯å¾‘ä¸‹çš„ç›®éŒ„å¤§å°","url":"/blog.github.io/2024/06/02/Windows-ä½¿ç”¨PSWæŸ¥è©¢è·¯å¾‘ä¸‹çš„ç›®éŒ„å¤§å°/","content":"## **Windows - ä½¿ç”¨ PSWæŸ¥è©¢è·¯å¾‘ä¸‹çš„ç›®éŒ„å¤§å°**\n\n---\n\n---\n\n\n\n```\n#### WIN + X +A  ->>>> å«å‡º PSW\n```\n\n---\n\n---\n\n\n```\ncd è‡³è©²è·¯å¾‘\n```\n\n```\nå°‡å·²ä¸‹ä»£ç¢¼è²¼ä¸Š\n```\n\n---\n\n---\n\n---\n\n**\n\n```powershell\n\nGet-ChildItem |\nFormat-Table  -AutoSize Mode, LastWriteTime, Name,\n     @{ Label=\"Length\"; alignment=\"Left\";\n       Expression={\n                    if($_.PSIsContainer -eq $True)\n                        {(New-Object -com  Scripting.FileSystemObject).GetFolder( $_.FullName).Size}  \n                    else\n                        {$_.Length}\n                  }\n     };\n\n```\n","tags":["Windows"],"categories":["Windows"]},{"title":"Linux - å°‡ CentOS-home ç¡¬ç¢Ÿç©ºé–“è½‰ç§»è‡³ CentOS-root åº•ä¸‹","url":"/blog.github.io/2024/03/03/Linux-å°‡centos-homeç¡¬ç¢Ÿç©ºé–“è½‰ç§»è‡³centos-rootåº•ä¸‹/","content":"\n***\n***\n\n**æŸ¥çœ‹ç³»çµ±ç‰ˆæœ¬**\n=====\n\n***\n\n```sql\ncat /etc/redhat-release\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/AtGmBdNbpVgQxJa.png)\n\n***\n***\n\n**æŸ¥çœ‹ç³»çµ±çš„ç¡¬ç¢Ÿç©ºé–“**\n=====\n\n***\n\n```yaml\næŒ‡ä»¤: df -h\n\nPS: è¦è¨ˆç®—å¥½ç§»åˆ° root åº•ä¸‹çš„ç©ºé–“, å¾Œé¢è‹¥è¦æ–°å»ºhome, éœ€è¦ä¸€å®šçš„ç©ºé–“ã€‚ ex å°‡ 30G è½‰ç§»åˆ° root åº•ä¸‹, é ç•™ 8G æ–°å»ºçµ¦ home\n\nPS: /dev/mapper/centos-rootã€/dev/mapper/centos-home ä¸åŒæ©Ÿå™¨åç¨±å¯èƒ½ä¸åŒ\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/F49epsqDPT5Vjyk.png)\n\n***\n***\n\n**å‚™ä»½ home åˆ†å€**\n=====\n\n***\n\n```yaml\næŒ‡ä»¤: tar zcvf /tmp/home.tar /home\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/crqwsGpZ34yDRLA.png)\n\n***\n***\n\n**è§£ mount home/**\n====\n\n```yaml\næŒ‡ä»¤: umount /home\n\n```\n\n***\n\n**è‹¥è·³éŒ¯èª¤ ç„¡æ³•åŸ·è¡Œè§£ mount éœ€ä½¿ç”¨ root èº«åˆ†ç™»å…¥ä¸¦åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤**\n-----\n\n***\n\n```yaml\næŒ‡ä»¤: fuser -km /home\n\nPS: è‹¥æ²’æœ‰è©²æŒ‡ä»¤ éœ€åŸ·è¡Œ: yum install -y psmisc\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/PEzxcf8wQg5sWLh.png)\n\n***\n***\n\n**åˆªé™¤ /home åˆ†å€**\n=====\n\n***\n\n```sql\nlvremove /dev/mapper/centos-home\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/KNUul2dnSwOt5b9.png)\n\n***\n***\n\n**æ“´å®¹ /root åˆ†å€**\n=====\n\n***\n\n```sql\nlvextend -L +30G /dev/mapper/centos-root\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/BNOTjE46eA5fxWV.png)\n\n***\n***\n\n**æ“´å±• /root æ–‡ä»¶ç³»çµ±**\n====\n\n***\n\n```sql\nxfs_growfs /dev/mapper/centos-root\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/RceTftM4LBpnKEQ.png)\n\n***\n***\n\n**é‡æ–°å‰µå»º /home åˆ†å€**\n=====\n\n```sql\nlvcreate -L 8G -n /dev/mapper/centos-home\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/inXG4Vq7ZUsoTrA.png)\n\n***\n***\n\n**å‰µå»º /home æ–‡ä»¶ç³»çµ±**\n=====\n\n***\n\n```sql\nmkfs.xfs /dev/mapper/centos-home\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/8uCngUkjmE71Lcz.png)\n\n***\n***\n\n**æ›è¼‰ /home åˆ†å€**\n=====\n\n***\n\n```sql\nmount /dev/mapper/centos-home\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/DTqlVyutJjg9MSG.png)\n\n***\n***\n\n**è§£å£“åŸæœ¬å‚™ä»½çš„ home è‡³æ–°çš„åˆ†å€**\n=====\n\n***\n\n```sql\ntar zxvf /tmp/home.tar -C /home\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/gj3FbD29XEzIniH.png)\n\n***\n***\n\n**æŸ¥çœ‹ç¡¬ç¢Ÿç©ºé–“æ˜¯è½‰ç§»**\n=====\n\n***\n\n```sql\ndf -h\n\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/Eh8uNCnpbjKP1zV.png)\n\n***\n***\n\n**END**\n=====\n\n\n***\n\n\n\n***\n\n","tags":["Mount"],"categories":["Linux"]},{"title":"Apache - å¦‚ä½•è¨˜éŒ„çœŸå¯¦IP","url":"/blog.github.io/2024/01/04/Python2_7å‡ç´šæˆPython3_6-CentOS7/","content":"\n***\n***\n\n**ä¸‹è¼‰æ¨¡çµ„**\n----\n\n***\n***\n\n ```sql\nwget https://github.com/ttkzw/mod_remoteip-httpd22/archive/refs/heads/master.zip\n\nunzip mod_remoteip-httpd22-master.zip\n\ncd mod_remoteip-httpd22-master\n\napxs -i -c -n mod_remoteip.so mod_remoteip.c\n\n```\n\n***\n***\n\n**ä¿®æ”¹è¨­å®šæª” (åœ¨æœ€ä¸‹é¢æ–°å¢æ¨¡çµ„)**\n-----\n\n```sql\nLoadModule remoteip_module modules/mod_remoteip.so\n\n```\n\n***\n***\n\n**ä¿®æ”¹ç´€éŒ„ LOGçš„æ ¼å¼ (ä¿®æ”¹ç‚ºä»¥ä¸‹)**\n-----\n\n```sql\nLogFormat \"%h %{X-Forwarded-For}i %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n\nLogFormat \"%h %{X-Forwarded-For}i %l %u %t \\\"%r\\\" %>s %b\" common\n\nLogFormat \"%h %a %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" %I %O\" combinedio\n\n```\n\n\n***\n***\n\n***\n\n","tags":["Apache"],"categories":["Apache"]},{"title":"Github Action - å¯¦ç¾CI/CDè‡ªå‹•éƒ¨ç½²è‡³ Render","url":"/blog.github.io/2023/11/09/Github-è‡ªå‹•éƒ¨ç½²è‡³Render/","content":"\n***\n***\n**åœ¨GITç›®éŒ„ä¸‹æ–°å¢ `.github/workflows/main-pr.yml`** `åŸ·è¡Œ action çš„è…³æœ¬`\n-----\n***\n```sql\nmkdir -p .github/workflows\n\nvim main-pr.yml\n```\n***\n```yaml\nname: Main Deploy\nrun-name: ${{ github.actor }} Main Beploy\non:\n  push:\n    branches:\n      - main\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Deploy\n        run: |\n          curl -X POST -H \"Authorization: Bearer ${{ secrets.RENDER_TOKEN }}\" \\\n          -H \"Content-Type: application/json\" \\\n          -d '{}' \\\n          ${{ secrets.RENDER_DEPLOY_HOOK }}\n```\n***\n***\n**Render é—œé–‰ `Auth Deploy` åŠè¨˜éŒ„ `Deploy Hook`**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/WhgVlePnIx3fiaF.png)\n***\n***\n**ç´€éŒ„ `API Key`**\n---\n***\n***\n![](https://s2.loli.net/2024/04/28/aroAE3zmMkLFWIZ.png)\n***\n***\n**å°‡å‰›å‰›è¤‡è£½çš„ Deploy Hook è·Ÿ API Key è²¼åˆ° GitHub çš„ Secrets è£¡é¢**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/e1L4IPySMAZpWoN.png)\n***\n***\n**æ¥è‘—é»ä¸€ä¸‹ã€Œnew repository secretã€ï¼Œç„¶å¾Œè¼¸å…¥ `RENDER_DEPLOY_HOOK` è·Ÿ `RENDER_TOKEN` ä¸¦è²¼å…¥ç›¸å°æ‡‰çš„å€¼ï¼Œæœ€å¾Œé»ä¸€ä¸‹ã€ŒAdd secretã€å°±å®Œæˆäº†**\n=====\n***\n***\n**æœ€å¾Œè©¦ä¸€ä¸‹ `git push` å¾Œ Renderä¸Šæœƒè‡ªå‹•éƒ¨ç½²äº†**\n=====\n***\n***\n![](https://s2.loli.net/2024/04/28/9gbyajLOGiSH7er.png)\n***\n***\n***\n[åƒè€ƒæ–‡ä»¶](https://israynotarray.com/other/20230520/2118016719/)\n\n***\n\n","tags":["RENDER"],"categories":["GIT"]},{"title":"Shell-Script - è¨ˆç®—æ™‚é–“å·®å°å·¥å…·","url":"/blog.github.io/2023/10/03/shell-script-è¨ˆç®—æ™‚é–“å·®å°å·¥å…·/","content":"\n***\n***\n***\n***\n\n```sql\n#!/bin/bash\n\nlinee=\"-------------------------------------->>>\"\n\nclear\necho -e \"\\n\"\necho -e \"+---------------------------------------+\"\necho -e \"|\\e[34;1m  è¨ˆç®—æ™‚é–“å°å·¥å…·   (è«‹è¼¸å…¥æ—¥æœŸæˆ–æ™‚é–“)  \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[33;1m    Start Time å¿…é ˆå°æ–¼  Finish Time   \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[35;1m        æ­¤å°å·¥å…·ç‚º 24 å°æ™‚åˆ¶           \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[35;1m        è«‹å‹¿è¼¸å…¥è¶…é 24 å°æ™‚           \\e[0m|\"\necho -e \"+---------------------------------------+\"\n\necho -e \"\\n\"\necho -e \"$linee\"\necho -e \"\\n\"\necho -e \"\\e[32;1mStart Time  è«‹è¼¸å…¥é–‹å§‹æ—¥æœŸæˆ–æ™‚é–“ \\e[0m\"\necho -e \"\\n\"\necho -e \"\\e[34;1mex:20230731 æˆ– 1615\\e[0m \\e[35;1m(ä¸æ¥å— 2400) \\e[0m\"\necho -e \"\\n\"\necho -ne \"answer \\e[32;5m:  \\e[0m\"\nread -e starti\nclear\n\necho -e \"\\n\"\necho -e \"+---------------------------------------+\"\necho -e \"|\\e[34;1m  è¨ˆç®—æ™‚é–“å°å·¥å…·   (è«‹è¼¸å…¥æ—¥æœŸæˆ–æ™‚é–“)  \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[33;1m    Start Time å¿…é ˆå°æ–¼  Finish Time   \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[35;1m        æ­¤å°å·¥å…·ç‚º 24 å°æ™‚åˆ¶           \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[35;1m        è«‹å‹¿è¼¸å…¥è¶…é 24 å°æ™‚           \\e[0m|\"\necho -e \"+---------------------------------------+\"\n\necho -e \"\\n\"\necho -e \"$linee\"\necho -e \"\\n\"\necho -e \"\\e[32;1mFinish Time  è«‹è¼¸å…¥çµæŸæ—¥æœŸæˆ–æ™‚é–“ \\e[0m\"\necho -e \"\\n\"\necho -e \"\\e[34;1mex:20230804 æˆ– 1920\\e[0m \\e[35;1m(ä¸æ¥å— 2400)\\e[0m\"\necho -e \"\\n\"\necho -ne \"answer \\e[32;5m:  \\e[0m\"\nread -e finishi\nclear\nsleep 0.5\n\necho -e \"\\n\"\necho -e \"+---------------------------------------+\"\necho -e \"|\\e[34;1m  è¨ˆç®—æ™‚é–“å°å·¥å…·   (è«‹è¼¸å…¥æ—¥æœŸæˆ–æ™‚é–“)  \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[33;1m    Start Time å¿…é ˆå°æ–¼  Finish Time   \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[35;1m        æ­¤å°å·¥å…·ç‚º 24 å°æ™‚åˆ¶           \\e[0m|\"\necho -e \"|                                       |\"\necho -e \"|\\e[35;1m        è«‹å‹¿è¼¸å…¥è¶…é 24 å°æ™‚           \\e[0m|\"\necho -e \"+---------------------------------------+\"\n\necho -e \"\\n\"\necho -e \"$linee\"\necho -e \"\\n\"\n\ncase \"${starti}\" in\n\n\t[0-9][0-9][0-9][0-9][0][1-9][0-2][0-9])\n\t\tstartii=`date -d \"${starti}\" '+%s'`\n\t\techo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${startii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\t[0-9][0-9][0-9][0-9][0][1-9][3][0-1])\n                startii=`date -d \"${starti}\" '+%s'`\n                echo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${startii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\t[0-9][0-9][0-9][0-9][1][0-2][0-2][0-9])\n                startii=`date -d \"${starti}\" '+%s'`\n                echo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${startii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\t[0-9][0-9][0-9][0-9][1][0-2][3][0-1])\n\t\tstartii=`date -d \"${starti}\" '+%s'`\n\t\techo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${startii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\t[2][0-3][0-5][0-9])\n\t\tstartii=`date -d \"${starti}\" '+%s'`\n\t\techo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${startii} '+%H:%M'`\\e[0m\"\n;;\n\t[0-1][0-9][0-5][0-9])\n\t\tstartii=`date -d \"${starti}\" '+%s'`\n\t\techo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${startii} '+%H:%M'`\\e[0m\"\n;;\n\t*)\n\t\tclear\n\t\techo -e \"\\n\"\n\t\techo -e \"$linee\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[31;1mä½ è¼¸å…¥çš„é–‹å§‹æ™‚é–“ç‚º \\e[33;1m ${starti} \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[35;1mè¼¸å…¥éŒ¯èª¤ ERROR \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[32;1mæœˆæ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m     12 \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[32;1mæ—¥æ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m     30 \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[32;1må°æ™‚æ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m   24 \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[32;1måˆ†é˜æ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m   59 \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"$linee\"\n\t\techo -e \"\\n\"\n\t\texit 1\n;;\nesac\necho -e \"\\n\"\n\ncase \"${finishi}\" in\n\n\t[0-9][0-9][0-9][0-9][0][1-9][0-2][0-9])\n\t\tfinishii=`date -d \"${finishi}\" '+%s'`\n\t\techo -e \"çµæŸæ™‚é–“ç‚º     : \\e[34;1m `date -d @${finishii} '+%Y-%m-%d'`\\e[0m\"\n;;\n        [0-9][0-9][0-9][0-9][0][1-9][3][0-1])\n                finishii=`date -d \"${finishi}\" '+%s'`\n                echo -e \"çµæŸæ™‚é–“ç‚º     : \\e[34;1m `date -d @${finishii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\n\t[0-9][0-9][0-9][0-9][1][0-2][0-2][0-9])\n                finishii=`date -d \"${finishi}\" '+%s'`\n                echo -e \"çµæŸæ™‚é–“ç‚º     : \\e[34;1m `date -d @${finishii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\t[0-9][0-9][0-9][0-9][1][0-2][3][0-1])\n\t\tfinishii=`date -d \"${finishi}\" '+%s'`\n\t\techo -e \"é–‹å§‹æ™‚é–“ç‚º     : \\e[34;1m `date -d @${finishii} '+%Y-%m-%d'`\\e[0m\"\n;;\n\t[2][0-3][0-5][0-9])\n\t\tfinishii=`date -d \"${finishi}\" '+%s'`\n\t\techo -e \"çµæŸæ™‚é–“ç‚º     : \\e[34;1m `date -d @${finishii} '+%H:%M'`\\e[0m\"\n;;\n\t[0-1][0-9][0-5][0-9])\n\t\tfinishii=`date -d \"${finishi}\" '+%s'`\n\t\techo -e \"çµæŸæ™‚é–“ç‚º     : \\e[34;1m `date -d @${finishii} '+%H:%M'`\\e[0m\"\n;;\n\t*)\n\t\tclear\n\t\techo -e \"\\n\"\n\t\techo -e \"$linee\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[31;1mä½ è¼¸å…¥çš„é–‹å§‹æ™‚é–“ç‚º \\e[33;1m ${starti}  \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[31;1mä½ è¼¸å…¥çš„çµæŸæ™‚é–“ç‚º \\e[33;1m ${finishi} \\e[0m\"\n\t\techo -e \"\\n\"\n                echo -e \"\\e[35;1mè¼¸å…¥éŒ¯èª¤ ERROR \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[32;1mæœˆæ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m     12 \\e[0m\"\n                echo -e \"\\n\"\n\t\techo -e \"\\e[32;1mæ—¥æ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m     30 \\e[0m\"\n\t\techo -e \"\\n\"\n\t\techo -e \"\\e[32;1må°æ™‚æ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m   24 \\e[0m\"\n                echo -e \"\\n\"\n\t\techo -e \"\\e[32;1måˆ†é˜æ¬„ä½ä¸å¯å¤§æ–¼ \\e[34;1m   59 \\e[0m\"\n                echo -e \"\\n\"\n\t\techo -e \"$linee\"\n\t\techo -e \"\\n\"\n                exit 1\n;;\nesac\n\necho -e \"\\n\"\necho -e \"$linee\"\n\ntime1=$(($(date -d \"$finishi\" +%s)-$(date -d \"$starti\" +%s)));\n\nif [ $(echo \"0 < $time1\" | bc): 0 ]\nthen\n        echo -e \"\\n\"\n        echo -e \"\\e[35;5mERROR !!! ERROR !!! ERROR !!!\\e[0m\"\n        echo -e \"\\n\"\n        echo -e \"\\e[35;1mé–‹å§‹æ™‚é–“å¿…é ˆå°æ–¼çµæŸæ™‚é–“ !!! \\e[0m\"\n        echo -e \"\\n\"\n        echo -e \"$linee\"\n        echo -e \"\\n\"\n        exit 1\nelse\n        echo -e \"\\n\"\n        echo -e \"å…©è€…ç›¸å·®ç§’æ•¸ç‚º : \\e[31;1m $time1 ç§’\\e[0m\"\nfi\n\n#time2=$(($time1 / 60));\ntime2=`echo -e \"scale=0; $time1/60\"| bc`\necho -e \"\\n\"\necho -e \"å…©è€…ç›¸å·®åˆ†é˜ç‚º : \\e[31;1m $time2 åˆ†\\e[0m\"\n\n#time3=$(($time1 / 60 / 60));\ntime3=`echo -e \"scale=2; $time2/60\"| bc`\n\nif [ `echo -e \"${time3}\"|egrep \".00\"|wc -l`:= \"1\" ]\nthen\n\ttime31=`echo -e \"${time3}\"|sed \"s/.00//g\"`\n\techo -e \"\\n\"\n\techo -e \"å…©è€…ç›¸å·®å°æ™‚ç‚º : \\e[31;1m $time31 æ™‚\\e[0m\"\nelse\n\techo -e \"\\n\"\n\techo -e \"å…©è€…ç›¸å·®å°æ™‚ç‚º : \\e[31;1m $time3 æ™‚\\e[0m\"\nfi\n\n#time4=$(($time1 / 60 / 60 / 24));\ntime4=`echo -e \"scale=2; $time3/24\"| bc`\n\nif [ $(echo \"1 < $time4\" | bc): 0 ]\nthen\n        echo -e \"\\n\"\n        echo -e \"å…©è€…ç›¸å·®å¤©æ•¸ç‚º : \\e[31;1m 0$time4 å¤©\\e[0m\"\nelse\n\tif [ `echo -e \"${time4}\"|egrep \".00\"|wc -l`:= \"1\" ]\n\tthen\n\t\ttime41=`echo -e \"${time4}\"|sed \"s/.00//g\"`\n\t\techo -e \"\\n\"\n\t\techo -e \"å…©è€…ç›¸å·®å¤©æ•¸ç‚º : \\e[31;1m $time41 å¤©\\e[0m\"\n\telse\n\t\techo -e \"\\n\"\n\t\techo -e \"å…©è€…ç›¸å·®å¤©æ•¸ç‚º : \\e[31;1m $time4 å¤©\\e[0m\"\n\tfi\nfi\n\necho -e \"\\n\"\necho -e \"$linee\"\necho -e \"\\n\"\n\n```\n\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"Grafana - CLI å¸¸ç”¨æŒ‡ä»¤èªæ³•","url":"/blog.github.io/2023/08/16/Grafana-CLI_æŒ‡ä»¤èªæ³•/","content":"\n***\n***\n***\n\n**Grafana CLI command syntax**\n=====\n***\n***\n\n**æŸ¥çœ‹ç‰ˆæœ¬**\n-----\n***\n```sql\ngrafana-cli -v\n```\n***\n***\n\n**è¦†è“‹é è¨­æ’ä»¶ç›®éŒ„**\n-----\n\n***\n```sql\ngrafana-cli --pluginsDir \"/var/lib/grafana/devplugins\" plugins install <plugin-id>\n```\n***\n***\n\n**è¦†è“‹é è¨­æ’ä»¶å„²å­˜åº« URL**\n-----\n\n```yaml\n--repo valueå…è¨±æ‚¨å¾é è¨­ Grafana å„²å­˜åº«ä»¥å¤–çš„å„²å­˜åº«ä¸‹è¼‰ä¸¦å®‰è£æˆ–æ›´æ–°å¤–æ›ç¨‹å¼\n```\n\n***\n\n```sql\ngrafana-cli --repo \"https://example.com/plugins\" plugins install <plugin-id>\n```\n\n***\n***\n\n**åˆ—å‡ºå¯ç”¨çš„æ’ä»¶**\n-----\n\n***\n\n```sql\ngrafana-cli plugins list-remote\n```\n\n***\n***\n\n**å®‰è£æœ€æ–°ç‰ˆæœ¬çš„æ’ä»¶**\n-----\n\n***\n```sql\ngrafana-cli plugins install <plugin-id>\n```\n\n***\n***\n\n**å®‰è£ç‰¹å®šç‰ˆæœ¬çš„æ’ä»¶**\n-----\n\n***\n\n```sql\ngrafana-cli plugins install <plugin-id> <version>\n```\n\n***\n***\n\n**åˆ—å‡ºå·²å®‰è£çš„æ’ä»¶**\n-----\n\n***\n\n```sql\ngrafana-cli plugins ls\n```\n\n***\n***\n\n**æ›´æ–°æ‰€æœ‰å·²å®‰è£çš„æ’ä»¶**\n-----\n\n***\n\n```sql\ngrafana-cli plugins update-all\n```\n\n***\n***\n\n**æ›´æ–°ä¸€å€‹æ’ä»¶**\n-----\n\n***\n\n```sql\ngrafana-cli plugins update <plugin-id>\n```\n\n***\n***\n\n**åˆªé™¤ä¸€å€‹æ’ä»¶**\n-----\n\n***\n\n```sql\ngrafana-cli plugins remove <plugin-id>\n```\n\n***\n***\n\n**é¡¯ç¤ºæ‰€æœ‰ç®¡ç†å‘½ä»¤**\n-----\n\n***\n\n```sql\ngrafana-cli admin\n```\n\n***\n***\n\n**é‡ç½®ç®¡ç†è€…å¯†ç¢¼**\n-----\n\n***\n\n```sql\ngrafana-cli admin reset-admin-password <new password>\n```\n\n***\n***\n\n**æ–°å¢ API KEY**\n-----\n\n***\n\n```sql\ncurl -X POST -H \"Content-Type: application/json\" -d '{\"name\": \"my-api-key\", \"role\": \"Viewer\"}' http://admin:admin@localhost:3000/api/auth/keys\n```\n\n\n***\n***\n\n[åƒè€ƒæ–‡ä»¶](https://grafana.com/docs/grafana/latest/cli/#install-the-latest-version-of-a-plugin)\n[API](https://grafana.com/docs/grafana/latest/administration/api-keys/)\n\n\n\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Grafana - å‘Šè­¦å ±éŒ¯ ERROR 'webhook_response_status_401'åŠå‡ç´šç‰ˆæœ¬è‡³ v10.1.4","url":"/blog.github.io/2023/08/16/Grafana-å‘Šè­¦å ±éŒ¯_ERROR_webhook_response_status_401/","content":"\n**æ¸¬è©¦ LINEå‘Šè­¦æ™‚,å‡ºç¾ `ERROR \"webhook_response_status_401\"`**\n=====\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/a5FWvewRAcil8Jk.png)\n\n***\n***\n\n**æŸ¥äº†å¥½ä¹…æ‰ç™¼ç¾åŸä¾†æ˜¯`v10.0ç‰ˆæœ¬`çš„å•é¡Œ æ‰€ä»¥ç´€éŒ„ä¸€ä¸‹**\n=====\n\n***\n***\n\n**å‡ç´šGrafanaè‡³`v10.1`**\n-----\n\n***\n***\n\n**å‚™ä»½ (æ¸¬è©¦å¾Œä¸æœƒä¸è¦‹,å¯ä»¥ä¸å‚™ä»½)**\n-----\n\n***\n***\n\n**sqlite-DB**\n\n***\n\n```sql\ncp /var/lib/grafana/grafana.db /root/grafana-bakup/\n```\n\n***\n\n**æ’ä»¶ç›®éŒ„**\n***\n```sql\ncp -r /var/lib/grafana/plugins /root/grafana-bakup/\n```\n\n***\n\n**è¨­å®šæª”**\n***\n```sql\ncp /etc/grafana/grafana.ini /root/grafana-bakup/\n```\n\n***\n***\n\n**åœæ­¢æœå‹™**\n***\n```sql\nservice grafana-server stop\n```\n\n***\n***\n\n**å‡ç´šå®‰è£ç‰ˆæœ¬ v10.1.4**\n***\n```sql\nyum localinstall https://dl.grafana.com/enterprise/release/grafana-enterprise-10.1.4-1.x86_64.rpm\n```\n\n***\n***\n\n**å•Ÿå‹•æœå‹™**\n***\n```sql\nservice grafana-server start\n```\n\n***\n***\n\n**æŸ¥çœ‹ç‰ˆæœ¬**\n***\n```sql\ngrafana-cli -v\n```\n\n***\n***\n\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"OpenSSL - å®‰è£ OpenSSL-3.1.2 ä¸¦ç§»é™¤èˆŠç‰ˆæœ¬ (åŸå› : nodejs-v16.18.1 ä¸æ”¯æ´ openssl-1.1.1q)","url":"/blog.github.io/2023/08/04/OpenSSL-å®‰è£openssl-3_1_2/","content":"\n***\n***\n\n**ç§»é™¤èˆŠç‰ˆæœ¬**\n-----\n\n```sql\nwhereis openssl | xargs rm -frv\n```\n\n***\n***\n\n**å®‰è£ä¾è³´**\n-----\n\n```sql\nyum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker perl-CPAN perl-IPC-Cmd\n```\n\n***\n***\n\n**ä¸‹è¼‰å®‰è£åŒ…**\n-----\n\n```sql\nwget https://github.com/openssl/openssl/releases/download/openssl-3.1.2/openssl-3.1.2.tar.gz\n```\n\n***\n***\n\n**ç·¨è­¯å®‰è£**\n-----\n\n```sql\n./config --prefix=/usr/local/openssl\n\nmake\n\nmake install\n\necho \"/usr/local/openssl/lib64\" >> /etc/ld.so.conf\n\nln -s /usr/local/openssl/bin/openssl /usr/bin/openssl\n\nldconfig /usr/local/lib64/\n\n```\n\n***\n***\n\n**æŸ¥çœ‹ç‰ˆæœ¬**\n-----\n\n```sql\nopenssl version\n```\n\n***\n***\n\n\n***\n\n","tags":["OpenSSL"],"categories":["Linux"]},{"title":"Linux - SNMP å¸¸ç”¨ç›£æ§_OID","url":"/blog.github.io/2023/08/03/Linux-SNMP_å¸¸ç”¨ç›£æ§_OID/","content":"\n***\n***\n\n**Linux å¸¸ç”¨çš„ç›£æ§ SNMP_OID**\n======\n\n***\n***\n\n```yaml\nEX:\n\nsnmpwalk -v 2c -c public 127.0.0.1 OID  \n```\n\n***\n***\n\n**è² è¼‰ Loading**\n-----\n\n***\n\n```yaml\n1 minute Load: .1.3.6.1.4.1.2021.10.1.3.1\n\n5 minute Load: .1.3.6.1.4.1.2021.10.1.3.2\n\n15 minute Load: .1.3.6.1.4.1.2021.10.1.3.3\n```\n\n***\n***\n\n**CPU**\n-----\n\n***\n\n```yaml\nç”¨æˆ¶CPUæ™‚é–“ç™¾åˆ†æ¯”ï¼š.1.3.6.1.4.1.2021.11.9.0\n\nåŸå§‹ç”¨æˆ¶CPUæ™‚é–“ï¼š.1.3.6.1.4.1.2021.11.50.0\n\nç³»çµ± CPU æ™‚é–“ç™¾åˆ†æ¯”ï¼š.1.3.6.1.4.1.2021.11.10.0\n\nåŸå§‹ç³»çµ±CPUæ™‚é–“ï¼š.1.3.6.1.4.1.2021.11.52.0\n\nç©ºé–’ CPU æ™‚é–“ç™¾åˆ†æ¯”ï¼š.1.3.6.1.4.1.2021.11.11.0\n\nåŸå§‹ç©ºé–’ CPU æ™‚é–“ï¼š.1.3.6.1.4.1.2021.11.53.0\n\nåŸå§‹è‰¯å¥½çš„CPUæ™‚é–“ï¼š.1.3.6.1.4.1.2021.11.51.0\n```\n\n***\n***\n\n**å…§å­˜ RAM**\n-----\n\n***\n\n```yaml\nç¸½äº¤æ›è¦æ¨¡ï¼š.1.3.6.1.4.1.2021.4.3.0\n\nå¯ç”¨äº¤æ›ç©ºé–“ï¼š.1.3.6.1.4.1.2021.4.4.0\n\næ©Ÿå™¨ä¸­çš„ç¸½ RAMï¼š.1.3.6.1.4.1.2021.4.5.0\n\nä½¿ç”¨çš„ç¸½å…§å­˜ï¼š.1.3.6.1.4.1.2021.4.6.0\n\nå¯ç”¨ RAM ç¸½é‡ï¼š.1.3.6.1.4.1.2021.4.11.0\n\nå…±äº« RAM ç¸½é‡ï¼š.1.3.6.1.4.1.2021.4.13.0\n\nç·©è¡ RAM ç¸½é‡ï¼š.1.3.6.1.4.1.2021.4.14.0\n\nç¸½ç·©å­˜å…§å­˜ï¼š.1.3.6.1.4.1.2021.4.15.0\n```\n\n***\n***\n\n**ç¡¬ç¢Ÿå®¹é‡**\n----\n\n***\n\n```yaml\nç£ç›¤æ›è¼‰è·¯å¾‘ï¼š.1.3.6.1.4.1.2021.9.1.2.1\n\nåˆ†å€è¨­å‚™è·¯å¾‘ï¼š.1.3.6.1.4.1.2021.9.1.3.1\n\nç£ç›¤/åˆ†å€çš„ç¸½å¤§å°ï¼ˆKBï¼‰ï¼š.1.3.6.1.4.1.2021.9.1.6.1\n\nç£ç›¤ä¸Šçš„å¯ç”¨ç©ºé–“ï¼š.1.3.6.1.4.1.2021.9.1.7.1\n\nç£ç›¤ä¸Šå·²ç”¨ç©ºé–“ï¼š.1.3.6.1.4.1.2021.9.1.8.1\n\nç£ç›¤ä¸Šå·²ä½¿ç”¨ç©ºé–“çš„ç™¾åˆ†æ¯”ï¼š.1.3.6.1.4.1.2021.9.1.9.1\n\nç£ç›¤ä¸Šä½¿ç”¨çš„ inode ç™¾åˆ†æ¯”ï¼š.1.3.6.1.4.1.2021.9.1.10.1\n```\n\n***\n***\n\n**ç³»çµ±é‹è¡Œæ™‚é–“**\n-----\n\n***\n\n```yaml\n.1.3.6.1.2.1.1.3.0\n```\n\n***\n***\n\n[åƒè€ƒæ–‡ä»¶](https://www.cnblogs.com/lsgxeva/p/9220974.html)\n\n***\n***\n\n\n***\n***\n\n***\n\n","tags":["SNMP"],"categories":["Linux"]},{"title":"Linux - UNAR å®‰è£ & è§£å£“ raræª”","url":"/blog.github.io/2023/08/03/Linux-UNARå®‰è£è§£å£“-raræª”/","content":"\n***\n***\n\n**å®‰è£ `unar`**\n-----\n\n```sql\nyum install epel-release\n\nyum install unar\n```\n\n***\n***\n\n**è§£å£“**\n----\n\n```sql\nunar example.rar\n```\n\n***\n***\n\n**è§£å£“åˆ°æŒ‡å®šç›®éŒ„**\n----\n\n```sql\nunar -o /tmp/example.rar\n```\n\n***\n***\n\n**å¸¶å¯†ç¢¼è§£å£“**\n-----\n\n```sql\nunar -p 123456 centos.rar\n```\n\n***\n***\n\n**åˆ—å‡ºå£“ç¸®å…§å®¹**\n-----\n\n```sql\nlsar centos.rar\n```\n\n***\n***\n\n**æŒ‡å®šç·¨ç¢¼**\n-----\n\n```sql\nunar -e GBK centos.rar\n```\n\n***\n***\n\n\n***\n\n","tags":["RAR"],"categories":["Linux"]},{"title":"Linux - yum å®‰è£å ±éŒ¯ Fix error: rpmdb: BDB0113 Thread/process","url":"/blog.github.io/2023/08/03/Linux-yum_å®‰è£å ±éŒ¯-error_rpmdb_BDB0113/","content":"\n***\n***\n\n**Fix â€œerror: rpmdb: BDB0113 Thread/process â€“ Thread died in Berkeley DB library | rpmdb open failedâ€ â€“ CentOS 7**\n======\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/KmCwUyL6uTI8Aen.png)\n\n***\n***\n\n**è§£æ±ºæ–¹æ³• :**\n\n***\n***\n\n```sql\nmv /var/lib/rpm/__db* /tmp/\n\nyum clean all\n\n```\n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"HEXO - è§£æ±ºåœ–ç‰‡ç„¡æ³•é¡¯ç¤º","url":"/blog.github.io/2023/07/01/HEXO-è§£æ±ºåœ–ç‰‡ç„¡æ³•é¡¯ç¤º/","content":"\n***\n***\n\n**Hexo å·²å®‰è£å¥—ä»¶ `hexo-asset-image` åœ–ç‰‡é‚„æ˜¯ç„¡æ³•é¡¯ç¤º**\n=====\n\n**å°‡ä»¥ä¸‹è²¼å…¥åŸæœ¬çš„ `index.js`**\n\n```js\n'use strict';\nvar cheerio: require('cheerio');\n\n// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string\nfunction getPosition(str, m, i) {\n    return str.split(m, i).join(m).length;\n}\n\nvar version: String(hexo.version).split('.');\nhexo.extend.filter.register('after_post_render', function (data) {\n    var config: hexo.config;\n    if (config.post_asset_folder) {\n        var link: data.permalink;\n        if (version.length > 0 && Number(version[0]):= 3)\n            var beginPos: getPosition(link, '/', 1) + 1;\n        else\n            var beginPos: getPosition(link, '/', 3) + 1;\n        // In hexo 3.1.1, the permalink of \"about\" page is like \".../about/index.md\".\n        var endPos: link.lastIndexOf('/') + 1;\n        link: link.substring(beginPos, endPos);\n\n        var toprocess: ['excerpt', 'more', 'content'];\n        for (var i: 0; i < toprocess.length; i++) {\n            var key: toprocess[i];\n\n            var $: cheerio.load(data[key], {\n                ignoreWhitespace: false,\n                xmlMode: false,\n                lowerCaseTags: false,\n                decodeEntities: false\n            });\n\n            $('img').each(function () {\n                if ($(this).attr('src')) {\n                    // For windows style path, we replace '\\' to '/'.\n                    var src: $(this).attr('src').replace('\\\\', '/');\n                    if (!/http[s]*.*|\\/\\/.*/.test(src) &&\n                        !/^\\s*\\//.test(src)) {\n                        // For \"about\" page, the first part of \"src\" can't be removed.\n                        // In addition, to support multi-level local directory.\n                        var linkArray: link.split('/').filter(function (elem) {\n                            return elem != '';\n                        });\n                        var srcArray: src.split('/').filter(function (elem) {\n                            return elem != '' && elem != '.';\n                        });\n                        if (srcArray.length > 1)\n                            srcArray.shift();\n                        src: srcArray.join('/');\n                        $(this).attr('src', config.root + link + src);\n                        console.info && console.info(\"update link as:-->\" + config.root + link + src);\n                    }\n                } else {\n                    console.info && console.info(\"no src attr, skipped...\");\n                    console.info && console.info($(this));\n                }\n            });\n            data[key]: $.html();\n        }\n    }\n});\n\n```\n\n\n***\n***\n\n\n","tags":["HEXO"],"categories":["HEXO"]},{"title":"Nginx - js/css 404 å­è·¯å¾‘ç¼ºå¤±æ›¿æ›æ–¹æ³•","url":"/blog.github.io/2023/06/29/Nginx-js_css_è·¯å¾‘ç¼ºå¤±æ›¿æ›æ–¹æ³•/","content":"\n***\n***\n\n**åŸå› : æŒ‰ä¸‹ `F12` å¾Œ,æ‰€æœ‰ `js/css` å…¨éƒ¨è®Š`404` (ç•¶å‰è·¯å¾‘å°‘ä¸€å±¤ç›®éŒ„)**\n=====\n\n***\n***\n\n**ä½¿ç”¨åƒæ•¸ `sub_filter` æ›¿æ›è©²è·¯å¾‘**\n=====\n\n***\n***\n\n**EX:**\n======\n\n***\n***\n\n```sql\nlocation ^~ /note {\nalias  /root/web-server/config2/public/;\nsub_filter_types *;\nsub_filter '/css/' '/note/css/';\nsub_filter '/lib/' '/note/lib/';\nsub_filter '/svg/' '/note/svg/';\nsub_filter '/js/' '/note/js/';\nsub_filter '/tags/' '/note/tags/';\nsub_filter '/fixit.min.svg' '/note/fixit.min.svg';\nsub_filter_once off;\naccess_log /root/web-server/hugoserver.acc;\n}   \n```\n\n***\n***\n\n***\n***\n\n```\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"Windows - å¦‚ä½•é—œé–‰æ™ƒå‹•è¦–çª—ä¸å†æœ€å°åŒ–å…¶ä»–è¦–çª—","url":"/blog.github.io/2023/06/21/Windows-å¦‚ä½•é—œé–‰æ™ƒå‹•è¦–çª—ä¸å†æœ€å°åŒ–å…¶ä»–è¦–çª—/","content":"\n***\n***\n\n**æ¯æ¬¡ä¸€ä¸å°å¿ƒæ™ƒåˆ°è¦–çª—å°±çµ¦æˆ‘å…¨éƒ¨æœ€å°åŒ– , å› æ­¤ç‰¹åˆ¥ç´€éŒ„ä¸€ä¸‹**  \n=====\n\n***\n***\n\n**å¦‚ä½•é—œé–‰ `Aero Shake`**\n-----\n\n***\n***\n\n**`Windows` + `R` é–‹å•ŸåŸ·è¡Œ , ä¸¦è¼¸å…¥ `gpedit.msc`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/oDwnvAIfGU1lKht.png)\n\n***\n***\n\n**é¸å– `ä½¿ç”¨è€…è¨­å®š` >> `ç³»çµ±ç®¡ç†ç¯„æœ¬` >> `æ¡Œé¢` , å³é‚Šé»æ“Š `é—œé–‰ Aero æ–å‹•è¦–çª—æœ€å°åŒ–æ»‘é¼ æ‰‹å‹¢`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/s5OIpUVjLyDCEQt.png)\n\n***\n***\n\n**é»æ“Š `å·²å•Ÿç”¨` ä¸¦ `å¥—ç”¨ & ç¢ºå®š`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/Wl792CjOA1uXr5Q.png)\n\n***\n***\n\n`ps: åœç”¨æˆ–æœªè¨­å®šé€™å€‹è¦å‰‡ , éƒ½æœƒé–‹å•Ÿ Aero Shake`\n\n***\n***\n\n\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Windows - å¦‚ä½•å»é™¤é–å®šç•«é¢ä¸Šçš„ YT æ’­æ”¾è³‡è¨Š","url":"/blog.github.io/2023/06/20/Windows-å¦‚ä½•å»é™¤é–å®šç•«é¢ä¸Šçš„æ’­æ”¾è³‡è¨Š/","content":"\n***\n***\n\n**ç›®å‰æ¸¬è©¦ Firefox å¯ä»¥éš±è— (å…¶é¤˜ chrome edge æ¸¬è©¦ä¸è¡Œ)**\n=====\n\n***\n***\n\n**å•Ÿå‹• `Firefox ç€è¦½å™¨` åœ¨ `URL ä½ç½®` ä¸Šè¼¸å…¥**\n\n***\n***\n***\n\n```sql\nabout:config\n\n```\n\n***\n***\n***\n\n```yaml\næœå°‹:  media.hardwaremediakeys.enabled\n\n```\n\n***\n***\n***\n\n**å°‡å…¶è¨­ç½®ç‚º `false` é‡å•Ÿå³å¯**\n\n***\n***\n***\n\n***\n***\n***\n\n***\n***\n***\n\n\n`**ä»¥ä¸‹ Chrome å·²å¤±æ•ˆ**`\n=====\n\n***\n***\n***\n***\n\n\n**è§£æ±º Windows 10  `é–å®šç•«é¢ä¸Š` ä¸è¦é¡¯ç¤ºæ­£åœ¨æ’­æ”¾çš„ `Youtube`** \n-----\n\n***\n***\n\n**å•Ÿå‹• `chrome ç€è¦½å™¨` åœ¨ `URL ä½ç½®` ä¸Šè¼¸å…¥**\n\n***\n***\n***\n\n\n```sql\nchrome://flags/#hardware-media-key-handling\n```\n\n***\n***\n***\n\n```yaml\næœå°‹:  Media Session enterpictureinpicture action\n\n```\n\n***\n***\n***\n\n**å°‡å…¶è¨­ç½®ç‚º `Disabled`**\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/05/03/5TdQEqwnIrjDAgH.png)\n\n***\n***\n***\n\n***\n***\n***\n\n### Hardware Media Key Handling å·²ç¶“æ£„ç”¨ ###\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/29/MyFVemCRBnQKgth.png)\n\n***\n***\n***\n\n**é‡å•Ÿ `Chrome` ç”Ÿæ•ˆ**\n\n***\n***\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Rsync - å¦‚ä½•åœ¨ Windows å’Œ Linux é–“é€²è¡Œæ–‡ä»¶åŒæ­¥æ“ä½œ (åœ¨ Linux ä¸‹èªæ³•)","url":"/blog.github.io/2023/06/10/Rsync-åœ¨Windowså’ŒLinuxé–“é€²è¡Œæ–‡ä»¶åŒæ­¥æ“ä½œ/","content":"\n***\n\n`ä¾†æº` : Rsync-server: Windows `172.16.XXX.XXX`<br>\n\n`ç›®çš„` : Rsync-client: Linux `172.16.XX.XX`<br>\n\n***\n***\n\n**Windows è¨­ç½® `Rsync Serverç«¯`**\n=====\n\n***\n\n**å®‰è£ `cwRsyncServer`**\n-----\n\n***\n\n**[cwRsyncServer ä¸‹è¼‰åœ°å€](https://www.backupassist.com/rsync/)**\n\n***\n\n**è§£å£“å¾Œ,å®‰è£åŸ·è¡Œæª” [å®‰è£éç¨‹æœƒè¼¸å…¥éœ€è¦åŒæ­¥çš„`å¸³è™Ÿ`åŠ`å¯†ç¢¼`]**\n\n***\n***\n\n**Rsync Server ç«¯è¨­å®š**\n-----\n\n***\n\n**åˆ°éœ€è¦åŒæ­¥çš„ç›®éŒ„ä¸‹, æ–°å»ºå‰›å‰›çš„å¸³è™Ÿ `rsync` , ä¸¦çµ¦äºˆè©²`ç›®éŒ„çš„æ¬Šé™`**\n\n***\n\n![](https://s2.loli.net/2024/04/29/SQ4rzaYLxJmyOGV.png)\n\n***\n\n![](https://s2.loli.net/2024/04/29/86kgjihyTpUOsWL.png)\n\n***\n\n**ä¿®æ”¹ `rsyncd.conf` é è¨­è·¯å¾‘: `C:\\Program Files (x86)\\ICW`**\n\n***\n\n```sql\n[mypath]\n\npath: /cygdrive/c/Users/Laurance/Desktop/TEST\n\nread only: false\n\ntransfer logging: yes\n\nauth users: rsync\n\nsecrets file: etc/rsyncd.secrets\n\nuid: 0\n\ngid: 0\n```\n\n***\n\n**åœ¨`ç›®éŒ„ etc` è£¡é¢æ–°å»ºå¯†ç¢¼æ–‡ä»¶  æ–‡ä»¶åç¨±: `rsyncd.secrets`**\n\n***\n\n```yaml\næ ¼å¼ç‚º: rsync:XXXXXX\n```\n\n***\n***\n\n**å°‡ Rsync æœå‹™è¨­ç½®ç‚º`è‡ªå‹•`**\n-----\n\n***\n\n**é–‹å•Ÿ `Windows` æœå°‹ `ç³»çµ±ç®¡ç†å·¥å…·`**\n\n***\n\n![](https://s2.loli.net/2024/04/29/YzwckB7WiTH9Z5Q.png)\n\n***\n\n**é»æ“Š `æœå‹™` > æ‰¾åˆ° `RsyncServer` > å³éµé»é¸å…§å®¹ å°‡å•Ÿå‹•é¡å‹æ”¹ç‚º `è‡ªå‹•`**\n\n***\n\n![](https://s2.loli.net/2024/04/29/2zlCwbEWvR9Ohkt.png)\n\n***\n***\n\n**Windows é–‹å•Ÿç«ç‰† `rsync port: 873`**\n----\n\n***\n\n**é–‹å•Ÿ Windowså…§å»ºç«ç‰† > é»é¸`é€²éšè¨­å®š` > é»é¸`è¼¸å…¥è¦å‰‡` > é»é¸`æ–°å¢è¦å‰‡`**\n\n***\n\n![](https://s2.loli.net/2024/04/29/Y5Neyqj3QsgzXF9.png)\n\n***\n\n**æ–°å»ºç«ç‰†è¦å‰‡: `TCP 873` Port**\n\n***\n\n![](https://s2.loli.net/2024/04/29/cN5QHgjR2wWz7qI.png)\n![](https://s2.loli.net/2024/04/29/ZIx2pknlYiro7y1.png)\n\n***\n\n![](https://s2.loli.net/2024/04/29/uArqkdDhPv2Z67E.png)\n![](https://s2.loli.net/2024/04/29/QshcuZ1wHSOd4At.png)\n***\n***\n\n**Linux è¨­ç½® `Rsync Clientç«¯`**\n=====\n\n***\n\n**å®‰è£ `Rsync Client`**\n-----\n\n***\n\n```yaml\nyum install rsync\n```\n\n***\n***\n\n**è¨­ç½® `Client ç«¯` å¯†ç¢¼æ–‡ä»¶**\n-----\n\n***\n\n```sql\necho \"XXXXX\" > /root/hugo-server/rsync.password\n\nchmod 600 /root/hugo-server/rsync.password\n```\n\n**ps. è‹¥æ²’è¨­ç½®`æ¬Šé™ 600` æœƒå ±éŒ¯: ERROR: `password file must not be other-accessible`**\n\n***\n***\n\n**æ¸¬è©¦åŒæ­¥:**\n-----\n\n***\n\n```sql\nrsync -vzrtopg --password-file=rsync.password --port=873 --progress --delete rsync@172.16.XX.XX::mypath /root/test\n```\n\n***\n***\n\n**Rsync åƒæ•¸èªªæ˜**\n-----\n\n***\n\n\n\n| åƒæ•¸ | ä»£è¡¨æ„æ€ |\n| -- | -- |\n| -v | é¡¯ç¤ºè©³ç´°è³‡è¨Š |\n| -z | å£“ç¸®å‚³è¼¸è³‡æ–™ |\n| -r | å­ç›®éŒ„éè¿´ |\n| -t | è¤‡è£½æ™‚é–“å±¬æ€§ |\n| -o | è¤‡è£½æ“æœ‰è€…å±¬æ€§ |\n| -p | è¤‡è£½æª”æ¡ˆæ¬Šé™ |\n| -g | è¤‡è£½ç¾¤çµ„å±¬æ€§ |\n\n\n\n\n***\n\n","tags":["Linux","Rsync","Windows"],"categories":["Rsync"]},{"title":"å¦‚ä½•å®‰è£ Python3.10 åŠ openssl-1.1.1q - on CentOS7","url":"/blog.github.io/2023/06/05/å¦‚ä½•å®‰è£Python3_10åŠopenssl-1_1_1q-CentOS7/","content":"---\n\n---\n\n**ç§»é™¤èˆŠç‰ˆæœ¬çš„ python åŠ onpenssl**\n-----------------------------------\n\n---\n\n```sql\nwhereis python3 | xargs rm -frv\n\nwhereis openssl | xargs rm -frv\n```\n\n---\n\n---\n\n**å®‰è£ä¾è³´**\n------------\n\n---\n\n```sql\nyum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make python3-devel libevent-devel libffi-devel \n\nyum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker perl-CPAN perl-IPC-Cmd\n```\n\n---\n\n---\n\n**å®‰è£ `openssl-1.1.1q`**\n-------------------------\n\n---\n\n```sql\nwget https://www.openssl.org/source/openssl-1.1.1q.tar.gz\n\ntar zxvf openssl-1.1.1q.tar.gz \n\ncd openssl-1.1.1q/\n\n./config --prefix=/usr/local/openssl --openssldir=/usr/local/openssl shared zlib\n\nmake\n\nmake install\n\n```\n\n---\n\n---\n\n**å°‡ openssl lib è·¯å¾‘å¯«å…¥å‹•æ…‹åº«**\n---------------------------------\n\n---\n\n```sql\necho \"/usr/local/openssl/lib\" >> /etc/ld.so.conf\n\nldconfig -v\n```\n\n---\n\n---\n\n**å»ºç«‹ link && æŸ¥çœ‹ç‰ˆæœ¬**\n-------------------------\n\n---\n\n```sql\nln -s /usr/local/openssl/bin/openssl /usr/bin/openssl\n\nopenssl version\n```\n\n---\n\n---\n\n**å®‰è£ Python-3.10**\n--------------------\n\n---\n\n```sql\nwget https://www.python.org/ftp/python/3.10.5/Python-3.10.5.tgz\n\ntar zxvf Python-3.10.5.tgz\n\ncd Python-3.10.5/\n\n./configure --prefix=/usr/local/python3 --with-openssl=/usr/local/openssl --with-openssl-rpath=auto --enable-optimizations\n\nmake && make install\n```\n\n---\n\n---\n\n**å»ºç«‹ pyhon ã€ pip link**\n--------------------------\n\n---\n\n```sql\nln -s /usr/local/python3/bin/pip3.10 /usr/bin/pip3 \n\nln -s /usr/local/python3/bin/python3.10 /usr/bin/python3\n\nln -s /usr/local/python3/bin/python3.10 /usr/local/bin/python3\n```\n\n---\n\n---\n\n**å°‡è·¯å¾‘å¯«å…¥ç’°å¢ƒè®Šæ•¸**\n----------------------\n\n---\n\n```sql\necho 'export PATH=/usr/local/python3/bin:$PATH' >> ~/.bashrc\n\nsource ~/.bashrc\n```\n\n**æŸ¥çœ‹ pip python ç‰ˆæœ¬ && æ›´æ–° pip**\n------------------------------------\n\n---\n\n```sql\npython3 -V\n\npip3 -V\n\npip -V\n\npython3 -m pip install --upgrade pip\n```\n\n---\n\n---\n\n---\n","tags":["Python"],"categories":["Linux"]},{"title":"Mysql - å¦‚ä½•æŸ¥çœ‹å’Œä¿®æ”¹ DB åŠ TABLE ç·¨ç¢¼","url":"/blog.github.io/2023/06/03/Mysql-æŸ¥çœ‹,ä¿®æ”¹DBåŠTABLEç·¨ç¢¼/","content":"---\n\n\n---\n**æŸ¥çœ‹ DB ç·¨ç¢¼**\n----------------\n\n---\n\n```sql\nSHOW VARIABLES LIKE 'character_set%';\n```\n\n---\n\n---\n\n**ä¿®æ”¹ DB ç·¨ç¢¼**\n----------------\n\n---\n\n```sql\nALTER DATABASE dbname CHARACTER SET utf8 COLLATE utf8_general_ci;\n```\n\n---\n\n---\n\n**æŸ¥çœ‹ TABLES ç·¨ç¢¼**\n--------------------\n\n---\n\n```sql\nuse dbname;\n\nSELECT @@character_set_database, @@collation_database;\n\nOR.\n\nSHOW FULL COLUMNS FROM tablename;\n\nOR.\n\nSHOW FULL FIELDS FROM tablename;\n```\n\n---\n\n---\n\n**ä¿®æ”¹è¡¨çš„ç·¨ç¢¼ç‚º `UTF8`**\n-------------------------\n\n---\n\n```sql\nALTER TABLE web CONVERT TO CHARACTER SET utf8;\n```\n\n---\n\n---\n\n**æŸ¥çœ‹ DB å…§æ‰€æœ‰è¡¨çš„ç‹€æ…‹**\n--------------------------\n\n---\n\n```sql\nSHOW TABLE STATUS FROM tablename \\G;\n```\n\n---\n\n**é€šé `SHOW CREATE TABLE` ç¢ºèª**\n---------------------------------\n\n---\n\n```sql\nSHOW CREATE TABLE web;\n```\n\n---\n\n---\n\n---\n\n---\n\n---\n\n---\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"å¦‚ä½•å°‡ CentOS6 å‡ç´š python2.6.6 è‡³ 2.7","url":"/blog.github.io/2023/06/03/Python2_6_6å‡ç´šè‡³Python2_7-CentOS6/","content":"\n<!--more-->\nCentOS6 é è¨­ pythonç‰ˆæœ¬ç‚º2.6.6\nå¦‚ä½•å®‰è£ python2.7 pip å·¥å…·\n\n***\n***\n\n**å®‰è£ Python2.7**\n-----\n***\n```sql\ncd /usr/local/src\n\nyum install openssl-devel zlib-devel readline-devel sqlite-devel -y\n\nwget https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz\n\ntar -zxvf Python-2.7.10.tgz\n```\n\n***\n***\n\n```sql\ncd Python-2.7.10\n\n./configure --enable-shared --enable-loadable-sqlite-extensions --prefix=/usr/local/python27 --with-zlib --with-ssl\n\nvim ./Modules/Setup\t# å°‡ä»¥ä¸‹å…§å®¹å»æ‰è¨»è§£\n\nzlib zlibmodule.c -I$(prefix)/include -L$(exec_prefix)/lib -lz\n\nmake && make install\n```\n\n***\n***\n\n```sql\ncd /usr/bin/\n\nls python* -l\n\nmv /usr/bin/python /usr/bin/python2.6.6\n\nln -s /usr/local/python27/bin/python2.7 /usr/bin/python\n```\n\n**åŸ·è¡Œ python -V é‡åˆ°å¦‚ä¸‹å ±éŒ¯**\n------\n***\n\n**`python: error while loading shared libraries: libpython2.7.so.1.0: cannot open shared object file: No such file or directory`**\n\n***\n\n**`åŸå› ï¼šlinuxç³»çµ±é»˜èªæ²’æœ‰æŠŠ/usr/local/python27/libè·¯å¾‘åŠ å…¥å‹•æ…‹åº«æœç´¢è·¯å¾‘`**\n\n***\n\n**è§£æ±ºæ–¹æ³•**\n\n```yaml\nvim /etc/ld.so.conf\t# æ·»åŠ ä»¥ä¸‹å…§å®¹\n\n/usr/local/python27/lib\n\nldconfig -v\t# ç”Ÿæ•ˆ\n\npython -V\n\nPython 2.7.10\n```\n\n***\n***\n\n**è§£æ±º yum å…¼å®¹æ€§å•é¡Œ:**\n-----\n\n***\n\n**`å› ç‚º yum æ˜¯ä¸å…¼å®¹ Python 2.7 çš„ï¼Œæ‰€ä»¥ yum ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘å€‘éœ€è¦æŒ‡å®š yum çš„ Python ç‚º 2.6`**\n\n***\n\n```yaml\nvim /usr/bin/yum\t# ç¬¬ä¸€è¡Œä¿®æ”¹ç‚º python2.6.6\n\n#!/usr/bin/python2.6.6\n```\n\n***\n***\n\n**å®‰è£ python2.7 pipå·¥å…·:**\n-----\n\n```sql\nwget https://bootstrap.pypa.io/pip/2.7/get-pip.py\n\npython get-pip.py\n\nmv /usr/bin/pip /usr/bin/pip2.6.6\n\nln -s /usr/local/python27/bin/pip2.7 /usr/bin/pip\n\npip -V\n\npip 20.3.4 from /usr/local/python27/lib/python2.7/site-packages/pip (python 2.7)\n```\n\n\n***\n\n","tags":["Python"],"categories":["Linux"]},{"title":"Windows - å¦‚ä½•å»ºç«‹æ’ç¨‹è®“ SVN è‡ªå‹•é€äº¤","url":"/blog.github.io/2023/05/30/Windows-å¦‚ä½•å»ºç«‹æ’ç¨‹è®“SVNè‡ªå‹•é€äº¤/","content":"\n***\n***\n\n**Windows è¨­å®šæ‰¹æ¬¡æª”è®“ `svn è‡ªå‹• commit`**  \n------\n\n***\n***\n\n**åœ¨è¦é€äº¤çš„ç›®éŒ„è£¡é¢ä¸€å±¤ `å»ºç«‹æ”¾æ‰¹æ¬¡æª”çš„ç›®éŒ„`**\n\n***\n***\n\n**å»ºç«‹è¦ `commit` çš„æ‰¹æ¬¡æª”** (æ­¤æ‰¹æ¬¡æª”ç‚ºå…ˆ update ä¹‹å¾Œå† commit , å› æ­¤ `è‹¥æœ‰åˆªé™¤æª”æ¡ˆéœ€å…ˆæ‰‹å‹• commit`)\n\n***\n***\n\n```sql\n@echo off\n:start\nsetlocal ENABLEDELAYEDEXPANSION\nset TD=%~dp0\ncd /d %TD%/../\n \n:SVN_UPDATE\nsvn update\n \n:SVN_ADD_NOTUNDERCONTROL\nFOR /F \"usebackq delims=\" %%i IN (`svn status`) DO (\n  set LN=\"%%i\"\n  set FC=!LN:~1,1!\n  set FN=!LN:~9,-1!\n  IF \"!FC!\"==\"?\" (\n    svn add \"!FN!\"\n  )\n)\n \n:SVN_COMMIT\nset MSG=\"%date% %time%\"\necho \"----------------------------------------\" >> \"%TD%/svn_log.txt\"\necho %MSG% >> \"%TD%/svn_log.txt\"\nsvn commit -m %MSG% >> \"%TD%/svn_log.txt\"\n \n:end\n```\n\n***\n***\n\n**å»ºç«‹ windows æ¯æ—¥æ’ç¨‹ åŸ·è¡Œ svn commit**\n-----\n\n***\n***\n\n**`Win + R` è¼¸å…¥ `taskschd.msc` ä¸¦é»é¸ `å»ºç«‹åŸºæœ¬å·¥ä½œ`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/K9FQcGBZTwEDAUq.png)\n\n***\n***\n\n**è¼¸å…¥æ’ç¨‹çš„`åç¨±`åŠ`æè¿°`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/yAdUf9EJq2P7bk1.png)\n\n***\n***\n\n**è¼¸å…¥åŸ·è¡Œæ’ç¨‹è¦`é–“éš”çš„æ™‚é–“`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/fgMSFwTIOmyJDe6.png)\n![](https://s2.loli.net/2024/05/03/Sw5xdoZ7Q3iGVzM.png)\n\n***\n***\n\n**è¼¸å…¥è¦`åŸ·è¡Œçš„å‹•ä½œ` (é€™é‚Šé¸æ“‡åŸ·è¡Œå‰›å»ºç«‹çš„æ‰¹æ¬¡æª”)**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/IM4rPF7ByNcpDJa.png)\n\n***\n***\n\n**è¼¸å…¥`æ‰¹æ¬¡æª”çš„è·¯å¾‘`å³å¯**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/La63Zs9RAQNoIzp.png)\n\n***\n***\n\n**ç¢ºèª`è§¸ç™¼ç¨‹åº`åŠ`æ™‚é–“`å¾Œ,é»é¸å®Œæˆå³å¯**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/AIdk4xhqYJav2Q1.png)\n\n***\n***\n\n\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Windows - ä½¿ç”¨ WinSCP è…³æœ¬åŒæ­¥ Windowsç›®éŒ„åˆ° Linux (åœ¨ Windows ä¸‹èªæ³•)","url":"/blog.github.io/2023/05/22/Windows-ä½¿ç”¨WinSCPè…³æœ¬åœ¨win10å’Œlinuxä¹‹é–“å¯¦æ™‚åŒæ­¥é …ç›®ä¸¦æ’é™¤ç›®éŒ„/","content":"\n***\n***\n\n[WinSCP è¼‰é»å®‰è£ å®˜ç¶²ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬](https://winscp.net/eng/download.php)\n\n***\n\n`å®‰è£å®Œæˆå¯æ·»åŠ ç’°å¢ƒè®Šæ•¸,æŒ‡ä»¤å°±ä¸ç”¨å¸¶çµ•å°è·¯å¾‘äº†`\n\n***\n***\n\n\n**å¦‚ä½• `æ’é™¤ç›®éŒ„` æˆ– `éš±è—æª”`**\n-----\n\n***\n***\n\n**é–‹å•Ÿ `winscp` é»é¸ `æŒ‡ä»¤` > `åŒæ­¥` > `å‚³é€è¨­å®š` > `æª”æ¡ˆé®ç½©` > `ç·¨è¼¯` > `è¨˜ä¸‹é®ç½©ä»£ç¢¼`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/T8hBa2zJXMWSAex.png)\n\n***\n***\n\n**å¦‚ä½•ä¸‹ `CMD` åŒæ­¥ç›®éŒ„**\n-----\n\n***\n***\n\n**`WinSCP` ç™»å…¥è™›æ“¬æ©Ÿå¾Œ , é»é¸ `å·¥ä½œéšæ®µ` > `ç”¢ç”Ÿå·¥ä½œéšæ®µURL / ç¨‹å¼ç¢¼` > `è¨˜ä¸‹å·¥ä½œéšæ®µURL`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/ZbAsNnSX5eRfBCH.png)\n\n***\n***\n\n**é–‹å•Ÿ `CMD` é€²å…¥ `WinSCP ä»‹é¢`**\n\n***\n***\n\n`Win + R + CMD å¿«æ·é–‹å•Ÿ`\n\n`è¼¸å…¥ winscp åŸ·è¡Œæª”è·¯å¾‘åŠæŒ‡ä»¤`\n\n```sql\n\"C:\\Program Files (x86)\\WinSCP\\WinSCP.com\"\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/PKkc1WlhAGVdiwt.png)\n\n***\n***\n\n**å°‡ `winscp` ç”¢ç”Ÿçš„ `å·¥ä½œéšæ®µ URL` è¼¸å…¥**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/tvKn4SRB2Y95ylG.png)\n\n***\n***\n\n**è¼¸å…¥åŒæ­¥èªæ³•**\n\n***\n***\n\n```yaml\nåŒæ­¥ç›®éŒ„èªæ³• # é›™å‘åŒæ­¥\nsynchronize both \"C:\\Users\\Laurance\\Desktop\\XXXXX\" /root/test/test/winscp\n```\n\n***\n\n```yaml\nåŒæ­¥ç›®éŒ„èªæ³• # åŒæ­¥é ç«¯æª”æ¡ˆåˆ°æœ¬åœ°\nsynchronize local \"C:\\Users\\Laurance\\Desktop\\XXXXX\" /root/test/test/winscp\n```\n\n***\n\n```yaml\nåŒæ­¥ç›®éŒ„èªæ³• # åŒæ­¥æœ¬åœ°æª”æ¡ˆåˆ°é ç«¯\nsynchronize remote  \"C:\\Users\\Laurance\\Desktop\\Mis-Note (TEST)\\TEST\\wh-8.com\" /root/test/test/winscp\nOR\nsynchronize remote -delete \"C:\\Users\\Laurance\\Desktop\\Mis-Note (TEST)\\TEST\\wh-8.com\" /root/test/test/winscp\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/FxwaL7RN6dztVkZ.png)\n\n***\n***\n\n**å¦‚ä½•ä½¿ç”¨ `WinSCP` è…³æœ¬åœ¨`win10`å’Œ`linux`ä¹‹é–“å¯¦æ™‚åŒæ­¥é …ç›®ä¸¦æ’é™¤ç›®éŒ„**  \n------\n\n***\n***\n\n**å»ºç«‹ä¸€æ”¯åŸ·è¡Œ winscpèªæ³•çš„ rsync.txt**\n\n***\n***\n\n```sql\nopen sftp://USER:PASSWORD@172.16.0.222/ -hostkey=\"ssh-ed25519 255 XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n\nsynchronize remote \"C:\\Users\\Laurance\\Desktop\\XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" /root/test/test/winscp -filemask=\"| .*; test.txt\"\n\nexit\n```\n\n***\n***\n\n**å†å»ºç«‹ä¸€æ”¯åŸ·è¡Œ CMDèªæ³•çš„ sync.bat**\n\n***\n***\n\n```sql\n@echo on\n\nset filepath=%~dp0\n\nWinSCP /script=\"%filepath%\\rsync.txt\" /log=\"%filepath%\\rsync_log.txt\"\n\npause\n```\n\n***\n***\n\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Windows - å¦‚ä½•å»ºç«‹ç’°å¢ƒè®Šæ•¸ (WinSCP)","url":"/blog.github.io/2023/05/21/Windows-å¦‚ä½•å»ºç«‹ç’°å¢ƒè®Šæ•¸/","content":"\n***\n***\n\n**Windows 10 å°‡ `WinSCP` åŠ å…¥ç’°å¢ƒè®Šæ•¸æ­¥é©Ÿ**  \n=====\n\n***\n***\n\n**é»é¸ `æ§åˆ¶å°` > `ç³»è‘£åŠå®‰å…¨æ€§` > `ç³»çµ±`**\n------\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/IHDNByiZf9nQTzE.png)\n\n***\n***\n\n**é»é¸ `é€²éšç³»çµ±è¨­å®š`**\n------\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/uGRQlbCdTmH6UAk.png)\n\n***\n***\n\n**é»é¸ `é€²éš` > `ç’°å¢ƒè®Šæ•¸`**\n------\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/A7zfR1qwDMlan42.png)\n\n***\n***\n\n**åœ¨ `ç³»çµ±è®Šæ•¸` ä¸­æ‰¾åˆ° `Path` & ä¸¦é»é¸ `ç·¨è¼¯`**\n------\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/qnYgoDVsAG2SzTe.png)\n\n***\n***\n\n**é»é¸ `æ–°å¢` > `å°‡ç¨‹å¼åŸ·è¡Œæª”è·¯å¾‘å¡«å…¥` > `ç¢ºå®š`**\n------\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/45CU1ibSQqeGWwN.png)\n\n***\n***\n\n\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"HUGO - error: hugo: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found (æ¸¬è©¦æ©Ÿ)","url":"/blog.github.io/2023/05/20/HUGO-erroræ‰¾ä¸åˆ°libstdc-XX-so6-version-GLIBCXX/","content":"\n\n<!--more-->\n**./hugo: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.20' not found` (required by ./hugo)\n  ./hugo: /lib64/libstdc++.so.6: version `CXXABI_1.3.8' not found` (required by ./hugo)\n  ./hugo: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found` (required by ./hugo)**\n\n***\n***\n\n**è§£æ±ºè¾¦æ³•:**\n\n***\n***\n\n```sql\nstrings /usr/lib64/libstdc++.so.6 | grep GLIBCXX\n\nwget http://mirror.ghettoforge.org/distributions/gf/el/7/gf/x86_64/gf-release-7-12.gf.el7.noarch.rpm\n\nrpm -Uvh gf-release-7-12.gf.el7.noarch.rpm\n\nyum install gcc10-libstdc++\n\nrpm -ql gcc10-libstdc++.x86_64\n\nfind / -name \"libstdc++.so.6*\"\n\ncp /opt/gcc-10.2.1/usr/lib64/libstdc++.so.6.0.28 /usr/lib64/\n\ncd /usr/lib64\n\nrm libstdc++.so.6\n\nln -s libstdc++.so.6.0.28 libstdc++.so.6\n\nhugo version\n```\n\n\n\n***\n***\n\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"HUGO - error ç¼ºå°‘æ¨¡çµ„ admonition (æ¸¬è©¦æ©Ÿ)","url":"/blog.github.io/2023/05/20/HUGO-errorç¼ºå°‘æ¨¡çµ„admonition(æ¸¬è©¦æ©Ÿ)/","content":"\n<!--more-->\n**failed to extract shortcode: template for shortcode \"admonition\" not found**\n\n***\n***\n\n**è§£æ±ºè¾¦æ³•: æ–°å¢ `html æ¨¡çµ„`**\n\n***\n***\n\n```sql\nvim themes/hugo-FixIt/themes/FixIt/layouts/shortcodes/admonition.html\n```\n\n***\n***\n\n```sql\n{{- $inner := .Inner | .Page.RenderString -}}\n\n{{- $iconMap := dict \"note\" \"fa-solid fa-pencil-alt fa-fw\" -}}\n{{- $iconMap : dict \"abstract\" \"fa-solid fa-list-ul fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"info\" \"fa-solid fa-info-circle fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"tip\" \"fa-solid fa-lightbulb fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"success\" \"fa-solid fa-check-circle fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"question\" \"fa-solid fa-question-circle fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"warning\" \"fa-solid fa-exclamation-triangle fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"failure\" \"fa-solid fa-times-circle fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"danger\" \"fa-solid fa-skull-crossbones fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"bug\" \"fa-solid fa-bug fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"example\" \"fa-solid fa-list-ol fa-fw\" | merge $iconMap -}}\n{{- $iconMap : dict \"quote\" \"fa-solid fa-quote-right fa-fw\" | merge $iconMap -}}\n{{- $iconDetails := \"fa-solid fa-angle-right fa-fw\" -}}\n\n{{- if .IsNamedParams -}}\n  {{- $type := .Get \"type\" | default \"note\" -}}\n  <div class=\"details admonition {{ $type }}{{ if .Get `open` | ne false }} open{{ end }}\">\n    <div class=\"details-summary admonition-title\">\n      <i class=\"icon {{ index $iconMap $type | default (index $iconMap \"note\") }}\" aria-hidden=\"true\"></i>{{ .Get \"title\" | .Page.RenderString | default (T (printf \"admonition.%v\" $type)) }}<i class=\"details-icon {{ $iconDetails }}\" aria-hidden=\"true\"></i>\n    </div>\n    <div class=\"details-content\">\n      <div class=\"admonition-content\">\n        {{- $inner -}}\n      </div>\n    </div>\n  </div>\n{{- else -}}\n  {{- $type := .Get 0 | default \"note\" -}}\n  <div class=\"details admonition {{ $type }}{{ if .Get 2 | ne false }} open{{ end }}\">\n    <div class=\"details-summary admonition-title\">\n      <i class=\"icon {{ index $iconMap $type | default (index $iconMap \"note\") }}\" aria-hidden=\"true\"></i>{{ .Get 1 | .Page.RenderString | default (T (printf \"admonition.%v\" $type)) }}<i class=\"details-icon {{ $iconDetails }}\" aria-hidden=\"true\"></i>\n    </div>\n    <div class=\"details-content\">\n      <div class=\"admonition-content\">\n        {{- $inner -}}\n      </div>\n    </div>\n  </div>\n{{- end -}}\n\n```\n\n\n***\n***\n\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"HUGO - å¦‚ä½•æ›´æ›ä¸»é¡Œ (æ¸¬è©¦æ©Ÿ)","url":"/blog.github.io/2023/05/20/HUGO-æ›´æ›ä¸»é¡Œ(æ¸¬è©¦æ©Ÿ)/","content":"\n***\n***\n\n**Hugo æ›´æ›ä¸»é¡Œç´€éŒ„**\n=====\n\n***\n***\n\n**å»ºç«‹æ–°çš„ `hugo site`**\n-----\n\n***\n***\n\n```sql\nhugo new site hugo-beautifulhugo\n```\n\n***\n***\n\n**Clone ä¸»é¡Œè‡³æ–°çš„ Site**\n-----\n\n***\n***\n\n```sql\ncd hugo-beautifulhugo\n\ngit clone https://github.com/halogenica/beautifulhugo.git themes/beautifulhugo\n```\n\n***\n***\n\n**å°‡è©²ä¸»é¡Œéœ€è¦çš„è¨­å®šæª”è¤‡è£½åˆ°æ–°çš„ `site`**\n-----\n\n***\n***\n\n```sql\ncp -r themes/beautifulhugo/exampleSite/* . -iv\n```\n\n***\n***\n\n**å°‡èˆŠä¸»é¡Œçš„ç­†è¨˜ç§»åˆ°æ–°ä¸»é¡Œè£¡**\n-----\n\n***\n***\n\n```sql\ncd themes/hugo-terminal/content/posts\n\ncp -r ../../../../themes/hugo-FixIt/content/posts/* .\n```\n\n***\n***\n\n**èƒŒæ™¯å•Ÿå‹• `hugo`**\n-----\n\n***\n***\n\n```sql\nnohup hugo -D server -b 172.16.0.222 --bind=\"0.0.0.0\" --theme=$THEME --disableFastRender -e production &\n```\n\n\n***\n***\n\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"GCP - gcloud config è¨­å®šé…ç½®ä½¿ç”¨","url":"/blog.github.io/2023/05/06/GCP-gcloud-config-è¨­å®šé…ç½®ä½¿ç”¨/","content":"\n***\n***\n\n**å®‰è£ `gcloud-cli`**\n------\n\n***\n\n[åƒè€ƒå®‰è£æ•™å­¸](https://cloud.google.com/sdk/docs/install-sdk#linux)\n\n***\n\n```sql\ncurl -O https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-cli-430.0.0-linux-x86_64.tar.gz\n\ntar -xf google-cloud-cli-430.0.0-linux-x86.tar.gz\n\n./google-cloud-sdk/install.sh\n```\n\n***\n***\n\n**æŸ¥çœ‹é…ç½®åˆ—è¡¨**\n-----\n\n```sql\ngcloud config configurations list\n```\n\n***\n***\n\n**æŸ¥çœ‹æœ¬æ©Ÿç”¨æˆ¶**\n-----\n\n```sql\ngcloud auth list\n```\n\n***\n***\n\n**æ–°å¢é…ç½®**\n-----\n\n```sql\ngcloud config configurations create [name]\n```\n\n***\n***\n\n\n\n**å¸³è™Ÿç™»å…¥**\n-----\n\n```sql\ngcloud auth login\n```\n\n***\n\n**è¨­å®šå°ˆæ¡ˆ**\n----\n\n```sql\ngcloud config set project [project name]\n```\n\n***\n\n**è¨­å®šåœ°å€**\n-----\n\n```sql\ngcloud config set compute/zone [zone name]\n```\n\n***\n\n**è¨­å®šåœ°åŸŸ**\n-----\n\n```sql\ngcloud config set compute/region [region name]\n```\n\n\n\n***\n***\n\n**åˆ‡æ›é…ç½®**\n-----\n\n```sql\ngcloud config configurations activate [name]\n```\n\n***\n***\n\n**åˆªé™¤é…ç½®**\n-----\n\n`ps. è¦å…ˆåˆ‡æ›é…ç½®æ‰èƒ½åˆªé™¤`\n\n***\n\n```sql\ngcloud config configurations delete [name]\n```\n\n\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"GCP - åŸ·è¡Œ gcloud components update å ±éŒ¯ ERROR: 'cannot perform this action because the Google Cloud CLI component manager' ","url":"/blog.github.io/2023/05/06/GCP-åŸ·è¡Œgcloud-components-updateå ±éŒ¯/","content":"\n<!--more-->\nERROR: (gcloud.components.update) \n\nYou cannot perform this action because the Google Cloud CLI component manager \n        \nis disabled for this installation\n\n***\n***\n\n**è§£æ±ºæ–¹æ³• ( å°‡ `google-cloud-sdk` é‡æ–°å®‰è£ )**\n=====\n\n***\n\n```sql\nyum remove google-cloud-sdk\n\ncurl -O https://dl.google.com/dl/cloudsdk/channels/rapid/downloads/google-cloud-cli-434.0.0-linux-x86_64.tar.gz\n\ntar zxvf google-cloud-cli-434.0.0-linux-x86_64.tar.gz \n\ncd google-cloud-sdk/\n\n./install.sh \n\nsource ~/.bashrc\n```\n\n***\n\n**æŸ¥çœ‹ç‰ˆæœ¬ && å†é‹è¡Œä¸€æ¬¡ `update`**\n=====\n\n***\n\n```sql\ngcloud --version\n\ngcloud components update\n```\n\n***\n***\n***\n\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"GCP - å®‰è£å…§å»ºç›£æ§ Ops agent ä»£ç† ","url":"/blog.github.io/2023/05/06/GCP-å®‰è£Ops-agentä»£ç†ç›£æ§/","content":"\n<!--more-->\n**Ops Agent æ˜¯ç”¨æ–¼å¾ Compute Engine å¯¦ä¾‹æ”¶é›†é™æ¸¬æ•¸æ“šçš„ä¸»è¦ä»£ç†ã€‚é€šéå°‡æ—¥èªŒè¨˜éŒ„å’ŒæŒ‡æ¨™çµ„åˆåˆ°å–®å€‹ä»£ç†ä¸­ï¼ŒOps Agent å°æ—¥èªŒä½¿ç”¨ Fluent Bitï¼ˆæ”¯æŒé«˜ååé‡æ—¥èªŒè¨˜éŒ„ï¼‰ï¼Œå°æŒ‡æ¨™ä½¿ç”¨ OpenTelemetry æ”¶é›†å™¨**\n\n***\n***\n\n**å®‰è£ `beta çµ„ä»¶`**\n=====\n\n***\n\n```sql\ngcloud components install beta\n\ngcloud components list\n\ngcloud components update\n```\n\n***\n\n**å®‰è£è…³æœ¬ && åŸ·è¡Œè…³æœ¬ `--project=å¸³è™Ÿ ID`**\n=====\n\n***\n\n```sql\nwget https://cloud.google.com/static/stackdriver/docs/set-permissions.sh\n\nbash set-permissions.sh --project=XXXXX-account ID\n```\n\n***\n\n**å»ºç«‹ç›£æ§ç­–ç•¥**\n=====\n\n***\n\n```sql\ngcloud beta compute instances \\\n\nops-agents policies create ops-agents-test-policy \\\n\n--agent-rules=\"type=logging,enable-autoupgrade=false;type=metrics,enable-autoupgrade=false\" \\\n\n--description=\"A test policy.\" \\\n\n--os-types=short-name=centos,version=7 \\\n\n--instances=zones/us-central1-a/instances/test-instance\n```\n\n***\n\n**æŸ¥çœ‹ agent ç‰ˆæœ¬ && æœå‹™**\n=====\n\n***\n\n```sql\ngcloud --version\n\ngcloud components update\n```\n\n***\n***\n***\n\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"HUGO - å ±éŒ¯ ERROR-panic: mkdir /tmp/hugo_cache: no such file or directory","url":"/blog.github.io/2023/05/05/HUGO-ERROR-panic-mkdir-hugo_cache_no_such_file_or_directory/","content":"\n***\n***\n\n**Hugo ERROR è§£æ±ºè¾¦æ³•**\n=====\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/vjYr9BlZyI6zcuS.png)\n\n***\n***\n\n**å°‡ `hugo` é‡æ–°å®‰è£å³å¯**\n=====\n\n***\n\n```sql\n/var/lib/snapd/snap/bin/hugo -v\n\nsnap remove hugo\n\nsnap install hugo\n\nsnap list\n\nhugo version\n```\n\n\n***\n***\n\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"HUGO - install by snapd on centos7","url":"/blog.github.io/2023/05/01/HUGO-install-by-sbapd-on-centos7/","content":"\n***\n***\n\n**Hugo ä¸‹è¼‰å®‰è£ç´€éŒ„**\n=====\n\n***\n***\n\n**å®‰è£`ä¾è³´åº«`åŠ `snapd`**\n\n```sql\nyum install epel-release\n\nyum install snapd\n```\n\n***\n***\n\n**é–‹æ©Ÿå•Ÿå‹•æœå‹™**\n\n```sql\nsystemctl enable --now snapd.socket\n```\n\n***\n***\n\n**å»ºç«‹ `snap` è»Ÿé€£çµ `link`**\n\n```sql\nln -s /var/lib/snapd/snap /snap\n```\n\n***\n***\n\n**ä½¿ç”¨ `snap` å®‰è£ `hugo`**\n\n```sql\nsnap install hugo\n```\n\n***\n***\n\n\n\n**ERROR: error: too early for operation, device not yet seeded or device model not acknowledged**\n\n***\n\n**é‡æ–°åœ¨ä¸‹ä¸€æ¬¡å®‰è£èªæ³•å³å¯**\n\n```sql\nsnap install hugo\n```\n\n\n\n***\n***\n\n**å®‰è£å®Œæˆå¾Œ,å»ºç«‹ `hugo` è»Ÿé€£çµ `link`**\n\n```sql\nln -s /var/lib/snapd/snap/bin/hugo /usr/bin/hugo\n```\n\n***\n***\n\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"HUGO - æ·»åŠ  Valine è©•è«–ç³»çµ± (Fixlt)","url":"/blog.github.io/2023/05/01/HUGO-æ·»åŠ Valineè©•è«–ç³»çµ±_(FixIt)/","content":"\n***\n***\n\n**Hugo æ·»åŠ è©•è«–ç³»çµ±ç´€éŒ„**\n=====\n\n***\n***\n\n**è¨»å†Š LeanCloud å¸³è™Ÿ**\n------\n\n***\n\n`ps. é¸æ“‡åœ‹éš›æ¿è¨»å†Š`\n\n***\n\n[LeanCloud å®˜ç¶²](https://console.leancloud.app/apps)\n\n***\n\n**æ–°å¢å°ˆæ¡ˆæ‡‰ç”¨**\n-----\n\n***\n\n**é»é¸ `å‰µé€ æ‡‰ç”¨` , å¡«å…¥ `å°ˆæ¡ˆåç¨±` , é¸æ“‡ `é–‹ç™¼ç‰ˆ`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/GLQ6td7c3P5SJRZ.png)\n\n***\n***\n\n**é»é¸è¨­å®š `é½’è¼ª` é€²å…¥å¾Œå°**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/FZCyTt7l1GMkqPs.png)\n\n***\n***\n\n**å·¦å´æ‰¾åˆ° `è¨­ç½®` > `æ‡‰ç”¨æ†‘è­‰`**\n\n\n\n**éœ€è¨˜ä½é€™ 3 çµ„ KEY**\n\n***\n\n`AppID`\n`AppKey`\n`RESET API`\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/8Krcvhy2emikuUx.png)\n\n***\n***\n\n**å·¦å´æ‰¾åˆ° `æ•¸æ“šå­˜å„²` > `çµæ§‹åŒ–æ•¸æ“š`** \n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/YPruGF8iKWBf1Sj.png)\n\n***\n***\n\n**æ–°å¢ `2` å€‹ `Class` , åˆ†åˆ¥å‘½åç‚º `Counter` åŠ `Comment` , ACL æ¬Šé™è¨­ç½®ç‚º `é™åˆ¶å¯«å…¥`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/WY1VrTUxLoOPF8b.png)\n![](https://s2.loli.net/2024/04/28/1uSIUGHDkK2pTW3.png)\n![](https://s2.loli.net/2024/04/28/3YuAyIPbWns5Lth.png)\n\n***\n***\n\n**è¨­ç½®å¯èª¿ç”¨æ­¤ SDK è³‡æºçš„åŸŸå (å°±æ˜¯è‡ªå·±çš„åŸŸåå•¦)**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/pnl6JgF3Hz5NZC1.png)\n\n***\n***\n\n**ä¿®æ”¹è¨­å®šæª” `config.toml`**\n=====\n\n***\n\n**å°‡è©•è«–è¨­ç½®æ‰“é–‹ç‚º `true`**\n\n***\n\n```sql\n# FixIt 0.2.15 | CHANGED Comment config\n\n[params.page.comment]\n\nenable: true\n```\n\n***\n\n**ä¿®æ”¹ Valine åƒæ•¸**\n\n***\n\n\n\n**appId: ä¹‹å‰ç´€éŒ„çš„ AppID**\n\n***\n\n**appkey: ä¹‹å‰ç´€éŒ„çš„ App Key**\n\n***\n\n**serverURLs: ä¹‹å‰ç´€éŒ„çš„ RESET API**\n\n\n\n***\n***\n\n```sql\n[params.page.comment.valine]\n  enable: true\n  appId: \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n  appKey: \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n  placeholder: \"èªªé»å•¥å§......\"\n  avatar: \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n  meta: \"\"\n  requiredFields: \"\"\n  pageSize: 10\n  lang: \"\"\n  visitor: true\n  recordIP: true\n  highlight: true\n  enableQQ: false\n  serverURLs: \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n  # FixIt 0.2.6 | NEW emoji data file name, default is \"google.yml\"\n  # [\"apple.yml\", \"google.yml\", \"facebook.yml\", \"twitter.yml\"]\n  # located in \"themes/FixIt/assets/lib/valine/emoji/\" directory\n  # you can store your own data files in the same path under your project:\n  # \"assets/lib/valine/emoji/\"\n  emoji: \"\"\n  commentCount: true # FixIt 0.2.13 | NEW\n```\n\n***\n***\n\n**ä¸»é¡Œæ–‡ä»¶commentsä¸­æœ‰ç›¸é—œä½ˆå±€å¯ä»¥ä¸éœ€è¦ä¿®æ”¹**\n=====\n\n***\n\n**éƒ¨ç½²åˆ°è‡ªå·±çš„è¨—ç®¡å¹³å°ï¼Œå°±å¯ä»¥çœ‹åˆ°æ­£å¸¸çš„æ–‡ç« è¨ˆæ•¸å’Œè©•è«–æ¡†äº†**\n=====\n\n\n\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"InfluxDB - http CRUD èªæ³•","url":"/blog.github.io/2023/03/23/InfluxDB-http_CRUDèªæ³•/","content":"\n<!--more-->\nInfluxDB å¸¸ç”¨èªæ³•ç´€éŒ„\n\n***\n***\n\n**`HTTP` API**\n=====\n\n***\n***\n\n### ä½¿ç”¨ GET è«‹æ±‚ `æŸ¥è©¢ CPU` (å¸¶ user : password)\n\n```sql\ncurl -G 'http://172.16.0.222:8086/query?pretty=true' --data-urlencode \"db=telegraf\" -u telegraf:telegraf --data-urlencode \"q=SELECT * FROM \"cpu\" limit 1\"\n```\n\n***\n***\n\n### ä½¿ç”¨ POST è«‹æ±‚ `å‰µå»ºè³‡æ–™åº«`\n\n```sql\ncurl -i -XPOST 'http://172.16.0.222:8086/query?pretty=true' -u laurance:telegraf --data-urlencode \"q=CREATE DATABASE testdb\"\n\n\n    HTTP/1.1 200 OK\n    Content-Type: application/json\n    Request-Id: aeee08da-cc97-11ed-8be8-92b84f18e45a\n    X-Influxdb-Build: OSS\n    X-Influxdb-Version: 1.8.10\n    X-Request-Id: aeee08da-cc97-11ed-8be8-92b84f18e45a\n    Date: Mon, 27 Mar 2023 12:05:36 GMT\n    Transfer-Encoding: chunked\n    \n    {\n        \"results\": [\n            {\n                \"statement_id\": 0\n            }\n        ]\n    }\n```\n\n***\n***\n\n### ä½¿ç”¨ POST è«‹æ±‚ `å°‡æ•¸æ“šå¯«å…¥ DB`\n\n```sql\ncurl -i -XPOST 'http://172.16.0.222:8086/write?db=testdb' -u laurance:kiwi888 --data-binary 'cpu_load_short,host=server01,region=us-west value=0.64 1434055562000000000'\n\n\n    HTTP/1.1 204 No Content\n    Content-Type: application/json\n    Request-Id: 5dedeb7d-cc98-11ed-8cda-92b84f18e45a\n    X-Influxdb-Build: OSS\n    X-Influxdb-Version: 1.8.10\n    X-Request-Id: 5dedeb7d-cc98-11ed-8cda-92b84f18e45a\n    Date: Mon, 27 Mar 2023 12:10:30 GMT\n```\n\n***\n***\n\n### ä½¿ç”¨ POST è«‹æ±‚ `å°‡æ•¸æ“šä¸€èµ·å¯«å…¥ DB`\n\n```sql\ncurl -i -XPOST 'http://172.16.0.222:8086/write?db=testdb' -u laurance:kiwi888 --data-binary 'cpu_load_short,host=server01,region=us-west value=0.64 1434055562000000000\n> cpu_load_short,host=server02,region=us-west value=0.55 1422568543702900257\n> cpu_load_short,direction=in,host=server01,region=us-west value=2.0 1422568543702900257'\n\n\n    HTTP/1.1 204 No Content\n    Content-Type: application/json\n    Request-Id: ccf012f8-cc98-11ed-8d78-92b84f18e45a\n    X-Influxdb-Build: OSS\n    X-Influxdb-Version: 1.8.10\n    X-Request-Id: ccf012f8-cc98-11ed-8d78-92b84f18e45a\n    Date: Mon, 27 Mar 2023 12:13:36 GMT\n```    \n\n***\n***\n\n### ä½¿ç”¨ POST è«‹æ±‚ `å°‡æ–‡ä»¶ TXT å¯«å…¥ DB`\n\n```sql\ncurl -i -XPOST 'http://172.16.0.222:8086/write?db=testdb' -u laurance:kiwi888 --data-binary @influxdb.txt\n\n\n    HTTP/1.1 204 No Content\n    Content-Type: application/json\n    Request-Id: 29a9ebda-cc99-11ed-8dfa-92b84f18e45a\n    X-Influxdb-Build: OSS\n    X-Influxdb-Version: 1.8.10\n    X-Request-Id: 29a9ebda-cc99-11ed-8dfa-92b84f18e45a\n    Date: Mon, 27 Mar 2023 12:16:11 GMT\n````    \n\n***\n***\n\n\n\n|   è¿”å›ä»£ç¢¼    |   èªªæ˜  |\n|   -----   |   -----   |\n|   2xx |   å¦‚æœä½ å¯«äº†æ•¸æ“šå¾Œæ”¶åˆ°HTTP 204 No Contentï¼Œèªªæ˜å¯«å…¥æˆåŠŸäº†ï¼  |\n|   4xx |   è¡¨ç¤ºInfluxDBä¸çŸ¥é“ä½ ç™¼çš„æ˜¯ä»€éº¼é¬¼ã€‚   |\n|   5xx |   ç³»çµ±éè¼‰æˆ–æ˜¯æ‡‰ç”¨å—æã€‚ |\n\n\n\n***\n\n","tags":["InfluxDB"],"categories":["InfluxDB"]},{"title":"InfluxDB - å¦‚ä½•å»ºç«‹ä½¿ç”¨è€…å¯†ç¢¼åŠç›¸é—œæ¬Šé™","url":"/blog.github.io/2023/03/23/InfluxDB-å»ºç«‹ä½¿ç”¨è€…å¯†ç¢¼/","content":"\n\n**InfluxDB é è¨­æ˜¯æ²’æœ‰å¯†ç¢¼çš„,ä½¿ç”¨ `influx` é€²å…¥ä»‹é¢æ“ä½œå³å¯**\n------\n\n```sql\n[root@laurance ~]# influx\n    \nConnected to http://localhost:8086 version 1.8.10\n    \nInfluxDB shell version: 1.8.10\n```\n\n***\n***\n\n**å»ºç«‹ä½¿ç”¨è€…åŠå¯†ç¢¼**\n------\n\n```sql\nCREATE USER telegraf WITH PASSWORD 'telegraf'\n\nCREATE USER <username> WITH PASSWORD '<password>'\n```\n\n***\n***\n\n**çµ¦äºˆè®€çš„æ¬Šé™**\n-----\n\n```sql\nGRANT READ ON telegraf TO laurance\n\nGRANT [READ,WRITE,ALL] ON <database_name> TO <username>\n```\n\n***\n***\n\n**æŸ¥çœ‹ä½¿ç”¨è€…**\n-----\n\n```sql\nSHOW USERS\n```\n\n***\n***\n\n**æŸ¥çœ‹æ¬Šé™**\n-----\n\n```sql\nSHOW GRANTS FOR laurance\n```\n\n***\n***\n\n**æ‹”é™¤ `root` æ¬Šé™**\n-----\n\n```sql\nREVOKE ALL PRIVILEGES FROM telegraf\n```\n\n***\n***\n\n**çµ¦äºˆ `root` æ¬Šé™**\n-----\n\n```sql\nGRANT ALL PRIVILEGES TO laurance\n```\n\n***\n***\n\n**é‡æ–°è¨­ç½®å¯†ç¢¼**\n-----\n\n```sql\nSET PASSWORD FOR laurance: 'influxdb4ever'\n```\n\n***\n***\n\n**åˆªé™¤ä½¿ç”¨è€…**\n-----\n\n```sql\nDROP USER laurance\n```\n\n***\n***\n\n#### ç™»å…¥\n\n##### å°‡å¯†ç¢¼é©—è­‰æ‰“é–‹ `ps ä¸€å®šè¦æœ‰ ''ROOT'  æ‰èƒ½ç™»å…¥`\n\n##### ç·¨è¼¯è¨­å®šæª” `vim /etc/influxdb/influxdb.conf`\n\n##### å°‡ `[http] æ¨¡å¿«ä¸‹çš„ [auth-enabled] æ”¹ç‚º true`\n\n ![](https://s2.loli.net/2024/04/28/MyvjrSI4dPwQDT9.png)\n\n***\n***\n \n##### æ”¹å®Œè¨­å®šé‡å•Ÿ DB\n\n```sql\nsystemctl restart influxdb\n```\n\n***\n***\n\n##### å¸¶å¯†ç¢¼ç™»å…¥\n\n```sql\ninflux -username laurance -password influxdb4ever\n```\n\n***\n***\n\n##### é€²å…¥ä»‹é¢ ä½¿ç”¨å¯†ç¢¼ç™»å…¥\n\n```sql\n[root@laurance ~]# influx\n    \nConnected to http://localhost:8086 version 1.8.10\n    \nInfluxDB shell version: 1.8.10\n    \n> auth\n    \nusername: laurance\n    \npassword: \n``` \n\n***\n***\n\n***\n\n","tags":["InfluxDB"],"categories":["InfluxDB"]},{"title":"GCP - ChatGPT ä¸²æ¥ Firebase åŠ Linebot","url":"/blog.github.io/2023/03/22/GCP-ChatGPTä¸²æ¥FirebaseåŠLinebot/","content":"\n\n\n# å»ºç«‹èˆ‡è¨­å®šç·šä¸Šå³æ™‚æ€§è³‡æ–™åº« `Firebase Realtime database`\n\n***\n\nhttps://console.firebase.google.com/u/0/\n\n\n\n***\n***\n***\n\n## é»é¸ `Go to console`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/mAIdtQRv9MqxTJW.png)\n\n***\n***\n***\n\n## é»é¸ `å»ºç«‹å°ˆæ¡ˆ`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/cUwLvSqyHYPgiZu.png)\n\n***\n***\n***\n\n## è¼¸å…¥ `å°ˆæ¡ˆåç¨±`åŠ`æ‰“å‹¾å”è­°`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/SH1yhbFNgYoCTzW.png)\n\n***\n***\n***\n\n## å–æ¶ˆå‹¾é¸èˆ‡ `Google Analytics` å»ºç«‹é—œè¯ï¼Œå¯ä»¥ç›´æ¥å»ºç«‹å°ˆæ¡ˆ \n\n#### å»ºç«‹é—œè¯å¯ä»¥é€é Google Analytics  é€²è¡Œæ•¸æ“šåˆ†æçµ±è¨ˆï¼Œä½†å¦‚æœåªæ˜¯è¦å–®ç´”ä½¿ç”¨è³‡æ–™åº«ï¼Œå¯ä»¥ä¸å¿…å»ºç«‹é—œè¯ \n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/fAzl2iowkyn4b91.png)\n\n***\n***\n***\n\n\n\n# å»ºç«‹ Realtime Database è³‡æ–™åº«\n\n\n\n***\n***\n***\n\n## å°ˆæ¡ˆå»ºç«‹å®Œæˆå¾Œå°±æœƒé€²å…¥å°ˆæ¡ˆç•«é¢ï¼Œå¾å·¦å´é¸æ“‡ `å»ºæ§‹` > `Realtime Database`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/nreFhzljZ94EpK7.png)\n\n***\n***\n***\n\n## é¸æ“‡å¾Œï¼Œé»æ“Š`å»ºç«‹è³‡æ–™åº«`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/b9sQavWVcTmFOP2.png)\n\n***\n***\n***\n\n## è³‡æ–™åº«çš„ä½ç½®é¸æ“‡`ç¾åœ‹` ç¹¼çºŒä¸‹ä¸€æ­¥\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/5RzIUTWQJjcqS6r.png)\n\n***\n***\n***\n\n## ä½¿ç”¨`é–å®šæ¨¡å¼`å•Ÿç”¨ ( é–å®šæ¨¡å¼è¡¨ç¤ºé€™å€‹è³‡æ–™åº«ç¦æ­¢å­˜å–ï¼Œå•Ÿç”¨å¾Œæœƒå†ä¿®æ”¹è¨­å®šä½¿è³‡æ–™åº«å¯ä»¥å­˜å–è³‡æ–™ )\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/xEMKOygHAkf78ZB.png)\n\n***\n***\n***\n\n\n\n#  å»ºç«‹å¥½çš„ç•«é¢\n\n\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/cu3fxFOwETANb78.png)\n\n***\n***\n***\n\n\n\n# ä¿®æ”¹ Realtime Database å­˜å–æ¬Šé™\n\n\n\n***\n***\n***\n\n## é€²å…¥`è¦å‰‡`é ç±¤ï¼Œå°‡è¦å‰‡å¾ `false` ä¿®æ”¹ç‚º `ture` é»æ“Š`ç™¼å¸ƒ`ï¼Œå°±èƒ½å°‡è³‡æ–™åº«æ”¹æˆ`æ‰€æœ‰äººéƒ½å¯ä»¥å­˜å–`çš„ç‹€æ…‹\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/ySOkZ4m8EDJTzHi.png)\n![](https://s2.loli.net/2024/04/25/bWRDwjNp7463Ym1.png)\n\n***\n***\n***\n\n## å»ºç«‹ `GCP-Cloud Functions` \n\n```sql\n\n# requirements.txt\n\n# Function dependencies, for example:\n# package>=version\nline-bot-sdk\nrequests\nopenai\ngit+https://github.com/ozgur/python-firebase\n\n```\n\n```sql\n\n# main.py\n\nfrom linebot import LineBotApi, WebhookHandler\nfrom linebot.models import TextSendMessage, StickerSendMessage, ImageSendMessage, LocationSendMessage\nimport requests, json\n\nimport openai\nopenai.api_key: 'XXXXXXXXXXXXXXXXXXXX'\n\nfrom firebase import firebase\n\ntoken: 'XXXXXXXXX'\nsecret: 'XXXXXXXXX'\n\ndef linebot(request):\n    body: request.get_data(as_text=True)\n    json_data: json.loads(body)\n    try:\n        line_bot_api: LineBotApi(token)\n        handler: WebhookHandler(secret)\n        signature: request.headers['X-Line-Signature']\n        handler.handle(body, signature)\n        tk: json_data['events'][0]['replyToken']\n        timestamp: json_data['events'][0]['timestamp']\n        msg_type: json_data['events'][0]['message']['type']\n        if msg_type:= 'text':\n            msg: json_data['events'][0]['message']['text']\n            url: 'XXXXXXXXXXXXXX.firebaseio.com'\n            fdb: firebase.FirebaseApplication(url, None)\n                        chatgpt: fdb.get('/','chatgpt')\n            \n                        if chatgpt:= None:\n                            messages: []\n                        else:\n                            messages: chatgpt\n            \n                        if msg:= '!reset':\n                            reply_msg: TextSendMessage(text='å°è©±æ­·å²ç´€éŒ„å·²ç¶“æ¸…ç©ºï¼')\n                            line_bot_api.reply_message(tk,reply_msg)\n                            fdb.delete('/','chatgpt')\n                        else:\n                            messages.append({\"role\":\"user\",\"content\":msg})\n                            response: openai.ChatCompletion.create(\n                                model=\"gpt-3.5-turbo\",\n                                max_tokens=640,\n                                temperature=0.5,\n                                messages=messages\n                            )\n                            ai_msg: response.choices[0].message.content.replace('\\n','')\n                            messages.append({\"role\":\"assistant\",\"content\":ai_msg})\n                            reply_msg: TextSendMessage(text=ai_msg)\n                            line_bot_api.reply_message(tk,reply_msg)\n                            fdb.put_async('/','chatgpt',messages)\n                    else:\n                        reply_msg: TextSendMessage(text='ä½ å‚³çš„ä¸æ˜¯æ–‡å­—è¨Šæ¯å•¦')\n                        line_bot_api.reply_message(tk,reply_msg)\n                except Exception as e:\n                    detail: e.args[0]\n                    print(detail)\n                return 'OK'\n\n```\n\n***\n***\n***\n\n## å»ºç«‹å¥½ `Function` å¾Œ , å°‡ `è§¸ç™¼ç¶²å€` è²¼å…¥ `Line Developers Webhook URL` ä¸¦é»é¸ `Verify é©—è­‰`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/uEzKxFDsdb7NtHn.png)\n\n***\n***\n***\n\n## é€²å…¥ `Firebase Realtime database` ä¹Ÿèƒ½çœ‹åˆ°æ­·å²ç´€éŒ„çš„è³‡æ–™\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/uevT24oOKh8HcqG.png)\n\n\n\n\n***\n\n","tags":["Firebase"],"categories":["GCP"]},{"title":"Postgresql - install postgresql-14.7 on centos7","url":"/blog.github.io/2023/03/21/Postgresql-å®‰è£postgresql-14_7_on_centos7/","content":"\n<!--more-->\nè‡ªè¡Œç·¨è­¯ä½ç‰ˆæœ¬ PSQL-14.7\n\n***\n***\n\n**å®‰è£ä¾è³´å¥—ä»¶**\n\n```sql\nyum install gcc gcc-c++ readline-devel zlib-devel openssl openssl-devel\n\n```\n\n***\n***\n\n**ä¸‹è¼‰å®‰è£ cmakeç·¨è­¯å™¨**\n\n```sql\nwget -t 0 https://github.com/Kitware/CMake/releases/download/v3.23.1/cmake-3.23.1.tar.gz\n\ntar zxf cmake-3.23.1.tar.gz\n\ncd cmake-3.23.1\n\n./bootstrap && gmake && gmake install\n\ncmake --version\n\n```  \n\n***\n***\n\n**ä¸‹è¼‰ `postgresql-14.7 taråŒ…`**\n\n```sql\nwget https://ftp.postgresql.org/pub/source/v14.7/postgresql-14.7.tar.gz --no-check-certificate\n\ntar zxf postgresql-14.7.tar.gz\n\ncd postgresql-14.7\n\n./configure --prefix=/var/lib/postgresql\n\nmake && make install\n\n``` \n\n***\n***\n\n**æ–°å¢ `postgres` ä½¿ç”¨è€…ä¾†åŸ·è¡Œ DB**\n\n```sql\nuseradd postgres\n\n```\n\n***\n***\n\n**å»ºç«‹å­˜æ”¾è³‡æ–™åŠ LOG çš„ä½ç½®ä¸¦çµ¦äºˆæ¬Šé™ `for postgres`**\n\n```sql\ncd /var/lib/postgresql/\n\nmkdir data\n\nmkdir log\n\nchown -R postgres.postgres /var/lib/postgresql\n\n``` \n\n***\n***\n   \n**æ·»åŠ  `psqlç’°å¢ƒè®Šæ•¸`**\n\n```sql\nsu - postgres -c \"vim ~/.bash_profile\"\n\n```\n```sql\nexport PGHOME=/var/lib/postgresql\n\nexport PGDATA=/var/lib/postgresql/data\n\nexport PATH=$PATH:$JAVA_HOME/bin:$PGHOME/bin\n\n```\n\n***\n***\n\n**åˆå§‹åŒ–è³‡æ–™åº«åŠæŒ‡å®šå­˜æ”¾è³‡æ–™ä½ç½®**\n\n```sql\nsu - postgres -c \"/var/lib/postgresql/bin/initdb -D /var/lib/postgresql/data/\"\n\n```\n\n***\n***\n\n**æ›´æ”¹è¨­å®šæª” && è¨­å®šç›£è½ä½ç½®**\n\n```sql\nvim /var/lib/postgresql/data/postgresql.conf\n\n```\n\n```sql\nlisten_addresses: '*' \n\t\nport: 5432 \n\n```\n\n***\n***\n\n**è¨­å®š `ä½¿ç”¨è€…` åŠ `IPæ®µ`**\n\n```sql\nvim /var/lib/postgresql/data/pg_hba.conf\n\n```\n```sql\nhost    all             rd              10.140.0.0/16           password\n\n```\n\n***\n***\n\n**åˆ‡æ›ä½¿ç”¨è€… && å•Ÿå‹• PostgreSQL**\n\n```sql\nsu - postgres -c \"/var/lib/postgresql/bin/pg_ctl start -l /var/lib/postgresql/log/pg_server.log\"\n\n```\n\n***\n***\n\n**åˆ‡æ›ä½¿ç”¨è€… && é‡å•Ÿ PostgreSQL**\n\n```sql\nsu - postgres -c \"/var/lib/postgresql/bin/pg_ctl restart\"\n\n```\n\n***\n***\n\n**åˆ‡æ›ä½¿ç”¨è€… && å»ºç«‹ `è¶…ç´šä½¿ç”¨è€…å¸³è™Ÿ`**\n\n```sql\nsu - postgres -c \"createuser -s -i -d -l -r king\"\n\n```\n\n***\n***\n\n\n\n**å¸¸ç”¨åƒæ•¸**\n\n| åƒæ•¸ | åƒæ•¸ä»£è¡¨æ„æ€ |\n| --- | --- |\n| -s , --superuser | æ–°ä½¿ç”¨è€…å°‡æ˜¯è¶…ç´šä½¿ç”¨è€… |\n| -i , --inherit | æ–°è§’è‰²å°‡è‡ªå‹•ç¹¼æ‰¿å…¶æ‰€å±¬è§’è‰²çš„æ¬Šé™ã€‚é€™æ˜¯é è¨­å€¼ |\n| -d , --createdb | å°‡å…è¨±æ–°ä½¿ç”¨è€…å»ºç«‹è³‡æ–™åº« |\n| -l , --login | å°‡å…è¨±æ–°ä½¿ç”¨è€…ç™»å…¥ï¼ˆå³ï¼Œä½¿ç”¨è€…åç¨±å¯ä»¥ç”¨ä½œåˆå§‹é€£ç·šä½¿ç”¨è€…ï¼‰é€™æ˜¯é è¨­å€¼ | \n| -r , --createrole | å°‡å…è¨±æ–°ä½¿ç”¨è€…å»ºç«‹æ–°è§’è‰²ï¼ˆå³ï¼Œæ­¤ä½¿ç”¨è€…å°‡å…·æœ‰ CREATEROLE æ¬Šé™ï¼‰ |\n\n\n\n    \n**åˆ‡æ›ä½¿ç”¨è€… && å»ºç«‹ `æ™®é€šä½¿ç”¨è€…`**\n\n```sql\nsu - postgres -c \"createuser -d -l -P rd\"\n\n```\n\n`ps : -p , --pwprompt å¦‚æœæœ‰æ­¤é¸é …ï¼Œcreateuser å°‡ç™¼å‡ºæ–°ä½¿ç”¨è€…å¯†ç¢¼çš„æç¤ºã€‚å¦‚æœæ‚¨ä¸æ‰“ç®—ä½¿ç”¨å¯†ç¢¼èº«ä»½é©—è­‰ï¼Œå‰‡æ¯Œé ˆåŸ·è¡Œæ­¤æ“ä½œã€‚`\n\n***\n***\n    \n**åˆ‡æ›ä½¿ç”¨è€… && é€²å…¥ `psql cmd`**\n\n```sql\nsu - postgres -c \"psql\"\n\n```\n\n***\n***\n\n**è¨­å®šä½¿ç”¨è€… `rd` å° `public` æ–° `Sequences` çš„é è¨­æ¬Šé™**\n\n```sql\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO rd;\n```\n\n***\n***\n\n**è¨­å®šä½¿ç”¨è€… `rd` å° `public` æ–° `è¡¨` çš„é è¨­æ¬Šé™**\n\n```sql\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON TABLES TO rd;\n```\n\n`ps : è¦å…ˆå»ºç«‹ database æ‰èƒ½ç”¨ä½¿ç”¨è€…é€£ç·š`\n\n***\n***\n\n**å®˜æ–¹ yum å®‰è£: https://jovepater.com/article/centos-7-postgresql-14-installation/**\n\n**åƒè€ƒ: https://pjchender.dev/database/psql-roles-privilege/**\n\n**åƒè€ƒ: https://blog.csdn.net/zou8944/article/details/121528128**\n\n\n\n\n***\n\n","tags":["Postgresql"],"categories":["Postgresql"]},{"title":"Postgresql - å¸¸ç”¨æŒ‡ä»¤","url":"/blog.github.io/2023/03/21/Postgresql-å¸¸ç”¨æŒ‡ä»¤/","content":"\n<!--more-->\nPSQL æŒ‡ä»¤ç´€éŒ„\n\n***\n***\n\n### é€£æ¥åˆ° POSTGRESQL è³‡æ–™åº«\n\n```sql\n\nsu - postgres -c 'psql'\n```\n\n### æœ¬åœ°ä½¿ç”¨è€…é€£æ¥ POSTGRESQL è³‡æ–™åº«\n`æ·»åŠ ç’°å¢ƒè®Šæ•¸ æ‰èƒ½ç”¨ psql é€£æ¥`\n\n```sql\n\npsql -d postgres -U  user \n```\n\n### é€£æ¥åˆ°å¦ä¸€å°SERVERä¸Šçš„è³‡æ–™åº«\n\n```sql\n\npsql -h 172.16.0.223 -U test1 -d testdb\n```\n\n---\n\n### å»ºç«‹ä½¿ç”¨è€…\n`æ–°å»ºç«‹çš„ä½¿ç”¨è€…é è¨­åªæœƒç¹¼æ‰¿ public è§’è‰²ä¸­æ‰€é–‹æ”¾çš„æ¬Šé™ï¼Œå…¶é¤˜æ¬Šé™éƒ½æ²’æœ‰é–‹æ”¾`\n\n```sql\n\nCREATE USER test WITH PASSWORD 'test';\n```\n\n### ç¦æ­¢ä½¿ç”¨è€…ç™»å…¥\n\n```sql\n\nALTER ROLE username WITH NOLOGIN;\n```\n\n### è¨­å®šä½¿ç”¨è€…`test`æ“æœ‰`public`é è¨­æ¬Šé™ ä¸¦æœ‰`è®€å–ã€æ’å…¥ã€ä¿®æ”¹ã€åˆªé™¤`æ–°è¡¨çš„ é è¨­æ¬Šé™\n\n```sql\n\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO test;\n```\n\n### è¨­å®šä½¿ç”¨è€…`test`æ“æœ‰`public`é è¨­æ¬Šé™ ä¸¦æœ‰`ä½¿ç”¨`æ–°sequencesçš„ é è¨­æ¬Šé™\n\n```sql\n\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT USAGE ON SEQUENCES TO test;\n```\n\n### æŠŠæ‰€æœ‰è§’è‰²çš„ USAGE æ¬Šé™æ”¶å›\n\n```sql\n\nREVOKE USAGE ON SCHEMA public FROM PUBLIC;\n```\n\n---\n\n### å»ºç«‹è³‡æ–™åº« `testdb` \n\n```sql\n\nCREATE DATABASE testdb;\n```\n\n### ç§»é™¤è³‡æ–™åº«æ¯å€‹ä½¿ç”¨è€…éƒ½èƒ½ç™»å…¥çš„æ¬Šé™\n\n```sql\n\nREVOKE CONNECT ON DATABASE testdb FROM public;\n```\n\n### æŒ‡å®šå¯ä»¥ç™»å…¥çš„ä½¿ç”¨è€… `pguser1, pguser2, pgreader`\n\n```sql\n\nGRANT CONNECT ON DATABASE testdb TO pguser1, pguser2, pgreader;\n```\n\n---\n\n### é¡¯ç¤ºæœ€å¤§é€£æ¥æ•¸\n\n```sql\n\nshow max_connections;\n```\n\n### æŸ¥çœ‹ `alter default privileges` é è¨­æ¬Šé™\n\n```sql\n\n\\ddp\n```\n\n### åˆ—å‡ºæœ‰æ•ˆçš„ schema\n\n```sql\n\n\\dn\n```\n\n### æŸ¥çœ‹è¡¨çµæ§‹\n\n```sql\n\n\\d table_name\n```\n\n### åˆ—å‡ºç•¶å‰è³‡æ–™åº«æ‰€æœ‰è¡¨\n\n```sql\n\n\\dt\n```\n\n### é›¢é–‹\n\n```sql\n\n\\q\n```\n\nåƒè€ƒ:\n\nhttp://www.enmalvi.com/2022/04/03/postgresql-sql/\n\n***\n\n","tags":["Postgresql"],"categories":["Postgresql"]},{"title":"Windows - win10 å°ˆæ¥­ç‰ˆé‡‘é‘°","url":"/blog.github.io/2023/03/20/Windows-win10å°ˆæ¥­ç‰ˆé‡‘é‘°/","content":"\n***\n***\n\n**Windows 10 å°ˆæ¥­ç‰ˆé‡‘é‘°å•Ÿç”¨æ–¹æ³•**  \n=====\n\n**2023-03-20 å¯¦æ¸¬æœ‰æ•ˆ**\n\n***\n***\n\n**{Step 1} å«å‡º `PSW` (ä½¿ç”¨ç®¡ç†è€…èº«åˆ†)**\n\n```sql\nWIN + X + A\n```\n\n***\n***\n    \n**{Step 2} è¼¸å…¥å·²ä¸‹æŒ‡ä»¤**\n\n```sql\nslmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX\n     \nslmgr /skms kms.03k.org\n     \nslmgr /ato\n```\n\n***\n***\n     \n**å•Ÿç”¨æˆåŠŸ**\n=====\n\n***\n***\n\n\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Xshell 7 - v7.0.0001 install","url":"/blog.github.io/2023/03/20/Xshell_7-V7_0_0001_install/","content":"\n***\n***\n\n**Xshell 7 - v7.0.0001 install (Cracked version)**\n=====\n\n***\n***\n\n[å®‰è£è¼‰é»](https://github.com/dingbangli/xshell7/raw/master/XshellPlus.rar)\n\n***\n***\n\n**å°‡æ¡Œé¢å³ä¸‹è§’ç³»çµ±æ™‚é–“ä¿®æ”¹ç‚º `2018 å¹´` å¦å‰‡æœƒè·³ERROR**\n-----\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/ABspgMIZmEerb5J.png)\n\n ![](https://s2.loli.net/2024/05/03/y3DZ6Hl1MISLcVK.png)\n \n ![](https://s2.loli.net/2024/05/03/RXoYxvutGcnIBmh.png)\n\n***\n***\n \n**é»æ“Šå®‰è£æª”å®‰è£ç‰ˆæœ¬ `v7.0.0001`**\n-----\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/zVjJfLt62cDbBuQ.png)\n\n***\n***\n \n**å®‰è£å®Œæˆå¾Œä¸¦ä¸èƒ½ç›´æ¥é–‹å•Ÿ,é ˆè¦†è“‹ä¸€éš»æª”æ¡ˆæ‰èƒ½é–‹å•Ÿ**\n-----\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/eFag1D27wlIQ4W9.png)\n\n***\n***\n \n**å°‡åŒ…è£¡çš„ `nslicense.dll` è¦†è“‹è‡³é è¨­è·¯å¾‘ `C:\\Program Files (x86)\\NetSarang\\Xshell 7`**\n-----\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/C49gkvUD5TaKIVL.png)\n\n***\n***\n \n**é—œé–‰è‡ªå‹•æª¢æŸ¥æ›´æ–°**\n-----\n\n`å·¥å…· > é¸é … > æ›´æ–°`\n\n`å°‡å¤©æ•¸æ”¹ç‚ºæœ€å¤§å€¼ä¸¦å–æ¶ˆå‹¾å‹¾`\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/XL6DuqzV7b2NUyt.png)\n\n ![](https://s2.loli.net/2024/05/03/3fvr9nFPIdAUB15.png)\n\n***\n***\n\n**æœ€å¾Œå°‡æ™‚é–“æ¢å›ä¾†å³å¯**\n-----\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/1WvalcM56IYf2Ze.png)\n\n***\n***\n \n**æŸ¥çœ‹é‡‘é‘°å·²éçš„ç‹€æ…‹**\n-----\n\n***\n***\n\n ![](https://s2.loli.net/2024/05/03/BFKcQlkeaV7zhPD.png)\n\n***\n***\n\n\n***\n\n","tags":["Xshell"],"categories":["Xshell"]},{"title":"Xshell 7 - åŒ¯å‡ºåŠåŒ¯å…¥","url":"/blog.github.io/2023/03/20/Xshell_7-åŒ¯å‡ºåŠåŒ¯å…¥/","content":"\n***\n***\n\n**Xshell 7-åŒ¯å‡ºåŠåŒ¯å…¥**\n=====\n\n***\n***\n\n**å°‡ `å·¥ä½œéšæ®µ` åŒ¯å‡ºæˆ `xxx.xts`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/s3Uemy5rCAowTQO.png)\n![](https://s2.loli.net/2024/05/03/dQpYER7wHuFU8BX.png)\n![](https://s2.loli.net/2024/05/03/aeYR6xM15r4CcIN.png)\n\n***\n***\n\n**é–‹å•Ÿ `å…¨æ–°çš„ Xshell` å°‡ .xts åŒ¯å…¥**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/UaHfL3dJmc8jbtQ.png)\n![](https://s2.loli.net/2024/05/03/SvwgNfpcOjnyJsB.png)\n\n***\n***\n\n\n***\n\n","tags":["Xshell"],"categories":["Xshell"]},{"title":"Nginx - é‡æ–°ç·¨è­¯ && æ·»åŠ  echo æ¨¡çµ„","url":"/blog.github.io/2023/03/13/Nginx-æ·»åŠ echoæ¨¡çµ„/","content":"\n***\n***\n\n**å®‰è£ç·¨è­¯ç’°å¢ƒ**\n\n```sql\nyum -y install pcre pcre-devel openssl openssl-devel gcc gcc-c++ zlib zlib-devel\n```\n\n***\n***\n\n**åœ¨ `Nginx` å®‰è£åŒ…è£¡ ä¸‹è¼‰ `echoæ¨¡çµ„å®‰è£åŒ…` && `è§£å£“ç¸®`**\n\n```sql\ncd /root/installation/nginx-1.21.6/\n\nwget https://github.com/openresty/echo-nginx-module/archive/v0.61.tar.gz\n\ntar zxvf v0.61.tar.gz\n```\n\n***\n***\n\n**æŸ¥çœ‹åŸæœ¬çš„ç·¨è­¯åƒæ•¸**\n\n```sql\n/usr/local/web/nginx/sbin/nginx -V\n```\n\n***\n***\n\n**é‡æ–°ç·¨è­¯ä¸€æ¬¡ (éœ€é€²å…¥åŸæœ¬å®‰è£ nginx çš„ç›®éŒ„åº•ä¸‹ç·¨è­¯)**\n\n```sql\ncd /root/installation/nginx-1.21.6\n\n./configure --user=nginx --group=nginx --prefix=/usr/local/web/nginx --sbin-path=/usr/local/web/nginx/sbin/nginx --conf-path=/usr/local/web/nginx/conf/nginx.conf --error-log-path=/usr/local/web/nginx/logs/error.log --http-log-path=/usr/local/web/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_secure_link_module --with-http_v2_module --with-http_stub_status_module --with-http_sub_module --add-module=/usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ --add-module=/usr/local/nginx-http-concat/ --with-http_geoip_module --add-module=/root/installation/nginx-1.21.6/echo-nginx-module-0.61\n\nmake  #ä¸è¦ make install æœƒé‡è¤‡å®‰è£\n```\n\n***\n***\n\n**åœ nginx æœå‹™**\n\n```sql\n/usr/local/web/nginx/sbin/nginx -s stop\n\n```\n\n***\n***\n\n**å°‡åŸæœ¬çš„åŸ·è¡Œæª”å‚™ä»½ç‚º nginx.bak**\n\n```sql\ncp /usr/local/web/nginx/sbin/nginx /usr/local/web/nginx/sbin/nginx.bak\n\n```\n\n***\n***\n\n**å°‡æ–°çš„åŸ·è¡Œæª”è¤‡è£½åˆ°åŸ·è¡Œè·¯å¾‘è£¡**\n\n```sql\ncp /root/installation/nginx-1.21.6/objs/nginx /usr/local/web/nginx/sbin/nginx\n\n```\n\n***\n***\n\n**å†æ¬¡æŸ¥çœ‹å·²ç·¨è­¯é€²å»äº†**\n\n```sql\n/usr/local/web/nginx/sbin/nginx -V\n\n```\n\n***\n***\n\n**echo æ¨¡çµ„ç”¨æ³•:**\n-----\n\n```sql\nlocation /test {  \n  \n  echo \"uri: $uri\";  \n  \n  echo \"request_uri: $request_uri\";  \n\n} \n\n```\n\n\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"HUGO - æ·»åŠ  Algolia æœç´¢æ”¯æŒ","url":"/blog.github.io/2023/03/10/HUGOæ·»åŠ Algoliaæœç´¢æ”¯æŒ/","content":"\n***\n***\n\n**æ–°å¢æœç´¢æ¨¡å¡Š `Algolia` é…ç½®åœ¨ hugo ä¸Š,å¯¦ç¾æœ¬åœ°æœç´¢**\n=====\n\n[Algoliaå®˜æ–¹ç¶²å€](https://www.algolia.com/)\n\n***\n***\n\n### {Step 1} æ–°å»º `application` åŠ `index`\n\n![](https://s2.loli.net/2024/04/28/ztDhJo8jKl5nvUT.png)\n![](https://s2.loli.net/2024/04/28/8MCetxKPkOVZQ6J.png)\n\n***\n***\n\n### {Step 2} ç´€éŒ„ Keys ç­‰ç­‰æœƒç”¨åˆ° ( `Application ID`, `Search-Only API Key`, `Admin API Key` )\n\n![](https://s2.loli.net/2024/04/28/DQ3V7Zn2SsmaOJP.png)\n\n***\n***\n\n### {Step 3} ä¿®æ”¹ `config.yaml` ä¸»è¦ç”Ÿæˆ `Algolia ç´¢å¼•`\n\n```sql\noutputFormats:\n    Algolia:\n        baseName: algolia\n        isPlainText: true\n        mediaType: application/json\n        notAlternative: true\n\noutputs:\n    home: [\"HTML\", \"RSS\", \"Algolia\"]\n\nparams.algolia:\n    appId: \"Application ID\"\n    indexName: \"Index name\"\n    searchOnlyKey: \"Admin API Key\"\n```\n\n***\n***\n\n### {Step 4} ç›®éŒ„ä¸‹åŸ·è¡Œ `hugo` å‘½ä»¤å¾Œ,åœ¨ `public/` ä¸‹æœƒç”Ÿæˆ `index.json`  (è‹¥æ˜¯ç”Ÿæˆ `algolia.json` æœƒæ‰¾ä¸åˆ°ä½ç½®)\n\n***\n***\n\n### {Step 5} å°‡ä¸Šè¿°ç”Ÿæˆçš„ `index.json` ä¸Šå‚³è‡³ `Algolia`\n\n![](https://s2.loli.net/2024/04/28/mGEjdtcqRLDh8Cf.png)\n\n***\n***\n\n### {Step 6} å®‰è£ `Atomic-Algolia` (ç›®çš„: è‡ªå‹•ä¸Šå‚³)\n\n***\n***\n\n#### åœ¨æ ¹ç›®éŒ„ä¸‹èªæ³•\n\n***\n\n`è¨»ï¼šé€™è£¡éœ€è¦ç”¨åˆ° npm å¥—ä»¶å·¥å…·ï¼Œæ‰€ä»¥éœ€è¦å®‰è£ node js`\n\n***\n***\n\n```yaml\nnpm init    ç›´æ¥ä¸€ç›´ `ENTER` , ç”Ÿæˆ `package.Json`\nnpm install atomic-algolia --save       ç”Ÿæˆ `package-lock.json` åŠ `node_modules`\n```    \n\n***\n***\n\n#### ä¿®æ”¹æ ¹ç›®éŒ„ä¸‹çš„ `package.Json`\n\n***\n***\n\n```sql\nvim package.Json\n```\n\n***\n***\n\n#### åœ¨ `scripts` ä¸‹æ·»åŠ ä»¥ä¸‹\n\n```sql\n\"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"algolia\": \"atomic-algolia\"\n  },\n```\n\n`Json æ ¼å¼è¨˜å¾—è¦åŠ é€—è™Ÿ,ä¸ç„¶æœƒè·³ ERROR`\n\n\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/UN3c68de5fuqY7G.png)\n\n***\n***\n\n#### åœ¨è·Ÿç›®éŒ„ä¸‹å»ºç«‹ .env æª”  `ä¸€å®šè¦å°å¯« , å¤§å¯« ENV æœƒå ±éŒ¯`\n\n***\n***\n\n```sql\nvim .env\n```\n\n***\n***\n\n```sql\nALGOLIA_APP_ID=ä½ çš„Application ID\n\nALGOLIA_INDEX_NAME=ä½ çš„ç´¢å¼•åå­—  \n\nALGOLIA_INDEX_FILE=public/algolia.json\n\nALGOLIA_ADMIN_KEY=ä½ çš„Admin API Key\n```\n\n***\n***\n    \n#### ä¸Šå‚³ç´¢å¼•æ–‡ä»¶\n\n***\n***\n\n#### åŸ·è¡ŒæŒ‡ä»¤æŸ¥çœ‹æ•ˆæœ\n\n***\n\n```sql\nnpm run algolia\n\n```\n\n***\n***\n    \n ![](https://s2.loli.net/2024/04/28/Wn8qp4byhOJlMwm.png)\n\n***\n***\n\n#### ä¹‹å¾Œæœ‰æ–°æ–‡ç« çš„æ™‚å€™ï¼Œä½¿ç”¨ `hugo && npm run algolia` å³å¯\n\n***\n***\n\nåƒè€ƒ: https://edward852.github.io/post/hugo%E6%B7%BB%E5%8A%A0algolia%E6%90%9C%E7%B4%A2%E6%94%AF%E6%8C%81/#%E7%94%9F%E6%88%90%E7%B4%A2%E5%BC%95%E6%96%87%E4%BB%B6\n\n***\n\n","tags":["HUGO"],"categories":["HUGO"]},{"title":"haproxy - è¨­å®šæª”è§£æ","url":"/blog.github.io/2023/03/09/Haproxy-è¨­ç½®åŸç†è§£æ/","content":"\n***\n***\n\n### global è¨­å®š ( å…¨åŸŸè¨­å®š )\n\n```sql\nglobal\n        log 127.0.0.1 local5\n        chroot /usr/local/haproxy\n        pidfile /var/run/haproxy.pid\n        maxconn 5000\n        user haproxy\n        group haproxy\n        daemon\n        stats socket /etc/haproxy/haproxy.sock mode 600 level admin\n        stats timeout 2m\n#-----------------------------------------------------------------------------------------------\n```\n\n\n\n`log`       è¨­å®šè‡³æœ¬æ©Ÿ syslog é è¨­ä½ç½® (ç´šåˆ¥ç‚º local5 `notice`)\n\n`chroot`    è¨­å®šç‚º haproxy ä¸»è¦é‹è¡Œä½ç½®\n\n`pidfile`   è¨­å®šç‚º haproxy é€²ç¨‹\n\n`maxconn`   è¨­å®šæ¯å€‹ haproxy é€²ç¨‹å¯ä»¥æ¥å—çš„æœ€å¤§ä½µç™¼é€£æ¥æ•¸\n\n`daemon`    è¨­å®šç‚ºèƒŒæ™¯åŸ·è¡Œ\n\n\n\n***\n***\n\n### default è¨­å®š ( è¨­å®šèƒ½ç”¨ä¾†é…ç½®å¥—ç”¨åˆ° frontendã€backendã€listen ç­‰é…ç½® )\n\n```sql\ndefaults\n        mode tcp\n        log global\n        option httplog\n        option dontlognull\n        option log-health-checks\n        retries 3\n        timeout http-request 30s\n        timeout queue 300s\n        timeout connect 600s\n        timeout client 10m\n        timeout server 10m\n        timeout http-keep-alive 30s\n        timeout check 600s\n        maxconn 4000\n#-----------------------------------------------------------------------------------------------\n```\n\n\n\n`mode`  æŒ‡å®šäº† HAProxy instance æ‰€ä½¿ç”¨çš„é€šè¨Šå”å®š\n\n`log`   æŒ‡å®š LOG å°‡å¯«å…¥çš„ä½å€ global å€¼åƒç…§äº† global ä¸€ç¯€ä¸­çš„ log åƒæ•¸ä¸­æ‰€æŒ‡å®šçš„ HAProxy instance\n\n`option httplog`    èƒ½ç´€éŒ„ HTTP session çš„å¤šç¨®å€¼ï¼ŒåŒ…æ‹¬ HTTP è«‹æ±‚ã€session ç‹€æ…‹ã€é€£ç·šæ•¸ã€ä¾†æºä½å€ã€ä»¥åŠé€£ç·šè¨ˆæ•¸å™¨ç­‰ç­‰\n\n`option dontlognull`    åœç”¨äº†å° null é€£ç·šä¹‹è¨˜éŒ„ï¼Œè¡¨ç¤º HAProxy ä¸æœƒè¨˜éŒ„æœªå‚³éä»»ä½•è³‡æ–™çš„é€£ç·š\n\n`option log-health-checks`  è¨˜éŒ„å¥åº·æª¢æŸ¥æ—¥èªŒ\n\n`retries`   æŒ‡å®šäº†åœ¨ç„¡æ³•ç¬¬ä¸€æ¬¡å°±é€£ä¸Šæ™‚ï¼ŒçœŸå¯¦ä¼ºæœå™¨æœƒé‡è©¦é€£ç·šçš„æ¬¡æ•¸\n\n`timeout http-request`  httpè«‹æ±‚è¶…æ™‚æ™‚é–“\n\n`timeout queue`     æ’éšŠè¶…æ™‚\n\n`timeout connect`   è¨­ç½®æˆåŠŸé€£æ¥åˆ°ä¸€è‡ºæœå‹™å™¨çš„æœ€é•·ç­‰å¾…æ™‚é–“ï¼Œé»˜èªå–®ä½æ˜¯æ¯«ç§’\n\n`timeout client`    è¨­ç½®é€£æ¥å®¢æˆ¶ç«¯ç™¼é€æ•¸æ“šæ™‚çš„æˆåŠŸé€£æ¥æœ€é•·ç­‰å¾…æ™‚é–“ï¼Œé»˜èªå–®ä½æ˜¯æ¯«ç§’\n\n`timeout server`    è¨­ç½®æœå‹™å™¨ç«¯è¿´æ‡‰å®¢æˆ¶åº¦æ•¸æ“šç™¼é€çš„æœ€é•·ç­‰å¾…æ™‚é–“ï¼Œé»˜èªå–®ä½æ˜¯æ¯«ç§’\n\n`timeout http-keep-alive `  è¨­ç½®é•·é€£æ¥æ™‚é–“\n\n`timeout check`     è¨­ç½®è¶…æ™‚æ™‚é–“\n\n`maxconn`       æœ€å¤§é€£æ¥æ•¸\n\n\n\n***\n***\n\n### listen stats è¨­å®š ( ç›£è½ç‹€æ…‹ )\n\n```sql\nlisten stats\n        bind  XX:XX:XX:XX:8080 (å…§ç¶²IP)\n        mode    http\n        log     127.0.0.1 local0 err\n        stats   uri     /hastats\n        stats auth    admin:admin\n        stats refresh 10s\n        stats hide-version\n        stats admin if TRUE\n#-----------------------------------------------------------------------------------------------        \n```\n\n\n\n`bind`  è¨­å®š IP , PORT\n\n\n\n***\n***\n\n### frontend è¨­å®š ( è¨­å®šæœƒé…ç½®ä¼ºæœå™¨è†è½ä¾†è‡ªç”¨æˆ¶ç«¯é€£ç·šè«‹æ±‚çš„è†è½ socket )\n\n```sql\nfrontend ha86\n        bind *:3386\n        mode tcp\n        option tcplog\n        default_backend mysqlha86\n\n```\n\n\n\n`option tcplog`  å…è¨±è¨˜éŒ„tcpé€£æ¥çš„ç‹€æ…‹å’Œæ™‚é–“\n\n\n\n***\n***\n\n### backend è¨­å®š ( è¨­å®šæœƒæŒ‡å®šçœŸå¯¦ä¼ºæœå™¨çš„ IP ä½å€ï¼Œä»¥åŠè² è¼‰å¹³è¡¡ç¨‹å¼çš„æ’ç¨‹æ¼”ç®—æ³• )\n\n```sql\nbackend mysqlha86\n        balance leastconn\n        server db86 XX:XX:XX:XX:3306 check port 3306 rise 1 fall 2 maxconn 2000 weight 100\n#-----------------------------------------------------------------------------------------------        \n```\n\n\n\n`balance`   æŒ‡å®šè² è¼‰å¹³è¡¡ç¨‹å¼çš„æ’ç¨‹æ¼”ç®—æ³•ï¼Œæ­¤ç¯„ä¾‹ä¸­ä½¿ç”¨çš„ä¹ƒæœ€å°‘é€£ç·šæ’ç¨‹æ³• `leastconn`\n\n`server`    æŒ‡å®šäº†å¾Œç«¯å¯ä»¥ä½¿ç”¨çš„ä¼ºæœå™¨ db86\n\n`check`     è¨­ç½®å®šæœŸã€Œå¥åº·æª¢æŸ¥ã€çš„ä¼ºæœå™¨ï¼Œä»¥ç¢ºä¿ä¼ºæœå™¨çš„å¯ç”¨æ€§\n\n`rise 1`    è¡¨ç¤º 1 æ¬¡æª¢æŸ¥çµæœæ­£ç¢ºå‰‡èªçˆ²æœå‹™å™¨å¯ç”¨\n\n`fall 2`    è¡¨ç¤ºæª¢æ¸¬çµæœå¤±æ•— 2 æ¬¡å‰‡èªçˆ²æœå‹™å™¨ä¸å¯ç”¨\n\n`weight`    æ¬Šé‡\n\n\n\n***\n***\n\n**æ¼”ç®—æ³•èªªæ˜**\n-----\n\n|  æ¼”ç®—æ³•åç¨± \t\t  |  è¨­ç½®åƒæ•¸   \t |  \t\t\t\t\t\t\t \t\t\t\t\t\t\tèªªæ˜  \n|  --------   \t\t  |  --------   \t |  ----------------------------------------------------------------------------------------------------------------------------------------------------------\t|\n|\t  å¾ªç’°æ³•\t\t  |    roundrobin    |            å°‡è«‹æ±‚ä¾åºç™¼çµ¦é›†å€ä¸­çš„ä¼ºæœå™¨ã€‚ä½¿ç”¨æ­¤æ¼”ç®—æ³•å‰‡æ™‚ï¼Œæ‰€æœ‰çœŸå¯¦ä¼ºæœå™¨ä¸ç®¡èƒ½åŠ›ç‚ºä½•ï¼Œéƒ½æœƒè¢«è¦–ç‚ºå¹³ç­‰\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  éœæ…‹å¾ªç’°æ³•\t  |    static-rr     |  ä¸€èˆ¬åœ°åœ¨ä¸€çµ„ä¼ºæœå™¨ä¹‹é–“å¾ªåºæ€§åœ°åˆ†æ•£å„é …è«‹æ±‚ï¼Œä¸éä¸å…è¨±å‹•æ…‹å¼é…ç½®ä¼ºæœå™¨çš„æ¬Šé‡ã€‚ç„¶è€Œï¼ŒåŸºæ–¼ä¼ºæœå™¨æ¬Šé‡çš„éœæ…‹æœ¬è³ªï¼Œå¾Œç«¯ä¸­ä¸æœƒæœ‰ä¼ºæœå™¨å•Ÿç”¨æ•¸é‡ä¸Šçš„é™åˆ¶\t\t\t|\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  æœ€å°‘é€£ç·šæ’ç¨‹æ³•  |\t  leastconn   \t |  å°‡è«‹æ±‚åˆ†æ•£è‡³é€£ç·šæ•¸è¼ƒå°‘çš„çœŸå¯¦ä¼ºæœå™¨ã€‚ç•¶è™•æ–¼ä¸€å€‹å‹•æ…‹å¼ä¸”åŒ…å«å„ç¨® session æˆ–æ˜¯é€£ç·šé•·åº¦çš„ç’°å¢ƒä¸­ï¼Œå°ç®¡ç†å“¡ä¾†èªªé€™å€‹æ’ç¨‹å™¨å¯èƒ½æœƒè¼ƒé©åˆå…¶ç’°å¢ƒ\t\t\t\t\t\t|\t\t\t\t\t\t\t\t\t|\n|\t  ä¾†æº\t\t  \t  |    source  \t\t |  é€éé›œæ¹Šè«‹æ±‚çš„ä¾†æº IP ä½å€ï¼Œä¸¦é™¤ä»¥æ‰€æœ‰é‹ä½œä¸­çš„ä¼ºæœå™¨çš„æ¬Šé‡ï¼Œä»¥åˆ¤æ–·å“ªå€‹ä¼ºæœå™¨å°‡æœƒæ”¶åˆ°è«‹æ±‚\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  URI\t\t  \t  |    uri      \t |  é€éé›œæ¹Šæ•´å€‹ URIï¼ˆæˆ–æ˜¯ URI çš„å¯é…ç½®éƒ¨åˆ†ï¼‰ä¸¦é™¤ä»¥æ‰€æœ‰é‹ä½œä¸­çš„ä¼ºæœå™¨çš„æ¬Šé‡ï¼Œä»¥åˆ¤æ–·å“ªå€‹ä¼ºæœå™¨å°‡æœƒæ”¶åˆ°è«‹æ±‚\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  URL åƒæ•¸\t\t  |    url_param     |  è—‰ç”±åœ¨ä¾†æº URL è«‹æ±‚ä¸­æ‰¾å°‹ç‰¹å®šåƒæ•¸å­—ä¸²ï¼Œä¸¦åŸ·è¡Œä¸€é …é›œæ¹Šè¨ˆç®—é™¤ä»¥æ‰€æœ‰é‹ä½œä¸­çš„ä¼ºæœå™¨çš„æ¬Šé‡ï¼Œä»¥å°‡è«‹æ±‚åˆ†æ•£è‡³ä¼ºæœå™¨ä¸Š\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  è¡¨é ­åç¨±\t\t  |    hdr    \t\t |  é€éé¸å–å„å€‹ä¾†æº HTTP è«‹æ±‚ä¸­çš„ç‰¹å®šè¡¨é ­åç¨±ä¾†å°‡è«‹æ±‚ç™¼ä½ˆè‡³ä¼ºæœå™¨ä¸Šï¼Œä¸¦é€²è¡Œä¸€é …é›œæ¹Šè¨ˆç®—ç„¶å¾Œé™¤ä»¥æ‰€æœ‰é‹ä½œä¸­ä¼ºæœå™¨çš„æ¬Šé‡\t\t\t\t\t\t\t\t\t\t\t|\t\t\t\t\t|\n|\t  RDP Cookie\t  |    rdp-cookie    |  é€éæŸ¥è©¢æ¯é … TCP è«‹æ±‚çš„ RDP cookie ä¾†å°‡è«‹æ±‚ç™¼ä½ˆè‡³ä¼ºæœå™¨ä¸Šï¼Œä¸¦åŸ·è¡Œä¸€é …é›œæ¹Šè¨ˆç®—ç„¶å¾Œé™¤ä»¥æ‰€æœ‰é‹ä½œä¸­ä¼ºæœå™¨çš„æ¬Šé‡\t\t\t\t\t\t\t\t\t\t\t\t\t|\n\n\nåƒè€ƒ: https://access.redhat.com/documentation/zh-tw/red_hat_enterprise_linux/7/html/load_balancer_administration/s1-haproxy-setup-global\n\n\n\n\n***\n\n","tags":["Haproxy"],"categories":["DNS"]},{"title":"GCP - Google Cloud Monitoring by Grafana","url":"/blog.github.io/2023/03/06/GCP-Google-Cloud-Monitoring-by-Grafana/","content":"\n\n\n# Grafana ç³»çµ±æ­é… GCP Monitoring è³‡è¨Šåšç›£æ§\n\n\n\n---\n\n## GCP è¨­å®š\n\n### {STEP 1} å•Ÿç”¨APIæœå‹™ `Stackdriver Monitoring API`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/yzEapsYWexibVMI.png)\n\n***\n***\n***\n\n### {STEP 2} å•Ÿç”¨APIæœå‹™ `Cloud Resource Manager API`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/VYm97ZX6sbtUdqv.png)\n\n***\n***\n***\n\n### {STEP 3} é»é¸ `APIå’Œæœå‹™` å»ºç«‹æœå‹™å¸³è™Ÿæ†‘è­‰\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/AMTmHizCfphxKR2.png)\n\n***\n***\n***\n\n### {STEP 4} è¨­å®š`æœå‹™å¸³è™Ÿåç¨±`åŠ`è¨­å®šè©²å¸³è™Ÿæ¬Šé™`\n\n***\n***\n***\n\n  ![](https://s2.loli.net/2024/04/28/5zMu8xV4G9niJsc.png)\n  ![](https://s2.loli.net/2024/04/28/weKIQ7WokcFMyfL.png)\n\n***\n***\n***\n\n### {STEP 5} è¨­å®š `æˆæ¬Šæ­¤å¸³è™Ÿçš„ä½¿ç”¨è€…`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/uUIqc2ORxL43Vgb.png)\n\n***\n***\n***\n \n### {STEP 6} é»é¸å‰›å»ºç«‹çš„ç›£æ§æœå‹™å¸³è™Ÿ monitor-grafana ä¸¦å»ºç«‹ `JSON é‡‘é‘°`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/RwWsITNJ9E4jUBQ.png)\n ![](https://s2.loli.net/2024/04/28/3CqHOUmwj2T4kfa.png)\n\n***\n***\n***\n \n### {STEP 7} æ·»åŠ ç›£æ§æ¬Šé™ `For Monitor`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/57sALF9IBM6pkf4.png)\n\n***\n***\n***\n\n#### æ·»åŠ  `æˆæ¬Šä½¿ç”¨è€…`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/e4aVyxtcQF5qrps.png)\n\n***\n***\n***\n\n#### æ–°å¢ä¸»é«”: `å‰›å»ºç«‹çš„ç›£æ§æœå‹™å¸³è™Ÿ XXX.gmail`\n\n#### æŒ‡æ´¾è§’è‰²: `ç›£æ§æª¢è¦–è€…`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/nIWSM6ZkNbx9RYt.png)\n\n***\n***\n***\n\n\n\n# Grafana\n\n\n\n***\n***\n***\n\n## {STEP 8} æ–°å¢ `Data source` è³‡æ–™ä¾†æº `Google Cloud Monitoring`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/1hpYUFAmMztPo3K.png)\n ![](https://s2.loli.net/2024/04/28/1PcGbg5wWljA8uh.png)\n\n***\n***\n***\n\n## {STEP 9} å°‡ `STEP 6` æ–°å¢çš„ `JSON é‡‘é‘°` ä¸Šå‚³ && `Save & test`\n\n***\n***\n***\n\n## é¸æ“‡ `Google JWT File`\n\n## é»é¸ `Upload service account key file`\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/4rv8hqHNmofbGlJ.png)\n ![](https://s2.loli.net/2024/04/28/SVzG5AP7CxuEDh1.png)\n\n***\n***\n***\n\n### {STEP 10} æˆæœé©—æ”¶\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/qQbuJOoNVnyKzLh.png)\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"Linux - æ ¸å¿ƒ & ç³»çµ±æ—¥èªŒæª” (local ç´šåˆ¥) ç´€éŒ„","url":"/blog.github.io/2023/03/03/Linux-ç³»çµ±LOG_localç´šåˆ¥/","content":"\n***\n***\n***\n***\n\n\n|  ç­‰ç´šæ•¸å€¼  |  ç­‰ç´šåç¨±   |  \t\t\t\t\t\t\t \t\t\t\t\t\t\tèªªæ˜  \n|  --------  |  --------   |  -------------------------------------------------------------------------------------------------------------------\n|\t  7\t\t |    debug    |  ç”¨ä¾† debug (é™¤éŒ¯) æ™‚ç”¢ç”Ÿçš„è¨Šæ¯è³‡æ–™ï¼›\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  6\t\t |    info     |  åƒ…æ˜¯ä¸€äº›åŸºæœ¬çš„è¨Šæ¯èªªæ˜è€Œå·²ï¼›\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  5\t\t |\t  notice   |  é›–ç„¶æ˜¯æ­£å¸¸è³‡è¨Šï¼Œä½†æ¯” info é‚„éœ€è¦è¢«æ³¨æ„åˆ°çš„ä¸€äº›è³‡è¨Šå…§å®¹ï¼›\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  4\t\t |    warning  |  è­¦ç¤ºçš„è¨Šæ¯ï¼Œå¯èƒ½æœ‰å•é¡Œï¼Œä½†æ˜¯é‚„ä¸è‡³æ–¼å½±éŸ¿åˆ°æŸå€‹ daemon é‹ä½œçš„è³‡è¨Šï¼›\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  3\t\t |    err      |  ä¸€äº›é‡å¤§çš„éŒ¯èª¤è¨Šæ¯ï¼Œä¾‹å¦‚è¨­å®šæª”çš„æŸäº›è¨­å®šå€¼é€ æˆè©²æœå‹™æœæ³•å•Ÿå‹•çš„è³‡è¨Šèªªæ˜ ;\t\t\t\t\t\t\t\t\t\t\t|\n|\t  2\t\t |    crit     |  æ¯” error é‚„è¦åš´é‡çš„éŒ¯èª¤è³‡è¨Šï¼Œé€™å€‹ crit æ˜¯è‡¨ç•Œé» (critical) çš„ç¸®å¯« ;\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  1\t\t |    alert    |  è­¦å‘Šè­¦å‘Šï¼Œå·²ç¶“å¾ˆæœ‰å•é¡Œçš„ç­‰ç´šï¼Œæ¯” crit é‚„è¦åš´é‡ï¼ ;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|\n|\t  0\t\t |    emerg    |  ç–¼ç—›ç­‰ç´šï¼Œæ„æŒ‡ç³»çµ±å·²ç¶“å¹¾ä¹è¦ç•¶æ©Ÿçš„ç‹€æ…‹ï¼ å¾ˆåš´é‡çš„éŒ¯èª¤è³‡è¨Šäº†ã€‚é€šå¸¸å¤§æ¦‚åªæœ‰ç¡¬é«”å‡ºå•é¡Œï¼Œå°è‡´æ•´å€‹æ ¸å¿ƒç„¡æ³•é †åˆ©é‹ä½œ ;\t|\n\n***\n***\n***\n***\n\n\n***\n\n","tags":["System"],"categories":["Linux"]},{"title":"MongoDB -Studio 3T for MongoDB 2019 019.3.0","url":"/blog.github.io/2023/03/03/Mongod-Studio_3T_for_MongoDB-2019/","content":"\n***\n***\n\n**{Step 1} å®‰è£ `Studio 3T for 2019.3.0` exeåŸ·è¡Œæª”**\n-----\n\n`ps. è¨˜ä½å®‰è£åŒ…è·¯å¾‘  ex: C:\\Program Files\\3T Software Labs\\Studio 3T`\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/fD7yExpc3dbTnWK.png)\n\n***\n***\n\n**{Step 2} å®‰è£å®Œæˆå¾Œå‰é¢æœƒè·³ `å»ºè­°è¦æ›´æ–°` , ä¸ç”¨ç†ä»–æŒ‰ `OK`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/pfB2u6hAIgdaGtW.png)\n\n***\n***\n\n**{Step 3} é»é¸ `I agree` å³å¯**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/GwKJRF4O6EqfajL.png)\n\n***\n***\n\n**{Step 4} æ­¤æ™‚æœƒè·³å‡ºéœ€è¦é©—è­‰çš„ç’°ç¯€**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/amVoP3kTIpDZNEd.png)\n\n***\n***\n\n**{Step 5} å°‡ `Crack åº•ä¸‹çš„ data-man-mongodb-XXX` ç§»è‡³å®‰è£åŒ…è·¯å¾‘**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/mCZfko9XLnOqAvp.png)\n\n***\n***\n\n**{Step 6} å†æ¬¡æ‰“é–‹å·²è·³éé©—è­‰ç’°ç¯€**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/IeYyNsz28Pawbrl.png)\n\n***\n***\n\n[studio 3T for 2019 019.3.0](https://pesktop.com/en/windows/studio-3t-for-mongodb-2019)\n\n***\n\n","tags":["MongoDB"],"categories":["MongoDB"]},{"title":"Windows - bat æ‰¹è™•ç†è…³æœ¬ä¸­æ–‡äº‚ç¢¼å•é¡Œè§£æ±º","url":"/blog.github.io/2023/03/02/Windows-batæ‰¹è™•ç†è…³æœ¬ä¸­æ–‡äº‚ç¢¼å•é¡Œè§£æ±º/","content":"\n***\n***\n\n**bat è™•ç†è…³æœ¬å¦‚ä¸‹**\n=====\n\n***\n***\n\n```yaml\n@echo off\n\nECHO æ­£åœ¨é‡ç½® Studio 3T çš„ä½¿ç”¨æ—¥æœŸ...\n\nFOR /f \"tokens=1,2,* \" %%i IN ('reg query \"HKEY_CURRENT_USER\\Software\\JavaSoft\\Prefs\\3t\\mongochef\\enterprise\" ^| find /V \"installation\" ^| find /V \"HKEY\"') DO ECHO yes | reg add \"HKEY_CURRENT_USER\\Software\\JavaSoft\\Prefs\\3t\\mongochef\\enterprise\" /v %%i /t REG_SZ /d \"\"\n\nECHO é‡ç½®å®Œæˆ, æŒ‰ä»»æ„é”®é€€å‡º......\n\npause>nul\n\nexit\n```  \n\n***\n***\n\n**CMD åŸ·è¡Œè…³æœ¬æ™‚å‡ºç¾äº‚ç¢¼**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/wTlcEPbXCNa8Dxe.png)\n\n***\n***\n\n**è§£æ±ºæ–¹æ³•**\n\n***\n***\n\n**å°‡ `batåŸ·è¡Œæª”` å¦å­˜ç‚º `ANSIç·¨ç¢¼æ ¼å¼`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/xgYzRBAMVdTwnNa.png)\n\n***\n***\n\n**å†æ¬¡é‹è¡Œ,äº‚ç¢¼å•é¡Œå·²è§£æ±º**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/UVCILrf5YzOHhmA.png)\n\n***\n***\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Windows - å®‰è£å½±ç‰‡ä¸‹è¼‰å·¥å…· yt-dlp åŠ Chocolatey","url":"/blog.github.io/2023/03/02/Windows-å®‰è£ç¨‹å¼--Chocolatey/","content":"\n***\n***\n\n**ç’°å¢ƒ: Win10 , Powershell ç‰ˆæœ¬: 5.1.19041.1682**\n=====\n\n***\n***\n\n**å®‰è£ Chocolatey**\n-----\n\n***\n***\n\n**ä½¿ç”¨ `Powershell` æŸ¥çœ‹ `PSVersion` ç‰ˆæœ¬**\n\n```sql\npsversiontable\n```\n    \n```sql\nName                           Value\n----                           -----\nPSVersion                      5.1.19041.1682\nPSEdition                      Desktop\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\nBuildVersion                   10.0.19041.1682\nCLRVersion                     4.0.30319.42000\nWSManStackVersion              3.0\nPSRemotingProtocolVersion      2.3\nSerializationVersion           1.1.0.1\n```\n\n***\n***\n\n**åœ¨ `powershell` ä¸­è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¸‹è¼‰ `Chocolatey`**\n\n```sql\nSet-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol: [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/gyUL78ixj3VuJwb.png)\n\n***\n***\n\n**ä¸‹è¼‰å®Œæˆå¯ç”¨æŒ‡ä»¤æŸ¥çœ‹ `help`**\n\n```sql\nchoco -?\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/DsZH38ItLuB9YVT.png)\n\n***\n***\n\n**ä½¿ç”¨ `choco` ä¸‹è¼‰ `yt-dlp`**\n-----\n\n```sql\nchoco install yt-dlp\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/aGODLk195vcE8go.png)\n\n***\n***\n\n\n***\n\n","tags":["Windows","yt-dlp","Chocolatey"],"categories":["Windows"]},{"title":"Nginx - åƒæ•¸é…ç½® tri_files $uri","url":"/blog.github.io/2023/02/19/Nginx-åƒæ•¸_tri_files_$uri/","content":"\n<!--more-->\né€²è¡Œå…§éƒ¨é‡å®šå‘ URI çš„ nginx åƒæ•¸\n\n***\n***\n\n**æŒ‰æŒ‡å®šé †åºæª¢æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸¦ä½¿ç”¨ç¬¬ä¸€å€‹æ‰¾åˆ°çš„æ–‡ä»¶é€²è¡Œè«‹æ±‚è™•ç†**\n=====\n\n***\n***\n\n## **é…ç½®**\n\n```sql\ntry_files $uri  $uri/ /index.html;\n```\n\n***\n    \n## **`$uri`  é€™å€‹æ˜¯ nginx çš„ä¸€å€‹è®Šé‡ï¼Œå­˜æ”¾è‘—ç”¨æˆ¶è¨ªå•çš„åœ°å€**\n\n***\n\n\n\n### EXï¼š `http://www.xxx.com/index.html` é‚£éº¼ `$uri` å°±æ˜¯ `/index.html`\n\n\n\n***\n***\n\n## **`$uri/` ä»£è¡¨è¨ªå•çš„æ˜¯ä¸€å€‹ç›®éŒ„**\n\n***\n\n\n\n### EXï¼š `http://www.xxx.com/hello/test/` é‚£éº¼ `$uri/` å°±æ˜¯ `/hello/test/`\n\n\n\n***\n***\n\n\n\n\n### æ¯”å¦‚ç”¨æˆ¶è¨ªå•é€™å€‹ç¶²åœ°å€     http://www.xxx.com/test.html\n        \n### `try_files` é¦–å…ˆæœƒåˆ¤æ–·ä»–æ˜¯æ–‡ä»¶ï¼Œé‚„æ˜¯ä¸€å€‹ç›®éŒ„ï¼Œçµæœç™¼ç¾ä»–æ˜¯æ–‡ä»¶ï¼Œèˆ‡ç¬¬ä¸€å€‹åƒæ•¸ `$uri` è®Šé‡åŒ¹é…\n        \n### ç„¶å¾Œå»åˆ°ç¶²ç«™ç›®éŒ„ä¸‹å»æŸ¥æ‰¾ `test.html` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è®€å–è¿”å›ã€‚å¦‚æœä¸å­˜åœ¨å°±è·³å»åŒ¹é… `$uri/`\n    \n### å¦‚æœ `$uri/ ` ä¸å­˜åœ¨å‰‡åŒ¹é…åŸè·¯å¾‘åº•ä¸‹ `/index.html`\n\n\n\n***\n***\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"GCP - Cloud Functions éƒ¨å±¬ LINE BOT + OpenAI","url":"/blog.github.io/2023/02/16/GCP-Cloud-Functionséƒ¨å±¬LINE-BOT+OpenAI/","content":"\n\n\n# LINE BOT + OpenAI ç¨‹å¼ï¼Œè®“ AI å›è¦†è¨Šæ¯\n\n\n\n***\n\n`è®“ç¨‹å¼åˆ¤æ–·ã€ŒHi AI:ã€é–‹é ­çš„æ–‡å­—ï¼Œç•¶æ–‡å­—çš„é–‹é ­å‡ºç¾ã€ŒHi AI:ã€çš„å­—ä¸²æ™‚ï¼Œå°±è®“ OpenAI é€²è¡Œå›è¦†ï¼Œå¦å‰‡å°±ä»ç„¶å›å‚³ç›¸åŒçš„å­—ä¸²ã€‚`\n\n***\n\n## {Step 1} åˆ° OpenAI ç”³è«‹ä¸€çµ„`å¸³è™Ÿ`åŠ`API keys`\n\n***\n***\n***\n\n### Open AI API KEY : https://platform.openai.com/account/api-keys\n\n***\n***\n***\n\n![](2100.png)\n\n![](https://s2.loli.net/2024/04/28/SaoATQvutB6ZYXs.png)\n\n***\n***\n***\n\n## {Step 2} ç™»å…¥GCPé¸å–å°ˆæ¡ˆ (é€™é‚Šä½¿ç”¨æ–°å°ˆæ¡ˆæ¸¬è©¦)\n\n***\n***\n***\n\n### å³å´é¸å– `APIå’Œæœå‹™` > `ç¨‹å¼åº«` ç¨‹å¼åº«æœå°‹ `build api`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/aZjFueItnTx65AR.png) \n\n![](https://s2.loli.net/2024/04/25/GK83Wv2EVYUnhJC.png)\n\n![](https://s2.loli.net/2024/04/25/QLq7PcsymEXKutV.png)\n\n![](https://s2.loli.net/2024/04/25/lDnxCEdAQcqGW4t.png)\n\n***\n***\n***\n\n### é»é¸ `å•Ÿç”¨API`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/xXOvIe5KDzh9VdG.png)\n\n***\n***\n***\n\n### é»é¸ `å»ºç«‹å‡½å¼` å°±èƒ½é–‹å§‹å»ºç«‹ç¬¬ä¸€æ”¯ Cloud Functions çš„ç¨‹å¼\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/7WROk8nUYjpv1b5.png)\n\n***\n***\n***\n\n### é»é¸å»ºç«‹å‡½å¼å¾Œï¼Œè¨­å®šåŸºæœ¬è³‡è¨Šï¼Œç’°å¢ƒé¸æ“‡ `ç¬¬ä¸€ä»£` `asia-east1 (å°ç£)`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/25/i6bM325HA7yOc8E.png)\n\n***\n***\n***\n\n### è§¸ç™¼æ¢ä»¶é¸æ“‡ `HTTP` å‹¾é¸ `å…è¨±æœªç¶“é©—è­‰çš„å«ç”¨` é€é request POST æˆ– GET çš„æ–¹æ³•é€²è¡Œå«ç”¨\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/MVZvfqKOIUJToiF.png)\n\n***\n***\n***\n\n#### å…¶ä»–ä¿ç•™é è¨­å€¼å³å¯\n\n***\n***\n***\n\n### ç·¨è¼¯ `main.py` `requiements.txt` åŠ å…¥ LINE BOT å’Œ OpenAI å‡½å¼åº«\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/9bEFq6GYXKULzZv.png)\n\n![](https://s2.loli.net/2024/04/28/zwqMPvb5hCH2KaW.png)\n\n***\n***\n***\n\n## {Step 3} å®Œæˆå¾Œéƒ¨ç½²ç¨‹å¼ï¼Œå°ˆæ¡ˆåç¨±å‰æ–¹å‡ºç¾ç¶ è‰²å‹¾å‹¾è¡¨ç¤ºéƒ¨ç½²å®Œæˆï¼Œè¤‡è£½è§¸ç™¼çš„ç¶²å€\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/MueOwkEngtd4jJo.png)\n\n***\n***\n***\n\n### å°‡ç¶²å€å¡«å…¥ LINE BOT çš„ Message API è£¡ Webhook URLï¼Œé»æ“Š `Edit` è²¼ä¸Šå‰›å‰›è§¸ç™¼ç¶²å€ \n\n***\n***\n***\n\n### æ¥è€…æŒ‰ `Verify` é©—è­‰ï¼Œå‡ºç¾ Success è¡¨ç¤º Webhook URL å·²ç¶“é †åˆ©ä¸²æ¥\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/Cdxkg8F9Mp4wNrU.png)\n\n***\n***\n***\n\n### è‹¥å‡ºç¾ ERROR-403 å‰‡æ˜¯æ²’æœ‰çµ¦äºˆå‘¼å«çš„æ¬Šé™\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/Q9JnwdcWtBX54rq.png)\n\n***\n***\n***\n\n### è§£æ±ºæ–¹æ³•:\n\n### é¸å–å‰›å»ºç«‹çš„ function ç·¨è¼¯æ¬Šé™ é¸å– `æ–°å¢ä¸»é«”`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/gJYLl76ziyB8Tm5.png)\n\n***\n***\n***\n\n### ä¸»é«”é¸æ“‡ `allUsers` æ³›æŒ‡åŒ¿åä½¿ç”¨è€…\n\n### æŒ‡æ´¾è§’è‰²é¸æ“‡ `Cloud Functions` > `Cloud Functions å«ç”¨è€…`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/R6uwU7nJepmkNr9.png)\n\n***\n***\n***\n\n## {Step 4} é©—æ”¶ Line bot\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/Qz8ODyqvXs5WFGg.png)\n\n***\n***\n***\n\nåƒè€ƒ: \n\nhttps://steam.oxxostudio.tw/category/python/example/line-bot-openai-2.html\n\nhttps://blog.wawajohn.net/11369.html\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"Grafana - Iframe å»é™¤ bar å·¥å…·æ¢","url":"/blog.github.io/2023/02/16/Grafana-Iframeå»é™¤bar/","content":"\n\n\n# kiosk å»é™¤å…¨éƒ¨é‚Šæ¡†\n\n\n\n```sql\nhttp://172.17.0.1:3000/d/UDdpyzz7z/prometheus-2-0-stats?orgId=1&refresh=1m`&kiosk`\n```\n\n***\n***\n***\n\n\n\n# kiosk=tv å»é™¤å·¦å´åŠŸèƒ½æ¬„ï¼Œé ‚éƒ¨ä¸å»é™¤\n\n\n\n```sql\nhttp://172.17.0.1:3000/d/UDdpyzz7z/prometheus-2-0-stats?orgId=1&refresh=1m`&kiosk=tv`\n```\n\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Windows - å®‰è£å½±ç‰‡ä¸‹è¼‰å·¥å…· youtube-dl","url":"/blog.github.io/2023/02/15/Windows-å®‰è£å½±ç‰‡ä¸‹è¼‰å·¥å…·youtube-dl/","content":"\n***\n***\n\n**Windows å®‰è£ youtube-dl ç´€éŒ„**\n=====\n\n***\n***\n\n[å®˜æ–¹ç¶²ç«™](http://ytdl-org.github.io/youtube-dl/download.html)\n\n***\n***\n\n**ã€”Step 1ã€•å®˜ç¶²å®‰è£å¥—ä»¶**\n-----\n\n***\n***\n\n**Windows éœ€å®‰è£ä»¥ä¸‹å¥—ä»¶**\n\n[Microsoft Visual C++ 2010 Service Pack 1 Redistributable Package (x86)](https://download.microsoft.com/download/1/6/5/165255E7-1014-4D0A-B094-B6A430A6BFFC/vcredist_x86.exe)  \n  \n[Windows exe (youtube-dl for windows)](https://yt-dl.org/downloads/2021.12.17/youtube-dl.exe)\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/Lyp6RQ3fMaEAcr4.png)\n\n***\n***\n\n**ã€”Step 2ã€•å°‡ `youtube-dl` è¨­å®šæˆç’°å¢ƒè®Šæ•¸**\n-----\n\n***\n***\n\n**å°‡ \"youtube-dl.exe\" ç§»è‡³è·¯å¾‘ `%USERPROFILE%\\AppData\\Local\\Microsoft\\WindowsApps` è£¡**\n\n***\n***\n\n\n\n**Windows é è¨­ç’°å¢ƒè®Šæ•¸è·¯å¾‘**  \n  \n```sql\n%USERPROFILE%\\AppData\\Local\\Microsoft\\WindowsApps   \n```\n\n  \n\n***\n***\n        \n![](https://s2.loli.net/2024/05/03/THekzIguLj4hAoD.png)\n\n***\n***\n\n**ã€”Step 3ã€•ç¢ºèªä¸Šè¿°è·¯å¾‘æœ‰åœ¨ PATH ä¸­**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/qHydz5eQnTF3fIX.png)\n\n![](https://s2.loli.net/2024/05/03/oUFr9qBAXKmjCS7.png)\n\n![](https://s2.loli.net/2024/05/03/MBVdKksAweHqt1P.png)\n\n![](https://s2.loli.net/2024/05/03/uFlk6zwXW8yB1SR.png)\n\n![](https://s2.loli.net/2024/05/03/XlyTuWVCmQUheLr.png)\n\n![](https://s2.loli.net/2024/05/03/ZnGFz3EuxgAVvyb.png)\n\n***\n***\n\n**ã€”Step 4ã€•é©—è­‰: æ‰“é–‹ `CMD` è¼¸å…¥ `youtube-dl --version`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/MhDd9Z6LioUKSGg.png)\n\n***\n***\n\n**ã€”Step 5ã€•æ¸¬è©¦ä¸‹è¼‰å½±ç‰‡**\n-----\n\n***\n***\n\n**ç›´æ¥ä¸‹è¼‰**\n\n```sql\nyoutube-dl u5ZsoP8FZUQ\n```\n\n***\n***\n    \n**æŸ¥è©¢å½±ç‰‡å¯ä¸‹è¼‰çš„ç•«è³ªæ¸…å–®**\n\n```sql\nyoutube-dl -F u5ZsoP8FZUQ\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/XzcjLVuhs3iGDYR.png)\n\n***\n***\n\n**ä¸Šè¿°æŒ‡ä»¤æ‰¾åˆ° `format code` å¾Œï¼Œä½¿ç”¨ä¸‹åˆ—æŒ‡ä»¤ä¸‹è¼‰æŒ‡å®šçš„ç•«è³ªå½±ç‰‡**\n\n```sql\nyoutube-dl -f 401 u5ZsoP8FZUQ\n```\n\n***\n***\n    \n**ä¸‹è¼‰æˆéŸ³æ¨‚ `--audio-format` æŒ‡å®šè¼¸å‡ºæ ¼å¼ï¼Œé è¨­å€¼ç‚º `best`**\n\n```sql\nyoutube-dl -x --audio-format mp4 u5ZsoP8FZUQ\n```\n\n***\n***\n\n***\n\n","tags":["youtube-dl","Windows"],"categories":["Windows"]},{"title":"Windows - å®‰è£è½‰æª”å·¥å…· FFmpeg","url":"/blog.github.io/2023/02/15/Windows-å®‰è£è½‰æª”å·¥å…·FFmpeg/","content":"\n<!--more-->\nå½±éŸ³è½‰æª”æ•™å­¸ mov/mp4 è½‰æª”\n\n***\n***\n\n**Windows  FFmpeg å®‰è£ç´€éŒ„**\n=====\n\n[å®˜æ–¹ç¶²ç«™](https://ffmpeg.org/download.html#build-windows)\n\n***\n***\n\n**ã€”Step 1ã€•å…ˆå»å®˜ç¶²ä¸‹è¼‰ `FFmpeg`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/FmtqkMhBUQ6rzjV.png)\n\n![](https://s2.loli.net/2024/05/03/2uEklNPHapxjXoL.png)\n\n![](https://s2.loli.net/2024/05/03/gizVvaMJL65Akde.png)\n\n***\n***\n\n**ã€”Step 2ã€•å°‡è¼‰å¥½çš„ zipåŒ…è§£å£“ç¸®**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/KOhHnc4W2NaJewj.png)\n\n***\n***\n\n**è£¡é¢æ‡‰è©²è¦æœ‰é€™äº›æª”æ¡ˆ**\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/YWkzReu9DwQXOAM.png)\n\n***\n***\n\n**ã€”Step 3ã€•é€²å»åˆ° ./bin é€™å±¤ç›®éŒ„ä¸¦å°‡è·¯å¾‘è¤‡è£½åˆ°ç’°å¢ƒè®Šæ•¸ä¸­**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/UYzG2Q7hwlVmID5.png)\n\n***\n***\n\n**ã€”Step 4ã€•æ‰“é–‹æ§åˆ¶å° > ç³»çµ±åŠå®‰å…¨æ€§ > ç³»çµ± > é€²éšç³»çµ±è¨­å®š**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/qHydz5eQnTF3fIX.png)\n\n![](https://s2.loli.net/2024/05/03/oUFr9qBAXKmjCS7.png)\n\n![](https://s2.loli.net/2024/05/03/MBVdKksAweHqt1P.png)\n\n***\n***\n\n**ã€”Step 5ã€•æ‰“é–‹`ç’°å¢ƒè®Šæ•¸` > `ç³»çµ±è®Šæ•¸` > `Path` > `ç·¨è¼¯` > `æ–°å¢`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/uFlk6zwXW8yB1SR.png)\n\n![](https://s2.loli.net/2024/05/03/XlyTuWVCmQUheLr.png)\n\n***\n***\n\n**å°‡ ã€”Step 3ã€• è¤‡è£½çš„è·¯å¾‘è²¼å…¥**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/yxw5PJasHvr9V2p.png)\n\n![](https://s2.loli.net/2024/05/03/JWKYzIlypSLq2RH.png)\n\n***\n***\n\n**ã€”Step 6ã€•é©—è­‰: æ‰“é–‹ `CMD` è¼¸å…¥ `ffmpeg -version`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/kxQ9IKYjZpmiHnP.png)\n\n***\n***\n\n**ã€”Step 7ã€•å°‡ `mp4` è½‰æˆ `mov`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/UNZleyE6G9Xv7bn.png)\n\n***\n***\n\n***\n\n","tags":["FFmpeg"],"categories":["Windows"]},{"title":"Linux - youtube-dl && ffmpeg å®‰è£æ•™å­¸ && yt-dlp å®‰è£","url":"/blog.github.io/2023/02/13/Linux-youtube-dl_ffmpeg_å®‰è£æ•™å­¸/","content":"\n***\n***\n\n## youtube-dl å®‰è£\n\n**[youtube-dlå®˜æ–¹é€£çµ](https://youtube-dl.org)**\n\n***\n***\n\n### å®‰è£æœ€æ–°ç©©å®šç‰ˆæœ¬\n\n```sql\ncurl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/bin/youtube-dl\n```\n\n### çµ¦äºˆæ¬Šé™\n\n```sql\nchmod a+rx /usr/bin/youtube-dl\n```\n\n### æŸ¥çœ‹ç‰ˆæœ¬\n\n```sql\nyoutube-dl --version\n```\n\n### è‹¥è¦æ›´æ–°ç‰ˆæœ¬\n\n```sql\nyoutube-dl --update\n```\n\n***\n***\n\n## ffmpeg å®‰è£\n\n**[ffmpegå®˜æ–¹é€£çµ](https://ffmpeg.org/download.html)**\n\n### å®‰è£ä¾è³´\n\n```sql\nyum install yasm\n```\n\n### ä¸‹è¼‰å®˜æ–¹ tar åŒ…\n\n```sql\nwget https://ffmpeg.org/releases/ffmpeg-5.1.2.tar.gz\n```\n\n### è§£å£“ && å®‰è£\n\n```sql\ntar zxvf ffmpeg-5.1.2.tar.gz\n    \n./configure --prefix=/usr/local/ffmpeg --enable-openssl --enable-protocols --enable-protocol=https\n    \nmake && make install\n```\n    \n### å»ºç«‹ Link\n\n```sql\nln -s /usr/local/ffmpeg/bin/ffmpeg /usr/bin/ffmpeg\n\nln -s /usr/local/ffmpeg/bin/ffprobe /usr/bin/ffprobe\n```    \n\n### æŸ¥çœ‹ç‰ˆæœ¬\n\n```sql\nffmpeg -version\n```\n\n***\n***\n\n## yt-dlp å®‰è£\n\n***\n***\n\n```sql\npython3 -m pip install -U yt-dlp\n\nyt-dlp --version\n```\n\n***\n***\n\n\n\nåƒè€ƒ: https://guopengzhen.com/%E7%BF%BB%E8%AF%91/205/\n\n\n***\n\n","tags":["youtube-dl"],"categories":["Linux"]},{"title":"SVN - Linux è§£æ±ºæ¯æ¬¡ commit éƒ½éœ€è¦è¼¸å…¥å¯†ç¢¼","url":"/blog.github.io/2023/02/04/SVN-è§£æ±ºSVNæ¯æ¬¡éƒ½éœ€è¦è¼¸å…¥å¯†ç¢¼/","content":"\n***\n***\n\n**åˆªé™¤åŸæœ¬ç·©å­˜å¯†ç¢¼çš„æ–‡ä»¶**\n\n```sql\nrm -f ~/.subversion/auth/svn.simple/*\n```\n\n***\n***\n    \n**åŸ·è¡Œä¸€æ¬¡ \"svn update\" è®“å¯†ç¢¼ç·©å­˜æ–‡ä»¶é‡æ–°ç”Ÿæˆ**\n\n```sql\ncd nowblog-2023-02-08/ \n    \nsvn up --username laurance\n```\n\n***\n***\n    \n**ä¿®æ”¹ç·©å­˜ç›®éŒ„ä¸‹çš„æ–‡ä»¶**\n\n```sql\nvim ~/.subversion/auth/svn.simple/1b47431ba1edd4463343286aca5a7e1\n```\n    \n```sql\nK 15\nsvn:realmstring\nV 43\n<svn://192.168.168.1:3690>\nK 8\npasstype\nV 6\nsimple\nK 8\nusername\nV 8\nlaurance\nK 8\npassword\nV 10\nXXXXXX   (password)\nEND\n```\n\n***\n***\n\n**{ `passtype` å›ºå®šæ˜¯ `simple`  ,  `K` å’Œ `V` å¾Œé¢çš„æ•¸å­—åˆ†åˆ¥ä»£è¡¨ `key` å’Œ `value` çš„é•·åº¦ }**\n=====\n\n***\n***\n\n[åƒè€ƒæ–‡ä»¶](https://blog.csdn.net/u013304850/article/details/124821651)\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"Linux - Rsync åŸºæœ¬è¨­å®š","url":"/blog.github.io/2023/02/03/Linux-RsyncåŸºæœ¬è¨­å®šæ•™å­¸/","content":"\n***\n***\n\n# **æ¸¬è©¦ç’°å¢ƒ**\n    \n**Aä¸»æ©Ÿ ( Serverç«¯ ) IP :192.168.1.222**\n    \n**Bä¸»æ©Ÿ ( Clinetç«¯ ) IP :192.168.1.122**\n\n***\n***\n***\n\n## Bä¸»æ©Ÿ( Clinetç«¯ ) è¨­å®š\n\n### å®‰è£æœå‹™\n\n```sql\nyim install xinetd rsync\n```\n    \n### ä¿®æ”¹æœå‹™è¨­å®š xinetd.conf\n\n```sql\nvim /etc/xinetd.d/rsync\n    \n\nservice rsync\n{\n        disable        : no\n        socket_type    : stream\n        wait           : no\n        user           : root\n        server         : /usr/bin/rsync\n        server_args    : --daemon\n        log_on_failure  += USERID\n}\n```\n\n### ä¿®æ”¹æœå‹™è¨­å®š rsyncd.conf\n\n```sql\nvim /etc/rsyncd.conf\n    \n    \n[update]\npath:          /\nauth users:    update\nhosts allow:   XX.XX.XX.XX  //ä¾†æºIP\nuid:           root\ngid:           root\nsecrets file:  /etc/rsync.secrets\nread only:     no\n```\n\n### è¨­å®šå¸³è™Ÿå¯†ç¢¼\n\n```sql\nvim /etc/rsync.secrets\n    \n\nupdate:123abc\n\n```\n\n### å•Ÿå‹•æœå‹™\n\n```sql\nsystemctl start xinetd\n``` \n\n***\n***\n***\n   \n## Aä¸»æ©Ÿ (Serverç«¯) è¨­å®š\n\n### è¨­å®šå¯†ç¢¼å³å¯\n\n```sql\nvim rsync.secrets\n    \n\n123abc\n```\n    \n**åŒæ­¥èªæ³•**\n=====\n\n```sql\nrsync -aHSz  --delete --contimeout=5 --password-file=/etc/rsync.secrets /hugoserver update@XX.XX.XX.XX::update\n```\n\n\n***\n\n","tags":["Rsync"],"categories":["Linux"]},{"title":"Linux - ä½¿ç”¨ locate å°‹æ‰¾æª”æ¡ˆæ•™å­¸èˆ‡ç¯„ä¾‹","url":"/blog.github.io/2023/02/01/Linux-ä½¿ç”¨locateå°‹æ‰¾æª”æ¡ˆæ•™å­¸èˆ‡ç¯„ä¾‹/","content":"\n***\n***\n\n### å®‰è£ locate å·¥å…·\n\n```sql\nyum install mlocate\n```\n    \n### æ›´æ–° locate è³‡æ–™åº«\n\n```sql\nupdatedb\n```\n    \n### é è¨­çš„ locate è³‡æ–™åº«æª”æ¡ˆä½ç½®\n\n```sql\nls -l /var/lib/mlocate/mlocate.db\n```\n\n***\n***\n    \n### å¿«é€Ÿå°‹æ‰¾æª”æ¡ˆ\n\n#### å°‹æ‰¾å«æœ‰ .bashrc é—œéµå­—çš„æª”æ¡ˆ\n\n```sql\nlocate .bashrc\n```\n    \n#### è¨ˆç®—å«æœ‰ .bashrc é—œéµå­—çš„æª”æ¡ˆæ•¸é‡\n\n```sql\nlocate -c .bashrc\n```\n    \n#### ä¸åˆ†å¤§å°å¯«\n\n```sql\nlocate -i my.txt\n```\n    \n#### æŸ¥çœ‹ locate è³‡æ–™åº«ç‹€æ…‹\n\n```sql\nlocate -S\n```\n\n***\n***\n\n***\n\n","tags":["Locate"],"categories":["Linux"]},{"title":"Linux - é–‹æ©Ÿå‡ºç¾ or type control -D to continue è§£æ±ºè¾¦æ³•","url":"/blog.github.io/2023/02/01/Linux-é–‹æ©Ÿå‡ºç¾_or_type_control_-D_to_continueè§£æ±ºè¾¦æ³•/","content":"\n<!--more-->\n ERROR : or type control -D to continue è§£æ±ºè¾¦æ³• \n\n***\n***\n\n## Linux é–‹æ©Ÿå¤±æ•— ERROR \"or type control -D to continue\" è§£æ±ºè¾¦æ³•\n\n***\n***\n\n### ä¸»è¦æ˜¯ç£ç¢Ÿå•é¡Œ,ç§€çš„ ERROR\n\n***\n***\n\n#### å…ˆä½¿ç”¨ `root` é€²å…¥ `ä¿®å¾©æ¨¡å¼`\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/oRjC4fXhyTr6pLb.png)\n\n***\n***\n\n#### è¼¸å…¥å®Œå¯†ç¢¼å¾Œ,é€²å…¥çš„æ¨¡å¼ç‚º `å”¯è®€æ¨¡å¼` ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤æ›´æ”¹ç‚º `è®€å¯«æ¨¡å¼`\n\n```sql\nmount -n -o remount,rw /\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/VmIpcrCDoyEvbFA.png)\n\n***\n***\n\n#### ä½¿ç”¨æŒ‡ä»¤ `df -h` å¯ä»¥çœ‹åˆ°åŸæœ¬ç£ç¢Ÿ mount çš„ä½ç½®\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/XO5EgeRolptvusV.png)\n\n***\n***\n\n#### å°‡æ­£ç¢ºä½ç½®å¯«å…¥ `/etc/fstab` \n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/xeWVBYlKt1z6qMf.png)\n\n***\n***\n\n#### é‡å•Ÿå¾Œå³å¯\n\n```sql\nreboot\n```\n\n***\n***\n\n\n\n\n\n***\n\n","tags":["Linux"],"categories":["Mount"]},{"title":"Rclone - å•Ÿå‹•è…³æœ¬ {CentOS7}","url":"/blog.github.io/2023/02/01/Rcloneå•Ÿå‹•è…³æœ¬_{CentOS7}/","content":"\n***\n***\n\n[å®˜æ–¹ Global Flags] https://rclone.org/flags/?utm_source=ld246.com\n\n[åƒè€ƒæ–‡ç»] https://ld246.com/article/1600853705300\n\n***\n***\n\n```sql\ncat <<EOF |tee /usr/lib/systemd/system/rclone.service\n# User service for Rclone mounting\n#\n# Place in ~/.config/systemd/user/\n# File must include the '@' (ex rclone@.service)\n# As your normal user, run \n#   systemctl --user daemon-reload\n# You can now start/enable each remote by using rclone@<remote>\n#   systemctl --user enable rclone@drive\n#   systemctl --user start rclone@drive\n#   Global Flags https://rclone.org/flags/?utm_source=ld246.com\n\n[Unit]\nDescription=rclone: Remote FUSE filesystem for cloud storage config\nDocumentation=man:rclone(1)\nAfter=network-online.target\nWants=network-online.target\nAssertPathIsDirectory=/home/web-note\n\n[Service]\nType=notify\nExecStartPre=/bin/mkdir -p /home/web-note\nExecStart= \\\n  /usr/bin/rclone mount -P \\\n    --config /root/.config/rclone/rclone.conf \\\n    --allow-non-empty \\\n    --allow-other \\\n    --vfs-cache-mode full \\\n    --vfs-cache-max-size 500M \\\n    --dir-cache-time 5m \\\n    --poll-interval 1m \\\n    --vfs-read-chunk-size-limit 128M \\\n    --vfs-read-chunk-size-limit off \\\n    --log-level INFO \\\n    --log-file /var/log/rclone/rclone.log \\\n    --bwlimit 0 \\\n    --umask 022 \\\n    hward: /home/web-note\n\nExecStop=/bin/fusermount -uz /home/web-note\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=default.target\n\n\nEOF\n\n```\n\n***\n***\n\n**è¨­ç½®é–‹æ©Ÿå•Ÿå‹•**\n\n```sql\nsystemctl enable rclone\n\n```\n\n***\n***\n   \n***å¸¸ç”¨åƒæ•¸***\n\n***\n***\n   \n|  Rclone å¸¸ç”¨åƒæ•¸\t                                        | åŠŸèƒ½\t\t\t\t\t\t\t\t                                                                                            |\n|  ----------------------------------------------------- \t| ---------------------------------------------------------------------------------------------------------------               |\n|  Type=notify  \t\t\t\t\t\t\t\t        \t| æ›è¼‰é»è¢«æˆåŠŸé…ç½®ä¹‹å¾Œ service æœƒé€²è¡Œå•Ÿå‹•ç‹€æ…‹\t\t\t\t\t\t                                                            |\n|  -P                       \t\t\t\t\t\t\t\t| é¡¯ç¤ºå¯¦æ™‚é€Ÿåº¦                                                                                                    \t\t\t   \t|\n|  --allow-non-empty \t\t\t\t\t\t\t\t\t    | å…è¨±æ›è¼‰åˆ°éç©ºç›®éŒ„ï¼ˆNot Windowsï¼‰\t\t                                                                                        |\n|  --allow-other\t\t\t\t\t\t\t\t\t        | å…è¨±å…¶ä»–ç”¨æˆ¶è¨ªå•\t\t\t\t                                    \t                                                        |\n|  --vfs-cache-mode full\t\t\t\t\t\t\t\t    | ç·©å­˜æ¨¡å¼ off|minimal|writes|full (default off)\t\t\t\t\t\t                                                        |\n|  --vfs-cache-max-size 500M \t\t\t\t\t\t    \t| ç·©å­˜ä¸­å°è±¡çš„æœ€å¤§ç¸½å¤§å°ï¼ˆé»˜èªé—œé–‰ï¼‰\t\t                                                                                    |\n|  --dir-cache-time 5m   \t\t\t\t\t\t\t    \t| ç·©å­˜æ™‚é–“\t\t\t\t\t\t\t                            \t                                                            |\n|  --poll-interval 1m \t\t\t\t                        | åœ¨è¼ªè©¢æ›´æ”¹ä¹‹é–“ç­‰å¾…çš„æ™‚é–“ã€‚ å¿…é ˆå°æ–¼ dir-cache-time\t                                                                        |\n|  --vfs-read-chunk-size-limit off                          | æœ€å¤§ç·©å­˜å¤§å° (é»˜èªæ˜¯ \"off\")                                                                                                   |\n|  --log-level INFO \t\t\t\t\t\t\t\t\t    | å…è¨±æ›è¼‰åˆ°éç©ºç›®éŒ„ï¼ˆNot Windowsï¼‰\t\t                                                                                        |\n|  --log-format LIST\t\t\t\t\t\t\t\t\t    | å¯é…ç½® date, time, microseconds, longfile, shortfile, UTC. é»˜èªæ˜¯ â€œdate,timeâ€\t\t\t\t                                |\n|  --log-file /var/log/rclone/rclone.log\t\t\t\t\t| ç·©å­˜æ¨¡å¼ off|minimal|writes|full (default off)\t\t\t\t\t\t                                                        |\n|  --bwlimit 40M \t\t\t\t\t\t    \t            | é™åˆ¶é€Ÿåº¦40MB\t\t                                                                                                            |\n|  --umask 022   \t\t\t\t\t\t\t    \t        | æ¯ä¸€å€‹æ–°ç”¢ç”Ÿçš„æª”æ¡ˆæœƒæ˜¯644 (rw-r--r--)\t\t\t\t\t\t\t                            \t                                |\n|  Restart=always \t\t\t\t                            | è‡ªå‹•å•Ÿå‹•\t                                                                                                                    |\n\n\n***\n\n","tags":["Rclone"],"categories":["Rclone"]},{"title":"Rclone - æ›è¼‰ google drive ä½œç‚ºæœ¬åœ°ç¡¬ç¢Ÿä½¿ç”¨ ","url":"/blog.github.io/2023/02/01/Rcloneæ›è¼‰google_driveä½œç‚ºæœ¬åœ°ç¡¬ç¢Ÿä½¿ç”¨/","content":"\n***\n***\n\n**æ›è¼‰ google drive ä½œç‚ºæœ¬åœ°ç¡¬ç¢Ÿä½¿ç”¨ (mount google drive)**\n=====\n\n***\n***\n\n[Rclone å®˜æ–¹æ•™å­¸](https://rclone.org/commands/rclone_mount/)\n\n***\n***\n\n**è¨­å®šä¸¦é©—è­‰å¥½ rcloneæ­¥é©Ÿ :**\n-----\n\n***\n***\n\n[è¨­å®šæ­¥é©Ÿè«‹åƒè€ƒ](https://laurance.eu.org/posts/rclone%E9%81%A0%E7%AB%AF%E5%82%99%E4%BB%BD%E8%87%B3%E9%9B%B2%E7%AB%AF_drive/)\n\n***\n***\n\n**å®‰è£ä¾è³´**\n\n```sql\nyum install fuse\n```\n\n***\n***\n    \n**å°‡ drive mount åˆ°æœ¬åœ° linux**\n\n```yaml\nrclone mount  <gdriveå‰›å‰›è¼¸å…¥çš„ä»£ç¨±>:<æ ¹ç›®éŒ„ä»¥ä¸‹çš„é›²ç«¯è·¯å¾‘> <mount æœ¬åœ°çš„è·¯å¾‘>>rclone mount  <gdriveå‰›å‰›è¼¸å…¥çš„ä»£ç¨±>:<æ ¹ç›®éŒ„ä»¥ä¸‹çš„é›²ç«¯è·¯å¾‘> <mount æœ¬åœ°çš„è·¯å¾‘>\n```\n    \n```sql\nrclone mount hward: /home/web-note --allow-other --allow-non-empty --vfs-cache-mode full --daemon\n```\n\n***\n***\n\n\n    \n**å–æ¶ˆæ›è¼‰æŒ‡ä»¤**\n\n```yaml\nfusermount -qzu {æœ¬åœ°è·¯å¾‘}\n```\n\n\n\n***\n***\n    \n**Mount ä¹‹å‰**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/xgIqXU3TjwYtnoR.png)\n\n***\n***\n\n**Mount ä¹‹å¾Œ**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/ohMGcs8QE9mOx4R.png)\n\n***\n***\n\n**å¸¸ç”¨èªæ³•**\n-----\n\n***\n***\n\n   \n|  rcloneå‘½ä»¤ç¯„ä¾‹\t                                        | åŠŸèƒ½\t\t\t\t\t\t\t\t                                                                                            |\n|  ----------------------------------------------------- \t| ---------------------------------------------------------------------------------------------------------------               |\n|  --allow-other\t\t\t\t\t\t\t\t        \t| å…è¨±éç•¶å‰ rclone ç”¨æˆ¶å¤–å…¶å®ƒç”¨æˆ¶é€²è¡Œè¨ªå•\t\t\t\t\t\t                                                            \t|\n|  --attr-timeout 5m        \t\t\t\t\t\t\t\t| æ–‡ä»¶å±¬æ€§ç·©å­˜ï¼Œï¼ˆå¤§å°ï¼Œä¿®æ”¹æ™‚é–“ç­‰ï¼‰çš„æ™‚é–“ã€‚å¦‚æœ VPS é…ç½®æ¯”è¼ƒä½ï¼Œå»ºè­°é©ç•¶æé«˜é€™å€‹å€¼ï¼Œé¿å…éå¤šå…§æ ¸äº¤äº’ï¼Œé™ä½è³‡æºä½”ç”¨\t\t\t   \t|\n|  -vfs-cache-mode full \t\t\t\t\t\t\t\t\t| é–‹å•Ÿ VFS æ–‡ä»¶ç·©å­˜ï¼Œå¯æ¸›å°‘ rclone èˆ‡ API äº¤äº’ï¼ŒåŒæ™‚å¯æé«˜æ–‡ä»¶è®€å¯«æ•ˆç‡\t\t                                                    |\n|  --vfs-cache-max-age 24h\t\t\t\t\t\t\t\t\t| VFS æ–‡ä»¶ç·©å­˜æ™‚é–“ï¼Œé€™è£¡è¨­ç½® 24 å°æ™‚ï¼Œå¦‚æœæ–‡ä»¶å¾ˆå°‘æ›´æ”¹ï¼Œå»ºè­°è¨­ç½®æ›´é•·æ™‚é–“\t\t\t\t                                    \t|\n|  --vfs-cache-max-size 10G\t\t\t\t\t\t\t\t    | VFSæ–‡ä»¶ç·©å­˜ä¸Šé™å¤§å°ï¼Œå»ºè­°ä¸è¶…éç•¶å‰ç©ºé¤˜ç£ç›¤çš„50%\t\t\t\t\t\t                                                        |\n|  vfs-read-chunk-size-limit 100M\t\t\t\t\t\t\t| åˆ†å¡Šè®€å–å¤§å°ï¼Œé€™è£¡è¨­ç½®çš„æ˜¯100Mï¼Œå¯æé«˜æ–‡ä»¶è®€çš„æ•ˆç‡ï¼Œæ¯”å¦‚1Gçš„æ–‡ä»¶ï¼Œå¤§è‡´åˆ†ç‚º10å€‹å¡Šé€²è¡Œè®€å–ï¼Œä½†èˆ‡æ­¤åŒæ™‚APIè«‹æ±‚æ¬¡æ•¸ä¹Ÿæœƒå¢å¤š\t\t|\n|  --buffer-size 100M   \t\t\t\t\t\t\t    \t| å…§å­˜ç·©å­˜ï¼Œå¦‚æœæ‚¨å…§å­˜æ¯”è¼ƒå°ï¼Œå¯é™ä½æ­¤å€¼ï¼Œå¦‚æœå…§å­˜æ¯”è¼ƒå¤§ï¼Œå¯é©ç•¶æé«˜\t\t\t\t\t\t\t                            \t|\n|  --daemon\t\t\t\t                                   \t| æŒ‡å¾Œå°æ–¹å¼é‹è¡Œ\t                                                                                                            |\n\n\n***\n***\n\n***\n\n","tags":["Rclone"],"categories":["Rclone"]},{"title":"Nginx - 405 Not Allowed è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2023/01/29/Nginx-405_Not_Allowed/","content":"\n<!--more-->\nè·¨åŸŸå­˜å–éŒ¯èª¤ 405 Not Allowed\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/3tg5clQRW7uoHIw.png)\n\n***\n***\n\n**è§£æ±ºæ–¹æ³•**\n\n***\n\n**å…è¨±éœæ…‹é ä½¿ç”¨ POST æ–¹æ³•**\n\n```sql\n  # To allow POST on static pages\n\n  error_page  405    :200 $uri ;\n```\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"CentOS - å¦‚ä½•å°‡å®‰è£åŒ…åŠå…¶ä¾è³´åŒ…ä¸‹è¼‰åˆ°æœ¬åœ°","url":"/blog.github.io/2023/01/26/CentOS-å¦‚ä½•å°‡å®‰è£åŒ…åŠå…¶ä¾è³´åŒ…ä¸‹è¼‰åˆ°æœ¬åœ°/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹ å¦‚ä½•å°‡ RPMä¾è³´åŒ… ä¸‹è¼‰åˆ°æœ¬åœ°ä¿å­˜\"\n\n\n# é€šé yum å‘½ä»¤çš„ Downloadonly æ’ä»¶ä¸‹è¼‰ RPM è»Ÿä»¶åŒ…åŠå…¶æ‰€æœ‰ä¾è³´åŒ…\n\n\n## å®‰è£å·¥å…·åŒ…\n\n```sql\nyum install yum-plugin-downloadonly yum-utils -y\n```\n    \n## å°‡ *.repo å®‰è£åˆ°æŒ‡å®šç›®éŒ„ä¸‹\n\n```sql\nyum install --downloadonly + --downloaddir=è»Ÿä»¶åŒ…ä½ç½®[å¯é¸] + è»Ÿä»¶åŒ…å(å¯åŠ ä¸Šç‰ˆæœ¬è™Ÿï¼ŒæŒ‡å®šç‰ˆæœ¬)\n    \nyum install --downloadonly --downloaddir=/root/mysql517_repo/ mysql-server mysql-client mysql-devel*\n```\n    \n ![](https://s2.loli.net/2024/04/25/sqzx5rQTpaewBnF.png)\n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"Redis - ä¸»å¾è·Ÿéš¨å»ºç«‹","url":"/blog.github.io/2023/01/20/Redis-ä¸»å¾è·Ÿéš¨å»ºç«‹/","content":"\n***\n***\n\n\n\n**Redis ä¸»å¾è¨­å®šåªéœ€æ›´å‹• Slave è¨­å®šå³å¯**\n\n\n\n***\n***\n\n**Slave Server:**\n=====\n\n***\n***\n\n**é—œé–‰ redis-slave-server**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/BWyQteYJrf9RFIq.png)\n\n***\n***\n\n**ä¿®æ”¹ redis è¨­å®šæª”**\n\n```sql\nvim /usr/local/redis/etc/redis.conf\n```\n\n***\n***\n\n**å°‡ redis ç·¨è™Ÿ**\n\n```sql\n:set nu\n```\n\n***\n***\n\n**åœ¨è¨­å®šæª”çš„ç¬¬ `327 è¡Œ` å¢åŠ è¨­å®š `REPLICATION å€å¡Š`**\n\n```sql\nslave-read-only no\n```\n\n***\n***\n    \n**è¨»è§£ç¬¬ `326 è¡Œ` è¨­å®š**\n\n```sql\n#replica-read-only yes\n```\n\n***\n***\n\n**å†é–‹å•Ÿ redis æœå‹™**\n\n```sql\nsystemctl start redis\n```\n\n***\n***\n    \n**ç™»å…¥ä¸¦å°‡ Slave è³‡æ–™æ¸…ç©º**\n\n```yaml\nredis-cli -h 127.0.0.1 -p 6739 -a å¯†ç¢¼\n    \nflushall\n    \nOK\n```\n\n***\n***\n\n**å†å°‡æœå‹™é—œé–‰**\n\n```sql\nsystemctl stop redis\n```\n\n***\n***\n    \n**åœ¨è¨­å®šæª”çš„ç¬¬ `313 è¡Œ` å¢åŠ è¨­å®š**\n\n```sql\nslave-serve-stale-data yes\n```\n\n***\n***\n    \n**è¨»è§£ç¬¬ `312 è¡Œ`è¨­å®š**\n\n```sql\n#replica-serve-stale-data yes\n```\n\n***\n***\n   \n**åœ¨è¨­å®šæª”çš„ç¬¬ 290 & 291 è¡Œå¢åŠ è¨­å®š (Masterè³‡è¨Š)**\n\n```sql\nslaveof 172.16.0.222 6739\n    \nmasterauth passwd\n```\n\n***\n***\n    \n**åœ¨è¨­å®šæª”çš„ç¬¬ `327 è¡Œ` ä¿®æ”¹è¨­å®š**\n\n```sql\nslave-read-only yes\n```\n\n***\n***\n    \n**é–‹å•Ÿ redis æœå‹™**\n\n```sql\nsystemctl start redis\n```\n\n***\n***\n    \n**é€²å»æŸ¥çœ‹æ˜¯å¦å·²é‡è·Ÿ**\n\n```yaml\nredis-cli -h 127.0.0.1 -p 9736 -a å¯†ç¢¼\n    \n127.0.0.1:9736> info Replication\n```\n\n***\n***\n    \n**ä»¥ä¸‹åƒæ•¸è¦æ˜¯é€™æ¨£ æ‰ç®—æ­£å¸¸è·Ÿéš¨**\n\n```sql\nmaster_link_status:up\n    \nmaster_last_io_seconds_ago:0\n    \nmaster_sync_in_progress:0\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/Npxk7JFKHcCeVDP.png)\n\n***\n***\n\n`PS:é‡æ–°è·Ÿéš¨ç‹€æ…‹æœƒæ¯”è¼ƒæ…¢æ›´æ–° (å¤§ç´„è¦ç­‰ 2åˆ†é˜ ç‹€æ…‹æ‰æœƒè®Šæˆ up)`\n\n***\n***\n\n\n\n***\n\n","tags":["Redis"],"categories":["Cache"]},{"title":"MySQL - ä¸»å¾å ±éŒ¯ Error 'Duplicate entry 'XXXXX' for key 'XXX'' on query. ( error 1062 ) è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2023/01/19/Mysql-1062_ä¸»å¾éŒ¯èª¤Error_'Duplicate_entry_'XXXXX'_for_key_'XXX''_on_query/","content":"\n<!--more-->\nerror 1062 ---- ä¸»éµæ²–çªï¼Œå‡ºç¾é€™ç¨®æƒ…æ³å°±æ˜¯å¾åº«å‡ºç¾æ’å…¥æ“ä½œï¼Œä¸»åº«åˆé‡æ–°ä¾†äº†ä¸€é `iothread` æ²’å•é¡Œ `sqlthread` å‡ºéŒ¯\n\n***\n***\n\n**è§£æ±ºæ–¹æ¡ˆ:**\n=====\n\n***\n***\n\n```sql\nstop slave;\n\nset global sql_slave_skip_counter=1;\n\nstart slave;\n```\n\n***\n***\n\n\n\n### ä¸Šè¿°æŒ‡ä»¤çš„ SET GLOBAL sql_slave_skip_counter: 1; ä»£è¡¨çš„æ˜¯ 1 å€‹ event\n\n\n### åœ¨ Innodb ä¸­ï¼Œä¸€å€‹ event ä»£è¡¨çš„æ˜¯ä¸€çµ„ sql æŒ‡ä»¤ï¼Œä¸¦éä¸€ç­† sql\n\n\n\n***\n***\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MySQL - å ±éŒ¯ Row size too large (> 8126). Changing some columns to TEXT or BLOB or using ROW_FORMAT ( error 1118 ) è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2023/01/19/Mysql-Error_1118_Row_size_too_large_8126/","content":"\n***\n***\n\n**è§£æ±ºæ–¹æ³•: é—œé–‰ mysql åš´æ ¼æ¨¡å¼**\n=====\n\n***\n***\n\n**æŸ¥çœ‹ innodb_strict_mode åƒæ•¸æ˜¯å¦ç‚º on**\n-----\n\n```sql\nshow variables like '%innodb_strict_mode%';\n```\n\n***\n***\n    \n**é—œé–‰åš´æ ¼æ¨¡å¼:**\n-----\n\n```sql\nvim /etc/my.cnf\n```\n    \n```sql\n[mysqld] >> innodb_strict_mode: 0\n```\n\n***\n***\n\n**ç™»å…¥ mysql å¾ŒæŸ¥çœ‹è¨­å®š `OFF`**\n-----\n\n```sql\nshow variables like '%innodb_strict_mode%';\n```\n\n***\n***\n    \n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MySQL - ä¸»å¾å ±éŒ¯ Table 'mysql.gtid_slave_pos' doesn't exist in engine ( error 1932 ) è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2023/01/19/Mysql-Error_Table_'mysql_gtid_slave_pos'_doesn't_exist_in_engine/","content":"\n***\n***\n\nè§£æ±ºæ–¹æ¡ˆ:\n=====\n\n***\n***\n\n**å°‡ DB æ‰€æœ‰è³‡æ–™åº«å‚™ä»½ç‚º SQLæª”**\n-----\n\n```sql\nmysqldump -uroot -p -S /var/lib/mysql/master01/mysql01.sock --all-databases > all_databases.sql\n```\n\n***\n***\n    \n**å°‡ DB ç æ‰ é‡æ–°ç”Ÿæˆé è¨­è³‡æ–™åº«**\n-----\n\n```sql\nmysql_install_db --user=mysql --datadir=/var/lib/mysql/master01\n```\n\n***\n***\n\n**å†æ¬¡å°‡ SQLæª”é‡æ–°åŒ¯å…¥**\n-----\n\n```sql\nmysql -uroot -p -S /var/lib/mysql/master01/mysql01.sock < all_databases.sql\n```\n\n***\n***\n    \n**æª¢æŸ¥æ‰€æœ‰è³‡æ–™åº«æ˜¯å¦æœ‰éŒ¯èª¤**\n-----\n\n```sql\nmysqlcheck -c --all-databases -uroot -p -S mysql01.sock\n```\n\n***\n***\n    \n    \n    \n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"Redis - å¸¸ç”¨æŒ‡ä»¤","url":"/blog.github.io/2023/01/19/Redis-å¸¸ç”¨æŒ‡ä»¤/","content":"\n***\n***\n\n**å¸¸ç”¨èªæ³•**\n=====\n\n***\n***\n\n|\tæŒ‡ä»¤\t\t\t\t\t|\tèªªæ˜\t\t\t\t\t\t|\n|   ----------------------  |   --------------------------  |\n|\tkeys *\t\t\t\t\t|\tæŸ¥çœ‹æ‰€æœ‰éµ\t\t\t\t\t|\n|\texists <key>\t\t\t|\tåˆ¤æ–·æŸå€‹éµæ˜¯å¦å­˜åœ¨\t\t\t|\n|\ttype <key>\t\t\t\t|\tæŸ¥çœ‹éµçš„é¡å‹\t\t\t\t|\n|\tdel <key>\t\t\t\t|\tåˆªé™¤æŸå€‹éµ\t\t\t\t\t|\n|\texpire <key> <seconds>\t|\tç‚ºéµè¨­ç½®éæœŸæ™‚é–“\t\t\t|\n|\tttl <key>\t\t\t\t|\tæŸ¥çœ‹é‚„æœ‰å¤šå°‘ç§’éæœŸ\t\t\t|\n|\tdbsize\t\t\t\t\t|\tæŸ¥çœ‹ç•¶å‰æ•¸æ“šåº«çš„keyçš„æ•¸é‡\t|\n\n***\n***\n\n**åˆªé™¤æŒ‡ä»¤**\n=====\n\n***\n***\n\n|\tæŒ‡ä»¤\t\t\t\t\t|\tèªªæ˜\t\t\t\t\t\t|\n|   ----------------------  |   --------------------------  |\n|\tflushdb\t\t\t\t\t|\tæ¸…ç©ºç•¶å‰åº«\t\t\t\t\t|\n|\tflushall\t\t\t\t|\tæ¸…ç©ºæ‰€æœ‰åº«\t\t\t\t\t|\n\n***\n***\n\n***\n\n","tags":["Redis"],"categories":["Cache"]},{"title":"DNS_SERVER - MyDNS æœå‹™å™¨çš„å¯è¦–åŒ–ç®¡ç† by CentOS6","url":"/blog.github.io/2022/12/30/DNS-MyDNSæœå‹™å™¨çš„å¯è¦–åŒ–ç®¡ç†-CentOS6/","content":"\n<!--more-->\n\"(MySQL -5.0.77 + Apache-2.2.27 + PHP-5.2.5 + MyDNSConfig-1.1.0 + mydns-1.2.8.31)\"\n\n\n# å®‰è£é †åºç‚º MySQL > Apache > PHP > MyDNSConfig > mydns\n\n\n\n# å®‰è£ä»¥ä¸‹å¥—ä»¶æ‰€éœ€ä¾è³´åŒ…\n\n```sql\nyum -y install gcc gcc-c++  make cmake automake autoconf kernel-devel ncurses-devel libxml2-devel openssl-devel curl-devel libjpeg-devel libpng-devel  pcre-devel libtool libtool-libs freetype-devel gd zlib-devel file bison patch mlocate flex diffutils   readline-devel glibc-devel glib2-devel bzip2-devel gettext-devel libcap-devel openldap openldap-devel libxslt-devel sqlite-devel  libevent libevent-devel\n```\n\n\n\n# MySQL -5.0.77 : \n\n[MySQLå®˜ç¶²å®‰è£åŒ…] https://downloads.mysql.com/archives/community/\n\n\n## ç§»é™¤åŸæœ¬çš„ç‰ˆæœ¬ (å¦å‰‡æœƒè¡çª)\n\n```sql\nrpm -qa |grep mysql\n\nrpm -e --nodeps mysql-libs-5.1.73-7.el6.x86_64\n```\n\n## ä¸‹è¼‰å®‰è£åŒ…\n\n```sql\nwget https://downloads.mysql.com/archives/get/p/23/file/MySQL-server-community-5.0.77-0.rhel5.x86_64.rpm\n    \nwget https://downloads.mysql.com/archives/get/p/23/file/MySQL-client-community-5.0.77-0.rhel5.x86_64.rpm\n    \nwget https://downloads.mysql.com/archives/get/p/23/file/MySQL-devel-community-5.0.77-0.rhel5.x86_64.rpm\n    \nwget https://downloads.mysql.com/archives/get/p/23/file/MySQL-shared-compat-5.0.77-0.rhel5.x86_64.rpm\n```\n\n## è§£å£“\n\n```sql\nrpm -ivh MySQL-devel-community-5.0.77-0.rhel5.x86_64.rpm\n    \nrpm -ivh MySQL-shared-compat-5.0.77-0.rhel5.x86_64.rpm\n    \nrpm -ivh MySQL-server-community-5.0.77-0.rhel5.x86_64.rpm\n    \nrpm -ivh MySQL-client-community-5.0.77-0.rhel5.x86_64.rpm\n```\n    \n## æŸ¥çœ‹ç‰ˆæœ¬\n\n```sql\nmysql -V\n```\n    \n## å•Ÿå‹•æœå‹™\n\n```sql\nmysqld_safe &\n```\n\n    \n## è¨­ç½®rootå¯†ç¢¼\n\n```sql\nmysqladmin -u root password '123456'\n```\n\n## åœ¨ MySQL ä»‹é¢ : å»ºç«‹ä½¿ç”¨è€…åŠæ¬Šé™\n    \n```sql\nmysql>  GRANT all privileges ON mydns.* TO mydns@localhost IDENTIFIED BY '123456';\n\nmysql>  flush privileges;\n```\n\n## åœ¨ MySQL ä»‹é¢ : å»ºç«‹databaseå­˜æ”¾mydns\n\n```sql\nmysql> create database mydns;\n```\n\n***\n\n\n# Apache-2.2.27 :\n\n\n\n## ä¸‹è¼‰ä¾è³´åŒ…\n\n```sql\nwget http://archive.apache.org/dist/apr/apr-1.4.5.tar.gz  \n    \ntar -zxf apr-1.4.5.tar.gz  \n    \ncd  apr-1.4.5  \n    \n./configure --prefix=/usr/local/apr  \n    \nmake && make install \n    \n   ***\n   \nwget http://archive.apache.org/dist/apr/apr-util-1.3.12.tar.gz  \n    \ntar -zxf apr-util-1.3.12.tar.gz  \n    \ncd apr-util-1.3.12  \n    \n./configure --prefix=/usr/local/apr-util -with-apr=/usr/local/apr/bin/apr-1-config  \n    \nmake && make install\n    \n   ***\n   \nwget http://jaist.dl.sourceforge.net/project/pcre/pcre/8.10/pcre-8.10.zip  \n    \nunzip -o pcre-8.10.zip  \n    \ncd pcre-8.10  \n    \n./configure --prefix=/usr/local/pcre  \n    \nmake && make install\n```\n     \n## è§£å£“ Apache\n\n```sql\nwget http://archive.apache.org/dist/httpd/httpd-2.2.27.tar.gz\n\ntar zxvf httpd-2.2.27.tar.gz\n    \ncd httpd-2.2.27/\n    \n./configure --prefix=/usr/local/web/apache2 --enable-ssl --enable-so  --enable-vhost-alias  --with-mpm=prefork --with-apr=/usr/local/apr/ --with-apr-util=/usr/local/apr-util/ --with-z --enable-proxy --enable-rewrite --with-pcre\n    \nmake && make install\n```\n        \n## æŸ¥çœ‹ç‰ˆæœ¬\n\n```sql\n/usr/local/web/apache2/bin/apachectl -v\n```\n    \n## æ›´æ”¹ apache ä¸»è¨­å®šæª”\n\n```sql\nmv /usr/local/web/apache2/conf/httpd.conf /usr/local/web/apache2/conf/httpd.conf.bak\n    \nvim /usr/local/web/apache2/conf/httpd.conf\n```\n\n***\n\n```sql\n#\n# This is the main Apache HTTP server configuration file.  It contains the\n# configuration directives that give the server its instructions.\n# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.\n# In particular, see \n# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>\n# for a discussion of each configuration directive.\n#\n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n# Configuration and logfile names: If the filenames you specify for many\n# of the server's control files begin with \"/\" (or \"drive:/\" for Win32), the\n# server will use that explicit path.  If the filenames do *not* begin\n# with \"/\", the value of ServerRoot is prepended -- so \"logs/foo_log\"\n# with ServerRoot set to \"/usr/local/web/apache2\" will be interpreted by the\n# server as \"/usr/local/web/apache2/logs/foo_log\".\n\n#\n# ServerRoot: The top of the directory tree under which the server's\n# configuration, error, and log files are kept.\n#\n# Do not add a slash at the end of the directory path.  If you point\n# ServerRoot at a non-local disk, be sure to point the LockFile directive\n# at a local disk.  If you wish to share the same ServerRoot for multiple\n# httpd daemons, you will need to change at least LockFile and PidFile.\n#\nServerRoot \"/usr/local/web/apache2\"\n\n#\n# Listen: Allows you to bind Apache to specific IP addresses and/or\n# ports, instead of the default. See also the <VirtualHost>\n# directive.\n#\n# Change this to Listen on specific IP addresses as shown below to \n# prevent Apache from glomming onto all bound IP addresses.\n#\n#Listen 12.34.56.78:80\nListen 80\n\n#\n# Dynamic Shared Object (DSO) Support\n#\n# To be able to use the functionality of a module which was built as a DSO you\n# have to place corresponding `LoadModule' lines at this location so the\n# directives contained in it are actually available _before_ they are used.\n# Statically compiled modules (those listed by `httpd -l') do not need\n# to be loaded here.\n#\n# Example:\n# LoadModule foo_module modules/mod_foo.so\nLoadModule php5_module        modules/libphp5.so\n#\n\n<IfModule !mpm_netware_module>\n<IfModule !mpm_winnt_module>\n#\n# If you wish httpd to run as a different user or group, you must run\n# httpd as root initially and it will switch.  \n#\n# User/Group: The name (or #number) of the user/group to run httpd as.\n# It is usually good practice to create a dedicated user and group for\n# running httpd, as with most system services.\n#\nUser daemon\nGroup daemon\n\n</IfModule>\n</IfModule>\n\n# 'Main' server configuration\n#\n# The directives in this section set up the values used by the 'main'\n# server, which responds to any requests that aren't handled by a\n# <VirtualHost> definition.  These values also provide defaults for\n# any <VirtualHost> containers you may define later in the file.\n#\n# All of these directives may appear inside <VirtualHost> containers,\n# in which case these default settings will be overridden for the\n# virtual host being defined.\n#\n\n#\n# ServerAdmin: Your address, where problems with the server should be\n# e-mailed.  This address appears on some server-generated pages, such\n# as error documents.  e.g. admin@your-domain.com\n#\nServerAdmin you@example.com\n\n#\n# ServerName gives the name and port that the server uses to identify itself.\n# This can often be determined automatically, but we recommend you specify\n# it explicitly to prevent problems during startup.\n#\n# If your host doesn't have a registered DNS name, enter its IP address here.\n#\nServerName www.example.com:80\n\n#\n# DocumentRoot: The directory out of which you will serve your\n# documents. By default, all requests are taken from this directory, but\n# symbolic links and aliases may be used to point to other locations.\n#\nDocumentRoot \"/usr/local/web/apache2//htdocs\"\n\n#\n# Each directory to which Apache has access can be configured with respect\n# to which services and features are allowed and/or disabled in that\n# directory (and its subdirectories). \n#\n# First, we configure the \"default\" to be a very restrictive set of \n# features.  \n#\n<Directory />\n    Options FollowSymLinks\n    AllowOverride None\n    Order allow,deny\n    allow from all\n</Directory>\n\n#\n# Note that from this point forward you must specifically allow\n# particular features to be enabled - so if something's not working as\n# you might expect, make sure that you have specifically enabled it\n# below.\n#\n\n#\n# This should be changed to whatever you set DocumentRoot to.\n#\n<Directory \"/usr/local/web/apache2//htdocs\">\n    #\n    # Possible values for the Options directive are \"None\", \"All\",\n    # or any combination of:\n    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews\n    #\n    # Note that \"MultiViews\" must be named *explicitly* --- \"Options All\"\n    # doesn't give it to you.\n    #\n    # The Options directive is both complicated and important.  Please see\n    # http://httpd.apache.org/docs/2.2/mod/core.html#options\n    # for more information.\n    #\n    Options Indexes FollowSymLinks\n\n    #\n    # AllowOverride controls what directives may be placed in .htaccess files.\n    # It can be \"All\", \"None\", or any combination of the keywords:\n    #   Options FileInfo AuthConfig Limit\n    #\n    AllowOverride None\n\n    #\n    # Controls who can get stuff from this server.\n    #\n    Order allow,deny\n    Allow from all\n\n</Directory>\n\n#\n# DirectoryIndex: sets the file that Apache will serve if a directory\n# is requested.\n#\n<IfModule dir_module>\n    DirectoryIndex index.html index.php indexs.php\n</IfModule>\n\n#\n# The following lines prevent .htaccess and .htpasswd files from being \n# viewed by Web clients. \n#\n<FilesMatch \"^\\.ht\">\n    Order allow,deny\n    Deny from all\n    Satisfy All\n</FilesMatch>\n\n#\n# ErrorLog: The location of the error log file.\n# If you do not specify an ErrorLog directive within a <VirtualHost>\n# container, error messages relating to that virtual host will be\n# logged here.  If you *do* define an error logfile for a <VirtualHost>\n# container, that host's errors will be logged there and not here.\n#\nErrorLog \"logs/error_log\"\n\n#\n# LogLevel: Control the number of messages logged to the error_log.\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#\nLogLevel warn\n\n<IfModule log_config_module>\n    #\n    # The following directives define some format nicknames for use with\n    # a CustomLog directive (see below).\n    #\n    LogFormat \"%h \\\"%{x-forwarded-for}i\\\" %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\n\n    <IfModule logio_module>\n      # You need to enable mod_logio.c to use %I and %O\n      LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" %I %O\" combinedio\n    </IfModule>\n\n    #\n    # The location and format of the access logfile (Common Logfile Format).\n    # If you do not define any access logfiles within a <VirtualHost>\n    # container, they will be logged here.  Contrariwise, if you *do*\n    # define per-<VirtualHost> access logfiles, transactions will be\n    # logged therein and *not* in this file.\n    #\n    CustomLog \"logs/access_log\" common\n\n    #\n    # If you prefer a logfile with access, agent, and referer information\n    # (Combined Logfile Format) you can use the following directive.\n    #\n    #CustomLog \"logs/access_log\" combined\n</IfModule>\n\n<IfModule alias_module>\n    #\n    # Redirect: Allows you to tell clients about documents that used to \n    # exist in your server's namespace, but do not anymore. The client \n    # will make a new request for the document at its new location.\n    # Example:\n    # Redirect permanent /foo http://www.example.com/bar\n\n    #\n    # Alias: Maps web paths into filesystem paths and is used to\n    # access content that does not live under the DocumentRoot.\n    # Example:\n    # Alias /webpath /full/filesystem/path\n    #\n    # If you include a trailing / on /webpath then the server will\n    # require it to be present in the URL.  You will also likely\n    # need to provide a <Directory> section to allow access to\n    # the filesystem path.\n\n    #\n    # ScriptAlias: This controls which directories contain server scripts. \n    # ScriptAliases are essentially the same as Aliases, except that\n    # documents in the target directory are treated as applications and\n    # run by the server when requested rather than as documents sent to the\n    # client.  The same rules about trailing \"/\" apply to ScriptAlias\n    # directives as to Alias.\n    #\n    ScriptAlias /cgi-bin/ \"/usr/local/web/apache2//cgi-bin/\"\n\n</IfModule>\n\n<IfModule cgid_module>\n    #\n    # ScriptSock: On threaded servers, designate the path to the UNIX\n    # socket used to communicate with the CGI daemon of mod_cgid.\n    #\n    #Scriptsock logs/cgisock\n</IfModule>\n\n#\n# \"/usr/local/web/apache2/cgi-bin\" should be changed to whatever your ScriptAliased\n# CGI directory exists, if you have that configured.\n#\n<Directory \"/usr/local/web/apache2//cgi-bin\">\n    AllowOverride None\n    Options None\n    Order allow,deny\n    Allow from all\n</Directory>\n\n#\n# DefaultType: the default MIME type the server will use for a document\n# if it cannot otherwise determine one, such as from filename extensions.\n# If your server contains mostly text or HTML documents, \"text/plain\" is\n# a good value.  If most of your content is binary, such as applications\n# or images, you may want to use \"application/octet-stream\" instead to\n# keep browsers from trying to display binary files as though they are\n# text.\n#\nDefaultType text/plain\n\n<IfModule mime_module>\n    #\n    # TypesConfig points to the file containing the list of mappings from\n    # filename extension to MIME-type.\n    #\n    TypesConfig conf/mime.types\n\n    #\n    # AddType allows you to add to or override the MIME configuration\n    # file specified in TypesConfig for specific file types.\n    #\n    #AddType application/x-gzip .tgz\n    #\n    # AddEncoding allows you to have certain browsers uncompress\n    # information on the fly. Note: Not all browsers support this.\n    #\n    #AddEncoding x-compress .Z\n    #AddEncoding x-gzip .gz .tgz\n    #\n    # If the AddEncoding directives above are commented-out, then you\n    # probably should define those extensions to indicate media types:\n    #\n    AddType application/x-compress .Z\n    AddType application/x-gzip .gz .tgz\n    AddType application/x-httpd-php .php .phtml\n    AddType application/x-httpd-php-source .phps\n\n    #\n    # AddHandler allows you to map certain file extensions to \"handlers\":\n    # actions unrelated to filetype. These can be either built into the server\n    # or added with the Action directive (see below)\n    #\n    # To use CGI scripts outside of ScriptAliased directories:\n    # (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\n    #\n    #AddHandler cgi-script .cgi\n\n    # For type maps (negotiated resources):\n    #AddHandler type-map var\n\n    #\n    # Filters allow you to process content before it is sent to the client.\n    #\n    # To parse .shtml files for server-side includes (SSI):\n    # (You will also need to add \"Includes\" to the \"Options\" directive.)\n    #\n    #AddType text/html .shtml\n    #AddOutputFilter INCLUDES .shtml\n</IfModule>\n\n#\n# The mod_mime_magic module allows the server to use various hints from the\n# contents of the file itself to determine its type.  The MIMEMagicFile\n# directive tells the module where the hint definitions are located.\n#\n#MIMEMagicFile conf/magic\n\n#\n# Customizable error responses come in three flavors:\n# 1) plain text 2) local redirects 3) external redirects\n#\n# Some examples:\n#ErrorDocument 500 \"The server made a boo boo.\"\n#ErrorDocument 404 /missing.html\n#ErrorDocument 404 \"/cgi-bin/missing_handler.pl\"\n#ErrorDocument 402 http://www.example.com/subscription_info.html\n#\n\n#\n# MaxRanges: Maximum number of Ranges in a request before\n# returning the entire resource, or one of the special\n# values 'default', 'none' or 'unlimited'.\n# Default setting is to accept 200 Ranges.\n#MaxRanges unlimited\n\n#\n# EnableMMAP and EnableSendfile: On systems that support it, \n# memory-mapping or the sendfile syscall is used to deliver\n# files.  This usually improves server performance, but must\n# be turned off when serving from networked-mounted \n# filesystems or if support for these functions is otherwise\n# broken on your system.\n#\n#EnableMMAP off\n#EnableSendfile off\n\n# Supplemental configuration\n#\n# The configuration files in the conf/extra/ directory can be \n# included to add extra features or to modify the default configuration of \n# the server, or you may simply copy their contents here and change as \n# necessary.\n\n# Server-pool management (MPM specific)\nInclude conf/extra/httpd-mpm.conf\n\n# Multi-language error messages\nInclude conf/extra/httpd-multilang-errordoc.conf\n\n# Fancy directory listings\n#Include conf/extra/httpd-autoindex.conf\n\n# Language settings\nInclude conf/extra/httpd-languages.conf\n\n# User home directories\n#Include conf/extra/httpd-userdir.conf\n\n# Real-time info on requests and configuration\n#Include conf/extra/httpd-info.conf\n\n# Virtual hosts\nInclude conf/extra/httpd-vhosts.conf\n\n# Local access to the Apache HTTP Server Manual\nInclude conf/extra/httpd-manual.conf\n\n# Distributed authoring and versioning (WebDAV)\n#Include conf/extra/httpd-dav.conf\n\n# Various default settings\nInclude conf/extra/httpd-default.conf\n\n# Secure (SSL/TLS) connections\n#Include conf/extra/httpd-ssl.conf\n#\n# Note: The following must must be present to support\n#       starting without SSL on platforms with no /dev/random equivalent\n#       but a statically compiled-in mod_ssl.\n#\n<IfModule ssl_module>\nSSLRandomSeed startup builtin\nSSLRandomSeed connect builtin\n</IfModule>\n\n# Virtual dir for programmer use\n#Include conf/httpd-vdir.conf\n\nAddDefaultCharset utf-8\n\n```\n\n## å»ºç«‹ Apache vhost è¨­å®š\n\n```sql\nmv httpd-vhosts.conf httpd-vhosts.con\n\nvim httpd-vhosts.conf\n```\n\n```sql\n#\n# Virtual Hosts\n#\n# If you want to maintain multiple domains/hostnames on your\n# machine you can setup VirtualHost containers for them. Most configurations\n# use only name-based virtual hosts so the server doesn't need to worry about\n# IP addresses. This is indicated by the asterisks in the directives below.\n#\n# Please see the documentation at \n# <URL:http://httpd.apache.org/docs/2.2/vhosts/>\n# for further details before you try to setup virtual hosts.\n#\n# You may use the command line option '-S' to verify your virtual host\n# configuration.\n\n#\n# Use name-based virtual hosting.\n#\n\n#NameVirtualHost *:80\n#\n# VirtualHost example:\n# Almost any Apache directive may go into a VirtualHost container.\n# The first VirtualHost section is used for all requests that do not\n# match a ServerName or ServerAlias in any <VirtualHost> block.\n#\n\n\n#<VirtualHost *:80>\n#    ServerAdmin root@localhost\n#    DocumentRoot \"/home/null/\"\n#    ServerName 127.0.0.1\n#    ErrorLog \"logs/null.err\"\n#    CustomLog \"logs/null.acc\"  combined\n#</VirtualHost>\n\nInclude conf/extra/vhost/*.conf\n```\n\n\n***\n\n### å»ºç«‹ vhost ç›®éŒ„\n\n```sql\nmkdir /usr/local/web/apache2/conf/extra/vhost\n```\n\n### å»ºç«‹ mydns è¨­å®šæª”\n\n```sql\nvim /usr/local/web/apache2/conf/extra/vhost/mydns.conf\n```\n\n```sql\n#\n# Virtual Hosts\n#\n# If you want to maintain multiple domains/hostnames on your\n# machine you can setup VirtualHost containers for them. Most configurations\n# use only name-based virtual hosts so the server doesn't need to worry about\n# IP addresses. This is indicated by the asterisks in the directives below.\n#\n# Please see the documentation at \n# <URL:http://httpd.apache.org/docs/2.2/vhosts/>\n# for further details before you try to setup virtual hosts.\n#\n# You may use the command line option '-S' to verify your virtual host\n# configuration.\n\n#\n# Use name-based virtual hosting.\n#\nNameVirtualHost *:80\n\n#\n# VirtualHost example:\n# Almost any Apache directive may go into a VirtualHost container.\n# The first VirtualHost section is used for all requests that do not\n# match a ServerName or ServerAlias in any <VirtualHost> block.\n#\n\n<VirtualHost *:80>\n    ServerAdmin root@localhost\n    DocumentRoot \"/usr/share/mydnsconfig/web/\"\n    ServerName mydns\n    ServerAlias mydns2022.mis\n    ServerAlias mydns2022.mis\n    ErrorLog \"logs/mydns.err\"\n    CustomLog \"logs/mydns.acc\" common\n</VirtualHost>\n```\n\n\n***\n\n\n\n# PHP-5.2.5 :\n\n\n## å»ºç«‹ lib link\n\n```sql\necho \"/usr/local/lib\" > /home/local.conf\n    \necho \"/usr/local/lib64\" >> /home/local.conf\n    \nldconfig -v\n    \nln -s /usr/lib64/libpng.so* /usr/lib\n\nln -s /usr/lib64/libjpeg.so* /usr/lib\n\nln -s /usr/lib64/mysql/libmysqlclient* /usr/lib\n```\n\n## è§£å£“ && ç·¨è­¯\n\n```sql\nwget http://museum.php.net/php5/php-5.2.5.tar.gz\n\ntar zxvf php-5.2.5.tar.gz\n    \ncd php-5.2.5/\n    \n'./configure'  '--prefix=/usr/local/web/php' '--with-apxs2=/usr/local/web/apache2/bin/apxs' '--with-mysql' '--with-mysqli=/usr/bin/mysql_config' '--disable-cgi' '--with-iconv' '--disable-inline-optimization' '--enable-mbstring=tw' '--enable-sysvshm' '--enable-sysvsem' '--enable-sockets' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-zlib' '--with-curl' '--enable-zip' '--enable-opcache'\n    \nmake && make install\n\n```\n\n\n### å•Ÿå‹• Apache\n\n\n## Apache å•Ÿå‹•å‘½ä»¤\n\n```sql\n\n/usr/local/web/apache2/bin/apachectl start\n\n```\n    \n## Apache é‡å•Ÿå‘½ä»¤\n\n```sql\n\n/usr/local/web/apache2/bin/apachectl graceful\n\n```\n\n***\n\n\n# MyDNSConfig-1.1.0:\n\n\n## å»ºç«‹è³‡æ–™å¤¾å­˜æ”¾ mydnsconfig data\n\n```sql\n\nmkdir  /usr/share/mydnsconfig/\n\n```   \n\n## ä¸‹è¼‰ `mydns-1.1.0` , `mydns-1.2.8.31`\n\n```sql\nwget https://github.com/dingbangli/installation/archive/refs/heads/master.zip\n\nunzip master.zip \n\ncd installation-master/\n```\n\n## è§£å£“è‡³ mydnsconfig ä¸‹ä¸¦çµ¦äºˆæ¬Šé™777\n\n```sql\ntar zxvf MyDNSConfig-1.1.0.tar.gz\n    \ncp -r MyDNSConfig-1.1.0/interface/* /usr/share/mydnsconfig/\n    \nchmod 777  /usr/share/mydnsconfig/* -R\n```\n    \n## æŠŠ table è³‡æ–™çŒåˆ° mydns\n\n```sql\ncd MyDNSConfig-1.1.0/install\n\nmysql -uroot -p mydns < mydnsconfig.sql\n```   \n\n## æ›´æ”¹è¨­å®š\n\n```sql\nvim /usr/share/mydnsconfig/lib/config.inc.php\n```\n\n```sql\n$conf[\"db_type\"]               : 'mysql';\n$conf[\"db_host\"]               : 'localhost';\n$conf[\"db_database\"]           : 'mydns';\n$conf[\"db_user\"]               : 'mydns';\n$conf[\"db_password\"]           : '123456';\n``` \n\n***\n\n\n# Mydns-1.2.8.31:\n\n\n\n## è§£å£“ && ç·¨è­¯\n\n```sql\ntar zxvf mydns-1.2.8.31.tar.gz\n\ncd mydns-1.2.8.31\n\n./configure --prefix=/usr/local/mydns --with-mysql-lib=/usr/lib64/mysql --with-zlib=/usr/lib64\n    \nmake && make install\n```\n    \n## å»ºç«‹ link\n    \n```sql\ncp mydns.conf /etc/mydns.conf\n    \nln -s /usr/local/mydns/sbin/mydns  /usr/sbin/mydns\n```\n\n## æ›´æ”¹ MyDNS è¨­å®š\n\n```sql\nvim /etc/mydns.conf\n```\n\n```sql\ndb-host: localhost             # SQL server hostname\ndb-user: mydns                 # SQL server username\ndb-password: 123456            # SQL server password\ndatabase: mydns                # MyDNS database name\n\nrecursive:                     # Location of recursive resolver\nallow-axfr: yes                # Should AXFR be enabled?\nallow-tcp: yes                 # Should TCP be enabled?\n```\n\n## å•Ÿå‹•æœå‹™\n\n```sql\nmydns -c /etc/mydns.conf -b\n```   \n\n***\n\n\n# é©—è­‰\n\n\n## WINDOWS ç¶æœ¬æ©Ÿ HOSTS\n\n```sql\n172.16.0.224\tmydns2022.mis\n```\n   \n## æœ¬æ©Ÿæ‰“é–‹ç¶²å€ http://mydns2022.mis/\n\n ![](https://s2.loli.net/2024/04/25/EStZwU2ouzxh5iV.png)\n    \n## é è¨­å¸³å¯†ç‚º: admin/admin\n    \n    \n***\n\n","tags":["mydns"],"categories":["DNS"]},{"title":"VPN - å»ºç½® XL2TPD + IPSec æœå‹™ by DOCKER && CentOS 7","url":"/blog.github.io/2022/12/27/VPN-å»ºç½®_XL2TPD+IPSecæœå‹™/","content":"\n***\n***\n\n**å®‰è£ Docker**\n-----\n\n***\n***\n   \n**å®‰è£æœ€æ–°ç‰ˆ Docker**\n   \n```sql\nwget -qO- get.docker.com | bash \n```\n\n***\n***\n    \n ![](https://s2.loli.net/2024/04/29/nEDvXjcAhRoNSz5.png)\n\n***\n***\n    \n**æŸ¥çœ‹ç‰ˆæœ¬**\n   \n```sql\ndocker version \n```\n\n***\n***\n   \n ![](https://s2.loli.net/2024/04/29/mzEwHoQM9Tt2sJg.png)\n\n***\n***\n   \n**å•Ÿå‹•æœå‹™**\n   \n```sql\nsystemctl start docker \n```\n\n***\n***\n  \n**æŸ¥çœ‹ç‹€æ…‹**\n   \n```sql\nsystemctl status docker\n```\n\n***\n***\n\n**ä½¿ç”¨ Docker å®‰è£ L2TP**\n-----\n\n***\n***\n   \n**æ‹‰å–é¡åƒ**\n   \n```sql\ndocker pull teddysun/l2tp\n```\n\n***\n***\n    \n**å»ºç«‹ç’°å¢ƒåƒæ•¸è¨­å®šæª”**\n   \n```sql\nvim /etc/l2tp.env\n```\n    \n```sql\nVPN_IPSEC_PSK=1234567890\nVPN_USER=laurance\nVPN_PASSWORD=lau888\nVPN_PUBLIC_IP=XX.XX.XX.XX\nVPN_L2TP_NET=192.168.18.0/24\nVPN_L2TP_LOCAL=192.168.18.1\nVPN_L2TP_REMOTE=192.168.18.10-192.168.18.250\nVPN_XAUTH_NET=192.168.20.0/24\nVPN_XAUTH_REMOTE=192.168.20.10-192.168.20.250\nVPN_DNS1=8.8.8.8\nVPN_DNS2=9.9.9.9\nVPN_SHA2_TRUNCBUG=\n\n```\n\n***\n***\n  \n\n\n**åƒæ•¸è§£æ**\n\n***\n\n| åƒæ•¸ | åƒæ•¸ä»£è¡¨æ„ç¾© |\n| --- | --- |\n| VPN_IPSEC_PSK | é å…±äº«å¯†é‘° |\n| VPN_USER | é»˜èªçš„ç™»éŒ„ç”¨æˆ¶å |\n| VPN_PASSWORD | é»˜èªçš„ç™»éŒ„ç”¨æˆ¶å¯†ç¢¼ |\n| VPN_PUBLIC_IP | æŒ‡å®šå…¬ç¶² IP åœ°å€ï¼Œç•¶ä½ çš„ VPS æœ‰å¤šå€‹å…¬ç¶² IP æ™‚ï¼Œå¯èƒ½éœ€è¦æ‰‹å‹•æŒ‡å®šä¸€ä¸‹ |\n| VPN_L2TP_NET | å…§ç¶² L2TP ç¶²æ®µç¯„åœï¼Œé»˜èªç‚º 192.168.18.0/24ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n| VPN_L2TP_LOCAL | å…§ç¶² L2TP ç¶²é—œ IPï¼Œé»˜èªç‚º 192.168.18.1ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n| VPN_L2TP_REMOTE | å…§ç¶² L2TP ç¶²æ®µåˆ†é…çµ¦é€£æ¥çš„ IP æ®µï¼Œé»˜èªç‚º 192.168.18.10-192.168.18.250ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n| VPN_XAUTH_NET | å…§ç¶² XAUTH ç¶²æ®µç¯„åœï¼Œé»˜èªç‚º 192.168.20.0/24ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n| VPN_XAUTH_REMOTE | å…§ç¶² XAUTH ç¶²æ®µåˆ†é…çµ¦é€£æ¥çš„ IP æ®µï¼Œé»˜èªç‚º 192.168.20.10-192.168.20.250ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n| VPN_DNS1 | é»˜èª DNS æœå‹™å™¨ï¼Œ8.8.8.8ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n| VPN_DNS2 | é»˜èª DNS æœå‹™å™¨ï¼Œ8.8.4.4ï¼Œä¸€èˆ¬æ­¤è™•ç•™ç©ºå³å¯ |\n\n***\n\n**Android 6 å’Œ 7 å¦‚æœé‡åˆ°é€£æ¥å•é¡Œï¼Œå˜—è©¦åœ¨ /etc/ipsec.conf ä¸­è¨­ç½® sha2-truncbug=yes (é»˜èªç‚º no)**  \n\n***\n  \n**å¯ä»¥åœ¨ /etc/l2tp.env æ–‡ä»¶ä¸­æ·»åŠ  VPN_SHA2_TRUNCBUG=yesï¼Œç„¶å¾Œé‡æ–°å‰µå»º Docker å®¹å™¨ã€‚**\n\n\n\n***\n***\n\n**å•Ÿå‹•å®¹å™¨**\n   \n```sql\ndocker run -d --privileged -p 500:500/udp -p 4500:4500/udp --name l2tp --restart=always --env-file /etc/l2tp.env -v /lib/modules:/lib/modules teddysun/l2tp\n```\n\n***\n***\n    \n**æŸ¥çœ‹å•Ÿå‹• LOG**\n   \n```sql\ndocker logs l2tp\n```\n\n***\n***\n    \n**æŸ¥çœ‹ ipsec status è¼¸å‡º**\n   \n```sql\ndocker exec -it l2tp ipsec status\n```\n\n***\n***\n    \n**ç®¡ç† VPN ç”¨æˆ·**\n-----\n\n***\n***\n\n**åˆ—å‡ºæ‰€æœ‰ user & password**\n   \n```sql\ndocker exec -it l2tp l2tpctl -l\n```\n\n***\n***\n    \n**æ–°å¢ user**\n   \n```sql\ndocker exec -it l2tp l2tpctl -a\n```\n\n***\n***\n    \n**åˆªé™¤ user**\n   \n```sql\ndocker exec -it l2tp l2tpctl -d\n```\n\n***\n***\n    \n**ä¿®æ”¹ user å¯†ç¢¼**\n   \n```sql\ndocker exec -it l2tp l2tpctl -m\n```\n\n***\n***\n    \n**æŸ¥çœ‹ libreswan å’Œ xl2tpd ç‰ˆæœ¬** \n   \n```sql\ndocker exec -it l2tp l2tpctl -v \n```\n    \n```sql\nLinux Libreswan 3.32 (netkey) on 3.10.0-1160.76.1.el7.x86_64\n\nxl2tpd version:  xl2tpd-1.3.15\n```\n\n***\n***\n\n**Windows 10 ä¸‹è¿æ¥ L2TP VPN**\n-----\n\n***\n***\n\n**ä¿®æ”¹ VPN å”è­°**\n   \n  ![](https://s2.loli.net/2024/04/29/dQt4C5mpVlwE8ko.png)\n\n***\n***\n\n\n\n***\n\n**Configure a L2TP/IPsec server behind a NAT-T device**\n\n***   \n\n**`win + R` è¼¸å…¥ `regedit`**\n\n*** \n\n**è·¯å¾‘: `HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent`**\n\n***    \n\n**æ–°å¢ä¸€çµ„æ©Ÿç¢¼ >> `DWORD`ï¼ˆ32 ä½ï¼‰å€¼ >> `AssumeUDPEncapsulationContextOnSendRule` >> å€¼è¨­å®šç‚º `2` (1 ä¸æœƒé)**\n\n***\n\n\n\n***\n***\n\n**PHONE ä¸‹è¿æ¥ L2TP VPN**\n-----\n\n***\n***\n\n**Android ç‰ˆæœ¬å°æ–¼æˆ–ç­‰æ–¼ `7` æ™‚ï¼Œå»ºè­°é¸æ“‡ `IPSec Xauth PSK (Cisco IPsec) `æ¨¡å¼é€£æ¥**\n\n***\n***\n   \n   [åƒè€ƒæ–‡ä»¶](https://learn.microsoft.com/en-US/troubleshoot/windows-server/networking/configure-l2tp-ipsec-server-behind-nat-t-device)\n   \n   [åƒè€ƒæ–‡ä»¶](https://teddysun.com/536.html)\n    \n***\n***\n***\n***\n***\n***\n\n**L2TP/IPSec ä¸€éµå®‰è£è…³æœ¬**\n=======\n***\n***\n\n**è…³æœ¬ä¸‹è¼‰**\n-----\n\n***\n\n```sql\nwget -O StackScript.zip https://files.cnblogs.com/files/think8848/StackScript.zip\n\n```\n\n***\n***\n\n**è§£å£“ä¸¦çµ¦äºˆæ¬Šé™**\n-----\n\n***\n\n```sql\nunzip StackScript.zip\n\nchmod 755 StackScript\n\n```\n\n***\n***\n\n**åŸ·è¡Œè…³æœ¬**\n-----\n\n***\n\n```yaml\n/bin/bash -x StackScript\n\nvim /etc/ipsec.secrets\n# å»ºç«‹é å…ˆæ‹±äº«é‡‘é‘°\n\nvim /etc/ppp/chap-secrets\n# å»ºç«‹ä½¿ç”¨è€…åŠå¯†ç¢¼\n\nsystemctl restart ipsec xl2tpd\n# é‡å•Ÿæœå‹™\n\nipsec verify \n# æ¸¬è©¦ ipsec ç‹€æ…‹ (æ²’æœ‰ failed å°±ç®—æ­£å¸¸)\n\n```\n\n***\n***\n\n```yaml\n# å¸¸ç”¨æ–‡ä»¶æª”ä½ç½®\n\n/etc/ipsec.conf\n\n/etc/ipsec.secrets\n\n/etc/ppp/chap-secrets\n\n/etc/xl2tpd/xl2tpd.conf\n\n```\n\n***\n***\n\n```yaml\n# ç«ç‰†è¦å‰‡\n\nextif=\"eth0\"\n\nextlp=\"ppp0\"\n\nINNET=\"192.168.42.0/24\"\n\niptables -A service -i $extif -p UDP --dport  1701 -j ACCEPT            # PPTP\n\niptables -A service -i $extif -p UDP --dport  500 -j ACCEPT             # IPSEC\n\niptables -A service -i $extif -p UDP --dport  4500 -j ACCEPT            # XL2TP\n\niptables -A service -i $extif -p 50 -j ACCEPT                           # XL2TP\n\niptables -t nat -A POSTROUTING -o $extif -s $INNET -j MASQUERADE        # è½‰é€VPNæµé‡\n\niptables -t nat -A POSTROUTING -o $extlp -j MASQUERADE\n\n```\n\n***\n***\n\n**æŒ‡ä»¤èªªæ˜**\n-----\n\n```yaml\nl2tp -a (Add a user)  # æ–°å¢ç”¨æˆ¶\n\nl2tp -d (Delete a user) # åˆªé™¤ç”¨æˆ¶\n\nl2tp -l (List all users)  # åˆ—å‡ºæ‰€æœ‰ç”¨æˆ¶\n\nl2tp -m (Modify a user password) # ä¿®æ”¹ç¾æœ‰ç”¨æˆ¶å¯†ç¢¼\n\nl2tp -h # åˆ—å‡ºå¹«åŠ©è¨Šæ¯\n\nipsec status  # æŸ¥çœ‹ IPSec é‹è¡Œç‹€æ…‹\n\nipsec verify  # æŸ¥çœ‹ IPSec æª¢æŸ¥çµæœ\n\nsystemctl start|stop|restart|status ipsec # å•Ÿå‹• IPSec\n\nsystemctl start|stop|restart xl2tpd   # å•Ÿå‹• L2TP\n\n```\n\n***\n***\n\n[åƒè€ƒæ–‡ä»¶](https://www.zleoco.com/?p=239)\n\n\n***\n\n","tags":["Docker","XL2TPD"],"categories":["VPN"]},{"title":"SVN - åˆªé™¤æ—©æœŸç‰ˆæœ¬åº« (è¨˜å¾—å…ˆå‚™ä»½!!!)","url":"/blog.github.io/2022/12/26/SVN-åˆªé™¤æ—©æœŸç‰ˆæœ¬åº«_(è¨˜å¾—å…ˆå‚™ä»½!!!)/","content":"\n<!--more-->\nsvn-dump å¤ªè‚¥å°è‡´ç¡¬ç¢Ÿçˆ†äº†,å› æ­¤æ±ºå®šç˜¦èº«ä¸€ä¸‹\n\n***\n***\n\n**æŸ¥çœ‹ç›®å‰ç‰ˆæœ¬è™Ÿ**\n    \n```sql\nsvnlook youngest /home/svn/mis-note\n```\n\n***\n***\n\n**ä¿ç•™ `130-138 ç‰ˆæœ¬è™Ÿ` çš„ dump**\n   \n```sql\nsvnadmin dump /home/svn/mis-note -r 130:138 > repo_dump_130-138.dmp 2>repo_dump_130-138.log\n```\n\n***\n***\n    \n**å°‡èˆŠçš„åº«ç§»æˆ `XXX.bak`**\n   \n```sql\nmv mis-note/ mis-note-20230105.bak/\n```\n\n***\n***\n    \n**å»ºç«‹æ–°åº«**\n   \n```sql\nsvnadmin create /home/svn/mis-note\n```\n\n***\n***\n\n**å°‡è¨­å®šæª”è¤‡è£½éä¾†**\n   \n```sql\ncp -r ../mis-note-20230105.bak/conf .\n```\n\n***\n***\n\n**æŸ¥çœ‹ä¹¾æ·¨åº«çš„å®¹é‡**\n   \n```sql\ndu -hs mis-note\n```\n\n***\n***\n    \n**å°å…¥ dump**\n   \n```sql\nsvnadmin load /home/svn/mis-note < repo_dump_130-138.dmp >repo_load_130-138.log 2>repo_load_130-138.errlog\n```\n\n***\n***\n    \n**çœ‹ä¸€ä¸‹æ–°åº«å®¹é‡æœ‰æ²’æœ‰å¢åŠ **\n   \n```sql\ndu -hs mis-note\n```\n\n***\n***\n\n**svn-server é‡å•Ÿ**\n\n```sql\npkill svnserve\n\nsvnserve -d /usr/local/bin/svnserve --daemon --pid-file=/var/run/svnserve.pid\n\n```\n\n\n\n**Client ç«¯ (Windows): ç æ‰èˆŠæœ‰çš„SVNè³‡æ–™å¤¾ , ä¸¦å–å‡ºæ–°è³‡æ–™å¤¾**\n\n\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"VPN - å»ºç½® SOCKS5 (SS5) ä»£ç†","url":"/blog.github.io/2022/12/26/VPN-å»ºç½®SOCKS5_SS5ä»£ç†/","content":"\n***\n***\n\n**å®‰è£ç·¨è­¯ SS5**\n----\n\n***\n***\n\n**å¾å®˜ç¶²ä¸‹è¼‰æºç¢¼**\n\n```sql\nwget https://nchc.dl.sourceforge.net/project/ss5/ss5/3.8.9-8/ss5-3.8.9-8.tar.gz\n```\n\n***\n***\n    \n**å®‰è£ä¾è³´**\n   \n```sql\nyum -y install pam-devel openldap-devel cyrus-sasl-devel openssl-devel gcc automake make\n```\n\n***\n***\n    \n**è§£å£“ã€ç·¨è­¯ã€å®‰è£**\n   \n```sql\ntar xvf ss5-3.8.9-8.tar.gz\n    \ncd ss5-3.8.9\n    \n./configure && make && make install\n```\n\n***\n***\n    \n**ä¿®æ”¹ SS5 è¨­å®šæª”**\n-----\n\n***\n***\n\n**ä¿®æ”¹èªè­‰æ–¹å¼**\n   \n```sql\nvim /etc/opt/ss5/ss5.conf\n```\n\n***\n***\n    \n**ç„¡å¸³è™Ÿå¯†ç¢¼çš„è¨­å®š**\n   \n ```sql\nauth    0.0.0.0/0               -              -\npermit -       0.0.0.0/0       -       0.0.0.0/0       -       -       -       -       -\n```\n\n***\n***\n\n**æœ‰å¸³è™Ÿå¯†ç¢¼çš„è¨­å®š**\n   \n```sql\nauth    0.0.0.0/0               -              u\npermit u        0.0.0.0/0       -       0.0.0.0/0       -       -       -       -       -\n```\n\n***\n***\n    \n**åŠ å…¥ `user` åŠ `password`**\n   \n```sql\nvim /etc/opt/ss5/ss5.passwd\n```\n    \n```sql\nlaurance lau888\n```\n\n***\n***\n\n**ä¿®æ”¹ ss5 å•Ÿå‹• `port`**\n   \n```sql\nvim /etc/sysconfig/ss5\n```\n    \n```sql\nSS5_OPTS=\" -u root -b 0.0.0.0:8080\"\n```\n\n***\n***\n\n**æ–°å¢ ss5 åŸ·è¡Œæª”`æ¬Šé™`**\n   \n```sql\nchmod 755 /etc/rc.d/init.d/ss5\n```\n\n***\n***\n    \n**å•Ÿå‹•æœå‹™**\n   \n```sql\nsystemctl restart ss5\n```\n\n***\n***\n    \n**æŸ¥çœ‹å•Ÿå‹• LOG**\n   \n```sql\nmore /var/log/ss5/ss5.log\n```\n\n***\n***\n\n**ä½¿ç”¨ Chrome å¥—ä»¶ & SS5 ç¿»ç‰†**\n----\n\n***\n***\n\n**Chrome æ–°å¢å¥—ä»¶: `Proxy SwitchyOmega`**\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/AHkRhWIplBxy2vV.png)\n\n***\n***\n    \n***\n\n","tags":["SOCKS5"],"categories":["VPN"]},{"title":"Nginx - æ·»åŠ ç™½åå–® & å°é–åœ‹å®¶ IP æ–¹å¼","url":"/blog.github.io/2022/12/25/Nginx-æ·»åŠ ç™½åå–®çš„æ–¹å¼/","content":"\n***\n***\n\n**1. IP ç™½åå–®æ–‡ä»¶è®€å–**\n-----\n\n***\n***\n\n**å»ºç«‹ç™½åå–®æ–‡ä»¶**\n\n```sql\nvim /usr/local/web/nginx/conf/vhost/hugo/whitelist.conf\n```\n\n```sql\nallow 172.16.0.6;\n```\n\n***\n\n**é…ç½®è¨­å®šæª”å¼•å…¥ç™½åå–®æ–‡ä»¶**\n\n```sql\nvim /usr/local/web/nginx/conf/vhost/hugo/hugo.conf\n```\n  \n```sql\n\nlocation  / {\n    ...    \n    ...\n    \n    include /usr/local/web/nginx/conf/vhost/hugo/whitelist.conf;\n    deny all;\n    \n}\n```\n\n***\n***\n    \n**2.åœ‹å®¶IPå°é–**\n-----\n\n***\n***\n    \n**`Nginx ä¸»è¨­å®šæª”` çš„ `http å€å¡Š` åŠ å…¥ `GEO æ¨¡å¡Š` ä¸¦å¼•ç”¨ `dat æ–‡ä»¶`**\n\n***\n\n**å¾ `$remote_addr` é€™å€‹è®Šæ•¸ , ä¾†å®šç¾© `$ip_whitelist` é€™å€‹è®Šæ•¸**\n\n***\n\n```sql\nvim /usr/local/web/nginx/conf/nginx.conf\n```\n    \n```sql\ngeoip_country /usr/local/web/nginx/conf/vhost/hugo/GeoCountry/country/maxmind.dat;\n\ngeo $remote_addr $ip_whitelist {\n    default 0;\n}\n```\n\n***\n\n**å»ºç«‹ä¸€æ”¯å®šç¾© `GEO è¦å‰‡` çš„è¨­å®šæª”**\n\n```sql\nvim /usr/local/web/nginx/conf/vhost/geoblock.conf\n```\n    \n```sql\nif ($ip_whitelist: 1) {\n    \n    break;\n\n}\n\nif ($geoip_country_code ~ (JP|TW)) {\n    \n    return 403;\n\n}\n```\n\n***\n\n**åœ¨é…ç½®çš„è¨­å®šæª”ä¸Š `server å€å¡Š` å¼•ç”¨ `GEO è¦å‰‡` çš„è¨­å®šæª”**\n\n```sql\nvim /usr/local/web/nginx/conf/vhost/hugo/hugo.conf\n```\n    \n```sql\nserver {\n\n    listen 1515;\n#    listen [::]:1515;\n    server_name note.laurance.com;\n\n    include vhost/geoblock.conf;\n    \n    ...\n    ...\n\n     }\n```\n\n***\n***\n\n**ä½¿ç”¨ Nginx `é˜»æ“‹åœ‹å®¶ IP` , éœ€è¦ç·¨è­¯æ¨¡å¡Š `http_geoip_module`**\n-----\n\n***\n***\n\n**ä¸‹è¼‰ geoip å®‰è£åŒ…**\n\n```sql\nyum install geoip-devel\n```\n\n***\n***\n\n\n    \n`ps. è‹¥æ‰¾ä¸åˆ°å®‰è£åŒ…,å¯å…ˆå®‰è£ epel å€‰åº«`  \n\n***\n\n```sql\nyum install epel-release -y\n```\n\n\n\n***\n***\n\n**æª¢æŸ¥åº«æ˜¯å¦å®‰è£æˆåŠŸ**\n\n```sql\nldconfig -v | grep GeoIP        \n```\n\n```sql\nlibGeoIPUpdate.so.0 -> libGeoIPUpdate.so.0.0.0\n\nlibGeoIP.so.1 -> libGeoIP.so.1.4.8\n\nlibGeoIPUpdate.so.0 -> libGeoIPUpdate.so.0.0.0\n\nlibGeoIP.so.1 -> libGeoIP.so.1.5.0\n```\n\n***\n\n**å°‡ `GeoIP æ¨¡å¡Š` é‡æ–°ç·¨è­¯åˆ° Nginx ä¸­ (åŸæœ‰çš„ç·¨è­¯åƒæ•¸å¯ç”¨ nginx -V æŸ¥çœ‹)**\n\n`{{ ä¸è¦ make install å¦å‰‡è¦†è“‹å®‰è£å°±éº»ç…©äº† }}`\n\n***\n\n```sql\n./configure --user=nginx --group=nginx --prefix=/usr/local/web/nginx --sbin-path=/usr/local/web/nginx/sbin/nginx --conf-path=/usr/local/web/nginx/conf/nginx.conf --error-log-path=/usr/local/web/nginx/logs/error.log --http-log-path=/usr/local/web/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_secure_link_module --with-http_v2_module --with-http_stub_status_module --with-http_sub_module --add-module=/usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ --add-module=/usr/local/nginx-http-concat/ --with-http_geoip_module\n    \nmake\n\nunlink /usr/sbin/nginx \n    \nmv /usr/local/web/nginx/sbin/nginx /usr/local/web/nginx/sbin/nginx-2023-01-01.bak\n    \ncp objs/nginx /usr/local/web/nginx/sbin/nginx\n    \n/usr/local/web/nginx/sbin/nginx -V\n```\n\n***\n\n**æŸ¥çœ‹ GEO æ¨¡å¡Šæ˜¯å¦å·²ç·¨å…¥**\n\n```sql\n/usr/local/web/nginx/sbin/nginx -V 2>&1 | grep -o with-http_geoip_module\n```    \n   \n***\n***\n\n**ä¸‹è¼‰ IP æ•¸æ“šåº« (dat æ ¼å¼)**\n----- \n\n***\n***\n\n[ ç¬¬ä¸‰æ–¹ä¸‹è¼‰åœ°å€ ](https://www.miyuru.lk/geoiplegacy)\n\n***\n\n**ä¸‹è¼‰åŒæ™‚åŒ…æ‹¬ `Ipv4` å’Œ `Ipv6` çš„ `country` ã€ `city` ç‰ˆæœ¬ã€‚**\n\n```sql\nwget https://dl.miyuru.lk/geoip/maxmind/country/maxmind.dat.gz\n    \ngunzip maxmind.dat.gz\n    \nwget https://dl.miyuru.lk/geoip/maxmind/city/maxmind.dat.gz\n    \ngunzip maxmind.dat.gz\n```\n \n***\n***\n   \n**é…ç½®è«‹çœ‹ä¸Šé¢**\n==========\n\n***\n***\n\n\n| åœ‹å®¶ç›¸é—œåƒæ•¸ | åƒæ•¸è§£é‡‹ |\n| --- | --- |    \n| $geoip_country_code | #å…©ä½å­—ç¬¦çš„è‹±æ–‡åœ‹å®¶ç¢¼ã€‚å¦‚ï¼šCN, US |\n| $geoip_country_code3 | #ä¸‰ä½å­—ç¬¦çš„è‹±æ–‡åœ‹å®¶ç¢¼ã€‚å¦‚ï¼šCHN, USA |\n| $geoip_country_name | #åœ‹å®¶è‹±æ–‡å…¨ç¨±ã€‚å¦‚ï¼šChina, United States |\n\n***\n***\n    \n| åŸå¸‚ç›¸é—œåƒæ•¸ | åƒæ•¸è§£é‡‹ |\n| --- | --- | \n| $geoip_city_country_code | #ä¹Ÿæ˜¯å…©ä½å­—ç¬¦çš„è‹±æ–‡åœ‹å®¶ç¢¼ |\n| $geoip_city_country_code3 | #ä¸ŠåŒ |\n| $geoip_city_country_name | #ä¸ŠåŒ |\n| $geoip_region | #é€™å€‹ç¶“æ¸¬è©¦æ˜¯å…©ä½æ•¸çš„æ•¸å­—ï¼Œå¦‚æ­å·æ˜¯02, ä¸Šæµ·æ˜¯ 23ã€‚ä½†æ˜¯æ²’æœ‰æœåˆ°ç›¸é—œè³‡æ–™ï¼Œå¸Œæœ›çŸ¥é“çš„æœ‹å‹ç•™è¨€å‘Šä¹‹ã€‚ |\n| $geoip_city | #åŸå¸‚çš„è‹±æ–‡åç¨±ã€‚å¦‚ï¼šHangzhou |\n| $geoip_postal_code | #åŸå¸‚çš„éƒµæ”¿ç·¨ç¢¼ã€‚ç¶“æ¸¬è©¦ï¼Œåœ‹å…§é€™å­—æ®µç‚ºç©º |\n| $geoip_city_continent_code | #ä¸çŸ¥ä»€éº¼ç”¨é€”ï¼Œåœ‹å…§å¥½åƒéƒ½æ˜¯ AS |\n| $geoip_latitude | #ç·¯åº¦ |\n| $geoip_longitude | #ç¶“åº¦ |\n    \n***\n***\n\n[åƒè€ƒæ–‡ä»¶](https://www.ywbj.cc/?p=787)\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"Linux - å¦‚ä½•è¨­å®š Rsyslog æ—¥èªŒé ç«¯é›†ä¸­å¼ç®¡ç†","url":"/blog.github.io/2022/12/21/Rsyslogæ—¥èªŒé ç«¯é›†ä¸­å¼ç®¡ç†/","content":"\n***\n***\n\n<!--more-->\né€é Rsyslogæœå‹™åŒæ­¥å¯« LOG è‡³ LOGæ©Ÿ ä¸¦ä½¿ç”¨æ’ç¨‹ç®¡ç†\n\n***\n***\n\n**æŸ¥çœ‹ `rsyslog` ç›¸é—œé…ç½®**   \n    \n```sql\nrpm -qc rsyslog\n```\n\n```sql\n/etc/logrotate.d/syslog\n\n/etc/rsyslog.conf\n\n/etc/sysconfig/rsyslog\n```\n\n***\n***\n\n**æŸ¥çœ‹ç‰ˆæœ¬**\n   \n```sql\nrsyslogd -v\n```\n\n```sql\nrsyslogd 8.24.0-57.el7_9.3, compiled with:\n\t\n\tPLATFORM:\t\t\t\tx86_64-redhat-linux-gnu\n\t\n\tPLATFORM (lsb_release -d):\t\t\n\t\n\tFEATURE_REGEXP:\t\t\t\tYes\n\t\n\tGSSAPI Kerberos 5 support:\t\tYes\n\t\n\tFEATURE_DEBUG (debug build, slow code):\tNo\n\t\n\t32bit Atomic operations supported:\tYes\n\t\n\t64bit Atomic operations supported:\tYes\n\t\n\tmemory allocator:\t\t\tsystem default\n\t\n\tRuntime Instrumentation (slow code):\tNo\n\t\n\tuuid support:\t\t\t\tYes\n\t\n\tNumber of Bits in RainerScript integers: 64\n```\n\n***\n***\n   \n**CLIENT ç«¯è¨­å®š**\n-----\n\n***\n***\n\n**rsyslog è¨­å®šæª”é…ç½®**\n\n```sql\nvim /etc/rsyslog.conf\n```\n    \n```sql\n\n# rsyslog configuration file\n\n# For more information see /usr/share/doc/rsyslog-*/rsyslog_conf.html\n# If you experience problems, see http://www.rsyslog.com/doc/troubleshoot.html\n\n#### MODULES ####\n\n# The imjournal module bellow is now used as a message source instead of imuxsock.\n$ModLoad imuxsock # provides support for local system logging (e.g. via logger command)\n$ModLoad imjournal # provides access to the systemd journal\n#$ModLoad imklog # reads kernel messages (the same are read from journald)\n#$ModLoad immark  # provides --MARK-- message capability\n#$ModLoad imfile\n\n# Provides UDP syslog reception\n#$ModLoad imudp\n#$UDPServerRun 514\n\n# Provides TCP syslog reception\n#$ModLoad imtcp\n#$InputTCPServerRun 514\n\n\n#### GLOBAL DIRECTIVES ####\n\n# Where to place auxiliary files\n$WorkDirectory /var/lib/rsyslog\n\n# Use default timestamp format\n$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat\n\n# File syncing capability is disabled by default. This feature is usually not required,\n# not useful and an extreme performance hit\n#$ActionFileEnableSync on\n\n# Include all config files in /etc/rsyslog.d/\n$IncludeConfig /etc/rsyslog.d/*.conf\n\n# Turn off message reception via local log socket;\n# local messages are retrieved through imjournal now.\n$OmitLocalLogging on\n\n# File to store the position in the journal\n$IMJournalStateFile imjournal.state\n\n\n#### RULES ####\n\n# Log all kernel messages to the console.\n# Logging much else clutters up the screen.\n#kern.*                                                 /dev/console\n\n# Log anything (except mail) of level info or higher.\n# Don't log private authentication messages!\n*.info;mail.none;authpriv.none;cron.none                /var/log/messages\n\n# The authpriv file has restricted access.\nauthpriv.*                                              /var/log/secure.log\n\n# Log all the mail messages in one place.\nmail.*                                                  -/var/log/maillog.log\n\n\n# Log cron stuff\ncron.*                                                  /var/log/cron.log\n\n# Everybody gets emergency messages\n*.emerg                                                 :omusrmsg:*\n\n# Save news errors of level crit and higher in a special file.\nuucp,news.crit                                          /var/log/spooler.log\n\n# Save boot messages also to boot.log\nlocal7.*                                                /var/log/boot.log\n\n#*.* \t\t\t\t\t\t\t                        @@172.16.0.223:514\n:msg, contains, \"PHP\"\t\t\t\t\t                @172.16.0.223       #ç´€éŒ„åœ¨messagesè£¡æœ‰\"PHP\"é—œéµå­—çš„LOG\n\n#include(file=\"/etc/rsyslog.d/*.conf\")\n\n#:programname,isequal,\"dhclient\"                         /var/log/dhclient.log\n#:programname,isequal,\"ec2net\"                           /var/log/dhclient.log\n\n# ### begin forwarding rule ###\n# The statement between the begin ... end define a SINGLE forwarding\n# rule. They belong together, do NOT split them. If you create multiple\n# forwarding rules, duplicate the whole block!\n# Remote Logging (we use TCP for reliable delivery)\n#\n# An on-disk queue is created for this action. If the remote host is\n# down, messages are spooled to disk and sent when it is up again.\n#$ActionQueueFileName fwdRule1 # unique name prefix for spool files\n#$ActionQueueMaxDiskSpace 1g   # 1gb space limit (use as much as possible)\n$ActionQueueSaveOnShutdown on # save messages to disk on shutdown\n#$ActionQueueType LinkedList   # run asynchronously\n#$ActionResumeRetryCount -1    # infinite retries if host is down\n# remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional\n#*.* @@remote-host:514\n# ### end of the forwarding rule ###\n$IncludeConfig /etc/rsyslog.d/*.conf\n```\n\n***\n***\n\n**rsyslog æœå‹™é‡å•Ÿ**\n   \n```sql\nsystemctl restart rsyslog\n```\n\n***\n***\n\n**nginx è¨­å®šæª”é…ç½® ( é…ç½®è¦å¯«å…¥ `LOGæ©Ÿ` çš„æœå‹™ LOG )**\n\n`web-server-log`\n\n```sql\n\nserver {\n\n    listen 1515;\n    listen [::]:1515;\n    server_name note.laurance.com;\n\n        location  / {\n#       auth_basic      \"authentication\";\n#       auth_basic_user_file conf/mypasswords/.hugopass.dev;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_redirect off;\n        proxy_http_version 1.1;\n        proxy_pass http://127.0.0.1:1313;\n        proxy_set_header X_FORWARDED_HOST $host;\n        proxy_set_header Host $http_host;\n        proxy_ignore_client_abort on;\n        proxy_read_timeout 300;\n\n        proxy_ignore_headers \"Cache-Control\";\n        add_header X-Cache \"$upstream_cache_status from $server_addr\";\n        add_header Cache-Control  max-age=60;\n        proxy_cache_valid  304 1m;\n#       proxy_cache two;\n        proxy_cache_key $host$uri$is_args$args;\n  }\n#    auth_basic      \"authentication\";\n#    auth_basic_user_file conf/mypasswords/.hugopass.dev;\n    access_log logs/hugo-server/hugo-server.acc access;\n    access_log  syslog:server=172.16.0.223:514,tag=note_laurance_orz  access;\n}\n\n```\n\n***\n***\n\n**nginx æœå‹™é‡å•Ÿ**\n   \n```sql\n/usr/local/web/nginx/sbin/nginx -t\n    \n/usr/local/web/nginx/sbin/nginx -s reload\n```\n\n***\n***\n\n**php è¨­å®šæª”é…ç½®**\n`å®šç¾© error_log ä½ç½®åŠå±¤ç´š`\n\n```sql\nvim /usr/local/web/php/etc/php-fpm.conf\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/1yQIXGNx4MsJPoK.png)\n\n***\n***\n\n**SERVER ç«¯è¨­ç½®**\n-----\n\n***\n***\n\n**æ›´æ”¹ rsyslog è¨­å®šæª”åƒæ•¸**\n\n`(-c å¾Œç‚ºç‰ˆæœ¬è™Ÿ)`\n\n```sql\nvim /etc/sysconfig/rsyslog\n```\n\n```sql\nSYSLOGD_OPTIONS=\"-c 5\"\n``` \n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/CKbcLmah9XOQtey.png)\n\n***\n***\n\n**rsyslog è¨­å®šæª”é…ç½®**\n\n```sql\nvim /etc/rsyslog.conf\n```\n    \n```sql\n\n# rsyslog configuration file\n\n# For more information see /usr/share/doc/rsyslog-*/rsyslog_conf.html\n# If you experience problems, see http://www.rsyslog.com/doc/troubleshoot.html\n\n#### MODULES ####\n\n# The imjournal module bellow is now used as a message source instead of imuxsock.\n$ModLoad imuxsock # provides support for local system logging (e.g. via logger command)\n$ModLoad imjournal # provides access to the systemd journal\n#$ModLoad imklog # reads kernel messages (the same are read from journald)\n#$ModLoad immark  # provides --MARK-- message capability\n\n# Provides UDP syslog reception\n$ModLoad imudp\n$UDPServerRun 514\n\n# Provides TCP syslog reception\n$ModLoad imtcp\n$InputTCPServerRun 514\n\n\n#### GLOBAL DIRECTIVES ####\n\n# Where to place auxiliary files\n$WorkDirectory /var/lib/rsyslog\n\n# Use default timestamp format\n$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat\n\n# File syncing capability is disabled by default. This feature is usually not required,\n# not useful and an extreme performance hit\n#$ActionFileEnableSync on\n\n# Include all config files in /etc/rsyslog.d/\n$IncludeConfig /etc/rsyslog.d/*.conf\n\n# Turn off message reception via local log socket;\n# local messages are retrieved through imjournal now.\n$OmitLocalLogging on\n\n# File to store the position in the journal\n$IMJournalStateFile imjournal.state\n\n\n#### RULES ####\n\n# Log all kernel messages to the console.\n# Logging much else clutters up the screen.\n#kern.*                                                 /dev/console\n\n# Log anything (except mail) of level info or higher.\n# Don't log private authentication messages!\n*.info;mail.none;authpriv.none;cron.none                /var/log/messages\n\n# The authpriv file has restricted access.\nauthpriv.*                                              /var/log/secure\n\n# Log all the mail messages in one place.\nmail.*                                                  -/var/log/maillog\n\n\n# Log cron stuff\ncron.*                                                  /var/log/cron\n\n# Everybody gets emergency messages\n*.emerg                                                 :omusrmsg:*\n\n# Save news errors of level crit and higher in a special file.\nuucp,news.crit                                          /var/log/spooler\n\n# Save boot messages also to boot.log\n#local7.*                                                /var/log/boot.log\n\n#:programname,isequal,\"dhclient\"                         /var/log/dhclient.log\n#:programname,isequal,\"ec2net\"                           /var/log/dhclient.log\n\n# ### begin forwarding rule ###\n# The statement between the begin ... end define a SINGLE forwarding\n# rule. They belong together, do NOT split them. If you create multiple\n# forwarding rules, duplicate the whole block!\n# Remote Logging (we use TCP for reliable delivery)\n#\n# An on-disk queue is created for this action. If the remote host is\n# down, messages are spooled to disk and sent when it is up again.\n#$ActionQueueFileName fwdRule1 # unique name prefix for spool files\n#$ActionQueueMaxDiskSpace 1g   # 1gb space limit (use as much as possible)\n#$ActionQueueSaveOnShutdown on # save messages to disk on shutdown\n#$ActionQueueType LinkedList   # run asynchronously\n#$ActionResumeRetryCount -1    # infinite retries if host is down\n# remote host is: name/ip:port, e.g. 192.168.0.1:514, port optional\n#*.* @@remote-host:514\n# ### end of the forwarding rule ###\n$IncludeConfig /etc/rsyslog.d/*.conf\n\n```    \n\n***\n***\n   \n**åœ¨ `/etc/rsyslog.d` ç›®éŒ„ä¸‹å»ºç«‹ `xxx.conf` å®šç¾© Client ç«¯ log çš„æ¨™ç±¤åŠè·¯å¾‘**\n   \n```sql\nvim /etc/rsyslog.d/note_laurance.conf\n```\n   \n```sql\n:syslogtag, contains, \"note_laurance_orz\" /home/note-laurance-log/note.laurance.log\n    \n& stop\n```\n\n```sql\nvim /etc/rsyslog.d/php_error.conf\n```\n   \n```sql\nif  $msg contains 'PHP'  then /home/note-laurance-log/php_errors.acc\n\n& stop\n``` \n\n***\n***\n \n**rsyslog æœå‹™é‡å•Ÿ**\n   \n```sql\nsystemctl restart rsyslog\n\n```\n\n***\n***\n\n**å»ºç«‹æ¯å¤©æ’ç¨‹ LOGè¼ªè©¢**\n-----\n\n**å»ºç«‹æ’ç¨‹è¨­å®šæª” shell**\n   \n```sql\nvim /root/logrotate/logrotate.sh\n```\n    \n```yaml\n#!/bin/bash\n\n/usr/sbin/logrotate /root/logrotate/weblog  // è‹¥å¸¶åƒæ•¸ -f ç‚ºå¼·åˆ¶åŸ·è¡Œ\n```\n\n```sql\nvim /root/logrotate/weblog\n```\n    \n```sql\n/home/note-laurance-log/*.log {\n           daily\n           rotate 30\n           create\n           sharedscripts\n           postrotate\n           /bin/systemctl restart rsyslog.service\n           endscript\n}\n\n/home/note-laurance-log/*.acc {\n           daily\n           rotate 30\n           create\n           sharedscripts\n           postrotate\n           /bin/systemctl restart rsyslog.service\n           endscript\n}\n\n```\n\n***\n***\n\n**å»ºç«‹æ’ç¨‹**\n\n```sql\ncrontab -e\n``` \n    \n```sql\n10 05 * * * sh /root/logrotate/logrotate.sh\n```\n\n***\n***\n    \n**ç¢ºèªæ’ç¨‹å¯«å…¥**\n\n```sql\ncrontab -l\n```\n\n***\n***\n   \n**é©—è­‰:**\n-----\n\n***\n***\n\n\n\n**è¨ªå• note.laurance.com:1515 å¯ä»¥çœ‹åˆ° LOG è¢«åŒæ­¥å¯«é€²æŒ‡å®šä½ç½®äº†**\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/CJGAnldHruLWmgD.png)\n\n***\n***   \n\n[Rsyslog å®˜æ–¹æ–‡ä»¶](https://www.rsyslog.com/doc/v8-stable/index.html)\n   \n   \n    \n\n\n\n***\n\n","tags":["Rsyslog"],"categories":["Linux"]},{"title":"Grafana - Loki æŸ¥è©¢èªè¨€ LogQL","url":"/blog.github.io/2022/12/16/Grafana-LokiæŸ¥è©¢èªè¨€LogQL/","content":"\n\n\n# æŸ¥è©¢é—œéµå­— \"ERROR\"\n   \n```sql\n{job=\"my1log\",filename=\"/var/lib/mysql/master01/mysql.err\"} |= \"ERROR\"\n```\n\n\n\n***\n***\n***\n\n\n   ![](https://s2.loli.net/2024/04/28/yaTZIxkcBwqeh1j.png)\n   \n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Grafana - ä½¿ç”¨ uptime æŸ¥è©¢ç³»çµ±é‹è¡Œæ™‚é–“","url":"/blog.github.io/2022/12/16/Grafana-ä½¿ç”¨uptimeæŸ¥è©¢ç³»çµ±é‹è¡Œæ™‚é–“/","content":"\n# å»ºç«‹ `panel for uptime`\n\n\n\n## é»é¸ `uptime` çš„ `panel` é¸æ“‡ `edit`\n\n\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/cZWSD8YP5sX2xvz.png)\n\n***\n***\n***\n\n\n\n## æ—é‚Šç´°ç¯€è¨­å®šå¯åƒç…§ :\n\n\n\n***\n***\n***\n\n ![](https://s2.loli.net/2024/04/28/RnNVfyUowFa83Tc.png)\n \n ![](https://s2.loli.net/2024/04/28/nFjNs58zq1B6LAg.png)\n\n***\n***\n***\n\n# InfluxDBæŸ¥è©¢èªæ³•:\n\n```sql\nselect last(uptime_format) as value from system\n    \nSELECT last(\"uptime_format\") AS \"value\" FROM \"system\" WHERE \"host\":~ /$server$/ AND $timeFilter GROUP BY time($interval)\n```\n\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Grafana - å»ºç«‹ panel for loading","url":"/blog.github.io/2022/12/16/Grafana-å»ºç«‹panel-for-loading/","content":"\n***\n***\n\n**Add an panel for monitor loading**\n=====\n\n***\n***\n\n### {step1} å³ä¸Šè§’ `+` > Add an empty panel\n\n***\n***\n\n### {step2} ä¾éœ€æ±‚å¡«å¯« `Data source` `Query` `Visualization`\n\n***\n***\n\n\n    \nData source: InfluxDB\n\n\n\n\n\nQuery: SELECT last(\"load1\") AS \"load\" FROM \"system\" WHERE  \"host\" !~/^$interval$/ and time > now() -1m group by \"host\"\n\n\n\n\n   \nVisualization: Table\n\n\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/28/I15zNPEQufWObjk.png)\n\n***\n***\n\n### {step3} é¸æ“‡ `Transform` å»ºç«‹ `Organize fields` && å¢åŠ  `host` `load` `time`\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/A6GPEfFBqZknD8e.png)\n\n![](https://s2.loli.net/2024/04/28/gsoASGUwYu6PMEn.png)\n\n***\n***\n\n### {step4} å³å´æ¢ä»¶é¸å–®æ‹‰åˆ°æœ€åº•é¸æ“‡ \n\n***\n***\n\n\n\n`Add filed override` > `Fields with name` > `LastUpdate` > `+ Add override property`\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/7r26d8ZuNS4OVFe.png)\n\n![](https://s2.loli.net/2024/04/28/OcHWFMrnzGZu9AL.png)\n\n![](https://s2.loli.net/2024/04/28/zZVX7uatxk9ITcS.png)\n\n***\n***\n\n\n\n`Standard options > Unit` > `Date&time` > `From Now`\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/9KZivBVhMT3zaJ8.png)\n\n![](https://s2.loli.net/2024/04/28/xrXfgktsw9LKG4c.png)\n\n***\n***\n\n\n\n#### Override 1\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/KPDgFCShIEQLoZW.png)\n\n***\n***\n\n\n\n#### Override 2\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/ngPu1pYHcqxfhSy.png)\n\n***\n***\n\n\n\n#### Override 3\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/ucxmz6qodpEgORD.png)\n\n***\n***\n\n\n\n#### Final\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/gidYSonZlMUc4vB.png)\n\n***\n***\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Grafana - å»ºç«‹ panel for memory","url":"/blog.github.io/2022/12/16/Grafana-å»ºç«‹panel-for-memory/","content":"\n***\n***\n\n**Add an panel for monitor memory**\n=====\n\n***\n***\n\n### {step1} å³ä¸Šè§’ `+` > Add an empty panel\n\n***\n***\n\n### {step2} ä¾éœ€æ±‚å¡«å¯« `Data source` `Query` `Visualization`\n\n***\n***\n\n\n\nData source: InfluxDB\n\nQuery: \n\nSELECT last(\"used_percent\") AS \"percent\", \"used\" AS \"used\", \"total\" AS \"total\" FROM \"mem\" WHERE  \"host\" !~/^$interval$/ and time > now() -1m group by \"host\"\n\nVisualization: Table\n\n\n\n***\n***\n\n### {step3} ä¾éœ€æ±‚æ–°å¢ `Transform`\n\n***\n***\n\n\n\nTransform: Organize fields\n\nhost: Host\n\nused: Used\n\ntotal: Total\n\npercent: Percent\n\nTime: LastUpdate\n    \n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/fTvN56UiB2R74GS.png)\n\n![](https://s2.loli.net/2024/04/28/4YPgNmqtVvu3FZB.png)\n\n![](https://s2.loli.net/2024/04/28/BSoVEWDUaHOPJ6Y.png)\n\n***\n***\n\n### {step4} å³å´æ¢ä»¶é¸å–®æ‹‰åˆ°æœ€åº•é¸æ“‡ `Add filed override`\n\n***\n***\n\n\n\n#### Override 1 & Override 2\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/pZfLIV7hGMxq5bX.png)\n\n![](https://s2.loli.net/2024/04/28/ofZVNTvXRSKmnO7.png)\n\n![](https://s2.loli.net/2024/04/28/YRmBolXFJnxHOD4.png)\n\n***\n***\n\n\n\n#### Override 3 & Override 4 & Override 5 \n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/EqRBOyneWTQsjkZ.png)\n\n![](https://s2.loli.net/2024/04/28/vW6pFgIZqmNhVe2.png)\n\n![](https://s2.loli.net/2024/04/28/ePWVXFJBLRjIitD.png)\n\n***\n***\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Grafana - å»ºç«‹ panel for storage","url":"/blog.github.io/2022/12/16/Grafana-å»ºç«‹panel-for-storage/","content":"\n***\n***\n\n**Add an panel for monitor storage**\n=====\n\n***\n***\n\n### {step1} å³ä¸Šè§’ `+` > Add an empty panel\n\n***\n***\n\n### {step2} ä¾éœ€æ±‚å¡«å¯« `Data source` `Query` `Visualization`\n\n\n\nData source: InfluxDB\n    \nFormat as: Table\n    \nVisualization: Table\n\n\n\n```sql\nSELECT last(\"used_percent\") AS \"percent\", \"used\" AS \"used\", \"total\" AS \"total\" FROM \"disk\" WHERE  \"host\" !~ /^$interval$/ and time > now() -1m group by \"host\", \"path\"\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/28/2sOWDPgatISy7dM.png)\n\n***\n***\n\n### {step3} é¸æ“‡ `Transform` å»ºç«‹ `Organize fields` && ä¾éœ€æ±‚å¡«å¯« `host`,`path`,`used`,`total`,`percent`,`lastupdate`\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/ZiSj8QduocEpwVL.png)\n\n![](https://s2.loli.net/2024/04/28/z4xUopQEsVLGitH.png)\n\n***\n***\n\n### {step4} å³å´æ¢ä»¶é¸å–®æ‹‰åˆ°æœ€åº•é¸æ“‡ `Add filed override`\n\n***\n***\n\n\n\n#### Override 1 & Override 2\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/qCL2cRKpWN46Y3B.png)\n\n![](https://s2.loli.net/2024/04/28/zhHRcASxDpT3mOj.png)\n\n***\n***\n\n\n\n#### Override 3 & Override 4\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/6FBEYoC9WrGgR5m.png)\n\n![](https://s2.loli.net/2024/04/28/rPqYkTLeJEKFUGg.png)\n\n***\n***\n\n\n\n#### Override 5 & Override 6\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/pnASdXy6Vkwju1J.png)\n\n![](https://s2.loli.net/2024/04/28/LYTdoMN6IgmPBeG.png)\n\n***\n***\n\n\n\n#### FINAL\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/Lj1IVbhS5AcwmaW.png)\n\n***\n***\n\n\n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"Grafana - æ­å»ºç´€éŒ„ Lokiã€Promtailã€Grafana è¼•é‡ç´šæ—¥èªŒç³»çµ±","url":"/blog.github.io/2022/12/16/Grafana-æ­å»ºLoki,Promtail,Grafanaè¼•é‡ç´šæ—¥èªŒç³»çµ±/","content":"\n***\n***\n\n**Grafana å®‰è£**\n=====\n\n[Grafana å®˜æ–¹è¼‰é»](https://grafana.com/grafana/download)\n\n### å®‰è£å®Œå•Ÿå‹• grafana\n\n`ç”¨é€”:ç”¨æ–¼è¦–è¦ºåŒ–å’Œåˆ†æ Log`\n\n```sql\nwget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.3.2-1.x86_64.rpm\n    \nyum localinstall grafana-enterprise-9.3.2-1.x86_64.rpm\n    \nsystemctl start grafana-server && systemctl status grafana-server\n```\n\n***\n***\n\n**Promtail ã€ Loki å®‰è£**\n=====\n    \n[Promtail & Loki å®˜æ–¹è¼‰é»](https://grafana.com/docs/loki/latest/installation/local/)\n\n### Promtail å®‰è£\n\n`ç”¨é€”:æ”¶é›† Log åŠæ·»åŠ æ¨™ç±¤ä¸¦ç™¼é€çµ¦ Loki`\n\n```sql\nwget https://github.com/grafana/loki/releases/download/v2.7.1/promtail-2.7.1.x86_64.rpm\n    \nyum localinstall promtail-2.7.1.x86_64.rpm\n```\n\n***\n***\n\n### Loki å®‰è£ \n\n`ç”¨é€”:è² è²¬å„²å­˜ Log å’Œè™•ç†æŸ¥è©¢`\n    \n```sql\nwget https://github.com/grafana/loki/releases/download/v2.7.1/loki-2.7.1.x86_64.rpm\n        \nyum localinstall loki-2.7.1.x86_64.rpm\n```\n\n***\n***\n    \n#### Promtail & Loki è¨­å®šæª”é…ç½®: \n   \n```sql\nvim /etc/loki/config.yml\n```\n   \n   ![]()\n   \n```sql\nvim /etc/promtail/config.yml\n```\n   \n   ![]()\n\n### å•Ÿå‹•æœå‹™ Promtail & Loki\n   \n```sql\nsystemctl start loki && systemctl start promtail\n```\n\n***\n***\n    \n### è¨ªå• Grafana\n   \n#### å»ºç«‹ Datasorce for loki\n   \n   ![]()\n\n***\n***\n\n#### é¸æ“‡ LOKI - Database\n   \n   ![]()\n\n***\n***\n   \n#### å¡«å¯«è³‡æ–™ä¾†æº ä¹‹å¾ŒæŒ‰ save && explore\n   \n   ![]()\n\n***\n***\n   \n#### å¡«å¯« Log browser job & filename å³å¯\n   \n   ![]()\n\n***\n***\n   \n#### é©—è­‰:\n   \n```sql\ncurl http://172.16.0.222:3100/metrics\n```\n\n***\n***\n   \n   \n**Loki æ•´é«”æ¶æ§‹**\n====\n   \n![]()\n   \n***\n***\n   \n    \n\n\n   \n   \n***\n\n","tags":["Grafana","Promtail","Loki"],"categories":["Grafana"]},{"title":"GCP - ç„¡ç—›è½‰ç§»å¸³å–®å…è²»é¡åº¦","url":"/blog.github.io/2022/12/15/GCP-ç„¡ç—›è½‰ç§»å¸³å–®å…è²»é¡åº¦/","content":"\n<!--more-->\n\"ç„¡é™è©¦ç”¨æœŸæ•™å­¸\"\n\n***\n***\n***\n\n# GCP å‰©é¤˜æ™‚é–“\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/XhKOHv39WqZTfDn.png)\n\n***\n***\n***\n\n## åœ¨ [å¸³å–® > å¸³æˆ¶ç®¡ç†] å¯ä»¥çœ‹åˆ°æœ‰å¸³å–®å¸³æˆ¶ç®¡ç†å“¡\n\n## æˆ‘å€‘å¯ä»¥å…ˆç”¨ `æ–° gmail `è¨»å†Šä¸€å€‹`æ–° GCP å¸³è™Ÿ`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/CR5XKl2GiBcWFSv.png)\n\n***\n***\n***\n\n## å°‡æ–°çš„ `GCPå¸³è™Ÿ` ç¶å®šåŒä¸€å¼µä¿¡ç”¨å¡,é ˜å–300ç¾æŠµå…é¡\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/pyE5h9PAtN6bz38.png)\n\n***\n***\n***\n\n### ps. å¦‚æœå‡ºç¾å¡`è¢«æ‰£40å¡Š` , æ”¾å¿ƒå¾Œé¢æœƒé€€åˆ·çš„\n\n***\n***\n***\n\n## åœ¨`èˆŠ çš„å¸³å–®å¸³æˆ¶ID`è£¡æ–°å¢å‰›å‰›æ–°å‰µç«‹çš„`æ–° GCPå¸³è™Ÿ`\n\n### å¸³å–® > å¸³æˆ¶ç®¡ç† > æ–°å¢ä¸»é«”\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/JSEMzgob8N23Xcu.png)\n\n***\n***\n***\n\n## å°‡`æ–°çš„ GCPå¸³è™Ÿ`å¡«å…¥ä¸¦é¸æ“‡`å¸³å–®å¸³æˆ¶ç®¡ç†å“¡`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/rnkzYXyf9ZNGCHU.png)\n\n***\n***\n***\n\n## å„²å­˜å¾Œå¯ä»¥çœ‹åˆ°å¸³å–®å¸³æˆ¶ç®¡ç†å“¡å¤šäº† `æ–°çš„GCPå¸³è™Ÿ`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/ynsbIdP4WAlLi1E.png)\n\n***\n***\n***\n\n## æ¥è‘—åˆ°æ–°çš„GCPå¸³è™Ÿé¸æ“‡`ç®¡ç†å¸³å–®å¸³æˆ¶`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/mXaLJOkBKNdsM18.png)\n\n***\n***\n***\n\n## åœ¨`æ–° çš„å¸³å–®å¸³æˆ¶ID`è£¡æ–°å¢`èˆŠ GCPå¸³è™Ÿ`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/WqLTVyl2cd7MBwA.png)\n\n***\n***\n***\n\n## å°‡`èˆŠçš„ GCPå¸³è™Ÿ`å¡«å…¥ä¸¦é¸æ“‡`å¸³å–®å¸³æˆ¶ç®¡ç†å“¡`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/XwnGghaboqy5Q7p.png)\n\n***\n***\n***\n\n## å„²å­˜å¾Œå¯ä»¥çœ‹åˆ°å¸³å–®å¸³æˆ¶ç®¡ç†å“¡å¤šäº† `èˆŠçš„GCPå¸³è™Ÿ`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/aACvwnHXibgSZI8.png)\n\n***\n***\n***\n\n\n\n### å†ä¾†éœ€è¦å°‡æ–°èˆŠå¸³å–®çš„`å¸³å–®ç®¡ç†å“¡`äº’æ› :\n \n### å°‡èˆŠGCP å¸³å–®è£¡ `ä¿ç•™æ–°çš„GCPå¸³è™Ÿ`  ( å°‡ `èˆŠçš„GCPå¸³è™Ÿ` ç æ‰ )\n### å°‡æ–°GCP å¸³å–®è£¡ `ä¿ç•™èˆŠçš„GCPå¸³è™Ÿ`  ( å°‡ `æ–°çš„ GCPå¸³è™Ÿ` ç æ‰ )\n\n###  æ–°çš„GCPå¸³è™Ÿè£¡æ²’æœ‰è·‘æ©Ÿå™¨,ä¸æœƒç”¢ç”Ÿè²»ç”¨\n### ç”¨æ–°çš„æŠµå…é¡å»¶çºŒèˆŠGCPå¸³è™Ÿè£¡çš„æ©Ÿå™¨\n\n### åœ¨ è¨ˆè²»åŠŸèƒ½ > æˆ‘çš„å°ˆæ¡ˆä¸‹ `æ“ä½œ > è®Šæ›´å¸³å–® > è‡³æˆ‘çš„å¸³å–®å¸³æˆ¶`\n\n\n\n***\n***\n***\n\n## å†ä¾†å°‡èˆŠå°ˆæ¡ˆçš„ID æ”¹æˆ`æ–°çš„å¸³å–®ID`\n\n***\n***\n***\n\n## ä¸Šé¢éƒ½åšå®Œå¾Œ,å¯ä»¥çœ‹åˆ°èˆŠå¸³è™Ÿçš„å¸³æˆ¶IDå·²ç¶“è®Šæˆæœ‰æŠµå…é¡çš„æ–°å¸³è™ŸID\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/xqHa4bJePkj8Vlo.png)\n\n***\n***\n***\n\n## å†ä¾†åˆ‡åˆ°æˆ‘çš„å°ˆæ¡ˆè£¡é¢,çœ‹åˆ°å¸³å–®å¸³æˆ¶IDé‚„æ˜¯èˆŠçš„\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/s8mA5x2NfFyOPDX.png)\n\n***\n***\n***\n\n## å°‡æ‰€æœ‰å°ˆæ¡ˆé»é¸ `è®Šæ›´å¸³å–®` åˆ‡æ›åˆ°æ–°çš„å¸³å–®å¸³æˆ¶ ID\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/BtnT93EwpF6YeGh.png)\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/m9ZWw5Mi4SnLYxV.png)\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/gQMOm4fIqWFaecr.png)\n\n***\n***\n***\n\n## å°‡æ–°å¸³è™Ÿè£¡ç³»çµ±å»ºçš„å°ˆæ¡ˆ`åœç”¨è¨ˆè²»åŠŸèƒ½`\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/SLmqzXKgIb7YkBZ.png)\n\n***\n***\n***\n\n## ä¹‹å¾Œå†å°‡é€™é è¨­å°ˆæ¡ˆé—œé–‰å³å¯\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/jbKn7fWUlaDrpHN.png)\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/ZjgQcLn8CKW2PIF.png)\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/MJF83xLSDNdZbym.png)\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/V3iWaGnpKcoOPEU.png)\n\n***\n***\n***\n\n## æœ€å¾Œé‡æ–°é–‹å•Ÿå¾Œå¯ä»¥çœ‹åˆ°èˆŠå¸³è™Ÿå·²å»¶çºŒæ–°å¸³è™Ÿçš„æŠµå…é¡åŠå¤©æ•¸\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/j5degmzPoNRlWOc.png)\n\n***\n***\n***\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"MySQL - å ±éŒ¯ Changed limits max_connections ( error 214 ) è§£å†³æ–¹æ³•","url":"/blog.github.io/2022/12/14/Mysql-Changed_limits_max_connections_è§£å†³æ–¹æ³•/","content":"\n<!--more-->\nerror 214 ---- Buffered warning: Changed limits: max_connections\n\n***\n***\n\n**ä¿®æ”¹ç³»çµ± Kernel çš„è®Šæ•¸**\n-----\n\n```sql\nvim /etc/sysctl.conf\n```\n    \n```sql\nnet.ipv4.tcp_syncookies: 1\n\nnet.ipv4.tcp_tw_reuse: 1\n\nnet.ipv4.tcp_tw_recycle: 1\n  \nnet.ipv4.tcp_fin_timeout: 30\n```\n\n***\n***\n    \n***ä¿®æ”¹ç³»çµ±è³‡æºé™åˆ¶é…ç½®æ–‡ä»¶***\n-----\n\n```sql\nvim /etc/security/limits.conf \n```\n\n```sql\n* soft nproc 65535\n\n* hard nproc 65535\n\n* soft nofile 65535\n\n* hard nofile 65535  \n```\n\n***\n***\n    \n***å°‡mysqlé»˜èªè³‡æºé™åˆ¶æ‹‰é«˜ (é»˜èªç‚º5000)***\n-----\n\n```sql\nvim /usr/lib/systemd/system/mysqld.service\n    \nLimitNOFILE=65535\n```    \n\n***\n***\n \n![](https://s2.loli.net/2024/04/29/oOcpS4bGkCZLjAY.png)\n\n***\n***\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"Nginx - Proxypass (ç¯„ä¾‹)","url":"/blog.github.io/2022/12/13/Nginx-Proxypass_(HUGO)/","content":"\n***\n***\n\n**NGINX é–‹ port:1515 å°å‘ HUGO-localhost:1313 ç¯„ä¾‹**\n=====\n\n***\n***\n\n\n```sql\nserver {\n\n    listen 1515;\n    listen [::]:1515;\n#    server_name ;\n\n        location  / {\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_redirect off;\n        proxy_http_version 1.1;\n        proxy_pass http://127.0.0.1:1313;\n        proxy_set_header X_FORWARDED_HOST $host;\n        proxy_set_header Host $http_host;\n        proxy_ignore_client_abort on;\n        proxy_read_timeout 300;\n\n        proxy_ignore_headers \"Cache-Control\";\n        add_header X-Cache \"$upstream_cache_status from $server_addr\";\n        add_header Cache-Control  max-age=60;\n        proxy_cache_valid  304 1m;\n#       proxy_cache two;\n        proxy_cache_key $host$uri$is_args$args;\n  }\n    access_log logs/hugo-server/hugo-server.acc access;\n}\n```\n\n    \n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"CentOS 7 - ä½¿ç”¨ certbot åŠè‡ªå‹•æ›´æ–° SSL æ†‘è­‰","url":"/blog.github.io/2022/12/10/CentOS7-ä½¿ç”¨certbotåŠè‡ªå‹•æ›´æ–°SSLæ†‘è­‰/","content":"\n\n   \n # ä¸‹è¼‰ certbot è…³æœ¬\n   \n```sql\n\nwget https://raw.githubusercontent.com/certbot/certbot/7f0fa18c570942238a7de73ed99945c3710408b4/letsencrypt-auto-source/letsencrypt-auto -O /root/certbot-auto\n\n``` \n\n\n\n\n   \n# çµ¦äºˆæ¬Šé™\n   \n```sql\n\nchmod 755 /root/certbot-auto\n\n```\n\n\n\n   \n \n # ä½¿ç”¨ certbot-auto ç°½ç™¼ä¸‰å€‹æœˆæ†‘è­‰\n   \n\n## (ä¿è­· domain åŠ sub domain)\n\n```sql\n\n./certbot-auto certonly -d â€œ*.åŸŸåâ€-d â€œåŸŸåâ€ --manual --preferred-challenges dns\n\n```\n    \n## (åªä¿è­· sub domain) \n\n```sql\n\n./certbot-auto certonly -d *.åŸŸå --manual --preferred-challenges dns\n\n```\n\n\n\n    \n   \n# é©—è­‰è§£æ\n   \n```sql\n\nnslookup -type=TXT _acme-challenge.XXXXX.net 8.8.8.8\n\n```\n \n\n\n  \n   \n # é©—è­‰éå¾Œæœƒæœ‰4éš»pem è·¯å¾‘: /etc/letsencrypt/archive/\n   \n```sql\n\ncp fullchain1.pem /usr/local/web/nginx/conf/key/las/XXXXX.net.crt\n    \ncp privkey1.pem /usr/local/web/nginx/conf/key/las/XXXXX.net.key\n\n```\n\n\n\n    \n   \n# NGINX é‡å•Ÿ\n   \n```sql\n\n/usr/local/web/nginx/sbin/nginx  -t\n    \n/usr/local/web/nginx/sbin/nginx  -s reload\n\n```\n    \n\n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"Linux - å¯¦ç¾å…å¯†ç¢¼è¤‡è£½é ç«¯æª”æ¡ˆ (scp)","url":"/blog.github.io/2022/12/10/Linux-ä½¿ç”¨SSHé…åˆæ†‘è­‰ä¾†é ç«¯è¤‡è£½æª”æ¡ˆ_(scp)/","content":"\n***\n***\n\n\n\n### æ¸¬è©¦ç’°å¢ƒ : \n\n#### ( ä¾†æº ) A æ©Ÿ\n\n#### ( ç›®çš„ ) B æ©Ÿ\n\n\n\n***\n***\n\n### A æ©Ÿè¨­ç½® : \n\n#### åœ¨å®¶ç›®éŒ„æ–°å¢ `å…¬é‘°` åŠ `ç§é‘°`\n\n```sql\nssh-keygen -t dsa\n```\n\n`æ–°å¢å®Œå¾Œ, åœ¨ .ssh/ ç›®éŒ„è£¡ï¼Œæœƒå¤šå‡º id_rsa å’Œ id_rsa.pub é€™å…©å€‹æª”æ¡ˆ`\n\n***\n***\n   \n![](https://s2.loli.net/2024/04/29/BledN9qQV7Ckx48.png)\n\n***\n***\n\n#### å°‡ `A æ©Ÿ  id_dsa.pub`  çš„å…§å®¹è¤‡è£½åˆ° `B æ©Ÿå®¶ç›®éŒ„ä¸‹` ä¸¦å‘½åç‚º `authorized_keys`  é™åˆ¶è®€å¯«æ¬Šé™\n   \n```sql\ncat id_rsa.pub > authorized_keys\n    \nchmod 600 authorized_keys\n```\n\n***\n***\n\n\n    \nPS. è‹¥æ˜¯æœ‰å¤šå€‹  id_rsa.pub éœ€è¦è¨­å®š (æ³¨æ„!!! éœ€è¦åœ¨ç¬¬ä¸€æ­¥é¸æ“‡è·¯å¾‘)\n   \n```sql\nssh-keygen -t rsa\n```\n    \nç¬¬ä¸€æ­¥éœ€å¡«å¯«è·¯å¾‘ å…¶é¤˜ ENTER å³å¯\n    \n```sql\nEnter file in which to save the key (/root/.ssh/id_rsa): /root/.ssh/id_rsa_root\n```\n\n\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/1dtFiHImx93LBZP.png)\n\n***\n***\n    \n\n   \n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Linux - history å‘½ä»¤ä¿å­˜çš„æœ€å¤§æ•¸","url":"/blog.github.io/2022/12/10/Linux-historyå‘½ä»¤ä¿å­˜çš„æœ€å¤§æ•¸/","content":"\n***\n***\n\n**~/.bash_history è£¡é¢ç´€éŒ„çš„æ˜¯ä¸Šä¸€æ¬¡ç™»å‡ºçš„æ­·å²ç´€éŒ„ (é»˜èªä¿å­˜1000æ¢)**\n=====\n\n***\n***\n    \n**æŸ¥çœ‹ç›®å‰ä¿ç•™é…ç½®**\n------\n    \n```sql\necho $HISTSIZE\n```\n\n***\n***\n    \n**ä¿®æ”¹ç’°å¢ƒè®Šé‡ (æ°¸ä¹…é…ç½®)**\n------\n   \n```sql\nsed -i 's/^HISTSIZE=1000/HISTSIZE=100000/' /etc/profile\nsource /etc/profile\n```\n\n***\n***\n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Nginx - é…ç½® Nginx auth_basic èº«åˆ†é©—è­‰","url":"/blog.github.io/2022/12/10/Nginx-é…ç½®Nginx_auth_basicèº«åˆ†é©—è­‰/","content":"\n***\n***\n\n***Nginx é»˜èªå°±æœ‰å®‰è£ `ngx_http_auth_basic_module` æ¨¡å¡Š ( ä¸ç”¨ç‰¹åˆ¥ç·¨è­¯ )***\n=====\n\n***\n***\n   \n**ç”Ÿæˆå¸³è™Ÿ && å¯†ç¢¼**\n-----\n   \n```sql\necho -n 'root:' >> /usr/local/web/nginx/conf/mypasswords/.testpass.dav\n    \nopenssl passwd -apr1 123456 >> /usr/local/web/nginx/conf/mypasswords/.testpass.dav\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/uQKtLIg1AdiavOq.png)\n\n***\n***\n   \n**é…ç½® Nginx**\n-----\n   \n```sql\nserver {\n    \n        listen          80;\n        server_name     php-test.net;\n        index           index.php index.html;\n        root            /home/test/php;\n        include         vhost/file.conf;\n        access_log      logs/test/test.acc access;\n        auth_basic      \"authentication\";\n        auth_basic_user_file /usr/local/web/nginx/conf/mypasswords/.testpass.dav;\n    \n    }\n```    \n\n***\n***\n\n**é…ç½®file.conf (PHP)**\n-----\n   \n```sql\nlocation ~ \\.php$ {\n        try_files $uri:404;\n        fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n        include fastcgi_params;\n        #fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        #fastcgi_intercept_errors on;\n        fastcgi_pass 127.0.0.1:9000;\n        }\n    \n        location ~ \\.wav$ {\n            add_header Content-Disposition \"inline\";\n        }\n```        \n\n***\n***\n   \n**Nginx é‡å•Ÿåƒè¨­å®š**\n   \n```sql\n/usr/local/web/nginx/sbin/nginx -t\n    \n/usr/local/web/nginx/sbin/nginx -s reload\n```    \n\n***\n***\n    \n**é©—è­‰:  Windows æœ¬æ©Ÿç¶ Host** \n   \n```sql\n172.16.0.222 \tphp-test.net\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/kbSGMpOrgUwzKlW.png)\n\n***\n***\n    \n   \n   \n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"GCP - google å•Ÿç”¨å…©æ­¥é©Ÿé©—è­‰ å†è¨­å®šæ‡‰ç”¨ç¨‹å¼å°ˆç”¨å¯†ç¢¼","url":"/blog.github.io/2022/12/06/GCP-googleå•Ÿç”¨å…©æ­¥é©Ÿé©—è­‰/","content":"\n***\n***\n***\n\n\n\n## é»é¸å³ä¸Šè§’é ­åƒï¼Œç®¡ç†ä½ çš„å¸³æˆ¶\n\n## å·¦é‚Š å®‰å…¨æ€§ æ‰¾åˆ° \"ç™»å…¥ Google\" ä¸¦é»é¸ \"å…©æ­¥é©Ÿé©—è­‰\"\n\n\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/wxhbnSJUrycpFOC.png)\n\n***\n***\n***\n\n\n\n## æœƒåˆ—å‡ºæœ‰ç¶å¸³è™Ÿçš„æ‰‹æ©Ÿï¼Œé»é¸ç¹¼çºŒ\n\n## æ¥è‘—è¼¸å…¥ \"é©—è­‰ç¢¼\"\n\n\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/2OKhsA9zpgHTNYc.png)\n\n***\n***\n***\n\n\n\n# éƒ½å®Œæˆå¾Œé€€å‡ºåˆ°é¦–é ï¼Œä¸¦é»é¸ \"æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼\"\n\n\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/KqAuJt2NmCxgWf6.png)\n\n***\n***\n***\n\n\n\n## æ¥è‘—ç³»çµ±æœƒç”¢ç”Ÿä¸€çµ„éš¨æ©Ÿå¯†ç¢¼\n\n## é€™çµ„æ‡‰ç”¨ç¨‹å¼å°ˆç”¨å¯†ç¢¼åªèƒ½ç™»å…¥ä¸€å€‹åœ°æ–¹\n\n\n\n***\n***\n***\n\n![](https://s2.loli.net/2024/04/28/zfUVOsJ1wYZkQqx.png)\n\n   \n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"GCP - GCE å…§å­˜éå°å°è‡´ç„¡æ³•ç·¨è­¯ PHP è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2022/12/06/GCP-å…§å­˜éå°å°è‡´ç„¡æ³•ç·¨è­¯PHP/","content":"\n***\n***\n***\n\n\n\n# ç·¨è­¯PHPæ™‚,ç§€ ERROR: virtual memory exhausted: Cannot allocate memory\n\n\n\n***\n***\n***\n\n## å› ç‚ºç”¨çš„æ˜¯å…è²»æ–¹æ¡ˆ,å…§å­˜å°çš„å¯æ†,æ•…å…ˆèª¿å¤§å†ç¸®å°\n\n## GCPå¾Œå°æŸ¥çœ‹æ©Ÿå™¨å…§å­˜åªæœ‰ 614M\n\n***\n***\n***\n\n   ![](https://s2.loli.net/2024/04/28/jLrtAaCiwseYl7Z.png)\n\n***\n***\n***\n   \n## æ©Ÿå™¨ä¸Šçœ‹ä¹Ÿæ˜¯ 583M\n\n***\n***\n***\n\n   ![](https://s2.loli.net/2024/04/28/abmlO8cAV4xoDWv.png)\n\n***\n***\n***\n   \n## å…ˆå°‡æ©Ÿå™¨é—œæ©Ÿ (è¦é—œæ©Ÿæ‰èƒ½èª¿)\n\n```sql\n\ninit 0    # Linux é—œæ©Ÿèªæ³•\n\n```\n\n***\n***\n***\n    \n## åˆ°GCPå¾Œå°èª¿æˆ g1-small\n\n***\n***\n***\n\n   ![](https://s2.loli.net/2024/04/28/Ql613dBWA92UhpH.png)\n\n***\n***\n***\n   \n## é–‹æ©Ÿå¾Œå°±èƒ½çœ‹åˆ°å·²èª¿æˆ 1.6G\n\n***\n***\n***\n\n   ![](https://s2.loli.net/2024/04/28/mhQVwOlrq2FME6z.png)\n   \n   \n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"GCP - å»ºç«‹ Auto scaling group","url":"/blog.github.io/2022/12/06/GCP-å»ºç«‹Auto-scaling-group/","content":"\n***\n***\n***\n\n\n\n## æ¶æ§‹ : LB -> ASG -> auto scaling\n\n\n\n***\n***\n\n**å»ºç«‹éœ€è¦æ“´å±•æ©Ÿå™¨çš„ Image**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/UjNKYQEAyg3taTX.png)\n***\n***\n\n**é»é¸ä¾†æºç£ç¢Ÿ & åœ°å€ & å°‡ä¸é—œæ©Ÿçš„é¸é …æ‰“å‹¾**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/wfb54UHp3MEDztN.png)\n***\n***\n\n**è£½ä½œæ“´å±•æ©Ÿå™¨çš„ç¯„æœ¬**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/AFvogprJXunek2M.png)\n***\n***\n\n**é¸æ“‡å€åŸŸ & æ©Ÿå™¨è¦æ ¼ `å€åŸŸè¨˜å¾—è¦é¸å…¨åŸŸ`**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/eNJHFqpujb6XQ5A.png)\n***\n***\n![](https://s2.loli.net/2024/04/28/NWpm8P2qsCTYKSz.png)\n***\n***\n![](https://s2.loli.net/2024/04/28/PMX3WHZtjoEheUq.png)\n***\n***\n\n**è‹¥å‰é¢æœ‰æ›LB å¯å°‡`å¤–ç¶² IP`æ‹¿æ‰**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/Z3P2zYlW9TQd8Lh.png)\n***\n***\n\n**å»ºç«‹æ“´å±•ç¾¤çµ„**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/zgCvLeFKYyEi69D.png)\n***\n***\n\n**é¸æ“‡ç¬¬ä¸€å€‹ `ç„¡ç‹€æ…‹æ¨¡å¼` & ç¯„æœ¬ & å€åŸŸ & æ“´å±•æ•¸é‡**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/xIfRBDbFnd8Qh1G.png)\n***\n***\n\n**å¥åº·ç‹€æ…‹æª¢æŸ¥ `å…§å¥— tcp & ( LB ) å¤–å¥— http`**\n-----\n***\n***\n![](https://s2.loli.net/2024/04/28/qZyCLK8mNiAzxHg.png)\n***\n***\n![](https://s2.loli.net/2024/04/28/1XKbUgQkmoEiGj3.png)\n***\n***\n\n\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"Prometheus - MySQL ç›£æ§å»ºç«‹","url":"/blog.github.io/2022/12/06/Prometheus-MySQLç›£æ§+grafanaå±•ç¤º/","content":"\n***\n***\n\n**MySQL å»ºç«‹ `exporterå¸³è™Ÿ`**\n   \n```sql\ncreate user 'exporter'@'%' identified by 'exporter';\n\nGRANT REPLICATION CLIENT, PROCESS ON *.* TO 'exporter'@'%';\n\nGRANT SELECT ON performance_schema.* TO 'exporter'@'%';\n\nflush privileges;\n```\n\n***\n***\n   \n**ä¸‹è¼‰ agent**\n   \n```sql\nwget https://github.com/prometheus/mysqld_exporter/releases/download/v0.13.0/mysqld_exporter-0.13.0.linux-amd64.tar.gz\n\ntar zxvf mysqld_exporter-0.13.0.linux-amd64.tar.gz\n  \ncd mysqld_exporter-0.13.0.linux-amd64/\n```\n\n***\n***\n   \n**åœ¨ `mysqld_exporter` é€™å±¤æ”¾ç½®è¨­å®šæª” (é€™é‚Šæ˜¯å¤šå¥—,æ‰€ä»¥åˆ†é–‹å¯«)**\n    \n```sql\nvim mysqld_exporter-0.13.0.linux-amd64/.my.cnf\n```\n   \n```sql\n[client]\n\nuser=exporter\n   \npassword=exporter\n\nhost=172.16.0.222\n   \nport=3306\n   \n[client]\n   \nuser=exporter\n   \npassword=exporter\n   \nhost=172.16.0.222\n   \nport=3307\n```\n\n***\n***\n   \n**å°‡ exporter å¯«å…¥ systemctl**\n    \n```sql\nvim /usr/lib/systemd/system/mysqld_export.service\n```\n   \n```sql\n[Unit]\n   \nDescription=Mysqld_exporter\n   \nAfter=network-online.target\n   \n[Service]\n   \nType=simple\n   \nExecStart=/root/prometheus/mysqld_exporter-0.13.0.linux-amd64/mysqld_exporter \\\n   \n--config.my-cnf=/root/prometheus/mysqld_exporter-0.13.0.linux-amd64/.my.cnf\n   \nRestart=on-failure\n   \nStartLimitInterval=1\n   \nRestartSec=3\n   \n[Install]\n   \nWantedBy=multi-user.target\n```\n\n***\n***\n   \n**é‡å•Ÿ systemctl** \n    \n```sql\nsystemctl daaemon-reload\n```\n\n***\n***\n    \n**é–‹å•Ÿ agent**\n   \n```sql\nsystemctl start mysqld_export\n```\n\n***\n***\n    \n**é©—è­‰ä¸€ä¸‹**\n    \n```sql\ncurl localhost:9104/metrics\n```\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/V2ahebI4ujsXiwP.png)\n\n***\n***\n    \n***\n\n","tags":["Prometheus"],"categories":["Prometheus"]},{"title":"Iptables - å¦‚ä½•åˆ©ç”¨ ipset å»ºç«‹ iptables é›†åˆ,å°é– åœ‹å®¶ IP","url":"/blog.github.io/2022/12/05/Iptables-åˆ©ç”¨ipsetå»ºç«‹iptablesé›†åˆ_[å¯¦ç¾å°é–åœ‹å®¶IP]/","content":"\n<!--more-->\né€™é‚Šè¨˜éŒ„ä¸€ä¸‹ä¸¦ä½¿ç”¨ æ—¥æœ¬IP å¯¦æ¸¬\n\n***\n***\n\n[ipblocks - åœ‹å®¶ IP ç¶²ç«™](https://www.ipdeny.com/ipblocks/)\n\n***\n***\n\n**å®‰è£å¥—ä»¶ ipset**\n\n```sql\nyum -y install ipset\n```\n\n***\n***\n    \n**ä¸‹è¼‰ `æ—¥æœ¬ IP` æ–‡ä»¶æª”**\n    \n```sql\nwget http://www.ipdeny.com/ipblocks/data/aggregated/jp-aggregated.zone\n```\n\n***\n***\n    \n**ä½¿ç”¨ `ipset` å»ºç«‹ä¸€å€‹æ”¾ `æ—¥æœ¬IP` çš„é›†åˆ**\n    \n```sql\nipset create jpip hash:net maxelem 65536\n```\n\n***\n***\n    \n**å»ºç«‹ä¸€æ”¯ shell ä¾†æŠ“å–æ–‡ä»¶æª”ä¸­çš„ IP**\n   \n```sql\nvim jpip.sh\n```\n\n***\n***\n\n   ![](/image/Iptables-åˆ©ç”¨ipsetå»ºç«‹iptablesé›†åˆ_[å¯¦ç¾å°é–åœ‹å®¶IP]-001.png)\n\n***\n***\n   \n**æŸ¥çœ‹ç›®å‰é›†åˆä¸­IPç‚º `0`**\n   \n```sql\nipset list jpip\n```\n\n***\n***\n    \n   ![](/image/Iptables-åˆ©ç”¨ipsetå»ºç«‹iptablesé›†åˆ_[å¯¦ç¾å°é–åœ‹å®¶IP]-002.png)\n\n***\n***\n    \n**åŸ·è¡Œ shell ä¹‹å¾Œé›†åˆä¸­çš„IPç‚º `2946`**\n   \n```sql\nipset list jpip |head -n 8\n```\n\n***\n***\n    \n   ![](/image/Iptables-åˆ©ç”¨ipsetå»ºç«‹iptablesé›†åˆ_[å¯¦ç¾å°é–åœ‹å®¶IP]-003.png)\n\n***\n***\n   \n**æŸ¥çœ‹ `list-jpip` ä¸­æœ‰å¤šå°‘å€‹IP ( `tail -n +9` å¾ç¬¬ä¹è¡Œé–‹å§‹ç®— )**\n   \n```sql\nipset list jpip |tail -n +9 |wc -l\n```\n\n***\n***\n    \n**å°ç…§æ–‡æª”ä¸­çš„ IPæ•¸é‡ æ˜¯å¦ä¸€è‡´**\n   \n```sql\ncat jp-aggregated.zone |wc -l\n```\n\n***\n***\n    \n**æœ€å¾Œä½¿ç”¨ `iptables` å°‡æ­¤`é›†åˆä¸­IPé€²ä¾†çš„å°åŒ…` DROPæ‰**\n   \n```sql\niptables -I INPUT -m set --match-set jpip src -j DROP \n```\n\n***\n***\n\n   ![](/image/Iptables-åˆ©ç”¨ipsetå»ºç«‹iptablesé›†åˆ_[å¯¦ç¾å°é–åœ‹å®¶IP]-004.png)\n\n***\n***\n      \n[IPSET å®˜ç¶²](https://www.ipdeny.com/ipblocks/)\n\n***\n***\n\n\n   \n### `src` è¡¨ç¤ºæºåœ°å€  `dst` è¡¨ç¤ºç›®æ¨™åœ°å€\n\n***\n   \n### `hash:net` è¡¨ç¤ºç”¨ä»€éº¼é€²è¡Œ hash ï¼Œä¹Ÿå¯ä»¥æ˜¯ `hash:ip` å°±åªèƒ½ ip ä¸èƒ½ç¶²æ®µ `hash:ip` `port ip+port` é€²è¡Œ hash\n\n***\n\n### ä¹Ÿå¯ä»¥æœ‰ `timeout` æ•¸å­— é€™ç¨®åƒæ•¸ï¼ŒæŒ‡å®šé€™å€‹é›†åˆè£é»˜èªçš„è¶…æ™‚æ™‚é–“å–®ä½ `s`  è¶…æ™‚å¾Œæœƒè‡ªå‹•æŠŠè£é¢çš„å°è±¡åˆªé™¤\n   \n\n\n***\n***\n\n| å¸¸ç”¨æŒ‡ä»¤ | æŒ‡ä»¤æ„æ€ |\n| --- | --- |       \n| ipset del yoda x.x.x.x | å¾ yoda é›†åˆä¸­åˆªé™¤å…§å®¹ |     \n| ipset list yoda | æŸ¥çœ‹ yoda é›†åˆå…§å®¹  |    \n| ipset list | æŸ¥çœ‹æ‰€æœ‰é›†åˆçš„å…§å®¹  |    \n| ipset flush yoda | æ¸…ç©º yoda é›†åˆ |     \n| ipset flush | æ¸…ç©ºæ‰€æœ‰é›†åˆ  |    \n| ipset destroy yoda | éŠ·æ¯€ yoda é›†åˆ |      \n| ipset destroy | éŠ·æ¯€æ‰€æœ‰é›†åˆ  |    \n| ipset save yoda | è¼¸å‡º yoda é›†åˆå…§å®¹åˆ°æ¨™æº–è¼¸å‡º |      \n| ipset save | è¼¸å‡ºæ‰€æœ‰é›†åˆå…§å®¹åˆ°æ¨™æº–è¼¸å‡º  |    \n| ipset restore | æ ¹æ“šè¼¸å…¥å…§å®¹æ¢å¾©é›†åˆå…§å®¹  |\n    \n***\n***\n\n\n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"LINE - BOT ä¸²æ¥ Dialogflow æ“ä½œç´€éŒ„","url":"/blog.github.io/2022/12/05/LINE-BOT_ä¸²æ¥Dialogflow/","content":"\n***\n***\n    \n**GCP å¾Œå°æœå°‹æœå‹™ Dialogflow**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/RAhf7x2LzsqWECg.png)\n\n***\n***\n   \n**é¸å– Dialogflow æ§åˆ¶å°**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/BELpG6AoHn57Nka.png)\n\n***\n***\n   \n**é€™é‚Šé¸æ“‡èˆŠå°ˆæ¡ˆ (åŸæœ¬æ²’æœ‰çš„è©±é»æ–°å¢)**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/Yvuzg25k6rsINjP.png)\n   \n   ![](https://s2.loli.net/2024/04/29/6FzivrnGPX7yjVm.png)\n\n***\n***\n   \n**æ–°å¢ agent (å› ç‚ºç•¶åˆå»ºå°ˆæ¡ˆæ™‚,é¸æ“‡çš„æ˜¯å…è²»åœ°å€,æ‰€ä»¥é€™é‚Šæ‰åªèƒ½é¸ global)**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/xLMjqPAykC2DU8R.png)\n\n***\n***\n   \n**é¸æ“‡ Manage , é»æ“Šéœ€è¦ä¸²æ¥ Webhook çš„ Intent** \n    \n**é€²å…¥å¾Œåœ¨æœ€ä¸‹æ–¹å‹¾é¸ã€ŒEnable webhook call for this intentã€ï¼Œè¡¨ç¤ºè©² Intent æœƒé€é Webhook è™•ç†å¾Œå†é€²è¡Œå›è¦†**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/diC8x7pm6rgJVRI.png)\n\n***\n***\n   \n**é¸æ“‡ Intergrations èˆ‡ LINE ä¸²æ¥**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/LgR2oCdv6AStO3I.png)\n   \n   ![](https://s2.loli.net/2024/04/29/ViPBRxrvLXU4lEW.png)\n\n***\n***\n   \n**å°‡ LINE çš„ ID åŠ TOKEN ä¾åºå¡«å…¥ Configuration**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/5iGRc9DtSw3jyP8.png)\n   \n   ![](https://s2.loli.net/2024/04/29/6mJcOLvnhNYiRU3.png)\n   \n   ![](https://s2.loli.net/2024/04/29/CpKjTVqfxZNLrR6.png)\n\n***\n***\n   \n**æœ€å¾Œå°‡ Webhook URL è¤‡è£½åˆ° LINE å¾Œå°ä¸Šçš„ Webhook settings** \n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/gPRnVEAqDv13Y9H.png)\n   \n   ![](https://s2.loli.net/2024/04/29/IwYl8RPED3Br97m.png)\n\n***\n***\n   \n**ä¸²æ¥æµç¨‹åœ–**\n=====\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/CfxGbzZRLHTtMAr.png)\n\n***\n***\n    \n\n***\n\n","tags":["Line"],"categories":["Line"]},{"title":"Apache - é€é apxs æ·»åŠ  proxy æ¨¡å—","url":"/blog.github.io/2022/12/03/Apache-é€éapxsæ·»åŠ proxyæ¨¡å—/","content":"\n<!--more-->\nå¿…é ˆå…§å»ºäº† mod_so æ¨¡å¡Šï¼Œç•¶åˆç·¨è­¯æ™‚æœ‰ç·¨ --enable-so\n\n## æŸ¥çœ‹æ‰€æœ‰æ¨¡å¡Š\n\n```sql\n/usr/local/web/apache2/bin/httpd -l\n```\n\n   ![](https://s2.loli.net/2024/04/25/tZdnjWrYOpMEl8k.png)\n   \n## é€²å…¥proxy moudle ç·¨ç¢¼ç›®éŒ„\n\n```sql\ncd /root/dbmonitor-case/dbmonitor/httpd-2.2.27/modules/proxy\n````\n    \n   ![](https://s2.loli.net/2024/04/25/PNzUeSEtFsqiZwR.png)\n   \n## ä½¿ç”¨apxsé€²è¡Œç·¨è­¯å®‰è£\n\n```sql\n/usr/local/web/apache2/bin/apxs -i -c -a mod_proxy.c proxy_util.c\n```\n\n   ![](https://s2.loli.net/2024/04/25/xT5mYzRgwGsDcZ8.png)\n\n\n\n***\n\n","tags":["Apache","Rsyslog"],"categories":["Web"]},{"title":"DNS_SERVER - BIND å®‰è£èˆ‡è¨­å®š","url":"/blog.github.io/2022/12/03/DNS-BINDå®‰è£èˆ‡è¨­å®š/","content":"\n\n# å®‰è£ç›¸é—œä¾è³´åŠServer\n\n\n```sql\nyum -y install bind bind-chroot bind-utils bind-libs caching-nameserver\n```\n        \n## è¤‡è£½å¿…è¦æª”æ¡ˆè‡³æ–°è·¯å¾‘ä¸¦çµ¦äºˆæ¬Šé™\n\n```sql\ncp /var/named/named.*  /var/named/chroot/var/named/\n    \nchown root.named /var/named/chroot/var/named/named.*\n\ncp -r /var/named/data/ /var/named/chroot/var/named/\n    \nchown named.named /var/named/chroot/var/named/data/ -R\n```\n\n## æ›´æ”¹ä¸»è¨­å®šæª”\n\n```sql\nvim /etc/named/named.conf\n    \n\n//\n// named.conf\n//\n// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS\n// server as a caching only nameserver (as a localhost DNS resolver only).\n//\n// See /usr/share/doc/bind*/sample/ for example named configuration files.\n//\n// See the BIND Administrator's Reference Manual (ARM) for details about the\n// configuration located in /usr/share/doc/bind-{version}/Bv9ARM.html\n\noptions {\n\tlisten-on port 53 { any; }; //ç›£è½å¤šå€‹ä»‹é¢çš„port53\n#\tlisten-on-v6 port 53 { ::1; }; //é—œé–‰IPV6\n\tdirectory \t\"/var/named/chroot/var/named\"; //ä½ç½®æ”¹ç‚º/chroot/var/named\n\tdump-file \t\"/var/named/data/cache_dump.db\"; //çµ±è¨ˆè³‡æ–™å­˜æ”¾è·¯å¾‘\n\tstatistics-file \"/var/named/data/named_stats.txt\"; //çµ±è¨ˆè³‡æ–™å­˜æ”¾è·¯å¾‘\n\tmemstatistics-file \"/var/named/data/named_mem_stats.txt\"; //çµ±è¨ˆè³‡æ–™å­˜æ”¾è·¯å¾‘\n#\trecursing-file  \"/var/named/data/named.recursing\";\n#\tsecroots-file   \"/var/named/data/named.secroots\";\n\tallow-query     { any; }; //é™åˆ¶æœ‰é‚£äº›ç”¨æˆ¶å¯ä»¥ä½¿ç”¨æ­¤å°DNS\n\tforwarders \t{8.8.8.8;}; //dnsä¼ºæœå™¨ç„¡æ³•è§£ææ™‚ï¼Œæœƒç”±8.8.8.8è§£æ\n\n\t/* \n\t - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.\n\t - If you are building a RECURSIVE (caching) DNS server, you need to enable \n\t   recursion. \n\t - If your recursive DNS server has a public IP address, you MUST enable access \n\t   control to limit queries to your legitimate users. Failing to do so will\n\t   cause your server to become part of large scale DNS amplification \n\t   attacks. Implementing BCP38 within your network would greatly\n\t   reduce such attack surface \n\t*/\n\trecursion yes; //éè¿´å¼ï¼Œå¦‚æœæœ¬ DNS server æŸ¥ä¸åˆ°ï¼Œæœƒå¾€ä¸Šå±¤æŸ¥\n\n\tdnssec-enable no; //è¨­å®šä¸å›å‚³ DNS Security Extensions ( DNSSEC ) ç›¸é—œçš„ RR\n\tdnssec-validation no; //è¨­å®šRR ä¸ç¶“ç”± DNSSEC èªè­‰\n\n\t/* Path to ISC DLV key */\n\tbindkeys-file \"/etc/named.root.key\";\n\n\tmanaged-keys-directory \"/var/named/dynamic\";\n\n#\tpid-file \"/run/named/named.pid\";\n#\tsession-keyfile \"/run/named/session.key\";\n};\n\nlogging {\n        channel default_debug {\n                file \"data/named.run\";\n                severity dynamic;\n        };\n\tcategory lame-servers { null; };\n};\n\nzone \".\" IN {\n\ttype hint;\n\tfile \"named.ca\";\n};\n\n\ninclude \"/etc/named.rfc1912.zones\";\ninclude \"/etc/named.root.key\";\n\n\n```    \n    \n\n## é‡å•Ÿæœå‹™\n\n    systemctl restart named\n\n\n    \n# [BIND æ–°å¢ zoneåŠè§£æ] \n\n\n## åœ¨ä¸»è¨­å®šæª”æ–°å¢zone\n   \n```sql\nvim /etc/named.conf\n   \n\n\nzone \"orz\" IN {\n        type master;\n        file \"orz.zone\";\n};\n``` \n\n## åœ¨æ–°è·¯å¾‘ä¸­æ–°å¢zoneç´€éŒ„\n   \n```sql\n   \nvim /var/named/chroot/var/named/orz.zone\n    \n\n\n$TTL 86400\n@       IN      SOA     @ rname.invalid. (\n                        2017030903\n                        1D\n                        1H\n                        1W\n                        3H )\n\n                        NS      localhost.\nnote\n```\n\n\n# [WINDOWS é©—è­‰:]\n\n\n\n## å°‡windows ç¶²å¡DNSè¨­å®šç‚º DNS-SERVER 172.16.0.222\n    \n   ![](https://s2.loli.net/2024/04/25/CkOmi2RhbYeDJgN.png)\n   \n## ä¸ç”¨ç¶ hosts å³å¯è¨ªå•\n   \n   ![](https://s2.loli.net/2024/04/25/SPTvFs68oCGxXOM.png)\n   \n    \n***\n\n","tags":["bind"],"categories":["DNS"]},{"title":"Debian - ç«ç‰†è¨­å®š","url":"/blog.github.io/2022/12/03/Debian-ç«ç‰†è¨­å®š/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹ å› ç«ç‰†è¨­å®š å°è‡´ç„¡æ³•å»ºç«‹ ssh é€£ç·š\"\n\n\n# å®‰è£ UFW\n\n    apt install ufw\n\n\n\n# é—œé–‰ UFW\n\n    ufw disable\n\n\n    \n# é–‹å•Ÿ UFW\n\n    ufw enable\n    \n \nåƒè€ƒ:   https://itw01.com/UOT99EH.html\n    \n***\n\n","tags":["Debian"],"categories":["Debian"]},{"title":"Debian - ç¶²å¡è¨­å®š","url":"/blog.github.io/2022/12/03/Debian-ç¶²å¡è¨­å®š/","content":"\n\n# ç·¨è¼¯ç¶²å¡è¨­å®šæª”\n\n```sql\nvi /etc/network/interfaces\n\n\n    auot eth0\n    \n    iface eth0 inet static\n    \n    address 192.168.2.66\n    \n    netmask 255.255.255.0\n    \n    gateway 192.168.2.254\n\n```\n\n\n\n# é‡å•Ÿç¶²å¡\n\n    /etc/init.d/networking restart\n    \n# æŸ¥çœ‹ IP\n\n    ip a\n    \n    ifconfig\n\n   \n    \n***\n\n","tags":["Debian"],"categories":["Debian"]},{"title":"Debian - ç·¨è¼¯æ¨¡å¼ä¸‹ç„¡æ³•ä½¿ç”¨åˆªé™¤éµ (backspace)","url":"/blog.github.io/2022/12/03/Debian-ç·¨è¼¯æ¨¡å¼ä¸‹ç„¡æ³•ä½¿ç”¨åˆªé™¤éµ_backspace/","content":"\n\n# ç·¨è¼¯ä»¥ä¸‹æ–‡ä»¶\n\n```sql\nvim /etc/vim/vimrc.tiny\n\n\n    set nocompatible\n    \n    set backspace=2\n```   \n\n\n    \n***\n\n","tags":["Debian"],"categories":["Debian"]},{"title":"PHP - é–‹å•ŸåŠé—œé–‰éŒ¯èª¤è¨Šæ¯è¼¸å‡º","url":"/blog.github.io/2022/12/03/PHP-é–‹å•ŸåŠé—œé–‰éŒ¯èª¤è¨Šæ¯è¼¸å‡º/","content":"\n***\n***\n\n**é–‹å•ŸéŒ¯èª¤æç¤º**\n   \n```sql\ndisplay_errors: On\n```\n\n***\n***\n    \n**é—œé–‰éŒ¯èª¤æç¤º**\n   \n```sql\ndisplay_errors: Off\n```\n\n***\n***\n    \n**è¼¸å‡ºå…¨éƒ¨éŒ¯èª¤**\n   \n```sql\nerror_reporting E_ALL\n```\n\n***\n***\n    \n**é™¤äº† Notice å¤–ï¼Œå…¨éƒ¨éŒ¯èª¤è¼¸å‡º**\n   \n```sql\nerror_reporting E_ALL & ~E_NOTICE\n```\n\n***\n***\n    \n**ä¸è¼¸å‡ºä»»ä½•éŒ¯èª¤**\n   \n```sql\nerror_reporting 0 \n```\n    \n***\n***   \n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"Rclone - å®‰è£ Rclone && å¦‚ä½•é ç«¯å‚™ä»½è‡³é›²ç«¯ drive","url":"/blog.github.io/2022/11/27/Rcloneé ç«¯å‚™ä»½è‡³é›²ç«¯_Drive/","content":"\n***\n***\n\n**å®‰è£ä¾è³´**\n\n```sql\nyum install curl unzip man-db\n```\n\n***\n***\n\n**å®‰è£ Rclone**\n    \n```sql\ncurl https://rclone.org/install.sh | bash\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/IOgBULVjEpRho8D.png)\n\n***\n***\n   \n**å»ºç«‹è¨­å®šæª”ä¸¦é€²å…¥äº¤äº’å¼æ“ä½œ**\n\n```sql\nrclone config\n```\n\n***\n***\n    \n**å›ç­” `n` ä»¥å»ºç«‹æ–°çš„é ç«¯æœå‹™** \n    \n`name é€™é‚Šä»¥ goodle-drive ç¤ºç¯„`\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/W8GcAtU1qp9KTrC.png)\n\n***\n***\n   \n**æ‰“å…¥ `Google Drive` å°æ‡‰åºè™Ÿ `18`**\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/t3WZbpw6rORdx8Y.png)\n\n***\n***\n   \n![](https://s2.loli.net/2024/04/29/39uForStT1OzVPd.png)\n\n***\n***\n\n\n\n***\n\n**client_id**  \n  \n**é€šå¸¸ç›´æ¥æŒ‰ `enter` ä¸éœ€å¡«å…¥**\n\n***\n\n**client_secret**  \n  \n**é€šå¸¸ç›´æ¥æŒ‰ `enter` ä¸éœ€å¡«å…¥**\n\n***\n\n**scope**  \n  \n**é¸ `1` ç²å–å…¨éƒ¨æ¬Šé™**\n\n***\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/G4TREgV9r2U5mfH.png)\n\n***\n***\n\n\n\n***\n\n**root_folder_id**  \n  \n**é€šå¸¸ç›´æ¥æŒ‰ `enter` ä¸éœ€å¡«å…¥**\n\n***\n\n**service_account_file**  \n  \n**é€šå¸¸ç›´æ¥æŒ‰ `enter` ä¸éœ€å¡«å…¥**\n\n***\n\n**Edit advanced config ?**  \n  \n**é¸ `n` ä¸éœ€è¦é€²éšè¨­å®š**\n\n***\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/DR5nTjuMhli4wL8.png)\n\n***\n***\n\n\n\n***\n\n**Use web browser to automatically authenticate rclone with remote ?**  \n  \n**é¸ `n` é ç¨‹å– Token**\n\n***\n\n**config_token>**  \n  \n**çœ‹åˆ°é€™å€‹å¾Œ,éœ€è‡³ windows ä»‹é¢ç™»é™¸å– `token`**\n\n***\n\n\n\n***\n***\n    \n**`å– Token çœ‹ä¸‹é¢æ“ä½œ`** \n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/C3LkgpFoUaVusB6.png)\n\n***\n***\n    \n**ä»¥ä¸‹è‡³ Windows é€²è¡Œæ“ä½œï¼Œé©—è­‰ç™»å…¥å– TOKEN**\n\n***\n***\n    \n**åœ¨æœ¬åœ° Windows ä¸‹è¼‰ rclone**\n=====\n    \n[Rclone Windows è¼‰é»](https://downloads.rclone.org/rclone-current-windows-amd64.zip)\n\n***\n***\n   \n**è¼‰å®Œè§£å£“ç¸®è‡³æ…£ç”¨è³‡æ–™å¤¾**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/cZoFCEjzS61d7BR.png)\n\n***\n***\n   \n**`WIN + X + A` å‘¼å«å‡º Powershell**\n\n***\n***\n    \n**cd è‡³å‰›å‰›å£“ç¸®çš„è³‡æ–™å¤¾åº•ä¸‹ [.exeåŸ·è¡Œæª”é€™å±¤]**\n\n***\n***\n    \n**åŸ·è¡Œèªæ³•** \n\n```yaml\n.\\rclone authorize \"è¦é©—è­‰çš„é›²ç«¯\"\n```\n\n`ps. google_drive ç‚º drive`    \n\n***\n***\n   \n ![](https://s2.loli.net/2024/04/29/DpRuv5scQHUF8lO.png)\n\n***\n***\n\n**é©—è­‰å®Œæˆå¾Œæœƒå‡ºç¾ä»¥ä¸‹ç•«é¢**\n\n***\n***\n    \n ![](https://s2.loli.net/2024/04/29/3uYNEJAgQK6p2fV.png)\n\n***\n***\n   \n**æœ€å¾Œå°‡å‰›å‰› `powershell é©—è­‰éçš„ TOKEN` è²¼å…¥ LINUX**\n\n***\n***\n    \n ![](https://s2.loli.net/2024/04/29/eugOHVU2BvXra1t.png)\n\n***\n***\n\n\n\n***\n\n**Configure this as a Shared Drive (Team Drive)?**  \n**é¸ `n` ä¸é…ç½®ç‚ºå…±äº«**\n\n***\n\n**Keep this \"euorg\" remote?**  \n**é¸ `y` ç¢ºèªæ­¤é…ç½®**\n\n\n\n***\n***\n\n\n   \n**å¸¸ç”¨èªæ³• (ä»¥ dropbox ç‚ºä¾‹)**\n=====\n\n***\n***\n   \n|  rcloneå‘½ä»¤ç¯„ä¾‹\t                                        | åŠŸèƒ½\t\t\t\t\t\t\t\t    |\n|  ----------------------------------------------------- \t| ------------------------------------- |\n|  rclone lsd dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t\t| åˆ—å‡ºè³‡æ–™å¤¾\t\t\t\t\t\t  \t|\n|  rclone ls dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t\t| åˆ—å‡ºæª”æ¡ˆ (è·¯å¾‘ï¼Œå¤§å°)\t\t\t\t   \t|\n|  rclone lsl dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t\t| åˆ—å‡ºæª”æ¡ˆçš„ä¿®æ”¹æ™‚é–“ã€è·¯å¾‘ã€å¤§å°ç­‰\t\t|\n|  rclone size dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t\t| è·¯å¾‘ çš„æª”æ¡ˆå¤§å°åˆè¨ˆ\t\t\t\t\t|\n|  rclone mkdir dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t| å»ºç«‹è³‡æ–™å¤¾ è·¯å¾‘\t\t\t\t\t\t|\n|  rclone rmdir dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t| ç§»é™¤è³‡æ–™å¤¾ è·¯å¾‘\t\t\t\t\t\t|\n|  rclone delete dropbox:è·¯å¾‘\t\t\t\t\t\t\t\t| åˆªé™¤æª”æ¡ˆ\t\t\t\t\t\t\t\t|\n|  rclone â€“min-size 100M lsl dropbox:doc\t\t\t\t\t| åˆ—å‡º /doc è³‡æ–™å¤¾è£¡è¶…é100MBçš„æª”æ¡ˆ\t\t|\n|  rclone â€“dry-run â€“min-size 100M delete dropbox:doc\t\t| æ¸¬è©¦ä¸€ä¸‹æœƒåˆªæ‰é‚£äº›æª”\t\t\t\t\t|\n|  rclone â€“min-size 100M delete dropbox:doc\t\t\t\t| ç¢ºå®šåˆªé™¤\t\t\t\t\t\t\t\t|\n|  rclone copy d:\\doc\\test.doc dropbox:doc\t\t\t\t\t| æ‹·è²æª”æ¡ˆ\t\t\t\t\t\t\t\t|\n|  rclone copy dropoox:doc dropbox:backup/20160315\t\t\t| ç›´æ¥åœ¨Dropboxä¸Šæ‹·è²æª”æ¡ˆ\t\t\t\t|\n|  rclone sync d:\\doc dropbox:doc\t\t\t\t\t\t\t| åŒæ­¥è™•ç†\t\t\t\t\t\t\t\t|\n|  rclone -v\t\t\t\t\t\t\t\t\t\t\t\t| é¡¯ç¤ºæ‰€æœ‰æŒ‡ä»¤èˆ‡é¸é …ä¹‹èªªæ˜\t\t\t\t|\n\n\n\n***\n***\n\n***\n\n","tags":["Rclone"],"categories":["Rclone"]},{"title":"PMA - ç’°å¢ƒå®‰è£","url":"/blog.github.io/2022/11/22/PMA-ç’°å¢ƒå®‰è£/","content":"\n***\n***\n\n**PMA ç’°å¢ƒæ­å»º**\n=====\n\n***\n***\n\n**ä¸‹è¼‰ PMA å®‰è£åŒ…**\n-----\n\n```sql\nwget https://files.phpmyadmin.net/phpMyAdmin/4.9.10/phpMyAdmin-3.4.9-all-languages.tar.gz\n    \ntar zxvf phpMyAdmin-3.4.9-all-languages.tar.gz\n    \ncp -Rf phpMyAdmin-3.4.9-all-languages /home/phpMyAdmin\n    \ncd /home/phpMyAdmin\n    \ncp config.sample.inc.php config.inc.php\n```\n\n***\n***\n    \n**ç·¨è¼¯ PMA è¨­å®šæª”**\n-----\n    \n`[ æ³¨æ„ !! å¯¦æ¸¬ä¸èƒ½å–®å°å¤šå¥— ]`\n\n\n```sql\nvim config.inc.php\n```\n    \n```sql\n<?php\n/* vim: set expandtab sw=4 ts=4 sts=4: */\n/**\n * phpMyAdmin sample configuration, you can use it as base for\n * manual configuration. For easier setup you can use setup/\n *\n * All directives are explained in documentation in the doc/ folder\n * or at <https://docs.phpmyadmin.net/>.\n *\n * @package PhpMyAdmin\n */\n\n/**\n * This is needed for cookie based authentication to encrypt password in\n * cookie. Needs to be 32 chars long.\n */\n//$cfg['blowfish_secret']: '3d21cb29984ee1ebccec07d650032'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */\n\n//$cfg['blowfish_secret']: '';\n//$cfg['UploadDir']: '';\n//$cfg['SaveDir']: '';\n\n$cfg['blowfish_secret']: 'laurance'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */\n$cfg['PmaAbsoluteUri']: 'http://phpmyadmin.project.orz/';\n$cfg['UploadDir']: '';\n$cfg['SaveDir']: '';\n\n/**\n * Servers configuration\n */\n$i: 0;\n\n/**\n * First server\n */\n\n//----------------------------------------------------------------------- pma/pma\n$i++;\n/* Authentication type */\n$cfg['Servers'][$i]['auth_type']: 'http';\n$cfg['Servers'][$i]['host']: '172.16.0.222';\n$cfg['Servers'][$i]['port']: '3306';\n$cfg['Servers'][$i]['user']: '';\n$cfg['Servers'][$i]['password']: '';\n$cfg['Servers'][$i]['extension']: 'mysqli';\n$cfg['Servers'][$i]['compress']: false;\n$cfg['Servers'][$i]['AllowNoPassword']: true;\n\n/* Advanced phpMyAdmin features */\n$cfg['Servers'][$i]['pmadb']: '';\n$cfg['Servers'][$i]['bookmarktable']: '';\n$cfg['Servers'][$i]['relation']: '';\n$cfg['Servers'][$i]['table_info']: '';\n$cfg['Servers'][$i]['table_coords']: '';\n$cfg['Servers'][$i]['pdf_pages']: '';\n$cfg['Servers'][$i]['column_info']: '';\n$cfg['Servers'][$i]['history']: '';\n$cfg['Servers'][$i]['designer_coords']: '';\n$cfg['Servers'][$i]['tracking']: '';\n//----------------------------------------------------------------------- pmas/pmas\n/* Server parameters */\n//$cfg['Servers'][$i]['auth_type']: 'http';\n//$cfg['Servers'][$i]['host']: '172.16.0.222';\n//$cfg['Servers'][$i]['port']: '3307';\n//$cfg['Servers'][$i]['user']: '';\n//$cfg['Servers'][$i]['password']: '';\n//$cfg['Servers'][$i]['extension']: 'mysqli';\n//$cfg['Servers'][$i]['compress']: false;\n//$cfg['Servers'][$i]['AllowNoPassword']: true;\n\n/* Advanced phpMyAdmin features */\n//$cfg['Servers'][$i]['pmadb']: '';\n//$cfg['Servers'][$i]['bookmarktable']: '';\n//$cfg['Servers'][$i]['relation']: '';\n//$cfg['Servers'][$i]['table_info']: '';\n//$cfg['Servers'][$i]['table_coords']: '';\n//$cfg['Servers'][$i]['pdf_pages']: '';\n//$cfg['Servers'][$i]['column_info']: '';\n//$cfg['Servers'][$i]['history']: '';\n//$cfg['Servers'][$i]['designer_coords']: '';\n//$cfg['Servers'][$i]['tracking']: '';\n//-----------------------------------------------------------------------\n\n/**\n * phpMyAdmin configuration storage settings.\n */\n\n/* User used to manipulate with storage */\n// $cfg['Servers'][$i]['controlhost']: '';\n// $cfg['Servers'][$i]['controlport']: '';\n// $cfg['Servers'][$i]['controluser']: 'pma';\n// $cfg['Servers'][$i]['controlpass']: 'pmapass';\n\n/* Storage database and tables */\n// $cfg['Servers'][$i]['pmadb']: 'phpmyadmin';\n// $cfg['Servers'][$i]['bookmarktable']: 'pma__bookmark';\n// $cfg['Servers'][$i]['relation']: 'pma__relation';\n// $cfg['Servers'][$i]['table_info']: 'pma__table_info';\n// $cfg['Servers'][$i]['table_coords']: 'pma__table_coords';\n// $cfg['Servers'][$i]['pdf_pages']: 'pma__pdf_pages';\n// $cfg['Servers'][$i]['column_info']: 'pma__column_info';\n// $cfg['Servers'][$i]['history']: 'pma__history';\n// $cfg['Servers'][$i]['table_uiprefs']: 'pma__table_uiprefs';\n// $cfg['Servers'][$i]['tracking']: 'pma__tracking';\n// $cfg['Servers'][$i]['userconfig']: 'pma__userconfig';\n// $cfg['Servers'][$i]['recent']: 'pma__recent';\n// $cfg['Servers'][$i]['favorite']: 'pma__favorite';\n// $cfg['Servers'][$i]['users']: 'pma__users';\n// $cfg['Servers'][$i]['usergroups']: 'pma__usergroups';\n// $cfg['Servers'][$i]['navigationhiding']: 'pma__navigationhiding';\n// $cfg['Servers'][$i]['savedsearches']: 'pma__savedsearches';\n// $cfg['Servers'][$i]['central_columns']: 'pma__central_columns';\n// $cfg['Servers'][$i]['designer_settings']: 'pma__designer_settings';\n// $cfg['Servers'][$i]['export_templates']: 'pma__export_templates';\n\n/**\n * End of servers configuration\n */\n\n/**\n * Directories for saving/loading files from server\n */\n//$cfg['UploadDir']: '';\n//$cfg['SaveDir']: '';\n\n/**\n * Whether to display icons or text or both icons and text in table row\n * action segment. Value can be either of 'icons', 'text' or 'both'.\n * default: 'both'\n */\n//$cfg['RowActionType']: 'icons';\n\n/**\n * Defines whether a user should be displayed a \"show all (records)\"\n * button in browse mode or not.\n * default: false\n */\n//$cfg['ShowAll']: true;\n\n/**\n * Number of rows displayed when browsing a result set. If the result\n * set contains more rows, \"Previous\" and \"Next\".\n * Possible values: 25, 50, 100, 250, 500\n * default: 25\n */\n//$cfg['MaxRows']: 50;\n\n/**\n * Disallow editing of binary fields\n * valid values are:\n *   false    allow editing\n *   'blob'   allow editing except for BLOB fields\n *   'noblob' disallow editing except for BLOB fields\n *   'all'    disallow editing\n * default: 'blob'\n */\n//$cfg['ProtectBinary']: false;\n\n/**\n * Default language to use, if not browser-defined or user-defined\n * (you find all languages in the locale folder)\n * uncomment the desired line:\n * default: 'en'\n */\n//$cfg['DefaultLang']: 'en';\n//$cfg['DefaultLang']: 'de';\n\n/**\n * How many columns should be used for table display of a database?\n * (a value larger than 1 results in some information being hidden)\n * default: 1\n */\n//$cfg['PropertiesNumColumns']: 2;\n\n/**\n * Set to true if you want DB-based query history.If false, this utilizes\n * JS-routines to display query history (lost by window close)\n *\n * This requires configuration storage enabled, see above.\n * default: false\n */\n//$cfg['QueryHistoryDB']: true;\n\n/**\n * When using DB-based query history, how many entries should be kept?\n * default: 25\n */\n//$cfg['QueryHistoryMax']: 100;\n\n/**\n * Whether or not to query the user before sending the error report to\n * the phpMyAdmin team when a JavaScript error occurs\n *\n * Available options\n * ('ask' | 'always' | 'never')\n * default: 'ask'\n */\n//$cfg['SendErrorReports']: 'always';\n\n/**\n * You can find more configuration options in the documentation\n * in the doc/ folder or at <https://docs.phpmyadmin.net/>.\n */\n\n```   \n\n***\n***\n\n\n   \n**PMA è¨­å®šæª”è§£æ**\n   \n```sql\n$cfg['Servers'][$i]['auth_type']: 'config'\n```\n\n***\n***\n\n| åƒæ•¸ | åƒæ•¸æ„æ€ |\n| --- | --- |    \n| config | å®‰å…¨æ€§æœ€å·®ä¹Ÿæœ€æ–¹ä¾¿ï¼Œå› ç‚ºä½ å¿…é ˆå°‡ `MySQL å¸³è™Ÿã€å¯†ç¢¼` å„²å­˜åœ¨ `config` ä¹‹ä¸­ï¼Œæ›å¥è©±èªªä½ ä¸éœ€è¦è¼¸å…¥å¸³è™Ÿå¯†ç¢¼å³å¯ç™»å…¥ |\n| http | åªè¦ä½¿ç”¨ `MySQL` ä¸­å»ºç«‹çš„æœ‰æ•ˆå¸³è™Ÿå³å¯ç™»å…¥ |   \n| cookie | `MySQLå¸³è™Ÿã€å¯†ç¢¼` æœƒå„²å­˜åœ¨ cookieä¹‹ä¸­ï¼Œä¸éåœ¨æœ¬æ¬¡ sessionçµæŸä¹‹å¾Œæœƒå°‡å¯†ç¢¼åˆªé™¤ |\n| æ¡ç”¨ cookieçš„é©—è­‰æ–¹å¼ï¼Œéœ€è¦å†é¡å¤–è¨­å®š `blowfish_secret` ç”¨ä¾†ä½œç‚ºåŠ å¯†çš„ key |\n\n\n\n***\n***   \n   \n**MySQL è¨­å®š**\n-----\n   \n**MySQL åŠ  `å¸³è™Ÿ` åŠ `æ¬Šé™`**\n   \n```sql\nCREATE USER 'pma'@'%' IDENTIFIED BY 'pma';\n    \ngrant all on *.* to 'pma'@'%';\n    \nflush privileges;\n```\n\n***\n***\n    \n**Nginx è¨­å®š**\n-----\n   \n```sql\nserver\n{\n       listen      80;\n       server_name phpmyadmin.project.orz;\n       index       index.php index.html;\n       root /home/pma/;\n       include vhost/file1.conf;\n       access_log  logs/pma/pma.acc access;\n}\n```\n\n***\n***\n\n**æ¸¬è©¦é©—è­‰**\n-----\n\n***\n***\n\n\n   \n**Windows æœ¬æ©Ÿç¶ hosts**\n\n```sql\n172.16.0.222 phpmyadmin.project.orz\n```\n\n***\n***\n    \n**phpmyadmin.project.orz ç™»å…¥**\n\n`[mysql å¸³å¯†ç™»å…¥]`\n\n\n\n\n***\n***\n    \n***\n\n","tags":["PMA"],"categories":["Web"]},{"title":"Iptables - ç§»é™¤æŸä¸€æ¢è¦å‰‡","url":"/blog.github.io/2022/11/18/Iptables-ç§»é™¤æŸä¸€æ¢è¦å‰‡/","content":"\n### å°‡è¦å‰‡ç”¨è™Ÿç¢¼åˆ—å‡º,ä¸¦ç¯©å‡ºè©²IP\n    \n```sql\niptables -nL --line-number |grep 52.52.52.52\n```\n    \n### å°‡è©²chainè£¡çš„ç¬¬41è¡Œç æ‰\n    \n```sql\niptables -D deny 41\n```\n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"Nginx - Proxy å¸¸ç”¨é…ç½®","url":"/blog.github.io/2022/11/17/Nginx-Proxyåƒæ•¸/","content":"\n***\n***\n***\n***\n\n| å¸¸ç”¨åƒæ•¸èªæ³• | èªæ³•æ„æ€ |\n| --- | --- |\n          | proxy_set_header X-Real-IP $remote_addr; |\t\t\t\t\t\t# å®šç¾© header è¨˜éŒ„ä½¿ç”¨è€…çœŸå® IP |\n          | proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; |\t                # è®“å¾Œç«¯çš„ Web ä¼ºæœå™¨å¯ä»¥å–å¾—ä½¿ç”¨è€…çœŸå¯¦ IP |\n          | proxy_redirect off; |\t\t\t\t\t\t\t\t# é‡æ–°å®šå‘ url-OFF |\n          | proxy_http_version 1.1; |\t\t\t\t\t\t\t\t# é»˜è®¤ http ç‰ˆæœ¬ä¸º 1.0 , å¼€å¯å¯¹ http1.1 æ”¯æŒ |\n          | proxy_pass http://127.0.0.1:3001; | |\n          | proxy_set_header X_FORWARDED_HOST $host; |\t\t\t\t\t\t# å®¢æˆ¶ç«¯èª¿ç”¨æœå‹™ç«¯æ‰€ä½¿ç”¨çš„ host-ip |\n          | #proxy_set_header X_FORWARDED_PORT 90; |\t\t\t\t\t\t# ç”¨æ–¼é€£æ¥åˆ°è² è¼‰å‡è¡¡å™¨çš„ç«¯å£è™Ÿ |\n          | proxy_set_header Host $http_host; |\t\t\t\t\t\t\t# åå‘ä»£ç†å¾Œæ¨™é ­ç‚º HOST åŸå§‹å­—æ®µ |\n          | proxy_ignore_client_abort on; |\t\t\t\t\t\t\t# é»˜èªæ˜¯é—œé–‰çš„ï¼Œå³è«‹æ±‚éç¨‹ä¸­å¦‚æœå®¢æˆ¶ç«¯ä¸»å‹•é—œé–‰è«‹æ±‚æˆ–è€…å®¢æˆ¶ç«¯ç¶²çµ¡æ–·æ‰ï¼Œé‚£éº¼ Nginx æœƒè¨˜éŒ„ 499 | \n          | proxy_read_timeout 300;\t|\t\t\t\t\t\t\t# å®šç¾©ä¸€å€‹ nginx ç­‰å¾… real server éŸ¿æ‡‰æ•¸æ“šçš„è¶…æ™‚æ™‚é–“ |\n          | proxy_ignore_headers \"Cache-Control\";\t|\t\t\t\t\t#å¿½ç•¥è¢«ä»£ç†ä¼ºæœå™¨è¨­å®šçš„ \"Cache-Control\" é ­è³‡è¨Š |\n          | add_header    Cache-Control  max-age=60; |\t\t\t\t\t        # å®¢æˆ¶ç«¯æœ¬åœ°çš„ç·©å­˜ï¼Œåœ¨é…ç½®çš„ç”Ÿå­˜æ™‚é–“å…§çš„ï¼Œå®¢æˆ¶ç«¯å¯ä»¥ç›´æ¥ä½¿ç”¨ |\n          | proxy_cache_valid  304 1m; |\t\t\t\t\t\t\t# å°éŸ¿æ‡‰ç‹€æ…‹ç¢¼ç‚º 304 çš„éŸ¿æ‡‰å¿«å– 1m |\n          | proxy_cache_valid  301 302 1m; | |\n          | proxy_cache two; | |\n          | proxy_cache_valid any 1m; | |\n          | proxy_cache_key $host$uri$is_args$args;\t |\t\t\t\t\t# æ¯ç­†å¿«å–å„²å­˜çš„éµå€¼æ–¹å¼|\n\n\n***\n***\n***\n***\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"æ—¥å¸¸ - æ›´æ›æ’åº§ç´€éŒ„","url":"/blog.github.io/2022/11/14/å°ç™½_æ›´æ›æ’åº§ç´€éŒ„/","content":"    \n***\n***\n\n**æ­¥é©Ÿ**\n========\n\n   \n**1. æ–·é›» (è¨˜å¾—è¦å°‡æ’åº§é›»é–˜èˆ‡æ¼é›»é›»é–˜æ–·æ‰) ps. æ’åº§é›»é–˜åœ¨ä¸‹é¢,æ²’æ‹åˆ°**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/05/03/ICFO8efuYqMvzEQ.jpg)\n\n***\n***\n   \n**å°‡æ’åº§é¢æ¿æ‹†ä¸‹,åœ–ç‚ºé¢æ¿èƒŒé¢ (æ‹†ä¸‹éœ€å°‡ä¸€å­—èµ·æ’é€²æ©«å‘æ’å­”å†å°‡ç·šæ‹”å‡ºå³å¯)**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/05/03/Gip2BTLxe3ghVEk.jpg)\n\n***\n***\n   \n**å°‡èˆŠçš„é¢æ¿æ‹†ä¸‹å¾Œ,æ›ä¸Šæ–°é¢æ¿ (è¨˜å¾—ä¸€å®šä¸è¦æ’éŒ¯ä½ç½®,ä¸ç„¶çŸ­è·¯å¾Œæœæœƒå¾ˆåš´é‡ !!!!!)**\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/05/03/aUtzKeZLgrAcwxj.jpg)\n\n***\n***\n   \n**4. ä¸€å®šç¢ºå®šæ²’æ’éŒ¯å¾Œ,å†å°‡é¢æ¿é–å›å»,å°‡æ’åº§é›»é–˜èˆ‡æ¼é›»é›»é–˜æ‰“é–‹**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/05/03/LmgksSUEHoA5Zw3.jpg)\n\n***\n***\n   \n**5. æ’åº§é¢æ¿: çŸ­çš„å¸¶é›» (ç«ç·š) é•·çš„ä¸å¸¶é›» (ä¸­æ€§ç·š)**\n\n***\n***\n   \n  ![](https://s2.loli.net/2024/05/03/JKncjdu6lzEvgRD.jpg)\n\n***\n***\n\n***\n\n"},{"title":"LINE - Notify æ“ä½œç´€éŒ„","url":"/blog.github.io/2022/11/10/LINE-Notify/","content":"    \n***\n***\n\n**ç™»å…¥ [LINE Notify](https://notify-bot.line.me/zh_TW/)**\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/WQN4HmiMEwTzZeJ.png)\n\n***\n***\n   \n**é¸æ“‡è¦æ¥æ”¶é€šçŸ¥çš„èŠå¤©å®¤**\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/n4d7tFK5YNymOJR.png)\n\n***\n***\n   \n**æŠŠç”¢ç”Ÿçš„æ¬Šè­‰è¨˜éŒ„ä¸‹ä¾†**\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/pk86GUsc9JKvNBq.png)\n\n***\n***\n   \n**API**\n=====\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/Yfp3V7r2dRUB4xZ.png)\n\n***\n***\n   \n   \n   [åƒè€ƒ](https://shockuccu.blogspot.com/2021/10/postman.html)\n\n***\n\n","tags":["Line"],"categories":["Line"]},{"title":"Grafana - Polystat panelä½¿ç”¨","url":"/blog.github.io/2022/11/03/Grafana-Polystat-panelä½¿ç”¨/","content":"\n<!--more-->\n\"( å»ºç«‹ agent ç›£æ§ä¸¦ä½¿ç”¨ Line-Notify æé†’ )\"\n\n\n## å®‰è£Grafanaå¥—ä»¶\n    \n```sql\ngrafana-cli plugins install grafana-polystat-panel\n```    \n\n## æœå‹™é‡å•Ÿ\n   \n```sql\nservice grafana-server restart\n``` \n \n## æŸ¥çœ‹ telegraf çš„ PID\n   \n```sql\nps aux |grep telegraf |grep -v 'grep'|awk '{print $2}'\n```    \n\n## å»ºç«‹ç›£æ§ä¸¦å¯«å…¥ InfluDB çš„ Shellï¼Œä¸¦çµ¦äºˆæ¬Šé™\n   \n```sql\nvim live.sh && chmod 755 live.sh\n```\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/PwYEOg9tnJUmuey.png)\n\n***\n***\n***\n   \n## å»ºç«‹æ’ç¨‹ ( SHELL:æ¯2ç§’åŸ·è¡Œä¸€æ¬¡ )\n   \n```sql\ncrontab -e\n    \n* * * * * sh /home/grafana/crontab-live.sh\n```\n\n***\n***\n***\n\n##  Grafana å¾Œå°-å»ºç«‹æ–° panel ä¸¦è¨­ç½®\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/IVtorQNsg6kMApT.png)\n   \n   ![](https://s2.loli.net/2024/04/28/dzX3jIc5bGHCgWN.png)\n\n***\n***\n***\n   \n## æœ€å¾Œè¨˜å¾—è¦ SAVEï¼Œä¸ç„¶å¾—é‡é ­åœ¨ä¾†\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/R72GNiSXZCd8ryF.png)\n   \n   \n   \n   \n   \n***\n\n","tags":["Grafana"],"categories":["Grafana"]},{"title":"MySQL - å¦‚ä½•é…ç½® buffer pool","url":"/blog.github.io/2022/10/26/Mysql-å¦‚ä½•é…ç½®buffer_pool/","content":"\n***\n***\n\n**{ ä¸»è¦ä¿®æ”¹åƒæ•¸ }**\n=====\n\n***\n***\n\n**é»˜èªå¤§å°ç‚º `128M` å¥åº·æ¯”ä¾‹ç‚ºå…§å­˜å¤§å° `50%` (å€¼è¶Šå¤§ `IOè®€å¯«` å°±è¶Šå°‘,æ•¸æ“šè®€å¯«å°±è¶Šå¿«)**\n   \n```sql\ninnodb_buffer_pool_size\n```\n\n***\n***\n\n**ä¸€èˆ¬å– `256M` çš„å€æ•¸,ä¸¦çµåˆ `innodb_buffer_pool_size` è¨­ç½®å…¶å¤§å° 25%-50%**\n    \n```sql\ninnodb_log_file_size\n```\n    \n***\n***\n\n**ä¸€èˆ¬å– `16M` çš„å€æ•¸**\n    \n```sql\ninnodb_log_buffer_size\n```\n\n\n***\n***\n\n**ä¸€èˆ¬å– `innodb_buffer_pool_size` çš„ 50% æ•ˆæœæœ€å„ª**\n    \n```sql\ninnodb_buffer_pool_instances\n```\n    \n***\n***\n    \n\n\n### EX: è·‘å…©å¥— mysqld_multi  æœ¬æ©Ÿè¨˜æ†¶é«”:31798M (32G)\n\n***\n\n```sql\ninnodb_buffer_pool_size: 8G \n\ninnodb_log_buffer_size: 32M\n\ninnodb_log_file_size: 1G\n\ninnodb_flush_log_at_trx_commit: 2\n\ninnodb_buffer_pool_instances: 6\n\n#innodb_file_format=barracuda\n\n#innodb_file_format_max=barracuda\n\ninnodb_file_per_table=1\n```\n\n```sql\nmysqladmin -uroot -p shutdown\n\nmysqld_safe &\n```    \n\n\n`é…ç½®å®Œå¾Œ , é‡å•Ÿæœå‹™ç”Ÿæ•ˆ`\n\n***\n***\n\n\n\n### é€²å…¥ mysql æŸ¥çœ‹é…ç½®æ˜¯å¦æ­£ç¢º\n\n***\n\n```sql\nshow variables where variable_name in ('innodb_buffer_pool_size', \\\n\n'innodb_buffer_pool_instances' ,\\\n\n'innodb_log_buffer_size' ,\\\n\n'innodb_log_file_size');\n```\n\n\n\n***\n***\n\n\n\n## å…¬å¼æ•´ç† : `percent` å¿…é ˆ >= 95% \n\n***\n    \n```sql\npercent: innodb_buffer_pool_read_requests / (innodb_buffer_pool_reads + innodb_buffer_pool_read_requests) * 100%\n    \ninnodb_buffer_pool_pages_total: innodb_buffer_pool_size / innodb_page_size\n    \npercent: innodb_buffer_pool_pages_data / innodb_buffer_pool_pages_total * 100%\n    \ninnodb_buffer_pool_size: innodb_buffer_pool_pages_data * innodb_page_size * 1.05 / (1024*1024*1024)\n```\n\n\n\n***\n***\n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MongoDB - å¦‚ä½•ä½¿ç”¨ studio 3T é ç«¯å»ºç«‹é€£ç·š","url":"/blog.github.io/2022/10/22/Mongod-å¦‚ä½•ä½¿ç”¨studio-3Té ç«¯å»ºç«‹é€£ç·š/","content":"\n***\n***\n\n**æ–°å»ºç«‹é€£ç·š**\n-----\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/A3JEW1slvcFCgMY.png)\n\n***\n***\n   \n**æ‰“ä¸Š host , port å„²å­˜**\n-----\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/63N1KfiwTjVOYxa.png)\n\n***\n***\n    \n\n[studio 3T for windows](https://studio3t.com/download/)\n\n***\n\n","tags":["MongoDB"],"categories":["MongoDB"]},{"title":"MongoDB - å¦‚ä½•å‚™ä»½èˆ‡é‚„åŸ","url":"/blog.github.io/2022/10/22/Mongod-å¦‚ä½•å‚™ä»½èˆ‡é‚„åŸ_MongoDB/","content":"\n***\n***\n\n**å…ˆå»ºç«‹è¦å‚™ä»½çš„è³‡æ–™åº« (å¦å‰‡æœƒå‚™ä»½å¤±æ•—)**\n-----\n   \n```sql\nmkdir /root/168-mongo.bak\n```\n\n***\n***\n    \n**é€éä»¥ä¸‹å‘½ä»¤é€²è¡Œå–®å€‹è³‡æ–™åº«å‚™ä»½ (åƒæ•¸ -d è³‡æ–™åº«)**\n-----   \n    \n```sql\nmongodump -h 172.16.2.169 --port 27017 -d my-mongo -o ./root/168-mongo.bak\n```\n\n***\n***\n    \n**é€éä»¥ä¸‹å‘½ä»¤é€²è¡Œå…¨éƒ¨è³‡æ–™åº«å‚™ä»½**\n-----   \n    \n```sql\nmongodump -h 172.16.2.169 --port 27017 -o ./root/168-mongo.bak\n```\n\n***\n***\n    \n**é€éä»¥ä¸‹å‘½ä»¤é€²è¡Œæœ¬æ©Ÿå‚™ä»½ (è§£æ±ºAuthentication failed.)**\n-----   \n    \n```sql\nmongodump -o mongodb-dump/\n```\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/1bD7xpAUemagHhR.png)\n\n***\n***\n   \n**é€éä»¥ä¸‹å‘½ä»¤é‚„åŸå‰›å‰›å‚™ä»½çš„è³‡æ–™åº«**\n-----\n   \n```sql\nmongorestore -h 127.0.0.1 --port 27017 /root/168-mongo.bak\n```\n\n***\n***\n           \n**æœƒå ±éŒ¯ ERROR - E11000 duplicate key error é‡è¤‡å¯†é‘°éŒ¯èª¤é›†åˆ**\n-----\n\n***\n***\n   \n![](https://s2.loli.net/2024/04/29/zlqFNKdaQipV7eG.png)\n\n***\n***\n   \n**(åŠ å…¥åƒæ•¸ --drop my-backup)  æ³¨æ„!!! ä»»ä½•ä¸åœ¨å‚™ä»½ä¸­çš„æ–‡ä»¶éƒ½å°‡æ°¸ä¹…ä¸Ÿå¤±ï¼**\n-----\n   \n```sql\nmongorestore -h 127.0.0.1 --port 27017 /root/168-mongo.bak --drop\n```\n    \n***\n***\n\n\n***\n\n","tags":["MongoDB"],"categories":["MongoDB"]},{"title":"MongoDB - å»ºç«‹æ¯æ—¥å‚™ä»½ Shell Script","url":"/blog.github.io/2022/10/22/Mongod-å»ºç«‹æ¯æ—¥å‚™ä»½_Shell_Script/","content":"\n***\n***\n\n**Linux å»ºç«‹æ¯æ—¥å‚™ä»½ Shell Script**\n\n ```sql\n #!/bin/sh\n \n# Definded Dump Configuartion\nrollingDays=7\ndumpFilename=\"mongodb\"\ndumpTmpDir=\"/tmp/mongo-dump-tmp\"\nbackupPath=\"/root/mongo-backup\"\nusername=\"username\"\npassword=\"password\"\nhostname=\"127.0.0.1\"\ndatabase=\"my-mongo\"\n \n#Start Dumpping.......\ntoday=`date \"+%Y-%m-%d\"`\necho \"Today: ${today}\"\necho \"Start Dumpping.......\"\n \n# Make backup directory\nif ! [ -d \"${backupPath}\" ] ; then\n    echo \"make dir : ${backupPath}\"\n    mkdir -p \"${backupPath}\"\nfi\nif ! [ -d \"${dumpTmpDir}\" ] ; then\n    echo \"make dir : ${dumpTmpDir}\"\n    mkdir -p \"${dumpTmpDir}\"\nfi\n \n# Make parameter\ndn=\"-h ${hostname}\"\nif [ \"${username}\" != \"\" ] && [ \"${password}\" != \"\" ] ; then\n    dn=\"${dn} -u ${username} -p ${password}\"\nfi\nif [ \"${databse}\" != \"\" ] ; then\n    dn=\"${dn} -d ${database}\"\nfi\n \n# Run backup script\nrm -rf -R ${dumpTmpDir}\ncommand=\"mongodump ${dn} -o ${dumpTmpDir}\"\necho $command\n$command\nif [ $?:= 0 ] ; then\n    cd \"${dumpTmpDir}\"\n    /bin/tar -zcvf \"${backupPath}/${dumpFilename}-${today}.tar.gz\" *\n    find ${backupPath}/${dumpFilename}-* -mtime +{rollingDays} -exec rm -f {} \\;\nfi\nrm -rf -R ${dumpTmpDir}\n```\n\n***\n***\n\n[åƒè€ƒæ–‡ä»¶](https://blog.toright.com/posts/4069/mongodb-%E6%95%99%E5%AD%B8-%E5%A6%82%E4%BD%95%E5%82%99%E4%BB%BD%E8%88%87%E9%82%84%E5%8E%9F-mongodb.html)\n\n***\n\n","tags":["MongoDB"],"categories":["MongoDB"]},{"title":"Redis - å®‰è£ reids-dump åŠå‚™ä»½","url":"/blog.github.io/2022/10/22/Redis-å®‰è£reids-dumpå‚™ä»½/","content":"\n***\n***\n\n**éœ€å…ˆå®‰è£ redis-cli**\n=====\n\n***\n***\n\n**å®‰è£ `ruby`è·Ÿ `gem`**\n\n```sql\nyum -y install ruby ruby-devel\n\nyum -y install rubygems\n```\n\n***\n***\n\n**ä½¿ç”¨ gem è£ `rvm`**\n\n***\n***\n\n**è¼‰å…¥ `ä¾†æº`åŠ`æ†‘è­‰`**\n\n```sql\ngem sources -a http://mirrors.aliyun.com/rubygems/\n\ngpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/2LqYdNTjUMoC3Hy.png)\n\n***\n***\n\n**ä½¿ç”¨è…³æœ¬å®‰è£**\n\n```sql\ncurl -sSL https://get.rvm.io | bash -s stable\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/LzDjpilHNUG6AOf.png)\n\n***\n***\n\n\n\n**è‹¥å ±éŒ¯ ERROR : è®€ä¸åˆ°æ†‘è­‰ å†é‡æ–°è¼‰å…¥ä¸€æ¬¡å³å¯**\n\n***\n  \n```sql\ncurl -sSL https://rvm.io/mpapis.asc | gpg2 --import -\n\ncurl -sSL https://rvm.io/pkuczynski.asc | gpg2 --import -\n```\n\n\n\n**å†é‡æ–°å®‰è£ä¸€æ¬¡**\n\n```sql\ncurl -sSL https://get.rvm.io | bash -s stable\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/FHpVi2tNoQUxR1k.png)\n\n***\n***\n\n**è¼‰å…¥ rvmè…³æœ¬**\n\n```sql\nsource /etc/profile.d/rvm.sh\n```\n\n***\n***\n\n**rvmç‰ˆæœ¬ ç¢ºèª**\n\n```sql\nrvm -v\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/7au1fIEOpvc5F4N.png)\n\n***\n***\n\n**å†ç”¨ rvm å‡ç´š `ruby`**\n=====\n\n***\n***\n\n**å®‰è£ `ruby 2.5 ç‰ˆ`**\n\n```sql\nrvm install 2.5\n```\n\n***\n***\n\n**ruby ç‰ˆæœ¬ç¢ºèª**\n\n***\n***\n\n```sql\nruby --version\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/p9GFjoDsH218LUK.png)\n\n***\n***\n\n**å†ç”¨ gemå®‰è£ `redis-dump`**\n\n```sql\ngem install redis-dump\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/AcTvf4bCZearUkB.png)\n\n***\n***\n\n\n\n**è‹¥å ±éŒ¯ ERROR : éœ€è¦å†å®‰è£ yajl-ruby**\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/Ahfbuqwo8KpjBU5.png)\n\n***\n***\n\n**é‡æ–°å†å®‰è£ä¸€æ¬¡å³å¯**\n\n```sql\ngem install yajl-ruby -v 1.4.1\n\ngem install redis-dump\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/cgG1kZdBJbhPSMi.png)\n\n***\n***\n\n**redis å‚™ä»½ åŠ åŒ¯å…¥èªæ³• ( å¯ä»¥ä½¿ç”¨åˆ¥å°çš„ IP é ç«¯å‚™ä»½ )**\n=====\n\n***\n***\n\n\n    \n**å‚™ä»½èªæ³•**\n    \n```sql\nredis-dump -u 127.0.0.1:9736 -a 'redisPasword' > /root/info-redis-bak.json\n```\n\n***\n \n**åŒ¯å…¥èªæ³•**\n    \n```sql\n<info-redis-bak.json redis-load -u 127.0.0.1:9736\n```\n    \n\n\n***\n***\n\n***\n\n","tags":["Redis"],"categories":["Cache"]},{"title":"PHP - æŸ¥çœ‹æ“´å±•æœå‹™ç‰ˆæœ¬","url":"/blog.github.io/2022/10/21/PHP-æŸ¥çœ‹æ“´å±•æœå‹™ç‰ˆæœ¬/","content":"\n***\n***\n    \n**æŸ¥çœ‹æ˜¯å¦å®‰è£è©²å¥—ä»¶**\n    \n```sql\nphp -m |grep mongodb\n```\n\n***\n***\n    \n**æŸ¥çœ‹è©²å¥—ä»¶ç‰ˆæœ¬**\n    \n```sql\nphp --ri mongodb\n```\n\n***\n***\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"Iptables - å¦‚ä½•è½‰ç™¼ PORT","url":"/blog.github.io/2022/10/20/Iptables-è½‰ç™¼PORTè™Ÿ/","content":"\n    \n   **å°‡ 80 PROT è½‰å‘ 8000 PORT**\n-----\n    \n```sql\niptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8000\n```\n    \n   **åˆ©ç”¨ OUTPUT çš„è¦å‰‡ï¼Œå¾æœ¬æ©Ÿé€£åˆ°è‡ªå·±**\n   -----\n    \n```sql\niptables -t nat -A OUTPUT -p tcp -d localhost --dport 80 -j REDIRECT --to-ports 8000\n```\n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"MySQL - å ±éŒ¯ Slave received end packet from server apparent master shutdown","url":"/blog.github.io/2022/10/19/Mysql-å ±éŒ¯Slave_received_end_packet_from_server_apparent_master_shutdown/","content":"\n***\n***\n\n**MySQL ä¸€è‡ºå¾åº«çš„éŒ¯èª¤æ—¥èªŒï¼Œå¤§é‡å ±ä¸‹é¢çš„éŒ¯èª¤è³‡è¨Š**\n=====\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/fA2GpZDYsl3vxM8.png)\n\n***\n***\n   \n**å…ˆæª¢æŸ¥ä¸€ä¸‹ `Server ID` æœ‰æ²’æœ‰é‡è¤‡**\n-----\n\n```sql\nshow global variables like 'server%id%';\n```\n\n***\n***\n        \n**è‹¥ ServerID æ²’é‡è¤‡çš„è©±é‚£è‚¯å®šå°±æ˜¯ DB çš„ UUID é‡è¤‡äº†**\n-----\n\n***\n***\n    \n**{ è§£æ±ºæ–¹å¼ }:**\n-----\n\n***\n***\n   \n**åˆ° MySQL ç›®éŒ„å°‡ `auto.cnf` ç æ‰é‡æ–°ç”Ÿæˆå³å¯**\n-----\n\n```sql\ncd /var/lib/mysql\n\nrm -f auto.cnf\n\nmysqld_multi stop 3\n\nmysqld_multi start 3\n```\n\n***\n***\n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"AWS - é€£ç·šè‡³ windows-ec2","url":"/blog.github.io/2022/10/18/AWS-é€£æ¥è‡³windows-ec2/","content":"\n<!--more-->\n\"å¦‚ä½•ä½¿ç”¨RDPå”è­°é ç«¯æ¡Œé¢é€£ç·šè‡³ EC2-Windows\"\n\n\n  # åœ¨æ–°å»ºç«‹çš„ Instances å³éµé¸æ“‡ Connect\n\n    \n   ![](https://s2.loli.net/2024/04/25/vNLnpTHcy1GaMjg.png)\n\n---\n\n   \n # é¸æ“‡ RDP client ä¸¦é»é¸ Get password\n\n  \n   ![](https://s2.loli.net/2024/04/25/FiVagT2Ad74w19U.png)\n\n---\n\n   \n # é¸æ“‡ Browse (ç€è¦½) ä¸¦é¸å–è£½ä½œ instance çš„é‡‘é‘° (.pem) ä¸¦é¸æ“‡ Decrypt Password (è§£å¯†å¯†ç¢¼)\n\n    \n   ![](https://s2.loli.net/2024/04/25/4zjBcdRtKo19gqL.png)\n\n---\n  \n \n # ä½¿ç”¨å¾Œå°çµ¦çš„äº‚æ•¸å¯†ç¢¼å»ºç«‹é ç«¯æ¡Œé¢é€£ç·š (å¸³è™Ÿé è¨­éƒ½æ˜¯ Administrator)\n\n    \n   ![](https://s2.loli.net/2024/04/25/rlQDWXF43C5zPEM.png)\n\n---   \n   [å®˜æ–¹æ–‡ä»¶é€£çµ](https://docs.aws.amazon.com/zh_tw/AWSEC2/latest/WindowsGuide/connecting_to_windows_instance.html)\n   \n   \n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"GIT - å¦‚ä½•å»ºç«‹è¨ªå• Token","url":"/blog.github.io/2022/10/17/Git-å»ºç«‹è¨ªå•Token/","content":"\n<!--nore-->\n\"å¯†ç¢¼ç™»å…¥é¡¯ç¤º ERROR : Authentication failed\"\n\n***\n***\n***\n\n## é»æ“Šå³ä¸Šè§’ setting\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/enGDRHyzQOLJ85K.png)\n\n***\n***\n***\n   \n## å·¦å´æ¬„ é»æ“Š Developer settings\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/raZU5BY6p4wviI2.png)\n\n***\n***\n***\n   \n## å·¦å´æ¬„ é»æ“Š Personal access tokens\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/T5nG8ZrwzDqjtHm.png)\n\n***\n***\n***\n\n## ç”Ÿæˆæ–° Tokens\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/46JStEQRLwhrPbO.png)\n\n***\n***\n***\n   \n## æ–°å¢ Token Name\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/jTCpJSBxOlhZP6e.png)\n\n***\n***\n***\n   \n## é¸æ“‡éæœŸæ™‚é–“\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/Ri7jGAM6NUQhJHL.png)\n\n***\n***\n***\n   \n## é¸æ“‡é‘°çµ¦äºˆ Token çš„æ¬Šé™\n\n***\n***\n***\n    \n   ![](008.gif)\n\n***\n***\n***\n   \n## ç”Ÿæˆ Tokens\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/Yy1zk7mfROGl5S3.png)\n   \n\n\n***\n\n","tags":["GIT"],"categories":["GIT"]},{"title":"PhpStorm - ä½¿ç”¨ putty-key pem é€£æ¥æ–¹å¼","url":"/blog.github.io/2022/10/17/PHPstorm-IDEKEY_é€£æ¥æ–¹å¼/","content":"\n***\n***\n\n**æ–°å¢ä¸€å€‹ `New Project`**\n\n***\n***\n\n    \n   ![](https://s2.loli.net/2024/04/29/TUBmDlHMdOEfQCL.png)\n\n***\n***\n   \n**é¸æ“‡ `Create` >> `Open in new window` >> `OK`**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/fJLHMVQSKRr1b8g.png)\n\n***\n***\n   \n**æ‰“é–‹é ç«¯éƒ¨ç½² `Development` è¨­å®šä»‹é¢**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/icgQ9Z1e3bYOwHy.png)\n\n***\n***\n   \n**æŒ‰ä¸‹ `+` >> `Name` >> `Type: SFTP`**\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/iGqZCYOjBgm7cIP.png)\n\n***\n***\n   \n**æ¸¬è©¦ç™»å…¥ é¸æ“‡ `Test SFTP connection` å³å¯**\n    \n```sql\nSFTP host: IP\n\nPort : 22\n            \nRoot path: /\n \nUser name: jimide\n            \nAuth type: OpenSSH or Putty\n            \nPrivate key file: admin-jimide.pem\n```\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/fK7mMW4XBtRUlNA.png)\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/57iTXszoNv3fwtW.png)\n\n***\n***\n\n***\n\n","tags":["PhpStorm"],"categories":["PhpStorm"]},{"title":"Redis - Another Redis Desktop Manager å»ºç«‹é ç«¯é€£ç·š","url":"/blog.github.io/2022/10/13/Redis-Another_Redis_Desktop_Managerå»ºç«‹é ç«¯é€£ç·š/","content":"\n***\n***\n\n[Another Redis Desktop Manager for windows è¼‰é»](https://github.com/qishibo/AnotherRedisDesktopManager/releases)\n\n***\n***\n\n**å»ºç«‹æ–°é€£ç·š**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/6pk8Euh4z1mRt9W.png)\n\n***\n***\n   \n**æ¸¬è©¦æˆåŠŸ**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/JukoqQ56Fx3arVP.png)\n\n***\n***\n    \n\n\n***\n\n","tags":["Redis"],"categories":["Cache"]},{"title":"Redis - å¦‚ä½•è¨­ç½® Redis å¯†ç¢¼","url":"/blog.github.io/2022/10/13/Redis-è¨­ç½®Rediså¯†ç¢¼/","content":"\n***\n***\n\n**æ–¹æ³•ä¸€**\n=====\n\n***\n***\n\n**ä¿®æ”¹ redis è¨­å®šæª” (requirepass åƒæ•¸)**\n\n    PWD: /usr/local/redis/etc/redis.conf\n\n***\n***\n    \n ![](https://s2.loli.net/2024/04/29/TPyS1Fki8UwMOLI.png)\n\n***\n***\n   \n**ä¿®æ”¹å®Œä¹‹å¾Œé‡å•Ÿæœå‹™**\n    \n```sql\nservice redis restart\n```\n\n***\n***\n   \n**æ–¹æ³•äºŒ**\n=====\n\n***\n***\n\n**é€²æœå‹™ä¿®æ”¹ Password (æ­¤æ–¹æ³• Redis é‡å•Ÿå¾Œï¼Œå¯†ç¢¼æœƒå¤±æ•ˆ)**\n\n**é€²å…¥ redis cmd è¨­å®šå¯†ç¢¼**\n    \n```sql\nconfig set requirepass 123456\n```\n\n***\n***\n    \n**æŸ¥è©¢å¯†ç¢¼**\n    \n```sql\nconfig get requirepass\n```\n\n***\n***\n    \n**é©—è­‰å¯†ç¢¼**\n    \n```sql\nauth 123456\n```\n \n```sql\nconfig get requirepass\n    \n    1) \"requirepass\"\n    2) \"123456\"\n```\n       \n***\n***\n    \n**ç™»å…¥æŒ‡ä»¤**\n\n```sql\nredis-cli -p 6379 -a test123\n```\n   \n```sql\nredis 127.0.0.1:6379> auth test123\n```    \n\n***\n***\n\n\n***\n\n","tags":["Redis"],"categories":["Cache"]},{"title":"Kubernetes - ERROR-unable to create new content is being terminated","url":"/blog.github.io/2022/10/12/Kubernetes-ERROR-unable_to_create_new_content_is_being_terminated/","content":"\n<!--more-->\n\"Namespace-kubernetes-dashboard ä¸€ç›´å¡åœ¨ termnatingï¼Œæ‰€ä»¥å°è‡´ç„¡æ³•æœ‰æ•ˆåˆªé™¤.\"\n\n***\n***\n\n**æŸ¥çœ‹ namespace**\n\n```sql\nkubectl get ns\n```\n    \n   ![](https://s2.loli.net/2024/04/28/ShmaNnEqXgOrtYF.png)\n\n***\n***\n   \n**æŸ¥çœ‹ kubernetes-dashboard çš„ namespace**\n\n```sql\nkubectl get ns kubernetes-dashboard  -o json > kubernetes-dashboard.json\n```\n\n***\n***\n    \n**ç·¨è¼¯ kubernetes-dashboard.json æª”**\n\n```sql\nvim kubernetes-dashboard.json\n```\n\n***\n***\n    \n**åˆªé™¤å‰**\n\n   ![](https://s2.loli.net/2024/04/28/9YmnZkjHv7xEdXp.png)\n\n***\n***\n   \n**åˆªé™¤å¾Œ**\n\n   ![](https://s2.loli.net/2024/04/28/AzW6IqHGyNwTjSR.png)\n\n***\n***\n   \n**é‡æ–°æ›èµ· Proxy**\n\n```sql\nkubectl proxy --address='0.0.0.0' &\n```\n\n***\n***\n    \n**curlåˆªé™¤**\n\n```sql\ncurl -k -H \"Content-Type:application/json\" -X PUT --data-binary @kubernetes-dashboard.json http://127.0.0.1:8001/api/v1/namespaces/kubernetes-dashboard/finalize\n```\n\n***\n***\n    \n**kubernetes-dashboard å·²åˆªé™¤**\n\n   ![](https://s2.loli.net/2024/04/28/p9Hz4Im2lRnQ8T5.png)\n\n***\n***\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - Ingress å¯¦ä½œæ¸¬è©¦ç´€éŒ„","url":"/blog.github.io/2022/10/12/Kubernetes-Ingress/","content":"\n***\n***\n\n**Docker fileåŒ…è£½ä½œ**\n\n```sql\nmkdir dockerfile/ && cd dockerfile/\n    \nvim Dockerfile\n\n\n#/bin/bash\n  \nFROM nginx\nARG HTML\n    \n #Change nginx config\nRUN rm /usr/share/nginx/html/index.html\nCOPY ./$HTML /usr/share/nginx/html/index.html\n```\n\n***\n***\n\n**è£½ä½œæ¸¬è©¦é  (ç¶ )**\n\n```sql\nvim green.html\n\n  \n   <!DOCTYPE html>\n   <head>\n       <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n   </head>\n   <body style=\"background-color: green; color:#fff\">\n     <h1>2022/10/12 ---Ingress-test</h1>\n     <table>\n         <tbody>\n               <tr>\n                   <td>Author</td>\n                   <td>: Laurance</td>\n               </tr>\n               <tr>\n                   <td>Article Link</td>\n                   <td>: <a href=\"https://note.laurance.ml\" target=\"_blank\">2022/10/12 ---Ingress-test</a></td>\n               </tr>\n               <tr>\n                   <td>Topic</td>\n                   <td>: <a href=\"https://note.laurance.ml\" target=\"_blank\">2022/10/12 ---Ingress-test</a></td>\n               </tr>\n         </tbody>\n     </table>\n   </body>\n   </html>\n```\n\n***\n***\n\n**è£½ä½œæ¸¬è©¦é  (ç´…)**\n\n```sql\nvim red.html\n\n  \n   <!DOCTYPE html>\n   <head>\n       <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n   </head>\n   <body style=\"background-color: red; color:#fff\">\n     <h1>2022/10/12 ---Ingress-test</h1>\n     <table>\n         <tbody>\n               <tr>\n                   <td>Author</td>\n                   <td>: Laurance</td>\n               </tr>\n               <tr>\n                   <td>Article Link</td>\n                   <td>: <a href=\"https://note.laurance.ml\" target=\"_blank\">2022/10/12 ---Ingress-test</a></td>\n               </tr>\n               <tr>\n                   <td>Topic</td>\n                   <td>: <a href=\"https://note.laurance.ml\" target=\"_blank\">2022/10/12 ---Ingress-test</a></td>\n               </tr>\n         </tbody>\n     </table>\n   </body>\n   </html>\n```\n\n***\n***\n   \n**ä½¿ç”¨ docker build å»ºç«‹ image**\n    \n```sql\ndocker build --build-arg HTML=green.html -t laurance/green .\n    \ndocker build --build-arg HTML=red.html -t laurance/red .\n```\n\n***\n***\n   \n**æ›´æ”¹ TAG åç¨±ç‚º docker ç”¨æˆ¶å / image åç¨±**\n   \n```sql\ndocker tag laurance/red ihatemis/red\n    \ndocker tag laurance/green ihatemis/green\n```\n\n***\n***\n   \n**ä¸Šå‚³è‡³ Docker hub ï¼Œéœ€è¦å…ˆ docker login**\n\n```sql\ndocker push ihatemis/red:latest\n    \ndocker push ihatemis/green:latest\n```\n\n***\n***\n   \n  **Deplyment**\n  ----\n  \n```sql\nvim ingress.deployment.yaml\n\n   \n   #apiVersion: extensions/v1beta1\n   apiVersion: apps/v1\n   kind: Deployment\n   metadata:\n       name: red-nginx\n       namespace: simple2\n   spec:\n     selector:\n       matchLabels:\n         app: red-nginx\n     replicas: 4\n     template:\n       metadata:\n         labels:\n           app: red-nginx\n       spec:\n         containers:\n         - name: nginx\n           image: ihatemis/red:latest\n           ports:\n           - containerPort: 80\n---   \n   #apiVersion: extensions/v1beta1\n   apiVersion: apps/v1\n   kind: Deployment\n   metadata:\n       name: green-nginx\n       namespace: simple2\n   spec:\n     selector:\n       matchLabels:\n         app: green-nginx\n     replicas: 2\n     template:\n       metadata:\n         labels:\n           app: green-nginx\n       spec:\n         containers:\n         - name: nginx\n           image: ihatemis/green:latest\n           ports:\n           - containerPort: 80\n```\n\n**å»ºç«‹ ingress.deployment.yaml**\n   \n```sql\nkubectl apply -f ingress.deployment.yaml \n```\n\n***\n***\n   \n   **service**\n   -----\n   \n```sql\nvim ingress.service.yaml\n\n   \n   apiVersion: v1\n   kind: Service\n   metadata:\n     name: green-service\n     namespace: simple2\n   spec:\n     type: NodePort\n     selector:\n       app: green-nginx\n     ports:\n       - protocol: TCP\n         port: 80    \n    ---\n   apiVersion: v1\n   kind: Service\n   metadata:\n     name: red-service\n     namespace: simple2\n   spec:\n     type: NodePort\n     selector:\n       app: red-nginx\n     ports:\n       - protocol: TCP\n         port: 80\n ```\n \n**å»ºç«‹ ingress.service.yaml**\n\n```sql\nkubectl apply -f ingress.service.yaml\n```\n\n***\n***\n    \n   **Ingress**\n   -----\n    \n```sql\nvim ingress.yaml\n\n   \n   #apiVersion: extensions/v1beta1\n   apiVersion: networking.k8s.io/v1\n   kind: Ingress\n   metadata:\n     name: web\n     namespace: simple2\n     annotations:\n       nginx.ingress.kubernetes.io/rewrite-target: /\n   spec:\n     rules:\n     - host: green.ingress.com\n       http:\n         paths:\n           - path: /\n             pathType: Prefix\n             backend:\n               service:\n                 name: green-service\n                 port:\n                   number: 80\n     - host: red.ingress.com\n       http:\n         paths:\n           - path: /\n             pathType: Prefix\n             backend:\n               service:\n                 name: red-service\n                 port:\n                   number: 80\n ```\n  \n**å»ºç«‹ kubectl apply -f ingress.yaml**\n   \n```sql\nkubectl apply -f ingress.yaml \n``` \n\n***\n***\n\n**å°‡åŸŸåç¶è‡³ HOSTS æ¸¬è©¦**\n   \n```sql\n172.16.0.223 red.ingress.com green.ingress.com\n```\n\n***\n***\n   \n**è¨ªå• http://red.ingress.com**\n   \n   ![](https://s2.loli.net/2024/04/28/729Sbc5mwnkq4tD.png)\n\n***\n***\n\n**è¨ªå• http://green.ingress.com**\n\n   ![](https://s2.loli.net/2024/04/28/AQEYxtGlfUIzyC4.png)    \n\n***\n***\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - ERROR-Metric client health check failed","url":"/blog.github.io/2022/10/10/Kubernetes-ERROR-Metric_client_health_check_failed/","content":"\n<!--more-->\n\"k8s dashboard å ±éŒ¯: (404) the server could not find the requested resource\"\n\n***\n***\n\n**dashboard å‡ºç¾ä»¥ä¸‹ç•«é¢**\n-----\n\n   ![](https://s2.loli.net/2024/04/28/ouIEgcz8rU1qLMv.png)\n\n***\n***\n   \n**æŸ¥çœ‹ dashboard pod çš„ LOG**\n-----\n\n```sql\n# kubectl get pods -n kube-system|grep dash\nkubernetes-dashboard-6ff6454fdc-78fnx   1/1     Running   0          4h8m\n```\n\n***\n***\n\n**K8s LOG å ±éŒ¯ Metric client health check failed: the server could not find the requested resource (get services heapster). Retrying in 30 seconds**\n-----\n\n   ![](https://s2.loli.net/2024/04/28/jv12h8fNCyMJHGu.png)\n\n`**åŸå› : kubernetsç”¨çš„æ¯”è¾ƒé«˜çš„ç‰ˆæœ¬ï¼Œä½†dashboardç‰ˆæœ¬ç”¨çš„æ¯”è¾ƒä½ï¼Œå› æ­¤å ±éŒ¯**`\n\n#### **è§£æ±º: é‡æ–°å®‰è£ dashboard ç‰ˆæœ¬**\n\n##### å…ˆå°‡èˆŠçš„ç‰ˆæœ¬åˆªé™¤ (å°‡ dashboard çš„ NS åˆªé™¤å³å¯)\n\n```sql\nkubectl delete ns kubernetes-dashboard\n```\n\n##### æŸ¥çœ‹ kubernetes ç‰ˆæœ¬\n\n```sql\n$ kubectl version --short\nFlag --short has been deprecated, and will be removed in the future. The --short output will become the default.\nClient Version: v1.25.2\nKustomize Version: v4.5.7\nServer Version: v1.25.0\n```\n   \n##### æ ¹æ“š kubernetes ç‰ˆæœ¬ ä¸‹è¼‰ç›¸å°æ‡‰çš„ dashboard ç‰ˆæœ¬\n   \n[ä¸‹è¼‰ç¶²å€é€£çµ](https://github.com/kubernetes/dashboard/releases)\n\n|    dashboard    |   å°æ‡‰ç‰ˆæœ¬     |\n|   ---     |       ---     |\n|   dashboard v2.0.0-beta5 |â€”> kubernetes 1.16|\n|   dashboard v2.0.0 | kubernetes 1.18|\n|   dashboard v2.0.1 | kubernetes 1.18|\n|   dashboard v2.0.2 | kubernetes 1.18|\n|   dashboard v2.0.3 | kubernetes 1.18|\n|   dashboard v2.0.4 | kubernetes 1.19|\n|   dashboard v2.0.5 | kubernetes 1.19|\n|   dashboard v2.1.0 | kubernetes 1.20|\n|   dashboard v2.2.0 | kubernetes 1.20|\n|   dashboard v2.3.0 | kubernetes 1.21|\n|   dashboard v2.3.1 | kubernetes 1.21|\n\n    \n##### wget ä¸‹ä¾†ä¿®æ”¹ Service çš„éƒ¨åˆ†\n\n```sql\nwget https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml\n```\n\n##### ä¿®æ”¹ç‚º Nodeport æ–¹å¼è¨ªå•\n\n```sql\nvim recommended.yaml\n\n\nkind: Service\napiVersion: v1\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: kubernetes-dashboard\n  namespace: kubernetes-dashboard\nspec:\n  type: NodePort #æ–°æ·»åŠ çš„\n  ports:\n    - port: 443\n      targetPort: 8443\n      nodePort: 30003 #æ–°æ·»åŠ çš„ï¼ˆå¯ä»¥æ”¹æˆå…¶å®ƒçš„ç«¯å£å·ï¼Œè¦å¤§äº30000ï¼‰\n  selector:\n    k8s-app: kubernetes-dashboard\n```\n\n---\n\n##### åŸ·è¡Œ yaml æ–‡ä»¶\n    \n\n```sql\nkubectl apply -f recommended.yaml\n\nnamespace/kubernetes-dashboard created\nserviceaccount/kubernetes-dashboard created\nservice/kubernetes-dashboard created\nsecret/kubernetes-dashboard-certs created\nsecret/kubernetes-dashboard-csrf created\nsecret/kubernetes-dashboard-key-holder created\nconfigmap/kubernetes-dashboard-settings created\nrole.rbac.authorization.k8s.io/kubernetes-dashboard created\nclusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created\nrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created\nclusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created\ndeployment.apps/kubernetes-dashboard created\nservice/dashboard-metrics-scraper created\ndeployment.apps/dashboard-metrics-scraper created\n```\n\n##### å»ºç«‹ dashboard ç®¡ç†å“¡\n    \n```sql\nvim dashboard-admin.yaml\n\n\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  labels:\n    k8s-app: kubernetes-dashboard\n  name: dashboard-admin\n  namespace: kubernetes-dashboard\n\n\nkubectl create -f dashboard-admin.yaml\n```\n\n##### å»ºç«‹ RBAC åˆ†é…æ¬Šé™\n    \n```sql\nvim dashboard-admin-role.yaml\n    \n    \n apiVersion: rbac.authorization.k8s.io/v1\n kind: ClusterRoleBinding\n metadata:\n   name: dashboard-admin-role\n   labels:\n     k8s-app: kubernetes-dashboard\n roleRef:\n   apiGroup: rbac.authorization.k8s.io\n   kind: ClusterRole\n   name: cluster-admin\n subjects:\n - kind: ServiceAccount\n   name: dashboard-admin\n   namespace: kubernetes-dashboard\n   \n      \nkubectl create -f dashboard-admin-role.yaml\n```\n  \n##### æŸ¥çœ‹æ˜¯å¦å‰µå»ºæˆåŠŸ\n\n```sql\nkubectl get secret -n kubernetes-dashboard\n    \n\nNAME                               TYPE                                  DATA   AGE\ndashboard-admin-token-fj9v6        kubernetes.io/service-account-token   3      95s\ndefault-token-lj7xg                kubernetes.io/service-account-token   3      33m\nkubernetes-dashboard-certs         Opaque                                0      33m\nkubernetes-dashboard-csrf          Opaque                                1      33m\nkubernetes-dashboard-key-holder    Opaque                                2      33m\nkubernetes-dashboard-token-cdkzc   kubernetes.io/service-account-token   3      33m\n```\n\n`dashboard-admin-token æ˜¯å‰›å‰›å‰µå»ºçš„ï¼Œå†ç¯©å‡º TOKEN å³å¯`\n    \n\n```sql\nkubectl describe -n kubernetes-dashboard secret/dashboard-admin-token-fj9v6|grep token:\ntoken:      eyJhbGciOiJSUzI1NiIsImtpZCI6ImJyYjJDR18tMDQtdkc3MzBBN0RwQU8zTlVjV01PM2w0dGRBWVh5UXhPN3MifQ.eyJpc3MiOiJrdWJlcm5ldGVz\n```\n\n***\n***\n\n##### é©—è­‰ : è¼¸å…¥ https://172.16.0.223:30003 å³å¯è¨ªå• Dashboard ï¼Œ ä¸¦è¼¸å…¥å‰›å‰›ç¯©å‡ºçš„ TOKEN \n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/kQKTHqnGrUyXER1.png)\n\n***\n***\n\n\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - Lens ä½¿ç”¨æŒ‡å— : é€é IDE ç®¡ç† minikube","url":"/blog.github.io/2022/10/10/Kubernetes-Lens_ä½¿ç”¨æŒ‡å—_é€šéIDEç®¡ç†_minikube/","content":"\n**å®‰è£… LENS on Windows x64**\n\n**[LENS å®˜æ–¹è¼‰é»](https://k8slens.dev/)**\n\n   ![](https://s2.loli.net/2024/04/28/QjdnOaoyVrU1W6Z.png)\n\n***\n***\n   \n**å³ä¸Šä¸‰æ¢ç·šé»é¸ File >> Add Cluster æ–°å¢é›†ç¾¤**\n\n   ![](https://s2.loli.net/2024/04/28/lpADLQejP1EHX9n.png)\n\n***\n***\n   \n**å›åˆ°æ¸¬è©¦æ©Ÿä¸ŠæŸ¥çœ‹ minikube è¨­å®šæª”**\n\n```sql\nkubectl config view \n```\n    \n   ![](https://s2.loli.net/2024/04/28/bBHWXQmjcf9UyYL.png)\n\n***\n***\n   \n**å°‡æ¸¬è©¦æ©Ÿè£¡çš„ .minikube éš±è—æª”è³‡æ–™å¤¾ winscp å–å‡ºæ”¾åˆ°å°æ‡‰ä½ç½®**\n\n```sql\nPWD: /root/.minikube\n```\n\n   ![](https://s2.loli.net/2024/04/28/qhf5c6NAMlHYbGr.png)  \n\n***\n***\n   \n**å°‡æ¸¬è©¦æ©Ÿè£¡çš„ .kube éš±è—æª”è³‡æ–™å¤¾ winscp å–å‡ºæ”¾åˆ°å°æ‡‰ä½ç½®ï¼Œä¸¦ä¿®æ”¹è·¯å¾‘**   \n\n```sql\nPWD: /root/.kube\n```\n    \n   ![](https://s2.loli.net/2024/04/28/W1OywzCgN74pJM3.png)\n\n***\n***\n         \n**å°‡ .kube ä¸‹çš„ config å…§å®¹è²¼è‡³ LENS >> File >> Add Cluster æ–°å¢é›†ç¾¤**\n\n   ![](https://s2.loli.net/2024/04/28/yFkUSCp4QJMXGRu.png)\n\n***\n***\n   \n**é›™æ“Šé€£æ¥å³å¯**\n\n   ![](https://s2.loli.net/2024/04/28/7cSp28fbgLuE3IO.png)\n   \n***\n***\n   \n\n\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - install cri-dockerd on Linux","url":"/blog.github.io/2022/10/10/Kubernetes-install_cri_dockerd_on_Linux/","content":"\n***\n***\n\n**å¾[cri-dockerd GitHub](https://github.com/Mirantis/cri-dockerd/releases) é é¢ä¸‹è¼‰é©ç•¶çš„äºŒé€²åˆ¶åŒ…**\n\n```sql\nwget https://github.com/Mirantis/cri-dockerd/releases/download/v0.2.0/cri-dockerd-v0.2.0-linux-amd64.tar.gz\n```\n    \n**è§£å£“ç¸®åŒ…**\n\n```sql\ntar xvf cri-dockerd-v0.2.0-linux-amd64.tar.gz\n```\n\n***\n***\n    \n**å°‡ cri-dockerd äºŒé€²è£½æ–‡ä»¶ç§»å‹•åˆ° usr/local/bin ç›®éŒ„**\n\n```sql\nmv ./cri-dockerd /usr/local/bin/ \n```\n\n***\n***\n    \n**é…ç½® systemd**\n\n```sql\nwget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.service\n    \nwget https://raw.githubusercontent.com/Mirantis/cri-dockerd/master/packaging/systemd/cri-docker.socket\n    \nmv cri-docker.socket cri-docker.service /etc/systemd/system/\n\nsed -i -e 's,/usr/bin/cri-dockerd,/usr/local/bin/cri-dockerd,' /etc/systemd/system/cri-docker.service\n```\n\n***\n***\n    \n**å•Ÿç”¨ cri-dockerd** \n\n```sql\nsystemctl daemon-reload\n    \nsystemctl enable cri-docker.service\n    \nsystemctl enable --now cri-docker.socket\n```\n\n***\n***\n   \n**é©—è­‰è©²æœå‹™æ˜¯å¦æ­£åœ¨é‹è¡Œ**\n\n```sql\nsystemctl status cri-docker.socket\n```\n\n***\n***\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - åœ¨æœ¬åœ°ç«¯ä¸Šå»ºç«‹ Dashboard","url":"/blog.github.io/2022/10/10/Kubernetes-åœ¨æœ¬åœ°ç«¯ä¸Šå»ºç«‹_Dashboard/","content":"\n**[ Github Kubernetes Dashboard](https://github.com/kubernetes/dashboard) é€™è£¡è¨˜éŒ„ä¸€ä¸‹å®‰è£çš„éç¨‹**\n\n***\n***\n\n```sql\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml\n```\n\n   ![](https://s2.loli.net/2024/04/28/65u9M8AgSleyTOI.png)\n\n***\n***\n   \n**é€™æ¨£å°±å®‰è£å¥½äº†ï¼Œç„¶å¾Œçœ‹ä¸€ä¸‹æ­£åœ¨é‹è¡Œçš„å®¹å™¨**\n   \n```sql\nkubectl get all -n kube-system -l k8s-app=kubernetes-dashboard\n```\n    \n   ![](https://s2.loli.net/2024/04/28/s6IbmPOAJDgG9XT.png)\n\n***\n***\n\n**å…ˆæŠŠIptablesè¦å‰‡æ‰“é–‹ (é è¨­FORWARDæ˜¯é—œé–‰çš„)**\n   \n```sql\niptables -P FORWARD ACCEPT\n```\n\n***\n***\n    \n**ç¢ºèªç«ç‰†éƒ½é—œé–‰ firewalld && selinux**\n   \n```sql\nsystemctl stop firewalld\n    \ngetenforce >> disabled\n```\n\n***\n***\n    \n**è¨­ç½®ä¸€å±¤ä»£ç†è®“å¤–éƒ¨è¨ªå• dashboard**\n   \n```sql\nkubectl proxy --address='0.0.0.0' --disable-filter=true &\n```\n    \n`PS. disable-filter=trueè¡¨ç¤ºç¦ç”¨è«‹æ±‚éæ¿¾åŠŸèƒ½ï¼Œå¦å‰‡æˆ‘å€‘çš„è«‹æ±‚æœƒè¢«æ‹’çµ•ï¼Œä¸¦æç¤º Forbidden (403) Unauthorized`\n    \n   ![](https://s2.loli.net/2024/04/28/iUMxO8KLFjl1bXH.png)\n\n***\n***\n    \n**è¨ªå• dashboard**\n   \n```sql\nhttp://172.16.0.223:8001/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/service?namespace=default\n```\n  \n   ![](https://s2.loli.net/2024/04/28/slqWV6L5OzvU4FK.png)\n\n***\n***\n\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - å¸¸è¦‹ minikube æŒ‡ä»¤","url":"/blog.github.io/2022/10/10/Kubernetes-å¸¸è¦‹minikubeæŒ‡ä»¤/","content":"\n**æ’ä»¶åˆ—è¡¨**\n\n```sql\nminikube addons list\n```\n\n**æ’ä»¶å•Ÿç”¨**\n\n```sql\nminikube addons enable ADDON_NAME\n```\n\n**æ’ä»¶ç¦ç”¨**\n\n```sql\nminikube addons disable ADDON_NAME\n```\n    \n**ä¸ä½¿ç”¨ä»»ä½•é©…å‹•é–‹å•Ÿé›†ç¾¤**\n\n```sql\nminikube start --driver=none\n```\n\n**åœæ­¢é›†ç¾¤**\n\n```sql\nminikube stop\n```\n    \n**åˆ é™¤é›†ç¾¤**\n\n```sql\nminikube delete\n```\n\n**ä¸å½±å“å·²éƒ¨ç½²åº”ç”¨æƒ…å†µä¸‹æš‚åœ Kubernetes**\n\n```sql\nminikube pause\n```\n    \n**å–æ¶ˆæš‚åœçš„instance**\n\n```sql\nminikube unpause\n```\n    \n**å¢åŠ é»˜è®¤å†…å­˜é™åˆ¶ï¼ˆéœ€é‡å¯ï¼‰**\n\n```sql\nminikube config set memory 16384\n```\n    \n**å„ç¯€é»æ“ä½œ**\n\n```sql\nminikube node [add|start|stop|delete|list]\n```\n    \n---------------------------------------------------------------------\n\n**é¡å¤–å•Ÿå‹•åƒæ•¸**\n=====\n\né•œåƒæ‰€åœ¨å›½å®¶\n---\n\n```sql\n--image-mirror-country=cn \n``` \n\né•œåƒä»“åº“åœ°å€\n---\n   \n```sql\n--image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers\n```\n\nè®¾ç½®minikubeè™šæ‹Ÿæœºåˆ†é…CPUæ ¸æ•°\n---\n    \n```sql\n--cpus=2\n```\n\nè®¾ç½®minikubeè™šæ‹Ÿæœºåˆ†é…å†…å­˜\n---\n    \n```sql\n--memory=2000mb\n```\n\nä½¿ç”¨çš„kubernetesç‰ˆæœ¬\n---    \n\n```sql\n--kubernetes-version=version\n```\n\nminikubeè™šæ‹Ÿæœºå†…éƒ¨dockerä½¿ç”¨ä»£ç†åœ°å€\n---\n    \n```sql\n--docker-env http_proxy=http://IP:7890 http_proxy=https://IP:7890\n```\n    \næŒ‡å®šé©±åŠ¨\n=====\n\nåœ¨ä¸»æœºä¸Šè¿è¡ŒKubernetesç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨VMä¸­,è¯¥æ–¹å¼é©±åŠ¨ä¾èµ–Docker\n---\n    \n```sql\n--vm-driver=none\n```\n\nè¡¨ç¤ºç”¨è™šæ‹Ÿæœº,é»˜è®¤\n---\n    \n```sql\n--vm-driver=virtualbox\n```\n    \n`**PS. ä¸é€šè¿‡--vm-driver=noneå‚æ•°å¯åŠ¨ï¼Œåˆ™åˆ›å»ºçš„Podã€Serviceå‡ä¸èƒ½é€šè¿‡å¤–ç½‘è®¿é—®**`\n\n`**åªèƒ½minikube ssh è¿›å…¥é›†ç¾¤è®¿é—®æ“ä½œ**`\n\n[åƒè€ƒæ–‡ç»](https://juejin.cn/post/7081256561280024606)\n\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - å¸¸è¦‹ kubectl æŒ‡ä»¤","url":"/blog.github.io/2022/10/10/Kubernetes-å¸¸è¦‹kubectlæŒ‡ä»¤/","content":"\n**å–å¾—æ‰€æœ‰ Pods çš„è³‡è¨Š**\n\n```sql\nkubectl get pods -o wide\n```\n\n**å–å¾—æŸ Pod çš„è©³ç´°è³‡æ–™**\n\n```sql\nkubectl describe pod <pod Name>\n```\n\n**ä¿®æ”¹ Pods çš„è³‡è¨Š**\n\n```sql\nkubectl edit pods -n <namespace> <pod Name>\n```    \n\n**æŸ¥çœ‹ Pods äº‹ä»¶**\n\n```sql\nkubectl describe pod <pod Name>\n```\n\n**æŸ¥çœ‹ Pods æ—¥å¿—æ–‡ä»¶**\n\n```sql\nkubectl logs -f <pod Name>\n```    \n\n**åˆªé™¤é€™å€‹ pod**\n\n```sql\nkubectl delete -f pod-demo.yaml\n```\n\n**ä½¿ç”¨ yaml å‰µå»º Pods**\n\n```sql\nkubectl apply -f laurance-test.yaml\n```\n    \n**é€²å…¥ Pods å…§éƒ¨**\n\n```sql\nkubectl exec -it <pod Name> /bin/bash\n```\n    \n**æŸ¥çœ‹å„ç¯€é»ç‹€æ…‹**\n\n```sql\nkubectl get node <node name>\n```\n    \n**æŸ¥çœ‹å„ç¯€é»äº‹ä»¶**\n\n```sql\nkubectl describe node <node name>\n```\n    \n**æŸ¥çœ‹ç³»ç»Ÿ Kubelet æ—¥å¿— 1000è¡Œ**\n\n```sql\njournalctl -l -u kubelet -n 1000\n```\n    \n**å°‡ YAML å°å‡º**\n\n```sql\nkubectl get service <serviceName> -o yaml > backup.yaml\n```\n\n**æª¢æŸ¥å¢é›†ç‹€æ…‹**\n\n```sql\nkubectl get all\n```\n\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"CentOS - å•Ÿå‹•ç¶²è·¯æ™‚å‡ºç¾ bring up interface ip address is already in use for device eth0","url":"/blog.github.io/2022/10/07/Centos-å•Ÿå‹•ç¶²è·¯æ™‚å‡ºç¾bring-up-interface-ip-address-is-already-in-use-for-device-eth0/","content":"\n<!--more-->\n\"CentOS ERROR : bring up interface ip address is already in use for device eth0 è§£æ±ºæ–¹æ¡ˆ\"\n\n\n # é‡å•Ÿç¶²è·¯å ±éŒ¯ \n\n# Bringing up interface eth0:  Determining if ip address 172.16.0.224 is already in use for device eth0...\n   \n# åŠ ä¸Š ARPCHECK=no é‡å•Ÿç¶²è·¯å°±å¥½äº†\n\n   \n```sql\n\nvim /etc/sysconfig/network-scripts/ifcfg-eth0\n    \nDEVICE=eth0\nHWADDR=XX:XX:XX:XX:XX:XX\nTYPE=Ethernet\nUUID=5248d5f6-7d7b-42ee-9443-e2f627c73677\nONBOOT=yes\nNM_CONTROLLED=yes\nBOOTPROTO=static\nIPADDR=172.16.0.224\nGATEWAY=172.16.0.1\nNETMASK=255.255.0.0\nDNS1=8.8.8.8\nDNS2=9.9.9.9\nARPCHECK=no\n\n\n```\n    \n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"Docker - Install docker-compose","url":"/blog.github.io/2022/10/06/Docker-Install-docker-compose/","content":"\n\n\n# **ä¸‹è¼‰å®‰è£åŒ…**\n\n```sql\n\nsudo curl -L \"https://github.com/docker/compose/releases/download/1.27.1/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\n```\n\n\n\n   \n\n# **å°äºŒé€²è£½æ–‡ä»¶æ‡‰ç”¨å¯åŸ·è¡Œæ¬Šé™**\n\n```sql\n\nsudo chmod +x /usr/local/bin/docker-compose\n\n```\n\n\n\n\n    \n# **å‰µå»ºæŒ‡å‘ /usr/bin æˆ–è·¯å¾‘ä¸­ä»»ä½•å…¶ä»–ç›®éŒ„çš„ç¬¦è™Ÿéˆæ¥**\n\n```sql\n\nsudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\n```\n\n\n\n    \n\n# **æ¸¬è©¦ docker-compose**\n\n```sql\n\ndocker-compose --version\n\n```\n\n\n\n\n***\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"GCP - ç¡¬ç¢Ÿæ“´å®¹","url":"/blog.github.io/2022/10/06/GCP-ç¡¬ç¢Ÿæ“´å®¹/","content":"\n***\n***\n***\n\n**åœ¨ GCP ä¸Šï¼Œé»é¸ç¡¬ç›¤ï¼Œç›´æ¥ä¿®æ”¹æƒ³è¦çš„ç¡¬ç›¤å¤§å° ( åªèƒ½æ“´å¤§ã€ä¸èƒ½ç¸®å° )**\n=====\n\n`é€™é‚Šæ¸¬è©¦å°‡å®¹é‡å¢åŠ åˆ° 1.5T`\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/28/KHbkM4RcOu6AWhp.png)\n\n***\n***\n***\n\n\n\n**å¾Œå°å¢åŠ å®Œç¡¬ç¢Ÿå®¹é‡å¾Œ,åˆ°æ©Ÿå™¨ä½¿ç”¨æŒ‡ä»¤ `lsblk` çœ‹ä¸€ä¸‹ç›®å‰çš„ç¡¬ç¢Ÿç©ºé–“**\n\n***\n    \n**æœƒç™¼ç¾å¾åŸæœ¬çš„ 1.3T è®Šæˆ 1.5Tï¼Œä½†æ˜¯ç”¨ `df -h`  å»æ²’çœ‹åˆ°ç©ºé–“å¢åŠ **\n\n\n\n***\n***\n***\n\n**æ“´å¤§åˆ†å‰²å€**\n=====\n\n***\n***\n\n**ä»¥ä¸‹æ˜¯é‡å° sda çš„ç¬¬ä¸€å€‹åˆ†å‰²å€æ“´å¤§**\n=====\n\n***\n\n**å®‰è£ `growpart` å¥—ä»¶**\n\n```sql\nyum install cloud-utils-growpart\n```\n\n***\n\n**ä½¿ç”¨ `growpart ` å‘½ä»¤æ“´å®¹è©²åˆ†å€**\n\n```sql\ngrowpart /dev/sda 2\n```\n\n***\n***\n***\n\n\n    \n### *æ“´å¤§æª”æ¡ˆç³»çµ±ç©ºé–“*  \n\n### *å¦‚æœæ˜¯ `ext2` `ext3` `ext4` çš„ file systemï¼Œå‰‡ç”¨ `resize2fs`  ,  å¦‚æœæ˜¯ `xfs` å‰‡ç”¨ `xfs_growfs`*\n\n***\n\n\n**`xfs` æª”æ¡ˆç³»çµ±**\n\n```sql\nxfs_growfs /dev/sda2\n```\n\n***\n\n**`ext4` æª”æ¡ˆç³»çµ±**\n\n```sql\nresize2fs /dev/sda2\n```    \n\n\n\n***\n***\n***\n\n\n\n\n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"Kubernetes - Install and Set Up kubectl on Linux","url":"/blog.github.io/2022/10/06/Kubernetes-Install_and_Set_Up_kubectl_on_Linux/","content":"\n<!--more-->\nCURL å®˜æ–¹å®‰è£ç‰ˆæœ¬\n\n***\n***\n\n## **(1) åœ¨ Linux ä¸Šå®‰è£å¸¶æœ‰ curl çš„ kubectl äºŒé€²ä½æª” (æœ€æ–°)**    \n    \n```sql\ncurl -LO \"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\"\n```\n\n`æ³¨æ„ï¼š`\n`è¦ä¸‹è¼‰ç‰¹å®šç‰ˆæœ¬ï¼Œè«‹å°‡å‘½ä»¤éƒ¨åˆ†æ›¿æ›ç‚ºç‰¹å®šç‰ˆæœ¬ã€‚  $curl -L -s https://dl.k8s.io/release/stable.txt`\n\n**ä¾‹å¦‚ï¼Œè¦åœ¨Linuxä¸Šä¸‹è¼‰ v1.25.0 ç‰ˆæœ¬ï¼Œè¼¸å…¥ï¼š**\n\n```sql\ncurl -LO https://dl.k8s.io/release/v1.25.0/bin/linux/amd64/kubectl\n```\n\n***\n***\n    \n## **(2) é©—è­‰äºŒé€²ä½æª” (é¸æ“‡)**\n\n**ä¸‹è¼‰ kubectl æ ¡é©—å’Œæª”ï¼š**\n\n```sql\ncurl -LO \"https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256\"\n```\n    \n**æ ¹æ“šæ ¡é©—å’Œæ–‡ä»¶é©—è­‰ kubectl äºŒé€²ä½æª”ï¼š**\n\n```sql\necho \"$(cat kubectl.sha256)  kubectl\" | sha256sum --check\n```\n    \n**å¦‚æœæœ‰æ•ˆï¼Œå‰‡è¼¸å‡ºç‚ºï¼š**\n\n```sql\nkubectl: OK\n```\n    \n**å¦‚æœæª¢æŸ¥å¤±æ•—ï¼Œå‰‡ä»¥éé›¶ç‹€æ…‹é€€å‡ºä¸¦åˆ—å°é¡ä¼¼æ–¼ä»¥ä¸‹å…§å®¹çš„è¼¸å‡ºï¼šsha256**\n\n```sql\nkubectl: FAILED\nsha256sum: WARNING: 1 computed checksum did NOT match\n```  \n  \n`**æ³¨æ„ï¼šä¸‹è¼‰ç›¸åŒç‰ˆæœ¬çš„äºŒé€²ä½æª”å’Œæ ¡é©—å’Œã€‚**`\n\n***\n***\n\n## **(3) å®‰è£ kubectl**\n\n```sql\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n```\n \n`å¦‚æœåœ¨ç›®æ¨™ç³»çµ±ä¸Šæ²’æœ‰æ ¹è¨ªå•è¨±å¯æ¬Šï¼Œä»ç„¶å¯ä»¥å°‡ kubectl å®‰è£åˆ°è©²ç›®éŒ„ï¼š~/.local/bin</font>`\t\n \n```sql\nchmod +x kubectl\n    \nmkdir -p ~/.local/bin\n    \nmv ./kubectl ~/.local/bin/kubectl\n    \n# and then append (or prepend) ~/.local/bin to $PATH\n```\n\n***\n***\n    \n## **(4) æ¸¬è©¦ç¢ºä¿å®‰è£çš„ç‰ˆæœ¬æ˜¯æœ€æ–°çš„ï¼š**\n\n```sql\nkubectl version --client\n```\n    \n**æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å…§å®¹æª¢è¦–ï¼š**\n   \n```sql\nkubectl version --client --output=yaml\n```    \n   \n***\n***\n\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - Install kubectl on Linux by yum","url":"/blog.github.io/2022/10/06/Kubernetes-Install_kubectl_on_Linux_by_yum/","content":"\n<!--more-->\nyum å®˜æ–¹å®‰è£ç‰ˆæœ¬\n\n***\n***\n\n**æ–°å¢` yum `æº**\n\n```sql\ncat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-\\$basearch\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg\nEOF\n```\n    \n***\n***\n\n**ä½¿ç”¨YUMå®‰è£**\n\n```sql\nsudo yum install -y kubectl kubelet kubeadm\n```\n\n***\n***\n    \n**é–‹æ©Ÿå•Ÿå‹•**\n    \n```sql\nsystemctl enable kubelet\n```\n\n***\n***\n   \n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"Kubernetes - install minikube on Linux","url":"/blog.github.io/2022/10/06/Kubernetes-install_minikube_on_Linux/","content":"\n***\n***\n\n**å‰ç½®**\n-----\n\n\n\n**é—œé–‰ swap `è¨»è§£å³å¯`**\n\n```sql\nvim /etc/fstab\n\n```\n\n***\n\n**ä¾è³´**\n\n```sql\nyum install conntrack\n\n```\n\n***\n\n**åœ¨ `/etc/hosts` æ–°å¢ `hostname`**\n\n```sql\n127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 laurance\n```\n\n\n\n***\n***\n\n**`Kubernetes 1.24+` å·²å¾ä¸Šæ¸¸åˆªé™¤äº† `dockershim`**\n=====\n\n***\n***\n\n**éœ€è¦åœ¨ç³»çµ±ä¸Šå®‰è£ `cri-dockerd`**\n=====\n\n***\n***\n\n**cri-dockerd å®‰è£**\n-----\n\n```sql\nwget https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo -O /etc/yum.repos.d/docker-ce.repo\n\nyum -y install docker-ce\n\nsystemctl enable docker && systemctl start docker\n\ndocker version\n\n```\n\n***\n***\n\n**å®‰è£ minikube**\n=====\n\n***\n\n**æ·»åŠ  `YUMæº`**\n-----\n\n***\n\n```sql\ncat > /etc/yum.repos.d/kubernetes.repo << EOF\n\n[kubernetes]\n\nname=Kubernetes\n\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\n\nenabled=1\n\ngpgcheck=0\n\nrepo_gpgcheck=0\n\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\n\nEOF\n\n```\n\n***\n***\n\n**å®‰è£ `kubectl`**\n-----\n\n***\n\n```sql\nyum install -y kubectl\n\nusermod -aG docker $USER && newgrp docker\n\n```\n\n***\n***\n\n**ä¸‹è¼‰ `minikube`**\n-----\n\n***\n\n```sql\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n\ninstall minikube-linux-amd64 /usr/local/bin/minikube\n\nchmod +x /usr/local/bin/minikube\n\n```\n\n***\n***\n\n**å•Ÿå‹•é›†ç¾¤**\n-----\n\n***\n***\n\n```sql\nminikube start --force --driver=docker --cni calico  --registry-mirror=https://registry.docker-cn.com --container-runtime=containerd\n\nminikube status\n\n```\n\n***\n***\n\n***\n\n","tags":["Kubernetes"],"categories":["Kubernetes"]},{"title":"SVN - SERVER - å®‰è£æ•™å­¸ (CentOS7)","url":"/blog.github.io/2022/10/06/SVN-å®‰è£æ•™å­¸_(CentOS7)/","content":"\n***\n***\n\n**å®‰è£ä¾è³´åŠ SVN å¥—ä»¶**\n\n```sql\nyum install apr* gcc zlib-devel automake autoconf libtool make\n\nwget https://archive.apache.org/dist/subversion/subversion-1.10.8.tar.gz\n    \ntar zxvf subversion-1.10.8.tar.gz\n    \ncd subversion-1.10.8\n    \nmkdir sqlite-amalgamation\n\ncd ../\n\nwget https://www.sqlite.org/2022/sqlite-autoconf-3400000.tar.gz --no-check-certificate\n \ntar zxvf sqlite-autoconf-3400000.tar.gz\n    \ncd subversion-1.10.8/sqlite-amalgamation\n    \ncp -r ../../sqlite-autoconf-3400000/* .\n```\n\n***\n***\n\n**ç·¨è­¯å®‰è£ svn-server**\n\n```sql\ncd ../\n\n./configure --prefix=/usr/local/svn --without-berkeley-db --with-lz4=internal --with-utf8proc=internal\n\nmake && make install\n \ncp /usr/local/svn/bin/* /usr/local/bin/\n```\n\n***\n***\n    \n**å•Ÿå‹• svnserve**\n\n```sql\nsvnserve -d /usr/local/bin/svnserve --daemon --pid-file=/var/run/svnserve.pid\n```\n\n***\n***\n\n**å¢åŠ  svn å•Ÿå‹•èº«åˆ†**\n \n```sql\nadduser svn\n\npasswd svn\n```\n\n***\n***\n    \n**å»ºç«‹è³‡æ–™åº«**\n\n```sql\nsvnadmin create /home/svn/project/\n```\n\n***\n***\n    \n**å¢åŠ ä½¿ç”¨è€…èˆ‡å¯†ç¢¼**\n\n```sql\nvim /home/svn/project/conf/passwd\n```\n    \n```sql\n[users]\n\nlaurance: yoyoyo\n```\n\n***\n***\n\n**å¢åŠ æ¬Šé™**\n\n```sql\nvim /home/svn/project/conf/auth\n```\n\n```sql\n[/]\nlaurance: rw\n``` \n\n***\n***\n    \n**ä¿®æ”¹è¨­å®šæª”**\n\n```sql\nvim /home/svn/project/conf/svnserve.conf\n```\n\n```sql\n[general]\n\nanon-access=read\n\nauth-access=write\n\npassword-db=passwd\n\nauthz-db=authz\n\nrealm=/home/svn/nowblog\n\n[sasl]\n```\n\n***\n***\n\n**é‡å•Ÿ svn-server**\n\n***\n***\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"SVN - error ä½ å¿…é ˆå…ˆæ›´æ–°ä½ çš„å·¥ä½œå‰¯æœ¬","url":"/blog.github.io/2022/10/05/SVN-errorä½ å¿…é ˆå…ˆæ›´æ–°ä½ çš„å·¥ä½œå‰¯æœ¬/","content":"\n***\n***\n\n**SVN é€äº¤æ™‚å¤±æ•—è·³ error : `\"ä½ å¿…é ˆå…ˆæ›´æ–°ä½ çš„å·¥ä½œå‰¯æœ¬\"`**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/GpLUwDe6rOcN34o.png) \n\n***\n***\n   \n**æŒ‰ç¢ºå®šä¹‹å¾Œï¼Œæœƒè‡ªå‹•è·³å‡º `ä½œæ¥­å¤±æ•—-è«‹å…ˆæ›´æ–°çš„è¦–çª—` , å†é»é¸`æ›´æ–°`å³å¯**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/LrHiDKe9vCGNASI.png)\n\n***\n***\n\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"GCP - ASG åŸ·è¡Œç¯„æœ¬å»ºç«‹èˆ‡æ›´æ–°","url":"/blog.github.io/2022/10/03/GCP-asgåŸ·è¡Œç¯„æœ¬å»ºç«‹èˆ‡æ›´æ–°/","content":"\n\n\nASG åŸ·è¡Œç¯„æœ¬å»ºç«‹èˆ‡æ›´æ–°\n\n\n\n## æ¨¡æ¿æ©Ÿå…ˆå»ºç«‹å¿«ç…§ >> å†è½‰æ˜ åƒæª”  \n    \n## å€åŸŸé¸å°ç£ >> æŒ‰å»ºç«‹\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/25/9PBVwE2dpLySb6W.png)\n\n***\n***\n***\n    \n## å»ºç«‹åŸ·è¡Œå€‹é«”ç¯„æœ¬\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/25/OrZKikjMcWwxqu9.png)\n   \n***\n***\n***\n   \n## å»ºç«‹åŸ·è¡Œå€‹é«”ç¯„æœ¬ ç¶²è·¯åˆ†é å°‡å¤–éƒ¨IP æ›´æ”¹æˆç„¡ï¼›å‹¾é¸å…è¨±HTTPã€HTTPSæµé‡\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/25/QmisHxUIzq7gOkY.png)\n   \n***\n***\n***\n\n   \n## å»ºç«‹å®Œç•¢å¾Œ ç·¨è¼¯åŸ·è¡Œå€‹é«”ç¾¤çµ„ å¥—ç”¨æ–°çš„ åŸ·è¡Œå€‹é«”ç¯„æœ¬ ç¢ºèªæœ‰å‡ºç¾å¾Œ\n    \n## å†é–‹å§‹é€²è¡Œwebæ»¾å‹•æ›´æ–°\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/25/L2XYNuMQBmZbJpO.png)\n   \n***\n***\n***\n   \n## GCP ASG-webæ»¾å‹•æ›´æ–°\n    \n## é¸æ“‡åŸ·è¡Œå„é«”ç¾¤çµ„ > è¼ªå‹•å¼é‡æ–°å•Ÿå‹•/å–ä»£\n\n***\n***\n***\n\n   ![](https://s2.loli.net/2024/04/25/C4JwW1hlNDfcKjZ.png)\n   \n ***\n ***\n ***\n   \n## é»é¸å–ä»£ > ä¾›æ‡‰éåº¦æ•¸é‡ä¸Šé™å¡«1 > ç„¡æ³•ä½¿ç”¨çš„æ•¸é‡å¯«0  > å–ä»£\n\n***\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/25/m2xQYJgSPUWqGvp.png)\n   \n***\n***\n***\n\n\n    \n## PS:ä¾›æ‡‰éåº¦çš„æ•¸é‡ä¸Šé™: æ˜¯æŒ‡æ»¾å‹•æ™‚ï¼Œå¯è¶…éç•¶ä¸‹å­˜åœ¨çš„æ©Ÿå™¨æ•¸é‡çš„ä¸Šé™\n    \n## å¦‚æœåŸæœ¬ä¸Šé™æ˜¯8å°ï¼Œå¡«1æ™‚ï¼Œæ»¾å‹•æ™‚ä¸Šé™å¯ç‚º9å°\n    \n## å¦‚æœæ˜¯ä¸Šç­æ™‚æ®µï¼Œå»ºè­°å¡«å¯«ç›®å‰æ©Ÿå™¨æ•¸é‡ï¼Œæ»¾å‹•é€Ÿåº¦æœƒæ¯”è¼ƒå¿«ä¸€é»\n    \n## å¦‚æœæ˜¯ç¶­è­·å…¶é–“ï¼Œå¯å¡«å¯«1 è®“å®ƒæ…¢æ…¢æ›¿æ›\n    \n\n    \n***\n***\n***\n    \n\n    \n## ç„¡æ³•ä½¿ç”¨çš„åŸ·è¡Œå€‹é«”æ•¸é‡ä¸Šé™: æ˜¯æŒ‡æ»¾å‹•æ™‚ï¼Œç¾¤çµ„è£¡é¢èƒ½æœ‰å¹¾å°ç„¡æ³•ä½¿ç”¨\n    \n## é€™é‚Šä¸ç®¡æ˜¯ä¸Šç­æˆ–æ˜¯ç¶­è­·æœŸé–“ éƒ½æ‡‰å¡«å¯«0\n\n\n    \n   \n    \n   \n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"Sectigo - æ”¹ç°½ SSL æ•™å­¸","url":"/blog.github.io/2022/10/03/Sectigo-æ”¹ç°½SSLæ•™å­¸/","content":"\n<!--more-->\nSectigo å¦‚ä½•å°‡ SSL æ”¹ç°½çµ¦å…¶ä»–åŸŸå\n\n***\n***\n  \n**é€²å…¥Sectigo å¾Œå°ï¼Œä¸¦é»é¸è¨‚å–®ç®¡ç† `Gaia Information Technology Corp. Reseller`**\n-----\n\n***\n***\n\n\n!(https://s2.loli.net/2024/04/29/bhoHuQdFzG4TDfP.png)\n\n***\n***\n   \n**é»é¸è¨‚å–®å ±å‘Š `Report on Your Orders`**\n-----\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/6rNwQoMin1dyLED.png)\n\n***\n***\n   \n**ä»¥ç°½ç™¼æ—¥æœŸæŸ¥è©¢è¨‚å–®ç·¨è™Ÿ**\n-----\n\n***\n***\n    \n!(https://s2.loli.net/2024/04/29/ERKXPFI3vsM2eDW.png)\n\n***\n***\n   \n**ç”¨è¨‚å–®ç·¨è™Ÿæœç´¢æ†‘è­‰æ›´æ›CSR**\n-----\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/12JoIFVXvMi4PmO.png)\n\n***\n***\n   \n**é€²å…¥ç®¡ç†å±¤ä¸¦é»é¸è¨‚å–®ç®¡ç†æ“ä½œ `Validation Manager Order Search`**\n-----\n\n***\n***\n    \n!(https://s2.loli.net/2024/04/29/BQKirleHn9YmTdR.png)\n\n***\n***\n   \n**è¼¸å…¥å‰›æŸ¥è©¢çš„è¨‚å–®ç·¨è™Ÿé€²å…¥ä¿®æ”¹**\n-----\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/K15kRMlmo3qtnQx.png)\n\n***\n***\n   \n**é»é¸ä¿®æ”¹ `Submit your CSR`  ä¸¦å°‡ `CSR` é»è²¼é€²å…¥ï¼Œå¾Œé¢ä¸€ç›´æŒ‰`CONTINUE`å³å¯**\n-----\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/XjNKG7U3cBnyv8t.png)\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/hxJCejL7grUGp3q.png)\n\n***\n***\n   \n**æ†‘è­‰ç°½ç™¼å®Œå¾Œï¼ŒMail æœƒæ”¶åˆ° Sectigo å¯„ä¾†çš„ zipåŒ…**\n-----\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/TqeDLzyxnY3EZ25.png)\n\n***\n***\n   \n**ä¸‹è¼‰å¾Œæœƒæœ‰ 4éš»æª”æ¡ˆ**\n-----\n\n***\n    \n**å°‡ `AAA CertificateServices.crt` è£¡é¢çš„å…§å®¹å…¨éƒ¨è²¼é€² `STAR_XXX_net.crt` çš„ä¸‹é¢ï¼Œä¸¦æ›´åç‚º`åŸŸå.crt`**\n-----\n\n***\n    \n**å†å°‡ `åŸŸå.crt` è¤‡è£½åˆ°ç¶²é ä¸»æ©Ÿè£¡**\n-----\n\nps. æ³¨æ„ï¼šSTAR_XXX_net.crtå…§å®¹ä¸€å®šè¦å†ä¸Šæ–¹ï¼Œå¦å‰‡é©—è­‰ä¸æœƒé)\n\n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/2dvAT8cykwMlfhP.png)\n\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/29/IoGQr1PmL5W4vcb.png)\n\n***\n***\n\n\n***\n\n","tags":["SECTIGO"],"categories":["SECTIGO"]},{"title":"Shell-Script - å»ºç«‹ SVN-CO æ’ç¨‹ä¸¦ sync è‡³é›²ç«¯","url":"/blog.github.io/2022/10/03/shell-script-å»ºç«‹SVN-COæ’ç¨‹/","content":"\n***\n***\n\n```sql\n\n#!/bin/bash\n\nSendLine(){\n        LineToken=\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"\n        logdate=`date +%Y-%m-%d`\n        datee=`date +%Y/%m/%d-%H:%M:%S`\n\tsourced=\"source >> Laurance-222\"\n\tpurposed=\"purpose >> hateformis\"\n\tmessage=\"SVN-DUMPä¸Šå‚³æˆåŠŸ\"\n\n\tcurl https://notify-api.line.me/api/notify -H \"Authorization: Bearer ${LineToken}\" -d \"message=%0D%0A${sourced}%0D%0Ai${purposed}%0D%0A${datee}%0D%0A${message}\" -d \"stickerPackageId=8525\" -d \"stickerId=16581290\"\n}\n\nSDIR=/home/svn/blogtocloud\nNOWDATEE=`date +%Y-%m-%d`\nNOWTIME=`date +%Y/%m/%d-%H:%M:%S`\nPROJECT=nowblog-$NOWDATEE\nSDIR2=$SDIR/nowblog-$NOWDATEE\nPROJECT2=public-$NOWDATEE\nLOGFILE=$SDIR/cloud-svn.log\nPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin\nexport PATH\n\ndo_rclone()\n{\n\trclone purge google-drive:$PROJECT\n\trclone mkdir google-drive:$PROJECT\n\trclone sync $SDIR/$PROJECT google-drive:$PROJECT\n\tsleep 80\n\n\tif [ $? -eq 0 ];then\n\t    \n\t    echo \" \" >> $LOGFILE\n\t    echo \" \" >> $LOGFILE\n\t    echo \"###########################\" >> $LOGFILE\n\t    echo \"$PROJECTåœ¨${NOWTIME}ä¸Šå‚³æˆåŠŸ\" >> $LOGFILE\n\telse\n\t    echo \" \" >> $LOGFILE\n            echo \" \" >> $LOGFILE\n            echo \"###########################\" >> $LOGFILE\n\t    echo \"$PROJECTåœ¨${NOWTIME}ä¸Šå‚³å¤±æ•—\" >> $LOGFILE\n\tfi\n\n\trclone purge google-drive:$PROJECT2\n\trclone mkdir google-drive:$PROJECT2\n\trclone sync $SDIR2/$PROJECT2 google-drive:$PROJECT2\n\tsleep 80\n\n\tif [ $? -eq 0 ];then\n            \n            echo \" \" >> $LOGFILE\n            echo \" \" >> $LOGFILE\n            echo \"###########################\" >> $LOGFILE\n            echo \"$PROJECT2åœ¨${NOWTIME}ä¸Šå‚³æˆåŠŸ\" >> $LOGFILE\n        else\n            echo \" \" >> $LOGFILE\n            echo \" \" >> $LOGFILE\n            echo \"###########################\" >> $LOGFILE\n            echo \"$PROJECT2åœ¨${NOWTIME}ä¸Šå‚³å¤±æ•—\" >> $LOGFILE\n        fi\n\n}\n\n\ndo_rclone\n\nsleep 10\n\nSendLine\n\n```\n   \n\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"AWS - Codecommit SSH é‡‘é‘°ä¸Šå‚³åŠè¨­ç½®","url":"/blog.github.io/2022/09/30/AWS-Codecommit-SSHé‡‘é‘°ä¸Šå‚³åŠè¨­ç½®/","content":"\n<!--more-->\n\"å»ºç«‹ AWS CodeCommit SSH KEY ä¾†ç®¡ç† Source Code\"\n\n## å…ˆåˆ°å€‹äººå¸³è™Ÿå®¶ç›®éŒ„ä¸‹çš„.ssh è£½ä½œé‡‘é‘°\n    \n   ![](https://s2.loli.net/2024/04/25/fe5Fpyx8KQkXGvu.png)\n   \n   ---\n   \n## è£½ä½œå®Œå¾Œæœƒæœ‰å…©æ”¯æª”æ¡ˆ\n    \n   ![](https://s2.loli.net/2024/04/25/L4GQRksHZrmpeac.png)\n   \n   ---\n   \n## è£½ä½œå®Œå¾Œå°‡id_rsa.pub ä¸Šå‚³è‡³AWS-IAMå€‹äººå¸³è™Ÿ\n    \n   ![](https://s2.loli.net/2024/04/25/YzRxfbLB7OEypNZ.png)\n   \n   ---\n  \n   \n# ä¸Šå‚³å¾Œæœƒå¾—åˆ°SSHå¯†é‘° ID\n    \n  \n    \n## å°‡IDè¤‡è£½ä¸‹ä¾†\n    \n   ![](https://s2.loli.net/2024/04/25/gfyOuPnYi7o8CFM.png)\n   \n   ---\n\n      \n# å†å›åˆ°æ©Ÿå™¨å¸³è™Ÿè·Ÿç›®éŒ„ä¸‹çš„.ssh\n \n\n## ç·¨è¼¯é‡‘é‘°è¨­å®šæª”\n      \n```sql\nvim config\n\n\n    Host git-codecommit.ap-northeast-2.amazonaws.com < --åªéœ€è¦åœ°å€ï¼Œç›®éŒ„ä¸ç”¨\n    User SSHå¯†é‘° ID\n    IdentityFile ~/.ssh/id_rsa <--ç§é‘°æª”æ¡ˆè·¯å¾‘\n```\n\n   ![](https://s2.loli.net/2024/04/25/9JmSpEz2q8A3FUu.png)\n\n## Codecommit çš„ä½ç½®å–å¾—\n\n   ![](https://s2.loli.net/2024/04/25/WrHSpLc419DuYGe.png)\n   \n## æ–°å¢å®Œæˆå¾Œå°‡æª”æ¡ˆæ¬Šé™æ”¹ç‚º 600\n\n```sql\nchmod 600 config\n```\n\n   ![](https://s2.loli.net/2024/04/25/31HYg9MNDkQd8Te.png)\n    \n# å®Œæˆè¨­å®š\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"PHP - å¦‚ä½•å®‰è£ memcached æ“´å±•","url":"/blog.github.io/2022/09/30/PHP-å®‰è£memcachedæ“´å±•/","content":"\n***\n***\n\n[memcached å®‰è£åŒ…](https://pecl.php.net/package/memcached)\n\n***\n***\n\n```sql\nwget https://pecl.php.net/get/memcached-3.0.3.tgz   \n\ntar zxvf memcached-3.0.3.tgz  \n    \ncd memcached-3.0.3\n    \n/usr/local/web/php/bin/phpize\n    \n./configure -with-php-config=/usr/local/web/php/bin/php-config\n    \nmake && make install    \n```\n\n***\n***\n\n```sql\nvim /usr/local/php/etc/php.ini    \n```\n\n```sql\nextension=memcached.so\n```    \n\n***\n***\n\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"Redis - å®‰è£åŠé…ç½®æ•™å­¸","url":"/blog.github.io/2022/09/30/Redis-Rediså®‰è£æ•™å­¸/","content":"\n***\n***\n\n[Index of redis è¼‰é»](http://download.redis.io/releases/)\n\n***\n***\n\n**ä¸‹è¼‰å®Œæˆå¾Œè§£å£“**\n\n```sql\ntar zxvf redis-4.0.6.tar.gz\n    \ncd /root/redis-4.0.6\n    \nmake MALLOC=libc\n    \nmake PREFIX=/usr/local/redis install\n```\n\n***\n***\n           \n**redis è¨­å®šæª”é…ç½®**\n   \n```sql\nmkdir /usr/local/redis/etc/\n    \ncp redis.conf /usr/local/redis/etc/\n    \ncd /usr/local/redis/bin/\n    \ncp redis-benchmark redis-cli redis-server /usr/bin/\n```\n\n***\n***\n\n**ä¿®æ”¹ redis è¨­å®š**\n   \n```sql\nvim /usr/local/redis/etc/redis.conf\n    \nbind 0.0.0.0\n    \ndaemonize yes\n    \nrequirepass (passwordè¨­ç½®)\n```\n\n***\n***\n    \n**redis ( è…³æœ¬ )** \n\n`ps. è‹¥æœ‰æ”¹ port æˆ–è¨­ç½®å¯†ç¢¼ è…³æœ¬ä¹Ÿéœ€è¦æ›´æ”¹`\n    \n```sql\nvim redis\n```\n   \n```sql\n#!/bin/bash\n#chkconfig: 2345 80 90\n# Simple Redis init.d script conceived to work on Linux systems\n# as it does use of the /proc filesystem.\n\nPATH=/usr/local/bin:/sbin:/usr/bin:/bin\nREDISPORT=6379\nEXEC=/usr/local/redis/bin/redis-server\nREDIS_CLI=/usr/local/redis/bin/redis-cli\n\nPIDFILE=/var/run/redis_6379.pid\nCONF=\"/usr/local/redis/etc/redis.conf\"\n#PW=(password)\n\ncase \"$1\" in\nstart)\nif [ -f $PIDFILE ]\nthen\necho \"$PIDFILE exists, process is already running or crashed\"\nelse\necho \"Starting Redis server...\"\n$EXEC $CONF\nfi\nif [ \"$?\"=\"0\" ]\nthen\necho \"Redis is running...\"\nfi\n;;\nstop)\nif [ ! -f $PIDFILE ]\nthen\necho \"$PIDFILE does not exist, process is not running\"\nelse\nPID=$(cat $PIDFILE)\necho \"Stopping ...\"\n#$REDIS_CLI -p -a (password) $REDISPORT --no-auth-warning SHUTDOWN\n$REDIS_CLI -p  $REDISPORT SHUTDOWN\nwhile [ -x ${PIDFILE} ]\ndo\necho \"Waiting for Redis to shutdown ...\"\nsleep 1\ndone\necho \"Redis stopped\"\nfi\n;;\nrestart|force-reload)\n${0} stop\n${0} start\n;;\n*)\necho \"Usage: /etc/init.d/redis {start|stop|restart|force-reload}\" >&2\nexit 1\nesac\n```\n\n***\n***\n    \n**è¤‡è£½è…³æœ¬è‡³å•Ÿå‹•æª”ä½ç½®,ä¸¦çµ¦äºˆæ¬Šé™**\n   \n```sql\ncp redis /etc/init.d/\n    \nchmod 755 /etc/init.d/redis\n```\n\n***\n***\n    \n**æ·»åŠ è‡³é–‹æ©Ÿå•Ÿå‹• (centos 6)**\n   \n```sql\nchkconfig --add redis\n    \nchkconfig --level 2345 redis on\n    \nchkconfig --list |grep redis\n```\n\n***\n***\n    \n**æ·»åŠ è‡³é–‹æ©Ÿå•Ÿå‹• (centos 7)**\n    \n```yaml\nsystemctl enable redis\n    \nsystemctl is-enabled redis   // æª¢æŸ¥ redis æ˜¯å¦è¨­ç½®ç‚ºé–‹æ©Ÿå•Ÿå‹•\n```    \n\n***\n***\n\n**é–‹å•Ÿæœå‹™**\n   \n```sql\nservice redis start\n```\n\n***\n***\n\n\n\n**è‹¥å‡ºç¾ ERROR :**  \n**â€œWarning: Using a password with '-a' or '-u' option on the command line interface may not be safeâ€**\n\n***\n \n**åŠ ä¸Šåƒæ•¸å³å¯: `--no-auth-warning`**\n\n\n\n***\n***\n\n\n***\n\n","tags":["Redis"],"categories":["Cache"]},{"title":"Grafana - æ§‹å»º Linux æ•ˆèƒ½ç›£æ§","url":"/blog.github.io/2022/09/27/Grafana+influxdb+telegrafæ§‹å»ºLinuxæ•ˆèƒ½ç›£æ§/","content":"\n***\n***\n\n<!--more-->\nä½¿ç”¨ grafana + influxdb + telegraf å»ºç«‹ç›£æ§\n\n***\n***\n\n**Grafana å®‰è£**\n=====\n\n   [Grafana å®˜æ–¹è¼‰é»](https://grafana.com/grafana/download)\n\n\n   \nä»¥ä¸‹ç”¨ `yum` æ–¹å¼å®‰è£ `Grafanae-8.2.3-1`\n\n\n    \n```sql\nwget https://dl.grafana.com/enterprise/release/grafana-enterprise-8.2.3-1.x86_64.rpm\n    \nyum localinstall grafana-enterprise-8.2.3-1.x86_64.rpm\n    \nsystemctl start grafana-server\n    \nsystemctl status grafana-server\n```\n\n***\n***\n\n**InfluxDB ã€ Telegraf å®‰è£**\n=====\n    \n[InfluxDB å®˜æ–¹è¼‰é»](https://portal.influxdata.com/downloads/)\n   \n\n   \nä»¥ä¸‹ç”¨ `yum` æ–¹å¼å®‰è£ `InfluxDB v1.8.0` `Telegraf v1.24.1`\n\n\n\n```sql\ncat <<EOF | tee /etc/yum.repos.d/influxdata.repo\n[influxdata]\nname: InfluxData Repository - Stable\nbaseurl: https://repos.influxdata.com/stable/\\$basearch/main\nenabled: 1\ngpgcheck: 1\ngpgkey: https://repos.influxdata.com/influxdata-archive_compat.key\nEOF\n\nyum install influxdb telegraf\n```\n\n***\n***\n    \n### Step.1 ä¿®æ”¹ `Telegraf çš„è¨­å®šæª”`ä¸¦å•Ÿå‹•:   \n   \n`å°‡ output-influxdb æ‰“é–‹ä¸¦æŒ‡å‘ database-telegraf , æ‰“é–‹ network è·Ÿå…¶ä»–åƒæ•¸ , æ–°å¢ä½¿ç”¨è€…`\n\n***\n***\n\n```yaml\n[[inputs.net]]\n\n[[inputs.netstat]]\n\n[[inputs.interrupts]]\n\n[[inputs.linux_sysctl_fs]]\n\n[[inputs.conntrack]]\n\n[[inputs.nstat]]\n\n[[inputs.ntpq]]\n\n[[inputs.logparser]]\n\n```\n\n***\n***\n\n```sql\n[[outputs.influxdb]]\n  urls: [\"http://127.0.0.1:8086\"]\n  database: \"telegraf\"\n  username: \"telegraf\"\n  password: \"telegraf\"\n```\n   \n![](https://s2.loli.net/2024/04/28/YMPkhAF8p6R7asJ.png)\n   \n![](https://s2.loli.net/2024/04/28/sc1aQ5K6TzXE4Lg.png)\n\n***\n***\n   \n#### å•Ÿå‹•æœå‹™ telegraf\n     \n```sql\nservice telegraf start\n```\n\n***\n***\n\n#### Step.2 å•Ÿå‹•æœå‹™ InfluxDB\n    \n```sql\nservice influxdb start\n```\n  \n![](https://s2.loli.net/2024/04/28/zTBNdHCDtUOSW47.png)\n\n***\n***\n  \n### Step.3 é€²å…¥ `InfluxDB` ä»‹é¢å»ºç«‹ `telegraf ä½¿ç”¨è€…` , ä¸¦`çµ¦äºˆæ¬Šé™`\n   \n```sql\ninflux\n\ncreate user laurance with password [REDACTED]   # å…ˆå»ºç«‹ä¸€å€‹ root èº«åˆ† , å¾ŒçºŒæ‰èƒ½ä½¿ç”¨å¯†ç¢¼é©—è­‰ç™»å…¥\ngrant all privileges to laurance\n\ncreate database telegraf\ncreate user telegraf with password 'telegraf'\ngrant all on telegraf to telegraf\nexit\n\n```\n\n***\n***\n\n### Step.4 å•Ÿå‹•æœå‹™ grafana\n   \n```sql\nsystemctl start grafana-server\n```\n\n***\n***\n    \n### Step.5 é–‹å•Ÿå¾Œå° http://localhost:3000 ä¸¦å»ºç«‹è³‡æ–™ä¾†æº datasource\n  \n  ![](https://s2.loli.net/2024/04/28/GklN6WHhvLwQiIE.png)\n\n  ![](https://s2.loli.net/2024/04/28/rJIeOXgCU4H1fbw.png)\n  \n  ![](https://s2.loli.net/2024/04/28/4HUFionvLZjabgz.png)\n  \n  ![](https://s2.loli.net/2024/04/28/n3Mos5JV6KLihYB.png)\n\n***\n***\n  \n### Step.6 åŒ¯å…¥ Grafana å®˜æ–¹æ¨¡æ¿\n  \n  ![](https://s2.loli.net/2024/04/28/oS1HZ8vU6lGuDBF.png)\n  \n  ![](https://s2.loli.net/2024/04/28/3hnzFJlP2WySKrf.png)\n  \n  ![](https://s2.loli.net/2024/04/28/LeTymOB41QcHu7G.png)\n\n***\n***\n  \n### Step.7 é©—è­‰: æ‰“é–‹æœ¬æ©Ÿ 3000port    ex: http://172.16.0.222:3000\n  \n  ![](https://s2.loli.net/2024/04/28/IrgT76hoFz8C3Qs.png)\n\n***\n***\n    \n***\n\n","tags":["Grafana","telegraf","influxdb"],"categories":["Grafana"]},{"title":"MySQL - å ±éŒ¯ Your password does not satisfy the current policy requirements ( error 1819 HY000) è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2022/09/27/Mysql-ä¿®æ”¹å¯†ç¢¼å¼·åº¦è¦å‰‡/","content":"\n<!--more-->\nç•¶å»ºç«‹ MySQL å¸³è™Ÿæˆ–è€…ä¿®æ”¹å¯†ç¢¼æ™‚, å¯†ç¢¼å¼·åº¦ä¸ç¬¦åˆè¦æ±‚, æœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤\n\n`ERROR 1819 (HY000): Your password does not satisfy the current policy requirements.`\n\n***\n***\n\n**æŸ¥çœ‹å¯†ç¢¼å¼·åº¦è¦å‰‡**\n-----\n\n```sql\nshow variables like 'validate_pass%';\n```\n    \n   ```sql\n    +--------------------------------------+--------+\n    | Variable_name                        | Value  |\n    +--------------------------------------+--------+\n    | validate_password_check_user_name    | OFF    |\n    | validate_password_dictionary_file    |        |\n    | validate_password_length             | 8      |\n    | validate_password_mixed_case_count   | 1      |\n    | validate_password_number_count       | 1      |\n    | validate_password_policy             | MEDIUM |\n    | validate_password_special_char_count | 1      |\n    +--------------------------------------+--------+\n  ```\n\n***\n***\n\n**ä¿®æ”¹å¯†ç¢¼å¼·åº¦ç‚ºæœ€ä½**\n-----\n \n```sql\nset global validate_password_policy=0;\n```\n \n***\n***\n\n**ä¿®æ”¹å¯†ç¢¼é•·åº¦ç‚º4 (æœ€çŸ­)**\n----\n \n```sql\nset global validate_password_length=4;\n```\n\n***\n***\n \n**ä¿®æ”¹å¯†ç¢¼ ç‰¹æ®Šç¬¦è™Ÿç‚ºæœ€ä½**\n-----\n \n```sql\nset global validate_password_special_char_count:0; \n```\n\n***\n***\n    \n**å†æ¬¡æŸ¥çœ‹è¦å‰‡**\n-----\n\n```sql\nshow variables like 'validate_pass%';\n```\n    \n   ```sql\n    +--------------------------------------+-------+\n    | Variable_name                        | Value |\n    +--------------------------------------+-------+\n    | validate_password_check_user_name    | OFF   |\n    | validate_password_dictionary_file    |       |\n    | validate_password_length             | 4     |\n    | validate_password_mixed_case_count   | 1     |\n    | validate_password_number_count       | 1     |\n    | validate_password_policy             | LOW   |\n    | validate_password_special_char_count | 0     |\n    +--------------------------------------+-------+\n   ```\n \n ***\n ***\n\n**ä¿®æ”¹ root å¯†ç¢¼**\n-----\n\n```sql\nSET PASSWORD FOR 'root'@'localhost': PASSWORD('123456');\n```\n\n***\n***\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MySQL - å‰›è¼‰å®Œçš„å¯†ç¢¼å­˜æ”¾ä½ç½®","url":"/blog.github.io/2022/09/27/Mysql-å‰›è¼‰å®Œçš„å¯†ç¢¼å­˜æ”¾ä½ç½®/","content":"\n<!--more-->\nå¯¦æ¸¬ MySQL-5.7 æœƒæœ‰éš¨æ©Ÿå¯†ç¢¼, MariaDB å‰‡é è¨­æ²’å¯†ç¢¼\n\n***\n***\n\n**å‰›ä¸‹è¼‰å®Œå•Ÿå‹• server æœƒæœ‰ä¸€çµ„éš¨æ©Ÿå¯†ç¢¼ å­˜æ”¾åœ¨ `/var/log/mysqld.log`**\n=====\n\n***\n***\n\n```sql\nvim /var/log/mysqld.log\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/uFOgLjxETf7cGpb.png)\n\n***\n***\n    \n**åˆæ¬¡ç™»å…¥éœ€è¦è¨­ç½® root@localhost å¯†ç¢¼ ( è¦å‰‡ç‚º: å¤§è‹± + å°è‹± + ç¬¦è™Ÿ )**\n-----\n\n```sql\nSET Password: password('Aaa123456@');\n```\n    \n\n***\n***\n    \n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MySQL - å°‡é è¨­è³‡æ–™åº«ç·¨ç¢¼ `latin1` æ”¹ç‚º `UTF 8`","url":"/blog.github.io/2022/09/27/Mysql-å°‡é è¨­è³‡æ–™åº«ç·¨ç¢¼latin1æ”¹ç‚ºUTF8/","content":"\n***\n***\n\n[***** æ–°ç‰ˆ MySQL è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶](https://dev.mysql.com/doc/refman/5.7/en/charset-applications.html)\n\n***\n***\n    \n**Step.1 å…ˆä¿®æ”¹ MySQL Config è®“ä¹‹å¾Œå»ºç«‹çš„è³‡æ–™åº«éƒ½ä½¿ç”¨ç·¨ç¢¼ `UTF8`**\n----- \n   \n```sql\nvim /etc/my.cnf\n```\n    \n```sql\n[mysqld]\ndefault-character-set=utf8\ndefault-collation=utf8_unicode_ci\ncharacter-set-server=utf8\ncollation-server=utf8_unicode_ci \n    \ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\nuser=mysql\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n    \n[client]\ndefault-character-set=utf8\n    \n[mysql]\ndefault-character-set=utf8\n    \n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n```\n\n***\n\n**é‡æ–°å•Ÿå‹• MySQL è®“è¨­å®šç”Ÿæ•ˆ**\n\n```sql\nservice mysqld restart\n```\n\n***\n***\n    \n**Step.2 è‹¥è¦ç›´æ¥ä¿®æ”¹ï¼Œä¸é€šéè¨­å®šæª”çš„æ–¹å¼**\n-----\n\n***\n   \n```sql\nALTER DATABASE dbdata CHARACTER SET utf8 COLLATE utf8_general_ci;\n```    \n\n***\n    \n**å†é€²å…¥ Mysql ä»‹é¢æŸ¥è©¢ç·¨ç¢¼**\n \n```sql\nmysql> status;\n```\n\n***\n***\n\n**Step.3 è‹¥è¦ä¿®æ”¹å·²å­˜åœ¨çš„ Tables**\n-----\n\n***\n   \n```sql\nmysqldump -uroot -prootpw --default-character-set=latin1 --skip-set-charset dbdata > dbdata.sql\n```\n\n***\n    \n**å°‡ `latin1` å–ä»£æˆ `utf8`**\n\n```sql\nsed -i 's/latin1/utf8/g' dbdata.sql > dbdata_utf8.sql\n```\n\n***\n    \n**åŒ¯å…¥ `MYSQL`**\n\n```sql\nmysql -uroot -prootpw --default-character-set=utf8 dbdata < dbdata_utf8.sql\n```\n\n***\n***\n\n    \n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"Windows - win10 ç„¡æ³•å»ºç«‹VPNé€£ç·š","url":"/blog.github.io/2022/09/27/Windows-Windows_10ç„¡æ³•å»ºç«‹VPNé€£ç·š/","content":"\n***\n***\n\n**é€£ `VPN` æ™‚å‡ºç¾ä»¥ä¸‹éŒ¯èª¤è¨Šæ¯**\n=====\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/4jyHndqlxZsoCFL.png)\n\n***\n***\n\n**è§£æ±ºæ–¹æ³•**\n=====\n\n***\n***\n\n**1. `Win + R` è¼¸å…¥ `regedit`**\n-----\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/4jyHndqlxZsoCFL.png)\n\n***\n***\n    \n**2.å°‹æ‰¾æ­¤è·¯å¾‘ `HKEYLOCALMACHINE\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent`**\n-----\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/y7hwz89B4bMeZIC.png)\n\n***\n***\n    \n**3.æ–°å¢ä¸€çµ„æ©Ÿç¢¼** \n-----\n    \n**é¡å‹:`DWORD (32-bit)`** \n    \n**åç¨±:AssumeUDPEncapsulationContextOnSendRule**\n\n***\n***\n    \n**4.ä¸¦ä¸”å°‡å€¼è¨­å®šç‚º`2`**\n-----\n\n***\n***\n    \n**5.é‡é–‹æ©Ÿ**\n-----\n\n***\n***\n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"GCP - å¦‚ä½•å°‡ MySQL-DB åŠ Binlog å‚™ä»½è‡³ Cloudstorage","url":"/blog.github.io/2022/09/21/GCP-å°‡MySQL-DBåŠBINLOGå‚™ä»½è‡³Cloudstorage/","content":"\n***\n***\n***\n\n## 1. ä½¿ç”¨ nohup+& èƒŒæ™¯åŸ·è¡Œè³‡æ–™åº«å£“ç¸® (é™¤æ‰binlog)\n   \n***\n***\n***\n\n   ![](https://s2.loli.net/2024/04/28/RVW3J6XxHfqnStQ.png)\n\n***\n***\n***\n   \n## 2. å–ç¬¬ä¸€æ”¯binlogè·Ÿæœ€å¾Œä¸€éš»binlogçš„æ—¥æœŸ (ç•¶ä½œåˆ°æ™‚å€™å£“ç¸®çš„æª”å)\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/H1WjNaybAq7SQsR.png)\n\n***\n***\n***\n   \n## 3. ä½¿ç”¨ nohup+& èƒŒæ™¯åŸ·è¡Œbinlogå£“ç¸®\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/gE5Lx4pvlPBUhOQ.png)\n\n***\n***\n***\n   \n## 4. åŸæœ¬çš„é©—è­‰æ©Ÿåˆ¶è¢«åˆªé™¤äº† (gcloud auth login)\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/rGWVnD3MClKPm7x.png)\n   \n   ![](https://s2.loli.net/2024/04/28/rW4HuVyq8ZG2lCo.png)\n\n***\n***\n***\n   \n## 5. å°‡å£“ç¸®å¥½çš„TARåŒ…å‚³åˆ°ä¸­ç¹¼æ©Ÿ (ä¹‹å‰è·ŸGCPé©—è­‰éçš„æ©Ÿå™¨)\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/5E9QYRuVcPTefwx.png)\n\n***\n***\n***\n   \n## 6. ä¸Šå‚³åˆ°GCPå°æ‡‰çš„ç›®éŒ„\n\n***\n***\n***\n   \n   ![](https://s2.loli.net/2024/04/28/BWpX4GRc8wle7qo.png)\n   \n   \n\n***\n\n","tags":["GCP"],"categories":["GCP"]},{"title":"Fortinet - FortiGate60E SSLåŒ¯å…¥è‡ªç°½3å€‹æœˆæ†‘è­‰","url":"/blog.github.io/2022/09/20/Fortinet-FortiGate60E-SSLåŒ¯å…¥3å€‹æœˆæ†‘è­‰/","content":"\n<!--more-->\n\"( SSL-VPN åŒ¯å…¥ PKCS12 æ†‘è­‰ )\"\n\n\n\n# ä½¿ç”¨certbot-autoç°½ç™¼ä¸‰å€‹æœˆæ†‘è­‰,ä¸¦é©—è­‰TXT\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/yPN5Sntm3wf9aFd.png)\n\n---\n\n\n\n# å°‡å…©éš»keyä¸Ÿåˆ°nginxç›®éŒ„æ¸¬è©¦(fullchain1.pem >> XXX.crt , privkey1.pem >> XXX.key)\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/Wocipu27Xe4zlkh.png)\n\n---\n\n\n   \n# Nginxé‡å•Ÿreload\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/R76FSsNhqU3bYfC.png)\n\n---\n\n\n   \n# å°‡è§£æç¶åˆ°æœ¬æ©Ÿhosts\n\n \n    \n   ![](https://s2.loli.net/2024/04/25/vf9LAutNSiVTsbO.png)\n  \n  ---\n  \n \n   \n# é–‹å•Ÿå‰›å‰›è¨­ç½®çš„åŸŸå,æŸ¥çœ‹æ†‘è­‰æ˜¯å¦è¨­å®šæ­£ç¢º\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/9Qri7qfwCesOIAh.png)\n\n---\n\n\n   \n# ä½¿ç”¨opensslå°‡å…©éš»keyåˆä½µç”ŸæˆXXX.pfx (fortigateæ”¯æ´çš„æ ¼å¼) ps.æœƒå¼·åˆ¶è¨­å®šå¯†ç¢¼\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/YToF3PDvwU7Jhg9.png)\n\n---\n\n\n   \n# å°‡å‰›å‰›è£½ä½œçš„æ†‘è­‰XXX.pfxä¸Šå‚³è‡³fortigateå¾Œå°,ä¸¦è¼¸å…¥å‰›å‰›è¨­ç½®çš„å¯†ç¢¼\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/rY9vg7sELxZ6Dqh.png)\n\n---\n\n\n   \n# Fotigateå¾Œå°,SSL-VPNè¨­å®šé€™é‚Šçš„ä¼ºæœå™¨æ†‘è­‰é¸å–®è£¡å°±æœƒå‡ºç¾å‰›å‰›è¨­ç½®çš„ä¸‰å€‹æœˆæ†‘è­‰\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/FEYKzLu1lr3U7Ma.png)\n\n---\n\n\n   \n# é©—è­‰æŸ¥çœ‹ >> å·²å‡ºç¾å‰›å‰›è£½ä½œçš„æ†‘è­‰\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/JHdIGCZ81gY7mXh.png)\n\n---\n\n\n***\n\n","tags":["FortiGate"],"categories":["FortiGate"]},{"title":"Fortinet - FortiGate 60E å»¶é²è‡ªå‹•ç™»å‡ºè¨­å®š","url":"/blog.github.io/2022/09/20/Fortinet-FortiGate60Eå»¶é²è‡ªå‹•ç™»å‡ºè¨­å®š/","content":"\n<!--more-->\n\"(è§£æ±ºå»¶é²ç™»å‡ºæ™‚é–“éçŸ­)\"\n\n\n\n  # 1. ä¿®æ”¹é–’ç½®æ™‚é–“\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/JMwUseTFAlgabiC.png)\n\n\n\n\n***\n\n","tags":["FortiGate"],"categories":["FortiGate"]},{"title":"Fortinet - FortiGate 60E SSL-VPN è¨­ç½®","url":"/blog.github.io/2022/09/18/Fortinet-FortiGate60E-VPNè¨­ç½®/","content":"\n<!--more-->\n\"( å¯¦ç¾åˆ†ç¾¤é€£æ¥ SSL-VPN )\"\n\n\n\n  # 1. ç¶²è·¯ >> ä»‹é¢åˆ‡ WAN1 å°æ‡‰å¤–ç¶² (è¨­å®šæˆVPNå…¥å£) \n    \n   ## (Group1: 172.16.198.50-172.16.198.100 >> ADDR1)\n       \n  ## (Group2: 172.16.198.101-172.16.198.150 >> ADDR2)\n       \n  ## å…¶é¤˜portè¨­å®šç‚ºLANå£ (internal:port1-7) IP/é®ç½© 172.16.0.55/16 é—œé–‰DHCP\n       \n `é»˜èªæœƒç„¡æ³•è§£æ”¾LAN-Port,å› ç‚ºè¢«å…¶ä»–ä½ç½®å ç”¨,è§£é™¤ä¹‹å¾Œå°±å¯ä»¥äº†`\n\n\n      \n   ![](https://s2.loli.net/2024/04/25/7qO4zXD3cuoN8FI.png)\n\n\n\n   \n  # 2. è¨­ç½®è¾¦å…¬å®¤å…§éƒ¨DNS\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/MzrQuHya4hJkZsX.png)\n\n\n\n   \n  # 3. é–‹å•Ÿé€²éšåŠŸèƒ½é–‹é—œ >> ç³»çµ±ç®¡ç† Feature Visibility (å…¶é¤˜ä¾ç…§ç’°å¢ƒè¨­ç½®)\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/sIjo4E9ykVHBbG7.png)\n\n \n  \n  # 4. æ–°å¢ä½å€ >> å…§éƒ¨ Internal-IP\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/iFcLANZtvKTkdMD.png)\n   \n\n   \n # 5. æ–°å¢ä½å€ >> SSLVPN_TUNNEL_ADDR1 , SSLVPN_TUNNEL_ADDR2 (åš2å€‹VPNé€šé“)\n   \n   \n\n   ![](https://s2.loli.net/2024/04/25/48aAxEWSRItYqLe.png)\n   \n   ![](https://s2.loli.net/2024/04/25/wj2TCxOlK1sSAWf.png)\n   \n\n   \n # 6. SSL-VPNå…¥å£é é¢ >> æ–°å»º VPN-GROUP1 , VPN-GROUP2 å°æ‡‰ ADDR1 , ADDR2\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/dxrWQGpkLKS1n4V.png)\n   \n   ![](https://s2.loli.net/2024/04/25/eiOXHkdwxbSnrqK.png)    \n\n\n   \n # 7. è¨­ç½®éœæ…‹è·¯ç”± WAN1 (VPNå…¥å£)\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/q3gblPBKYpW2hAC.png)\n   \n\n\n # 8. è¨­ç½®æ”¿ç­–è·¯ç”± (è¨­ç½®WAN1å‡ºå£,ä¾†æºåˆ†å…©å€‹ Group)\n   \n\n\n   ![](https://s2.loli.net/2024/04/25/JrnuFMV82q1a6yT.png)\n   \n   ![](https://s2.loli.net/2024/04/25/G9mgWs2hbS6k1eF.png)\n   \n   ![](https://s2.loli.net/2024/04/25/MAhlEDius7rFqU4.png)\n   \n\n\n # 9. IP Pool >> æ–°å»ºIPæ±  (å¤–éƒ¨IPè¨­ç½®è‡ªå·±åˆ°è‡ªå·±)\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/m1wLexRhfrMbGa9.png)\n\n   \n    \n # 10. æ–°å¢ç”¨æˆ¶ç¾¤çµ„\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/LqQxkeJbCK12MiO.png)\n\n\n   \n  # 11. SSL-VPNè¨­å®š >> ç›£è½èµ°WAN1 , 4826Port , IPç¯„åœ:ADDR1,ADDR2 , èªè­‰å…¥å£å°æ‡‰ç¾¤çµ„\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/S7lvMZDcOyTgFem.png)\n   \n\n\n  # 12. æ–°å¢IPV4æ”¿ç­– \n    \n ## (internal-wan1) (SSLVPN-LAN) (SSLVPN-WAN1)\n\n\n   \n   ![](https://s2.loli.net/2024/04/25/4wauxeyQc5fhEJL.png)\n   \n   ![](https://s2.loli.net/2024/04/25/v2ieqk7cKZ9hFGj.png)\n   \n   ![](https://s2.loli.net/2024/04/25/JlzZkNYpF4s5n2x.png)\n   \n   ![](https://s2.loli.net/2024/04/25/6irtQ7Ab4sNWKEV.png)\n\n\n\n***\n\n","tags":["FortiGate"],"categories":["FortiGate"]},{"title":"Cacti - æ–°å¢æ©Ÿå™¨ç›£æ§åŠåœ–è¡¨","url":"/blog.github.io/2022/09/14/Cacti-æ–°å¢æ©Ÿå™¨åŠåœ–è¡¨/","content":"\n<!--more-->\n\"å¦‚ä½•å°‡æ–°å»ºçš„ EC2 åŠ å…¥ Cacti ç›£æ§\"\n\n\n # 1. æ–°å»ºæ©Ÿå™¨ä¸Šé¢å…ˆå®‰è£SNMPï¼Œä¸¦ç¢ºä¿ç«ç‰†æœ‰é€š UDP 161 port\n\n\n```sql\nyum install -y net-snmp  net-snmp-utils\n```    \n    \n    \n # 2. Cacti é é¢æ–°å¢ Device >> Add\n   \n   \n   ![](https://s2.loli.net/2024/04/25/7ySVw1pc8qA24PT.png)\n   \n   ---\n\n   \n  # 3. Device å¡«å…¥æ©Ÿå™¨çš„ hostname åŠç›£æ§å”è­°\n\n\n   ![](https://s2.loli.net/2024/04/25/pl61V3ncfszu7GD.png)\n   \n   ---\n   \n   \n  # 4. Datasource æ–°å¢è¦æ’ˆå–çš„è³‡æ–™\n   \n   \n   ![](https://s2.loli.net/2024/04/25/McTxG3DgK9ei5Wp.png)\n   \n   ---\n   \n   \n  # 5. Graph Management æ–°å¢ç›£æ§åœ–è¡¨\n   \n   \n   ![](https://s2.loli.net/2024/04/25/esWEygqt1x3r86V.png)\n   \n   ---\n\n   \n  # 6. Graph Trees åˆ†é¡åœ–è¡¨ç¾¤\n   \n   \n   ![](https://s2.loli.net/2024/04/25/DmkbHJTNWPpQyte.png)\n   \n   ---\n   \n  \n***\n\n","tags":["Cacti"],"categories":["Cacti"]},{"title":"Windows - Chrome é•·æˆªåœ–æ•™å­¸","url":"/blog.github.io/2022/09/14/Windows-Chromeé•·æˆªåœ–æ•™å­¸/","content":"\n***\n***\n\n**æ–¹æ³•1. é€éå…§å»ºChromeæˆªåœ–å¯¦é©—åŠŸèƒ½**\n-----\n\n***\n***\n    \n**æ­¥é©Ÿ 1. é–‹å•Ÿ Google Chrome ç¶²é å¾Œï¼Œç›´æ¥åœ¨ç¶²å€åˆ—è¼¸å…¥ `chrome://flags/` æœƒç«‹å³æ‰“é–‹ Chromeå¯¦é©—æ€§åŠŸèƒ½**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/aw3Y9zVWCT6AIH8.png)\n\n***\n***\n    \n**æ­¥é©Ÿ 2. ç›´æ¥æœå°‹`Desktop Screenshots` `Desktop Sharing Hub in Omnibox` `Desktop Sharing Hub in App Menu` ä¸‰é …åŠŸèƒ½ï¼Œå…¨æ”¹ç‚º`Enabled`å¾Œï¼ŒæŒ‰ä¸‹`Relaunch`é‡å•Ÿ Google Chrome ç€è¦½å™¨ï¼Œå°±æœƒå•Ÿç”¨å…§å»ºChromeæˆªåœ–å¿«æ·éµéš±è—åŠŸèƒ½**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/L3amQcvsZ7fq2P1.png)\n\n***\n***\n   \n**æ­¥é©Ÿ 3. å¦‚æœè¦æˆªåœ–æ™‚ï¼Œç›´æ¥é»æ“Š Chrome ç¶²å€åˆ—å³å´çš„`åˆ†äº«åœ–ç¤º`ï¼Œå†é»é¸`è¢å¹•æˆªåœ–`åŠŸèƒ½**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/Gf5iJ8gBHx6uUcY.png)  \n\n***\n***\n    \n**æ–¹æ³•2. ç”¨å…§å»ºChrome é•·æˆªåœ–åŠŸèƒ½**\n-----\n\n***\n***\n \n**æ­¥é©Ÿ1. é–‹å•Ÿ Google Chrome ç€è¦½å™¨å¾Œï¼Œå…ˆé€²å…¥æƒ³è¦é•·æˆªåœ–ç¶²é ï¼Œç›´æ¥åˆ©ç”¨éµç›¤æŒ‰ä¸‹`F12`å¿«æ·éµï¼Œé¡¯ç¤ºé–‹ç™¼äººå“¡è³‡è¨Šç•«é¢**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/3FRP4x1JAmXyfBD.png)\n\n***\n***\n   \n**æ­¥é©Ÿ2. æ¥ä¸‹ä¾†å†åˆ©ç”¨å¿«æ·éµå‘¼å« Chromeç€è¦½å™¨æŒ‡ä»¤é¸å–®,ä¸¦è¼¸å…¥é•·æˆªåœ–æŒ‡ä»¤**  \n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/3nhbHTNMiRVD5Sq.png)    \n\n***\n***\n\n\n\n***\n\n**é•·æˆªåœ–æŒ‡ä»¤è§£æ**\n\n***\n\n| é•·æˆªåœ–æŒ‡ä»¤ | æŒ‡ä»¤ä»£è¡¨æ„æ€ |\n| --- | --- |\n| Capture full size screenshot | é•·æˆªåœ– |\n| Capture screenshot | ä¸€èˆ¬æˆªåœ– |\n| Capture node screenshot | é è¦½æˆªåœ– |\n| Capture area screenshot | è‡ªé¸å€åŸŸæˆªåœ– |\n\n***\n\n\n***\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Docker - overlay2ä½”ç”¨å¤§é‡ç£ç¢Ÿç©ºé–“è™•ç†æ–¹æ³•","url":"/blog.github.io/2022/09/13/Docker-overlay2ä½”ç”¨å¤§é‡ç£ç¢Ÿç©ºé–“è™•ç†æ–¹æ³•/","content":"\n\n\n    \n# docker systemå‘½ä»¤  \n\n\n\n\n    \n    docker system df        æ•´é«”ç£å€ä½¿ç”¨ç‹€æ³\n    \n    docker system events    ç²å–ç³»çµ±å³æ™‚LOG\n    \n    docker system info      æŸ¥çœ‹æ•´é«”ç³»çµ±åŸºæœ¬ä¿¡æ¯\n    \n    docker system prune     æ¸…ç†ä¸å¸¸ç”¨çš„dockerè³‡æº (åŒ…æ‹¬: å®¹å™¨ é¡åƒ ç£å€ ç¶²è·¯)\n\n\n\n***\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"Docker - Error-requested access to the resource is denied","url":"/blog.github.io/2022/09/13/Docker-Error-requested-access-to-the-resource-is-denied/","content":"\n<!--more-->\n\"ä¸Šå‚³é¡åƒè¢«æ‹’çµ• Denied ERROR: requested access to the resource is denied\"\n\n\n\n# ä¸Šå‚³ image å ±éŒ¯\n    \n```sql\n\ndocker push laurance/green\n    \ndenied: requested access to the resource is denied\n\n```\n    \n   ![](https://s2.loli.net/2024/04/25/uAOMDHfCtZ1246I.png)\n\n\n\n   \n\n# **è§£å†³æ–¹æ¡ˆ**\n   \n```sql\n\ndocker tag laurance/green ihatemis/green\n    \nihatemis ç‚º Docker hub ç”¨æˆ¶å\n\n```\n    \n   ![](https://s2.loli.net/2024/04/25/agWK5nM8TyjSviU.png)\n\n\n\n   \n# å¾Œå°æŸ¥çœ‹å·²ä¸Šå‚³\n    \n   ![](https://s2.loli.net/2024/04/25/sBIK9dqmui8j5Cb.png)\n   \n   \n   \n    \n\n***\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"Fortinet - FortiGate å¸¸ç”¨é˜²ç«ç‰† CLI æŒ‡ä»¤","url":"/blog.github.io/2022/09/13/Fortinet-FortiGateå¸¸ç”¨é˜²ç«ç‰†CLIæŒ‡ä»¤/","content":"\n\n# å¸¸ç”¨é˜²ç«ç‰† CLI æŒ‡ä»¤\n\n\n## æŸ¥çœ‹è¨­å®šæª”\n    \n    show full-configuration\n\n## å‚™ä»½è¨­å®šæª” \n    \n    exe backup config/allconfig/ipsuserdefsigfilename xx.x.x(tftp server)\n    \n## é‚„åŸè¨­å®šæª”\n    \n    exe restore config/allconfig/ipsuserdefsig/imagefilename x.x.x.x(tftp server)\n    \n## é¡¯ç¤ºç³»çµ±ç‹€æ…‹\n    \n    get sys status\n    \n## é¡¯ç¤ºç³»çµ±æ•ˆèƒ½ä»‹é¢\n    \n    get system interface\n    \n    show system interface\n    \n## é¡¯ç¤ºç³»çµ±æ•ˆèƒ½\n    \n    get system performance\n    \n## é¡¯ç¤ºå„service utilization\n    \n    diag sys top (ctrl-c exit)\n    \n## æ ¼å¼åŒ–ç¡¬ç¢Ÿä»¥æ¶ˆé™¤æ‰€æœ‰è¨˜éŒ„\n    \n    exe formatlogdisk\n    \n## æ‰‹å‹•åŒæ­¥HAè¨­å®š\n    \n    exe ha synchronize config\n    \n## æŸ¥çœ‹HA ç‹€æ…‹\n    \n    diagnose sys ha checksum cluster    \n    \n    show system ha\n    \n    get sys ha status\n    \n## é‡æ–°å•Ÿå‹•\n    \n    execute reboot\n    \n## é—œæ©Ÿ\n    \n    execute shutdown\n    \n## æŸ¥çœ‹ arp table\n    \n    get system arp\n    \n## æ¸…é™¤ arp table cache\n    \n    execute clear system arp table\n    \n## ping\n    \n    exe ping x.x.X.X\n\n\n***\n\n","tags":["FortiGate"],"categories":["FortiGate"]},{"title":"SVN - æ›´æ–°æ™‚ç™¼ç”Ÿè¡çªå¦‚ä½•è§£æ±º","url":"/blog.github.io/2022/09/13/SVN-æ›´æ–°æ™‚ç™¼ç”Ÿè¡çªå¦‚ä½•è§£æ±º/","content":"\n***\n***\n\n**åœ¨æ¨™ç¤ºäº†è¡çªçš„é‚£å€‹æª”æ¡ˆä¸Šé»æ»‘é¼ å·¦éµå…©ä¸‹**\n    \n**æœƒè‡ªå‹•é–‹å•Ÿå…§å»ºçš„åˆä½µå·¥å…·**\n\n***\n***\n\n   ![](https://s2.loli.net/2024/04/29/LkdHaO7spUj9TlD.png)\n\n***\n***\n   \n**å·¦é‚Šå€å¡Šæ˜¯ç‰ˆæœ¬åº«çš„æª”æ¡ˆ**  \n    \n**å³é‚Šå€å¡Šæ˜¯æœ¬æ©Ÿå‰¯æœ¬çš„æª”æ¡ˆ**  \n    \n**åº•ä¸‹å€å¡Šæ˜¯åˆä½µå¾Œçš„çµæœï¼Œçœ‹å¾—å‡ºä¾†æœ‰ä¸€å †å•è™Ÿçš„éƒ¨ä»½å°±æ˜¯ç„¡æ³•è‡ªå‹•åˆä½µçš„å€å¡Š (ä¹Ÿå°±æ˜¯è¡çª)**  \n    \n***\n***\n    \n   ![](https://s2.loli.net/2024/04/29/tDhNivxWLdUOF6P.png)\n\n***\n***\n\n**åœ¨å·¦é‚Šå€å¡Šè¡çªçš„éƒ¨åˆ†æŒ‰ `æ»‘é¼ å³éµ` å°±å¯ä»¥è·³å‡ºç›¸é—œçš„å¿«é¡¯åŠŸèƒ½è¡¨**\n\n   ![](https://s2.loli.net/2024/04/29/hC6yGoXdWOeRzbJ.png)  \n\n***\n***\n    \n**æ‰‹å‹•é¸æ“‡å¾Œåœ¨ä¸‹æ–¹çš„çª—æ ¼æœƒé¡¯ç¤ºåˆä½µå¾Œçš„çµæœ**\n\n   ![](https://s2.loli.net/2024/04/29/QpYEFPs8qd13I2O.png)\n\n***\n***\n    \n**å°‡æ‰€æœ‰çš„è¡çªéƒ½è™•ç†å®Œç•¢å¾ŒæŒ‰å·¥å…·åˆ—ä¸Šçš„åœ–ç¤º**\n\n   ![](https://s2.loli.net/2024/04/29/s5QtUL2k7iYN8HO.png)  \n\n***\n***\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"AWS - å¦‚ä½•å°‡ AMI è½‰å‡ºåœ°å€ & å¸³è™Ÿ","url":"/blog.github.io/2022/09/08/AWS-EC2-amiè½‰åœ°å€åŠå¸³è™Ÿ/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹å¦‚ä½•å°‡ AMI è½‰å‡ºåˆ°å…¶ä»–å¸³è™Ÿ\"\n\n\n# åœ¨ ec2 é é¢ â†’ åº•ä¸‹ AMI æ‰¾åˆ° Actions é»é¸ copy AMI\n\n    \n   ![](https://s2.loli.net/2024/04/25/oXPwWYImNcvJ7Qg.png)\n\n---\n\n   \n# åœ¨Destination region é¸æ“‡è¦ç§»è½‰çš„åœ°å€\n\n\n   ![](https://s2.loli.net/2024/04/25/T7VlB9mELMRFPCQ.png)\n\n---\n\n   \n# åœ¨ Pemissions åº•ä¸‹æŒ‰ edit\n\n    \n   ![](https://s2.loli.net/2024/04/25/j298TdOmexHzcqp.png)\n\n   ![](https://s2.loli.net/2024/04/25/MTtm4uLlydRGAs5.png)\n\n---\n\n\n# åœ¨AWS Account Number è¼¸å…¥è¦ç§»è½‰çš„å¸³è™Ÿ\n\n\n   ![](https://s2.loli.net/2024/04/25/9wYGK1JihERm7A4.png)\n\n---\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - Cloudfront CDN å¿«å–æ¸…é™¤","url":"/blog.github.io/2022/09/08/AWS-Cloudfront-CDNå¿«å–æ¸…é™¤/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹å¦‚ä½•æ¸…é™¤ Cloudfront CDN Cache\"\n\n\n## åˆ° AWS-Cloudfront å¾Œå° é¸å–è¦æ¸…é™¤æš«å­˜çš„ SITE\n    \n   ![](https://s2.loli.net/2024/04/25/jFiGyBmZo7lvp4V.png)\n   \n## é¸å– Invalidations \n    \n   ![](https://s2.loli.net/2024/04/25/oQyzkWHbS7Kvsn4.png)\n   \n## \" /* \" è¡¨ç¤ºæ¸…é™¤æ‰€æœ‰ å†é»é¸Create invalidationå³å¯\n    \n   ![](https://s2.loli.net/2024/04/25/SeG9u3fTK6r5tDi.png)\n    \n\n\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - EC2 mysql-slave è·Ÿéš¨ RDS","url":"/blog.github.io/2022/09/08/AWS-EC2-mysql-slaveè·Ÿéš¨RDSæ•™å­¸/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹ EC2 ä½¿ç”¨ Mysql è·Ÿéš¨ RDS çš„èªæ³•\"\n\n\n```sql\nCALL mysql.rds_set_configuration('binlog retention hours', 12);\n    \nshow master status\\G;\n    \nCALL mysql.rds_stop_replication;\nshow slave status\\G;\n    \nmysql -e \"show databases;\" -uroot -p -hRDS-masteré€£çµä½ç½® | grep -Ev \"Database|XXX_mariadb|information_schema|innodb|mysql|performance_schema\" | xargs mysqldump -uroot -p -hRDS-masteré€£çµä½ç½® --databases > db.sql \n    \nmysqldump -uroot -p mysql rds_configuration rds_global_status_history rds_global_status_history_old rds_heartbeat2 rds_history rds_replication_status rds_sysinfo slow_log_template > RDS_mysql.sql\n    \nrm -f /var/lib/mysql/mysql/rds*\nrm -f [å¤§å¯«è‹±æ–‡å­—æ¯é–‹é ­çš„ç›®éŒ„] [ç™½å­—æª”]\nmysqld_save&\n    \nmysql -uking -p < db.sql\n    \nmysql -uking -p mysql < RDS_mysql.sql\n    \nCHANGE MASTER TO MASTER_HOST='RDS-masteré€£çµä½ç½®', MASTER_USER='ä¸»å¾å¸³è™Ÿ', MASTER_PASSWORD='ä¸»å¾å¯†ç¢¼';  ----è·Ÿéš¨RDS-master\nCHANGE MASTER TO MASTER_LOG_FILE: 'bin-logæª”å',MASTER_LOG_POS:é€²åº¦;\nstart slave;\nshow slave status\\G;\n```\n    \n\n\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - LC æ›¿æ›åŠè¨­ç½® Auto-Scaling","url":"/blog.github.io/2022/09/08/AWS-LCå»ºç½®åŠè¨­ç½®Auto-Scaling/","content":"\n***\n***\n\n**å°‡è¦è‡ªå‹•æ“´å±•çš„ EC2 åš SnapShot**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/25/69adVHcKUeE3Dwu.png)\n![](https://s2.loli.net/2024/04/25/2GvbIKOuldX9oPe.png)\n\n***\n***\n\n**ç”¨å¿«ç…§å»ºç«‹ `AMI`**\n----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/25/1mjd6Ws7ayfLKGp.png)\n\n***\n***\n\n**å»ºå®Œ `AMI` å¾Œ , åˆ° `LC` ä»‹é¢å» COPY ä¸€ä»½é…ç½®æª”**\n-----\n\n`æ³¨æ„ security Group é…ç½®`\n\n***\n***\n\n![](https://s2.loli.net/2024/04/25/YejnIiJE4fs1bQS.png)\n\n![](https://s2.loli.net/2024/04/25/8hTLay3XcUtQ9oD.png)\n![](https://s2.loli.net/2024/04/25/lMRh8JUTExo2fen.png)\n\n***\n***\n\n**æœ€å¾Œåˆ° `Auto Scaling Group` æ›¿æ›å‰›å»ºç½®å¥½çš„ `LC`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/25/hYojIz4BcUtaVmQ.png)\n\n![](https://s2.loli.net/2024/04/25/urZjBdIfpe62WOQ.png)\n\n***\n***\n\n\n\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - Use update-ip-set to block based IP address for WAF","url":"/blog.github.io/2022/09/08/AWS-update-ip-set-to-block-based-IP-address-for-WAF/","content":"\n<!--more-->\n\"å»ºç«‹ ip-set å°é– IP ï¼Œä¸¦ä¸Šå‚³è‡³ WAF\"\n\n# ç²å–  æ“ä½œWAF  è¦å‰‡çš„  `Token` \n\n\nå° WAF é€²è¡Œæ“ä½œæ™‚ , éœ€è¦æœ‰ä¸€å€‹ Token ä»¥é˜²æ­¢è¡çªçš„è«‹æ±‚ \n\n\n```sql\n/usr/bin/aws waf get-change-token|jq -r '.ChangeToken'\n```\n\n\né€™æ™‚æœƒè¿”å›å¯æ“ä½œ WAFè¦å‰‡çš„ TOKEN (å¯å°‡é€™ä¸²äº‚ç¢¼å­˜æˆè®Šæ•¸ $Token)\n\n\n```sql\n$Token: c93e119c-607e-43b5-98e3-66d3XXXXXXX\n```\n\n# AWS å¾Œå° WAF è¦å‰‡ä¸­æ‰¾åˆ°  `IP address ID` ä¸¦å–å¾—è©² ID\n\n ![](https://s2.loli.net/2024/04/25/nWOxV1QocjXktpN.png)\n \n\nå¯å°‡é€™ä¸²äº‚ç¢¼å­˜æˆè®Šæ•¸ $addressID\n\n \n```sql\n$addressID: XXXXXXXXX791cd453-01ba-46ed-8863\n```\n\n# å°‡è¦å°é–çš„ IP ä¸Šå‚³è‡³è©² WAF è¦å‰‡ä¸­ ::\n\n```sql\n/usr/bin/aws waf update-ip-set --ip-set-id  $addressID  --change-token $Token --updates Action=\"INSERT\",IPSetDescriptor='{Type=\"IPV4\",Value=\" XX.XX.XX.XX/32\"}'\n```\n\n\nåƒè€ƒ: https://docs.aws.amazon.com/cli/latest/reference/waf/update-ip-set.html\n\n\n\n\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - WAF & Rules å»ºç½®","url":"/blog.github.io/2022/09/08/AWS-æ·»åŠ Rulesä¸¦æ›é€²WAFä¸­/","content":"\n<!--more-->\n\"å»ºç«‹ AWS-WAF å°é– IP çš„è¦å‰‡æ”¿ç­–\"\n\n\n# å°é–è¦å‰‡è¨­ç½®\n\n\n## å»ºç«‹ `IP match conditions`\n\n---\n\n ![](https://s2.loli.net/2024/04/25/3SvtDVwNkygb8Cc.png)\n \n## è¼¸å…¥åç¨± , å€åŸŸ , è¦å°é–çš„ IP\n\n---\n\n ![](https://s2.loli.net/2024/04/25/OkBx2lYdJXV8FAC.png)\n ![](https://s2.loli.net/2024/04/25/GLSFkaU8wHeM69m.png) \n \n## å»ºç«‹ `Rules` \n\n---\n\n ![](https://s2.loli.net/2024/04/25/98Xwg2hr6Au5SEP.png)\n \n## è¼¸å…¥åç¨± , è¦å‰‡ , æ›é€²å‰›å»ºç«‹çš„ `IP match conditions`\n\n---\n\n ![](https://s2.loli.net/2024/04/25/CjmRWGhwx8DbF5t.png)\n \n## ç·¨è¼¯ `Web ACL`  å°‡å‰›å»ºç«‹çš„ `Rules` æ›å…¥\n\n---\n\n ![](https://s2.loli.net/2024/04/25/KJMPBHVf9qEvXyA.png)\n ![](https://s2.loli.net/2024/04/25/DCpYQ23icKfVe1o.png)\n\n---\n\n\n# Web ACL å»ºç½®\n\n\n\n## é»é¸ `Create web ACL` å€åŸŸé¸ `Global CloudFront`\n\n ![](https://s2.loli.net/2024/04/25/QuXJyUYMV8Twah3.png)\n \n---\n\n## è¼¸å…¥åç¨± , Cloudwatch metric åç¨± (é€™å…©å€‹åç¨±ä¹‹å¾Œç„¡æ³•æ›´æ”¹)\n\n\n ![](https://s2.loli.net/2024/04/25/xKpbOMoEiRBvDFa.png)\n\n---\n\n## é¸æ“‡è©² WAF æ”¿ç­–\n\n\n ![](https://s2.loli.net/2024/04/25/Kr6BG3yzlSHImYN.png)\n\n---\n\n## é¸æ“‡è©² WAF è¦å‰‡\n\n ![](https://s2.loli.net/2024/04/25/gczHp8mXhlqxKUu.png)\n ![](https://s2.loli.net/2024/04/25/Jqm1eBbxOdfvrkt.png)\n\n---\n\n## é»é¸å»ºç«‹\n\n ![](https://s2.loli.net/2024/04/25/jvoBydOxJmb1ScU.png)\n\n---\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - è®Šæ›´ Management Console çš„èªè¨€","url":"/blog.github.io/2022/09/08/AWS-è®Šæ›´Management-Consoleçš„èªè¨€/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹å¦‚ä½•æ›´æ”¹ AWS é è¨­èªè¨€\"\n\n\n# ç™»å…¥ AWS Management Console\n    \n# åœ¨å°è¦½åˆ—ä¸Šé¸æ“‡æ‚¨çš„å¸³æˆ¶åç¨±\n    \n# é¸æ“‡ Settings (è¨­å®š)ï¼Œé–‹å•Ÿ Unified Settings (çµ±ä¸€è¨­å®š) é é¢\n\n\n    \n   ![](https://s2.loli.net/2024/04/25/XK47lmOikEDhSNY.png)\n\n---\n\n   \n# åœ¨ Unified Settings (çµ±ä¸€è¨­å®š) ä¸­ï¼Œé¸æ“‡ä½æ–¼ Localization and default Region (æœ¬åœ°åŒ–å’Œé è¨­å€åŸŸ) æ—çš„ Edit (ç·¨è¼¯)\n    \n# é¸å–æ‚¨æƒ³åœ¨ä¸»æ§å°ä½¿ç”¨çš„èªè¨€ï¼Œç„¶å¾Œé¸æ“‡ Save changes (å„²å­˜è®Šæ›´)\n\n\n    \n   ![](https://s2.loli.net/2024/04/25/PGdUlLATOix8KyF.png)\n\n---\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"Iptables - ä½¿ç”¨ geoip éæ¿¾åœ‹å®¶ (centos7)","url":"/blog.github.io/2022/09/08/Iptables-ä½¿ç”¨geoipéæ¿¾åœ‹å®¶/","content":"\n    \n### å®‰è£å¿…è¦å¥—ä»¶\n    \n```sql\nyum install xz gcc make wget unzip kernel-devel-$(uname -r) iptablesdevel.$(uname -p) perl-Text-CSV_XS\n```\n    \n### ç¢ºèªç›®å‰çš„kernelç‰ˆæœ¬\n    \n```sql\nuname -r\n```    \n    \n### ç¢ºèªåº•ä¸‹çš„ç›®éŒ„åç¨±å¿…é ˆè¦è·Ÿä¸Šå€‹æ­¥é©Ÿçš„ç‰ˆè™Ÿå®Œå…¨ç›¸åŒï¼Œè‹¥ä¸åŒæ™‚è«‹ç¢ºèªyumå®‰è£çš„kerneldevelå¥—ä»¶ç‰ˆæœ¬ï¼Œå°ä¸ä¸Šæ™‚æœ‰ä¸‹åˆ—å¹¾ç¨®åšæ³•\n    \n```sql\nls /usr/src/kernels/\n```\n    \n   ![](https://s2.loli.net/2024/04/28/OoZ2UtqPuTMGWsf.png)\n    \n#### 1) ä¸€èˆ¬ã€éå®¢åˆ¶åŒ–Linuxç‰ˆæœ¬ï¼Œè«‹åƒç…§ä¸‹è¿°\n    \n##### ç§»é™¤ç›®å‰è£çš„ç‰ˆæœ¬\n    \n```sql\nrpm -e kernel-devel\n```\n    \n##### è‡³ rpmåŒ…ç¶²ç«™ http://rpm.pbone.net ä¸‹è¼‰èˆ‡kernelç›¸åŒç‰ˆè™Ÿçš„ kernel-devel\n    \n```sql\nwget *.rpm\n```\n    \n   ![](https://s2.loli.net/2024/04/28/2PQBFNrDst7Z5Sw.png)\n   \n##### è§£å£“kernel-develå¥—ä»¶\n    \n```sql\nrpm -hiv *.rpm\n```\n    \n##### ç¢ºèªç›®å‰çš„kernelç‰ˆæœ¬\n    \n```sql\nls /usr/src/kernels/\n```\n    \n##### ç¢ºèªå¥—ä»¶ç‰ˆæœ¬\n    \n ```sql\n uname -r\n ```\n \n  ---\n  \n#### 2) Aamzon EC2è«‹åƒç…§ä¸‹è¿°\n    \n##### ç§»é™¤ç›®å‰è£çš„ç‰ˆæœ¬\n    \n```sql\nrpm -e kernel-devel\n```\n    \n##### kernelç‰ˆæœ¬å‡ç´š\n    \n```sql\nyum install kernel\n```\n    \n##### é‡é–‹æ©Ÿ\n    \n```sql\nreboot\n```\n  \n##### ç¢ºèªç›®å‰çš„kernelç‰ˆæœ¬\n    \n```sql\nuname -r\n```\n    \n##### å†æ¬¡yumå®‰è£kernel-develå¥—ä»¶\n    \n```sql\nyum install kernel-devel-$(uname -r)\n```\n    \n##### ç¢ºèªå¥—ä»¶ç‰ˆæœ¬\n    \n```sql\nls /usr/src/kernels/\n```\n    \n##### ç¢ºèªiptablesç‰ˆæœ¬\n    \n```sql\niptables -V\n```\n    \n##### ä¸‹è¼‰èˆ‡iptablesç›¸å°æ‡‰çš„å¥—ä»¶ç‰ˆæœ¬\n    \n```sql\nwget xtables-addons-*.tar.xz\n```\n   \n[Iptableså¥—ä»¶è¼‰é»](https://sourceforge.net/projects/xtables-addons/files/Xtablesaddons/)\n    \n`#iptables 1.47è«‹ç”¨ xtables-addons-1.47.tar.xz`\n    \n`#aws-ec2 è«‹ç”¨ xtables-addons-3.0.tar.xz`\n    \n```sql\ntar Jxf xtables-addons-1.47.tar.xz\ncd xtables-addons-1.47\n./configure\nmake\nmake install\n```\n\n   ---\n   \n#### ç·¨è­¯é‡åˆ°ä»¥ä¸‹éŒ¯èª¤\n\n   ![](https://s2.loli.net/2024/04/28/2kU1AyfG5t7uDlg.png)    \n    \n```sql\nyum -y install iptables-devel\n```\n    \n ##### å…¶ä¸­è‹¥æœ‰é‡åˆ°å•é¡Œï¼Œå¯èª¿æ•´mconfigä¸­çš„æ¨¡çµ„ç•™geoipå³å¯ã€‚\n   \n   --- \n   \n#### è‹¥é‡åˆ° xtnu_ipv6_find_hdr' éŒ¯èª¤è™•ç†ç¨‹åºå¦‚ä¸‹\n \n   ![](https://s2.loli.net/2024/04/28/2nGwh5cQIYJzLoq.png)\n   \n##### ä½¿ç”¨/* */æ³¨è§£æ­¤è¡Œ\n    \n```sql\nvim /lib/modules/`uname -r`/build/include/linux/autoconf.h\n#define CONFIG_IP6_NF_IPTABLES_MODULE 1 #\n```\n\n##### æˆ–æ˜¯é€²å…¥extensionsè³‡æ–™å¤¾åŸ·è¡Œ\n    \n```sql\nsed -i '/define WITH_IPV6/d' compat_xtables.c xt_psd.c xt_length2.c xt_TARPIT.c xt_SYSRQ.c xt_RAWNAT.c\n```\n    \n   ![](https://s2.loli.net/2024/04/28/IEJLAKBxiyuatqw.png)\n   \n#### è‹¥é½è­¯æ™‚é‡åˆ° /lib/modules/XXXX.x86_64/build/ è·¯å¾‘éŒ¯èª¤æ™‚\n    \n##### é‡æ–°é€£çµåˆ°æ­£ç¢ºçš„ç›®éŒ„\n    \n```sql\ncd /lib/modules/XXXX.x86_64/\nrm -rf build\nln -s ../../../usr/src/kernels/XXX.x86_64/ build\n```\n\n  ---\n      \n#### é–‹å§‹å»ºç«‹IPè³‡æ–™åº«\n\n```sql\ncd geoip\n```\n    \n##### è‹¥æ˜¯ä½¿ç”¨ä»˜è²»ç‰ˆçš„GeoIP2 Databasesæº\n    \n```sql\n./xt_geoip_dl\n./xt_geoip_build GeoIPCountryWhois.csv\n``` \n \n##### è‹¥æ˜¯ä½¿ç”¨å…è²»ç‰ˆçš„GeoLite2 Databasesæº\n    \n##### éœ€è¦å…ˆæ³¨å†Šä¸€å€‹ maxmind.com å¸³è™Ÿå¾Œå³å¯ç”Ÿæˆä¸€å€‹ License Key\n   \n   [è¨»å†Šmaxmind.comå¸³è™Ÿ](https://www.maxmind.com/en/geolite2/signup?lang=en) \n  \n##### ä¸‹è¼‰è½‰æ ¼å¼å·¥å…·ç¨‹å¼GeoLite2xtables\n    \n```sql\nwget https://github.com/mschmitt/GeoLite2xtables/archive/master.zip\n    \nunzip master.zip\n    \ncd GeoLite2xtables-master\n    \necho \"YOUR_LICENSE_KEY='ä½ çš„é‡‘é‘°'\" >> geolite2.license\n    \necho \"YOUR_LICENSE_KEY='tBobMt3HrPTWVJKP'\" >> geolite2.license\n    \n./00_download_geolite2\n    \n./10_download_countryinfo\n    \ncat /tmp/GeoLite2-Country-Blocks-IPv4.csv | ./20_convert_geolite2 /tmp/CountryInfo.txt > ../GeoIPCountryWhois.csv\n    \ncd ..\n    \n./xt_geoip_build GeoIPCountryWhois.csv\n``` \n  \n   --- \n     \n##### è‹¥æ˜¯é‡åˆ°ä¸‹åœ–éŒ¯èª¤è¡¨ç¤ºperlç¼ºå°‘æ¨¡çµ„\n    \n   ![](https://s2.loli.net/2024/04/28/verWsTtnSKuCQXM.png)\n   \n```sql\nyum install *YAML* perl-CPAN\n    \nperl -MCPAN -e shell\n``` \n\n`#é è¨­å›ç­”yeså³å¯`\n    \n```sql\ncpan[1]> install NetAddr::IP\n    \ncpan[1]> exit\n   \n   ---  \n    \nmkdir /usr/share/xt_geoip\n    \nmv BE LE /usr/share/xt_geoip/\n```   \n \n##### ç¢ºèªæ˜¯å¦æœ‰å®‰è£æˆåŠŸ\n    \n```sql\nlsmod|grep geoip\n```\n    \n   ![](https://s2.loli.net/2024/04/28/zePWutIasvOR1YJ.png)\n\n\n### ä¸€è¡Œå‘½ä»¤ä¸­æœ€å¤šå¯ä»¥ä½¿ç”¨10å€‹åœ‹å®¶\n    \n```sql\niptables -I INPUT -m geoip --src-cc PH,KR -j DROP\n```\n    \n### åªå…è¨±ä¸­åœ‹IPçš„TCP80é€£ç·š\n    \n```sql\niptables -A except -p TCP --dport 80 -m geoip --src-cc CN -j ACCEPT\n```\n    \n### åªå…è¨±ä¸­åœ‹IPçš„TCP80ã€443é€£ç·š\n    \n```sql\niptables -A except -p TCP -m multiport --dports 80,443 -m geoip --src-cc CN -j ACCEPT\n```\n    \n### è‹¥æ˜¯è¦åŠ é€²ç«ç‰†shellè«‹ç”¨é€™çµ„\n    \n```sql\niptables -A pig -m geoip --src-cc tw -j DROP\n```\n    \n### ç¢ºèªè¦å‰‡æ˜¯ä¸æ˜¯æœ‰åƒåˆ°\n    \n```sql\niptables -n --list INPUT\n```\n    \n   ![](https://s2.loli.net/2024/04/28/Bikqy48NMAaCSJK.png)\n\n   \n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"Iptables - æ°¸ä¹…é—œé–‰æŒ‡ä»¤","url":"/blog.github.io/2022/09/08/Iptables-æ°¸ä¹…é—œé–‰æŒ‡ä»¤/","content":"\n    \n### æŸ¥çœ‹é˜²ç«ç‰†ç‹€æ…‹\n\n```sql\nservice iptables status\n```\n    \n### æ°¸ä¹…æ€§ç”Ÿæ•ˆ (é‡å•Ÿä¸å¾©åŸ)\n    \n```sql\nchkconfig iptables on   (é–‹å•Ÿ)\nchkconfig iptables off  (é—œé–‰)\n``` \n    \n### å³æ™‚æ€§ç”Ÿæ•ˆ (é‡å•Ÿå¾Œå¾©åŸ)\n    \n```sql\nservice iptables start  (é–‹å•Ÿ)\nservice iptables stop   (é—œé–‰)\n```\n    \n### è¨­ç½®å¾Œé‡å•Ÿ\n  \n```sql\nreboot\n```\n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"CentOS 8 - æ‰¾ä¸åˆ°æºè§£æ±ºæ–¹å¼","url":"/blog.github.io/2022/08/19/CentOS8-æ‰¾ä¸åˆ°æº/","content":"\n```sql\n\n    dnf --disablerepo '*' --enablerepo=extras swap centos-linux-repos centos-stream-repos\n    dnf distro-sync\n\n```\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"Docker - å®˜æ–¹ yum æºå®‰è£æŒ‡å®šç‰ˆæœ¬æµç¨‹","url":"/blog.github.io/2022/08/19/Docker-å®˜æ–¹yumæºå®‰è£æŒ‡å®šç‰ˆæœ¬æµç¨‹/","content":"***\n***\n\n\n # å¸è¼‰èˆŠç‰ˆæœ¬\n    \n ```sql\n \nyum remove docker \\\ndocker-client \\\ndocker-client-latest \\\ndocker-common \\\ndocker-latest \\\ndocker-latest-logrotate \\\ndocker-logrotate \\\ndocker-selinux \\\ndocker-engine-selinux \\\ndocker-engine\n\n```\n```sql\n\nrpm -qa |grep docker && rpm -e --nodeps\n\n```\n\n***\n***\n\n# å®‰è£æœ€æ–°ç‰ˆ Docker\n\n```sql\nwget -qO- get.docker.com | bash \n```\n\n***\n***\n\n# é…ç½®å®˜æ–¹yumæº\n\n```sql\n\necho '[docker-ce-stable]\n    name=Docker CE Stable - $basearch\n    baseurl=https://download.docker.com/linux/centos/7/$basearch/stable\n    enabled=1\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-stable-debuginfo]\n    name=Docker CE Stable - Debuginfo $basearch\n    baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/stable\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-stable-source]\n    name=Docker CE Stable - Sources\n    baseurl=https://download.docker.com/linux/centos/7/source/stable\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-edge]\n    name=Docker CE Edge - $basearch\n    baseurl=https://download.docker.com/linux/centos/7/$basearch/edge\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-edge-debuginfo]\n    name=Docker CE Edge - Debuginfo $basearch\n    baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/edge\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-edge-source]\n    name=Docker CE Edge - Sources\n    baseurl=https://download.docker.com/linux/centos/7/source/edge\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-test]\n    name=Docker CE Test - $basearch\n    baseurl=https://download.docker.com/linux/centos/7/$basearch/test\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-test-debuginfo]\n    name=Docker CE Test - Debuginfo $basearch\n    baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/test\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-test-source]\n    name=Docker CE Test - Sources\n    baseurl=https://download.docker.com/linux/centos/7/source/test\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-nightly]\n    name=Docker CE Nightly - $basearch\n    baseurl=https://download.docker.com/linux/centos/7/$basearch/nightly\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-nightly-debuginfo]\n    name=Docker CE Nightly - Debuginfo $basearch\n    baseurl=https://download.docker.com/linux/centos/7/debug-$basearch/nightly\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg\n    \n    [docker-ce-nightly-source]\n    name=Docker CE Nightly - Sources\n    baseurl=https://download.docker.com/linux/centos/7/source/nightly\n    enabled=0\n    gpgcheck=1\n    gpgkey=https://download.docker.com/linux/centos/gpg'>/etc/yum.repos.d/docker-ce.repo\n\n```\n\n\n# è¦å•Ÿç”¨å“ªå€‹ç‰ˆæœ¬çš„æºå°±å°‡å…¶ä¸‹çš„ enable å€¼è¨­ç‚º 1ï¼Œå…¶é¤˜è¨­ç‚º 0\n    \n## æŸ¥çœ‹ç•¶å‰æºçš„å¯ç”¨ç‰ˆæœ¬\n    \n```sql\n\nyum list docker-ce --showduplicates|grep \"^doc\"|sort -r\n  \nyum list docker-ce-cli --showduplicates|grep \"^doc\"|sort -r\n\n```\n \n# æŒ‡å®šå®‰è£ client è·Ÿ server ä¸€æ¨£çš„ç‰ˆæœ¬ ( ä¸æŒ‡å®šç‰ˆæœ¬æœƒè‡ªå‹•å®‰è£æœ€æ–°ç‰ˆ )\n\n```sql\n\nyum install docker-ce-20.10.2-3.el7 docker-ce-cli-20.10.2-3.el7 containerd.io\n\n```\n    \n# æŸ¥çœ‹ç‰ˆæœ¬\n    \n```sql\n\ndocker version\n\n```\n    \n# è¨­ç½®é–‹æ©Ÿå•Ÿå‹•\n    \n```sql\n\nsystemctl enable docker\n\n```\n\n\n# **å®‰è£ docker-compose**\n\n```sql\n\nyum list docker-compose-plugin --showduplicates|grep \"^doc\"|sort -r\n    \nyum install docker-compose-plugin-2.6.0-3.el7\n    \nln -s /usr/libexec/docker/cli-plugins/docker-compose /usr/bin/docker-compose\n    \ndocker-compose version\n\n```\n\n    \n***\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"Linux - History å¢åŠ æ™‚é–“é¡¯ç¤º","url":"/blog.github.io/2022/08/16/Linux-Historyå¢åŠ æ™‚é–“é¡¯ç¤º/","content":"\n***\n***\n\n**è‡¨æ™‚æ·»åŠ **\n-----\n\n```sql\nexprt HISTTIMEFORMAT=â€™%F %T â€™\n```\n\n***\n***\n    \n**æ°¸ä¹…å¥—ç”¨**\n-----\n\n ```sql\n vim ~/.bashrc\n \n\nHISTTIMEFORMAT=\"%F %T \"\nsource .bashrc\n``` \n\n***\n***\n   \n**å¯«å…¥ /etc/profile é”åˆ°å…¨é«”å¥—ç”¨**\n-----\n\n```sql\nvim /etc/profile\n\n\nHISTTIMEFORMAT=\"%F %T \"\n    \nsource /etc/profile\n```    \n\n***\n***\n\n**Shell åŸ·è¡Œçš„æ–¹æ³•**\n-----\n\n```sql\necho 'HISTTIMEFORMAT=\"%F %T \"' >> /etc/profile\n\nsource /etc/profile\n```\n\n***\n***\n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Memcache - åƒæ•¸","url":"/blog.github.io/2022/08/16/Memcache-åƒæ•¸/","content":"\n***\n***\n\n| åƒæ•¸ | åƒæ•¸ä»£è¡¨æ„æ€|\n| --- | ---|\n| -d | æ˜¯å•Ÿå‹•ä¸€å€‹å®ˆè­·ç¨‹åº |\n| -m | æ˜¯åˆ†é…çµ¦Memcacheä½¿ç”¨çš„è¨˜æ†¶é«”æ•¸é‡ï¼Œå–®ä½æ˜¯MB |\n| -u | æ˜¯åŸ·è¡ŒMemcacheçš„ä½¿ç”¨è€… |\n| -l | æ˜¯ç›£è½çš„ä¼ºæœå™¨IPåœ°å€ï¼Œå¯ä»¥æœ‰å¤šå€‹åœ°å€ |\n| -p | æ˜¯è¨­å®šMemcacheç›£è½çš„åŸ ï¼Œï¼Œæœ€å¥½æ˜¯1024ä»¥ä¸Šçš„åŸ  |\n| -c | æ˜¯æœ€å¤§åŸ·è¡Œçš„ä½µç™¼é€£ç·šæ•¸ï¼Œé è¨­æ˜¯1024 |\n| -P | æ˜¯è¨­å®šå„²å­˜Memcacheçš„pidæª”æ¡ˆ |\n    \n***\n***\n\n\n\n\n***\n\n","tags":["Memcache"],"categories":["Memcache"]},{"title":"Memcache - åŸºæœ¬æ“ä½œ","url":"/blog.github.io/2022/08/16/Memcache-å¸¸ç”¨èªæ³•/","content":"\n***\n***\n\n| åƒæ•¸åç¨± | ä½œç”¨ |\n| ---- | ---- |\n| command | add ã€ set æˆ– replace |\n| key | ç·©å­˜çš„åå­— |\n| flag | 16 ä½ç„¡ç¬¦è™Ÿæ•´æ•¸ï¼Œå’Œ key è¦å­˜å„²çš„æ•¸æ“šä¸€èµ·å­˜å„²ï¼Œä¸¦åœ¨ç¨‹åº get ç·©å­˜æ™‚ï¼Œè¿”å› |\n| exptime | éå»æ™‚é–“ï¼Œ0 è¡¨ç¤ºæ°¸é ä¸éæœŸ |\n| bytes | å­˜å„²æ•¸æ“šçš„å­—ç¯€æ•¸ |\n | \\r\\n | æ›è¡Œ Enter |\n\n***\n***\n\n\n\næ ¼å¼\n\n```sql\n<command> <key> <flags> <exptime> <bytes>\\r\\n\n    \n<data block>\\r\\n\n```\n\n       \n***\n***\n\n**å•Ÿå‹•æœå‹™**\n-----\n\n```sql\n./memcached -d -m 2048 -u nobody  -p 12000 -c 2048 -P /tmp/memcached.pid\n```\n\n***\n***\n\n**é€£æ¥ memcache**\n-----\n    \n```sql\ntelnet 127.0.0.1 12000\n```\n\n`linux ä¸‹ä¸€èˆ¬ç”¨ telnet é€£æ¥`\n\n***\n***\n    \n**æ·»åŠ ç·©å­˜**\n-----\n\n```sql\nadd kk 1 0 4  \t        #Enter\n\n1234  \t\t        #Enter\n    \nSTORED\n```\n\n`å¦‚æœ key å·²ç¶“å­˜åœ¨ï¼Œå‰‡æœƒæ·»åŠ å¤±æ•—ã€‚å¦‚æœæ•¸æ“š ä¸æ˜¯ 4 å€‹å­—ç¯€ æ‡‰è©²æœƒæç¤ºæ•¸æ“šéŒ¯èª¤`\n\n***\n***\n    \n**ä¿®æ”¹ç·©å­˜**\n-----\n\n```sql\nreplace kk 1 0 2        #Enter\n \n11  \t\t        #Enter\n    \nSTORED  \n```\n\n`key å­˜åœ¨æ™‚,æˆåŠŸ ï¼› ä¸å­˜åœ¨æ™‚,å¤±æ•—`\n    \n***\n***\n    \n**è¨­ç½®ç·©å­˜**\n-----\n\n```sql\nset kk 1 0 4  \t        #Enter\n\n1234 \t\t        #Enter\n\nSTORED\n```\n    \n***\n***\n\n**è®€å–**\n-----\n\n```sql\nget kk\n\nVALUE kk 1 4\n\n1234\n```\n\n***\n***\n    \n**åˆªé™¤**\n-----\n\n```sql\ndelete kk \t        #Enter\n\nDELETED\n```\n\n***\n***\n    \n**æ¸…ç©ºæ‰€æœ‰ç¼“å­˜**\n-----\n\n```sql\nflush_all  \n\nOK\n```\n\n***\n***\n    \n**æŸ¥çœ‹ç¼“å­˜æœå‹™å™¨ç‹€æ…‹**\n-----\n\n```sql\nstats\n```\n    \n***\n***\n  \n\n       \n\n\n\n\n***\n\n","tags":["Memcache"],"categories":["Memcache"]},{"title":"Memcache - å®‰è£ ( CentOS7 )","url":"/blog.github.io/2022/08/16/Memcache-å®‰è£-CentOS7/","content":"\n***\n***\n\n\n*ä¾è³´*\n-----\n\n```sql\nyum install libevent libevent-devel\n    \nyum install perl-Test*\n    \nwget http://memcached.googlecode.com/files/memcached-1.4.8.tar.gz\n    \ntar zxvf memcached-1.4.8.tar.gz\n    \ncd memcached-1.4.8\n    \nmake && make test\n    \nmake install\n```\n\n**å•Ÿå‹•æœå‹™**\n-----\n\n```sql\n./memcached -d -m 2048 -u nobody  -p 12000 -c 2048 -P /tmp/memcached.pid\n```\n    \n**åœæ­¢æœå‹™**\n-----\n\t\n```sql\npkill memcached\t\t\t\t\n```\n\n\n***\n\n","tags":["Memcache"],"categories":["Memcache"]},{"title":"MongoDB - å®‰è£æ•™å­¸","url":"/blog.github.io/2022/08/15/Mongod-Mongodbå®‰è£æ•™å­¸/","content":"\n***\n***\n    \n[MongoDBå®˜ç¶²ä¸‹è¼‰åœ°å€](https://www.mongodb.com/download-center#community)\n\n***\n***\n    \n![](https://s2.loli.net/2024/04/29/bVALTJ3mruoIZCc.png)\n\n***\n***\n   \n![](https://s2.loli.net/2024/04/29/YZbvDHch5mjeo7N.png)\n\n***\n***\n\n```sql\n\nyum install libcurl openssl\n    \nwget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.28.tgz\n    \ntar zxvf mongodb-linux-x86_64-4.0.28.tgz  -C /usr/local/\n    \nmv /usr/local/mongodb-linux-x86_64-4.0.28/ mongodb/\n    \ncd /usr/local/mongodb/\n    \nmkdir data log conf\n    \ncd data/ && mkdir db/\n    \ncd /usr/local/mongodb/conf && touch mongodb.conf\n\n```\n\n***\n***\n     \n```sql\nvim mongodb.conf\n```\n  \n```sql\n\ndbpath=/usr/local/mongodb/data/db  \n    \nlogpath=/usr/local/mongodb/log/mongodb.log \n    \nport=27017\n    \nfork=true\n    \nbind_ip=0.0.0.0\n\n```\n\n***\n***\n\n**å•Ÿå‹•æœå‹™**\n-----\n\n```sql\n./bin/mongod --config ./conf/mongodb.conf\n```\n\n***\n***\n\n**é—œé–‰æœå‹™**\n-----\n\n```sql\n./bin/mongod --config ./conf/mongodb.conf --shutdown\n```\n\n***\n***\n     \n**å»ºç«‹ mongoDB é€£ç·š**\n-----\n\n```sql\n./mongo\n```\n\n***\n***\n     \n\n\n***\n\n","tags":["MongoDB"],"categories":["MongoDB"]},{"title":"MongoDB - å¸¸ç”¨èªæ³•","url":"/blog.github.io/2022/08/15/Mongod-Mongodbå¸¸ç”¨èªæ³•/","content":"\n***\n***\n    \n**å‰µå»ºè³‡æ–™åº«  (å¦‚æœè³‡æ–™åº«ä¸å­˜åœ¨ï¼Œå‰‡å‰µå»ºä¸¦åˆ‡æ›éå»)**\n-----\n    \n```sql\nuse DATABASE_NAME\n```\n\n***\n***\n    \n**å‰µå»ºé›†åˆ**\n-----\n    \n```sql\ndb.createCollection(\"runoob\")\n```\n\n***\n***\n\n**æŸ¥çœ‹é›†åˆ**\n-----\n\n```sql\nshow collections && show tables\n```\n\n***\n***\n    \n**æŸ¥çœ‹è³‡æ–™åº«**\n-----\n\n```sql\ndb.col.find()\n```\n\n***\n***\n    \n**é¡¯ç¤ºç›®å‰æ•¸æ“šåº«**\n-----\n\n```sql\ndb\n```\n\n***\n***\n    \n**æŸ¥çœ‹æ‰€æœ‰æ•¸æ“šåº«**\n-----\n\n```sql\nshow dbs\n```\n\n***\n***\n\n**æ’å…¥è³‡æ–™åˆ°æ•¸æ“šåº«**\n-----\n\n```sql\ndb.test222.insert({\"name\":\"èœé³¥\"})\n```\n\n***\n***\n\n**åˆªé™¤æ•¸æ“šåº«**\n-----\n\n```sql\ndb.dropDatabase()\n```\n\n***\n***\n\n**åˆ é™¤é›†åˆ**\n-----\n\n```sql\ndb.collection.drop()\n```\n\n***\n***\n\n**å‰µå»ºå›ºå®šé›†åˆmycolï¼Œé›†åˆç©ºé–“å¤§å°6142800Bï¼Œæ–‡æª”æœ€å¤§å€‹æ•¸10000å€‹**\n-----\n\n```sql\ndb.createCollection(\"mycol\", { capped : true, autoIndexId : true, size : 6142800, max : 10000 } )\n```\n\n***\n***\n\n**é›†åˆæ’å…¥å¤šå€‹æ–‡æª”**\n-----\n\n```sql\ndb.col.insert({title: 'MongoDBæ•™ç¨‹', \n        description: 'MongoDB æ˜¯ä¸€å€‹Nosqlæ•¸æ“šåº«',\n        by: 'èœé³¥',\n        url: 'https://note.laurance.ml',\n        tags: ['mongodb', 'database', 'NoSQL'],\n        likes: 100\n        })\n```\n\n***\n***\n\n**æˆ–æ˜¯å¯ä»¥è¨­æˆè®Šé‡**\n-----\n\n```sql\ndocument=({title: 'MongoDBæ•™ç¨‹', \n        description: 'MongoDB æ˜¯ä¸€å€‹Nosqlæ•¸æ“šåº«',\n        by: 'èœé³¥',\n        url: 'https://note.laurance.ml',\n        tags: ['mongodb', 'database', 'NoSQL'],\n        likes: 100\n        });\n```\n\n***\n***\n\n**åœ¨åŸ·è¡Œæ’å…¥å‹•ä½œ**\n-----\n    \n```sql\ndb.col.insert(document)\n```\n\n***\n***\n\n        \n        \n\n\n***\n\n","tags":["MongoDB"],"categories":["MongoDB"]},{"title":"PHP - å¦‚ä½•å®‰è£ MongoDB æ“´å±•","url":"/blog.github.io/2022/08/15/PHP-å®‰è£MongoDBæ“´å±•/","content":"\n***\n***\n\n[MongoDB å®‰è£åŒ…](https://pecl.php.net/package/mongodb)\n\n***\n***\n\n```sql\nwget http://pecl.php.net/get/mongodb-1.3.4.tgz    \n\ntar -zxvf mongodb-1.3.4.tgz    \n\ncd mongodb-1.3.4.tgz    \n\n/usr/local/web/php/bin/phpize    \n    \n./configure -with-php-config=/usr/local/web/php/bin/php-config    \n    \nmake & make test & make install\n```\n\n***\n***\n    \n```sql\nvim /usr/local/php/etc/php.ini    \n```    \n    \n```sql\nextension=mongodb.so\n```\n\n***\n***\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"PHP - å¦‚ä½•å®‰è£ Redis æ“´å±•","url":"/blog.github.io/2022/08/15/PHP-å®‰è£Redisæ“´å±•/","content":"\n***\n***\n\n[REDIS](https://pecl.php.net/package/redis)\n\n***\n***\n\n```sql\nwget http://pecl.php.net/get/redis-4.0.0RC2.tgz    \n    \ntar zxvf redis-4.0.0RC2.tgz    \n\ncd redis-4.0.0RC2\n    \n/usr/local/web/php/bin/phpize\n    \n./configure -with-php-config=/usr/local/web/php/bin/php-config\n    \nmake && make install    \n```\n\n***\n***\n    \n```sql\nvim /usr/local/php/etc/php.ini    \n```\n    \n```sql\nextension=redis.so\n```\n\n***\n***\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"XenServer - å®‰è£…æ•™å­¸","url":"/blog.github.io/2022/08/15/XEN-å®‰è£…XenServer/","content":"\n<!--more-->\nCitrix XenServer 7.2 è™›æ“¬åŒ–é›†ç¾¤æ­å»º\n\n***\n***\n\n**Xenserver å®‰è£æ­¥é©Ÿ**\n======\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/QKBg8PO3bHafvlV.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/zd5nA2ZxTRIHphX.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/idCL7IJufogHYA2.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/4V8erQLaNk5KC7M.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/27R8GWlPrgKwiuk.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/pxORhsyvU836IjQ.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/lMy2kaG6nHwR81A.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/8O1he34aPSJoTjF.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/j3ZitXSTh1aWCNn.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/wBquExioGpvnthW.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/Dera1YOHoW8Zt7A.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/MGmoZw2b7BU3XFO.png)\n\n***\n\n![](https://s2.loli.net/2024/05/03/fvygshLnrd9IFiD.png)\n\n***\n***\n\n***\n\n","tags":["XenCenter"],"categories":["XenCenter"]},{"title":"XenServer - é€éè™›æ“¬æ©Ÿåš NFS-Server & è£½ä½œ xencenter æ˜ åƒæª”","url":"/blog.github.io/2022/08/12/XEN-é€éè™›æ“¬æ©ŸåšNFS-Server/","content":"\n***\n***\n\n**å»ºç«‹ nfs-server**\n-----\n\n***\n***\n\n**å®‰è£ nfs ä¾è³´**\n\n```sql\nyum -y install nfs-utils nfs-utils-lib\n```\n\n***\n***\n\n**å»ºç«‹è¦åš `nfs-server` çš„ç›®éŒ„,ä¸¦çµ¦äºˆ`æ¬Šé™`**\n\n```sql\nmkdir -p /data2/nfs\n\nchmod 777 /data2/nfs\n```\n\n***\n***\n\n**å…è¨± `172.16.0.0/16` ç¶²æ®µçš„æ©Ÿå™¨æ›è¼‰ `/data2/nfs`**\n\n```sql\necho â€˜data2/nfs 172.16.0.0/24(rw,sync,no_root_squash,no_all_squash)â€™ >> /etc/exports\n\nservice nfs start\n```\n\n***\n***\n\n**è£½ä½œ 174 çš„ `xva æ˜ åƒæª”`**\n-----\n\n***\n***\n\n**ä½¿ç”¨ `XenServerâ€“170` åŒ¯å‡º 174 çš„ `xvaæ˜ åƒæª”`**\n    \n```sql\nmkdir -p /data2/export\n\nmount -t nfs 172.16.0.222:/data2/nfs /data2/export\n    \nxe vm-list name-label=174\t(æŸ¥çœ‹174çš„uuid)\n    \nxe vm-export filename=/data2/export/174.xva vm=8fa16dde-c06d-726c-56da-c0fe47cf3d06\t(ä½¿ç”¨174çš„uuid è£½ä½œæ˜ åƒæª”)\n```\n\n***\n***\n\n**å°‡ `xvaæ˜ åƒæª”` åŒ¯å…¥ `æ–°å»ºçš„æ©Ÿå™¨ XenServerâ€“180`**\n\n```sql\nmkdir -p /data2/export\n\nmount -t nfs 172.16.0.222:/data2/nfs /data2/export\n    \nxe vm-import filename=/data2/export/174.xva\n```\n\n***\n***\n    \n**åŒ¯å…¥å®Œæˆä¹‹å¾Œåœ¨ XenServerâ€“180 åº•ä¸‹æœƒè‡ªå‹•ç”Ÿæˆè©² instance**\n\n***\n***\n\n***\n\n","tags":["XenCenter"],"categories":["XenCenter"]},{"title":"Linux - ç³»çµ±é‡å•Ÿ & æª¢è¦–æ—¥èªŒåŠæ­·å²ç´€éŒ„","url":"/blog.github.io/2022/08/11/Linuxç³»çµ±é‡å•Ÿ_æª¢è¦–æ—¥èªŒåŠæ­·å²ç´€éŒ„/","content":"\n***\n***\n\n## å„ LOG ä»£è¡¨æ„æ€åŠå­˜æ”¾ä½ç½®\n\n| LOG è·¯å¾‘ | ä»£è¡¨æ„æ€ |\n| --- | --- |\n| /var/log/message | ç³»çµ±å•Ÿå‹•å¾Œçš„è³‡è¨Šå’ŒéŒ¯èª¤æ—¥èªŒ |\n| /var/log/secure | èˆ‡å®‰å…¨ç›¸é—œçš„æ—¥èªŒè³‡è¨Š |\n| /var/log/maillog | èˆ‡éƒµä»¶ç›¸é—œçš„æ—¥èªŒè³‡è¨Š |\n| /var/log/cron | èˆ‡å®šæ™‚ä»»å‹™ç›¸é—œçš„æ—¥èªŒè³‡è¨Š |\n| /var/log/spooler | èˆ‡UUCPå’Œnewsè£ç½®ç›¸é—œçš„æ—¥èªŒè³‡è¨Š |\n| /var/log/boot.log | å®ˆè­·ç¨‹åºå•Ÿå‹•å’Œåœæ­¢ç›¸é—œçš„æ—¥èªŒè¨Šæ¯ |\n| /var/log/wtmp | æ°¸ä¹…è¨˜éŒ„æ¯å€‹ä½¿ç”¨è€…ç™»å…¥ã€ç™»å‡ºåŠç³»çµ±çš„å•Ÿå‹•ã€åœæ©Ÿçš„äº‹ä»¶ |\n| /var/run/utmp | è¨˜éŒ„ç•¶å‰æ­£åœ¨ç™»å…¥ç³»çµ±çš„ä½¿ç”¨è€…è³‡è¨Š |\n| /var/log/btmp | è¨˜éŒ„å¤±æ•—çš„ç™»å…¥å˜—è©¦è³‡è¨Š |\n\n***\n***\n    \n## Linux ç³»çµ±æŸ¥è©¢æ©Ÿå™¨æœ€è¿‘é‡å•Ÿæ™‚é–“å‘½ä»¤\n\n***\n***\n\n| æŒ‡ä»¤ | æ„æ€ |    \n| --- | --- |\n| last reboot | æª¢è¦–æ‰€æœ‰é‡å•Ÿæ—¥èªŒè³‡è¨Š |    \n| last reboot l head -1 | æª¢è¦–æœ€è¿‘çš„ä¸€æ¢ |\n\n***\n***\n    \n| æŒ‡ä»¤ | æ„æ€ |    \n| --- | --- |\n| last -x  l  grep shutdown  l  head -1 | é¡¯ç¤ºä¸Šæ¬¡é—œæ©Ÿçš„æ—¥æœŸå’Œæ™‚é–“ |\n| uptime -s | æª¢è¦–ç³»çµ±æ­£å¸¸çš„åŸ·è¡Œæ™‚é–“ |\n\n***\n***\n \n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"CentOS 7 - æ›´æ”¹ Yum æº (HiNet)","url":"/blog.github.io/2022/08/10/CentOS7-æ›´æ”¹Yumæº(HiNet)/","content":"\n<!--more-->\n\"Hinet yumæº ç´€éŒ„\"\n\n```sql\n    # CentOS-Base.repo\n    #\n    # The mirror system uses the connecting IP address of the client and the\n    # update status of each mirror to pick mirrors that are updated to and\n    # geographically close to the client. You should use this for CentOS updates\n    # unless you are manually picking other mirrors.\n    #\n    # If the mirrorlist= does not work for you, as a fall back you can try the \n    # remarked out baseurl= line instead.\n    #\n    #\n    \n    [base]\n    name=CentOS-$releasever â€“ Base\n    #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os\n    baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/os/$basearch/\n    gpgcheck=1\n    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n    \n    #released updates \n    [updates]\n    name=CentOS-$releasever â€“ Updates\n    #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates\n    baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/updates/$basearch/\n    gpgcheck=1\n    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n    \n    #additional packages that may be useful\n    [extras]\n    name=CentOS-$releasever â€“ Extras\n    #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras\n    baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/extras/$basearch/\n    gpgcheck=1\n    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n    \n    #additional packages that extend functionality of existing packages\n    [centosplus]\n    name=CentOS-$releasever â€“ Plus\n    #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus\n    baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/centosplus/$basearch/\n    gpgcheck=1\n    enabled=0\n    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n    \n    #contrib â€“ packages by Centos Users\n    [contrib]\n    name=CentOS-$releasever â€“ Contrib\n    #mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=contrib\n    baseurl=http://mirror01.idc.hinet.net/CentOS/$releasever/contrib/$basearch/\n    gpgcheck=1\n    enabled=0\n    gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7\n```\n\n\n\n# æ¸…ç† yum å¿«å– && æ›´æ–°\n\n    yum clean all\n\n    yum update -y\n\n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"Docker - é€éimageå‚³è¼¸è‡³å¦ä¸€å°å…§ç¶²æ©Ÿå™¨","url":"/blog.github.io/2022/08/10/Docker-é€éimageå‚³è¼¸è‡³å¦ä¸€å°å…§ç¶²æ©Ÿå™¨/","content":"\n\n\n# é¦–å…ˆå°‡imageåŒ…æˆ .taræª”\n\n```sql\n\ndocker save blazingdb/blazingsql > blazingsql.tar\n\n```\n\n\n\n\n\n# å†åŸ·è¡Œdocker loadæŒ‡ä»¤\n\n```sql\n\ndocker load -i blazingsql.tar\n\n```\n\n\n\n\n***\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"Linux - å»ºç«‹é–‹æ©Ÿç•«é¢ motd æ–‡å­—","url":"/blog.github.io/2022/08/10/Linuxå»ºç«‹é–‹æ©Ÿç•«é¢motdæ–‡å­—/","content":"\n***\n***\n\n## å»ºç«‹é–‹æ©Ÿç•«é¢ `motd` æ–‡å­—\n\n***\n***\n\n## ä½¿ç”¨ `vim` æ›¿æ› `^[ ` ç‚º `è½‰ç¾©` å­—ç¬¦\n\n***\n***\n\n### åœ¨ vim å…§æŒ‰ ` : `\n\n***\n***\n\n### è¼¸å…¥ä»¥ä¸‹å…§å®¹ \n\n```sql\n%s/\\^\\[/ \n```\n\n`(ä¸è¦é»æ“ŠEnter)`\n\n***\n***\n\n### è¼¸å…¥ `Ctrl+v` ç„¶å¾Œé»æ“Š `Esc` è½‰æ›å­—ç¬¦\n\n***\n***\n\n### æœ€å¾Œè¼¸å…¥ `/g` ï¼Œé»æ“Š `Enter` \n\n***\n***\n\n### å¦‚æœæ“ä½œæ­£ç¢º `^[` å‰‡å¾ç°è‰²è®Šç‚ºè—è‰²ï¼Œå¦‚æœæ²’æœ‰é»æ“Š `u` è¿”å›\n\n***\n***\n\n## å¦ä¸€ç¨®æ–¹æ³• ( ä½¿ç”¨ echo )\n\n```sql\nEX:\necho $'\\e[1;37m' > myfile\n```\n\n***\n***\n\n## å„ç¬¦è™Ÿä»£è¡¨æ„æ€ :\n\n| ç¬¦è™Ÿ | æ„æ€ |\n| --- | --- |\n| %s | æœç´¢ |\n| /\t| ç¬¬ä¸€é … |\n| \\^\\[\t| è½‰ç¾©ç‰ˆæœ¬ ^[ |\n|  / |  ç¬¬äºŒé …ï¼Œä½¿ç”¨éµç›¤æ’å…¥å¯¦éš› Esc |\n| /g | é‡è¤‡æ‰€æœ‰å‡ºç¾ |\n    \n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Windows - CMD å¸¸ç”¨æŒ‡ä»¤","url":"/blog.github.io/2022/08/10/Windows-CMDå¸¸ç”¨æŒ‡ä»¤/","content":"\n***\n***\n\n|    å‹•ä½œ\t               | LINUX\t|\t            WINDOWS\t|\n| --- | --- | --- |\n|    é€²å…¥ç›®éŒ„\t                 | cd\t|\t               cd\t|\t    \n|    å‰µå»ºç›®éŒ„\t                | mkdir\t|\t               md\t|\t    \n|    ç•¶å‰ç›®éŒ„\t                 | pwd\t|\t               cd\t|\t    \n|    å±•ç¤ºç›®éŒ„\t                  | ls\t|\t               dir\t|\t    \n|    ç§»é™¤ç›®éŒ„\t                  | rm\t|\t               del\t|\t    \n|    æ‰“å°æ–‡ä»¶\t                  | lp\t|\t               print |\t\t    \n|    è¤‡è£½æ–‡ä»¶\t                  | cp\t|\t               copy\t|\t    \n|    ç§»å‹•æ–‡ä»¶\t                  | mv\t|\t               ren\t|\t    \n|    æŒ‡ä»¤æŸ¥è©¢\t                  | man\t|\t               help\t|\t    \n|    é¡¯ç¤ºç’°å¢ƒè®Šæ•¸\t          | env\t|\t               set\t\t|    \n|    è¨­ç½®ç’°å¢ƒè®Šæ•¸\t          | setenv\t|\t       set\t\t|    \n|    æ‰“å°æ–‡ä»¶\t                  | lp\t|\t               print\t|\t  \n\n***\n\n***\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"Windows - è¨­å®š BIOS é€éå…§é¡¯èˆ‡ç¨é¡¯åšå¤šè¢å¹•è¼¸å‡º","url":"/blog.github.io/2022/08/10/Windows-é€éå…§é¡¯èˆ‡ç¨é¡¯åšå¤šè¢å¹•è¼¸å‡º/","content":"\n***\n***\n\n**é€²å…¥`BIOS`**\n\n***\n\n**æŒ‰`F7`é€²å…¥é€²éšæ¨¡å¼**\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/VprlTAZq5vx3mds.png)\n\n***\n***\n    \n**é»é¸`Advanced` é é¢ï¼Œé€²å…¥`System Agent (SA) Configuration`**\n\n***\n***\n\n![](https://s2.loli.net/2024/05/03/b9cStzerJD6iXTH.png)\n\n***\n***\n    \n**åœ¨`System Agent (SA) Configuration`åº•ä¸‹é»é¸`Graphics Configuration`**\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/GZnNEAUDdyl2rJ7.png)\n\n***\n***\n\n**é€²å…¥`Graphics Configuration`é …ç›®å¾Œï¼ŒæŠŠ`iGPU Multi-Monitor`é¸é …è¨­å®šç‚º`Enable`**\n\n***\n***\n\n\n\n**`Primary Display`å¯ä»¥è¨­å®šè¢å¹•é¡¯ç¤ºæ–¹å¼**  \n\n***\n    \n**1. ç‚ºè‡ªå‹•åµæ¸¬ `Auto`** \n\n***\n \n**2. ç¨ç«‹é¡¯ç¤ºå¡ `PCIE` è¼¸å‡º**  \n\n***\n\n**3. å…§å»ºé¡¯ç¤º `iGPU` è¼¸å‡º**\n\n\n\n***\n***\n    \n![](https://s2.loli.net/2024/05/03/N9Skx5Egb14Kl2L.png)\n\n***\n***\n\n**æŒ‰ `F10` å„²å­˜å¾Œé‡æ–°é–‹æ©Ÿ**\n\n***\n\n**`WIN+X+M` é€²å…¥è£ç½®ç®¡ç†å“¡**\n\n***\n    \n**åœ¨è£ç½®ç®¡ç†å“¡ï¼Œå¯ä»¥çœ‹åˆ° `å…§å»ºé¡¯ç¤ºæ™¶ç‰‡` å’Œ `å¤–æ¥ç¨ç«‹é¡¯ç¤ºå¡` å…©å€‹é¡¯ç¤ºå¡è¼¸å‡ºè£ç½®**    \n\n***\n\n","tags":["Windows"],"categories":["Windows"]},{"title":"GIT - å¸¸ç”¨èªæ³•","url":"/blog.github.io/2022/08/09/GIT-å¸¸ç”¨èªæ³•/","content":"\n\n## æŸ¥çœ‹Gitç‰ˆæœ¬\n    \n```sql\n\ngit --version\n\n```\n\n## æŸ¥çœ‹Gitè¨­å®šå…§å®¹\n    \n```sql\n\ngit config --list\n\n```\n\n## è¨­å®šå¸³æˆ¶ï¼Œè®“ Git çŸ¥é“é€™å°é›»è…¦åšçš„ä¿®æ”¹è¦é€£çµåˆ°å“ªä¸€å€‹ä½¿ç”¨è€…\n    \n```sql\n\ngit config --global user.name \"<Your Name>\"\n\n```\n\n## è¨­å®šé›»å­éƒµä»¶\n    \n```sql\n\ngit config --global user.email \"<your@gmail.com>\"\n\n```\n    \n## å‰µå»ºä¸€å€‹æ–°çš„Repository (æ‰“é–‹ä»»ä½•ä¸€å€‹å°ˆæ¡ˆè³‡æ–™å¤¾æ‰“ä¸Š)\n    \n```sql\n\ngit init\n\n```\n    \n## é¡¯ç¤ºç›®å‰å·¥ä½œç’°å¢ƒç‹€æ…‹\n    \n```sql\n\ngit status\n\n```\n    \n## è¤‡è£½å°ˆæ¡ˆ\n    \n```sql\n\ngit clone XXX\n\n```\n    \n## å°‡å°ˆæ¡ˆåŠ å…¥è¿½è¹¤(æš«å­˜èµ·ä¾†)\n    \n```sql\n\ngit add hello.py\n\n```\n    \n## å°‡å°ˆæ¡ˆ commit é€²å» repository (ç¢ºå®šå­˜å…¥ç‰ˆæœ¬åº«)\n    \n```sql\n\ngit commit -m \"Init hello.py\"\n\n```\n    \n## æ¯”è¼ƒç¾åœ¨æª”æ¡ˆå’Œä¸Šæ¬¡ commit ä¹‹é–“çš„å·®ç•°\n    \n```sql\n\ngit diff\n    \ngit diff |cat XXX\n    \ngit diff 785641bf91c11f25a01c0d48182e810bc8b3bc1c (git logç”¢ç”Ÿçš„commitä»£ç¢¼)\n\n```\n    \n## è©³ç´°åˆ—å‡ºè©²æ¬¡commitçš„ä¿®æ”¹å…§å®¹\n    \n```sql\n\ngit show \n\n```\n    \n## æŸ¥çœ‹ç›®å‰æ‰€æœ‰commitçš„æ­·å²ç´€éŒ„\n    \n```sql\n\ngit log\n\n```\n    \n## æª¢æŸ¥æ›´æ”¹\n    \n```sql\n\ngit fetch\n\n```\n    \n## å°‡é€™äº›æ›´æ”¹æ‡‰ç”¨åˆ°æˆ‘å€‘çš„æœ¬åœ°å€‰åº«\n    \n```sql\n\ngit merge\n\n```\n    \n## æª”æ¡ˆå°šæœªåŠ å…¥éè¿½è¹¤æ™‚ä½¿ç”¨ï¼Œå³å¯æ¢å¾©åˆ°æª”æ¡ˆå°šæœªåŠ å…¥æš«å­˜å€ (å–æ¶ˆadd)\n    \n```sql\n\ngit rm --cached hello.py\n\n```\n    \n## è‹¥æª”æ¡ˆå·²ç¶“åœ¨ repository å…§ï¼Œå‰‡ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤\n    \n```sql\n\nrepository èˆ‡ stage çš„æª”æ¡ˆéƒ½æœƒè¢«é‚„åŸåˆ° HEADï¼Œä½† working directory å…§çš„æª”æ¡ˆä¸è®Š\n    \ngit reset HARD\n\n```\n\n## å°‡æœ¬åœ°ç«¯ç¨‹å¼ push åˆ°é ç«¯æª”æ¡ˆåº«\n\n```sql\n\ngit push -u origin master\n\n```\n    \n## åˆ‡å‡ºè‡ªå·±çš„æ–°åˆ†æ”¯ï¼ˆä½¿ç”¨ -bï¼‰\n    \n```sql\n\ngit checkout -b happycoder@feature_branch\n\n```\n\n\n***\n\n","tags":["GIT"],"categories":["GIT"]},{"title":"GIT - ä½¿ç”¨ github è¨—ç®¡å€‹äººç¶²ç«™æ­¥é©Ÿ","url":"/blog.github.io/2022/08/09/GITHUB-ä½¿ç”¨githubè¨—ç®¡å€‹äººç¶²ç«™æ­¥é©Ÿ/","content":"\n***\n***\n\n**ç´€éŒ„ä¸€ä¸‹å¦‚ä½•å»ºç«‹ `blog` ä¸¦ä½¿ç”¨ `github` è¨—ç®¡**\n=====\n\n***\n***\n\n**é»é¸ `Your repositories` å»ºç«‹å€‰åº«**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/4hlKdwS9iNqZEIV.png)\n\n***\n***\n\n**é¸æ“‡ `New` å»ºç«‹ä¸€å€‹å…¨æ–°çš„å€‰åº«ä¾†æ”¾ `code`**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/Q6jS1NDtPWfEs42.png)\n\n***\n***\n\n**å°‡å€‰åº«åå¡«å¯«ç‚º `æˆ‘çš„åå­—.github` , ä¸¦é¸æ“‡ `Public`**\n-----\n\n***\n***\n\n\n\n**repo æ¬Šé™ä¸€å®šè¦æ˜¯ public å¦å‰‡ç„¡æ³•è¨ªå•`**\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/uWFrkpYGiHqnd2V.png)\n\n***\n***\n\n**é€™é‚Šæ¸¬è©¦å»ºç«‹ `index.html` (è‹¥å·²ç¶“æœ‰ä»£ç¢¼å¯é»é¸ `uploading` ä¸Šå‚³)**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/ZiLIwYrqcGm2ajH.png)\n\n***\n***\n\n**å¡«å¯«åŸºæœ¬çš„ `html` ç”¨æ–¼æ¸¬è©¦**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/aKR7wrUv5QCZbEx.png)\n![](https://s2.loli.net/2024/04/28/E7LQ5zgNr9djVZA.png)\n\n***\n***\n\n**é»é¸ `settings` è¨­ç½®**\n-----\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/iZf7BkNTCjPQp3Y.png)\n\n***\n***\n\n**é»é¸å³å´ `Pages` å¯ä»¥çœ‹åˆ° `Github` çµ¦çš„ `URL`**\n\n***\n\n\n\n**Github-URL ç‚º https://XXXXX.github.io**\n\nè‹¥æ²’å‡ºç¾å¯ä»¥åˆ·æ–°ä¸€ä¸‹æˆ–é»å»åˆ¥é å†é»å›ä¾†\n\n\n\n**è¨­ç½®è‡ªè¨‚ç¾©åŸŸåä¸¦è¨­ç½® NS æŒ‡å‘**\n-----\n\n***\n\n**æ·»åŠ è‡ªè¨‚ç¾©åŸŸåè‡³å¾Œå°ç®¡ç† (root domain)**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/TA6PZLlQjvzEGp9.png)\n\n![](https://s2.loli.net/2024/04/28/xDHlZcuVeNjb9Bf.png)\n\n![](https://s2.loli.net/2024/04/28/MPVmYrujgIy9A5q.png)\n\n\n**è¨­ç½® DNS CNAME && A records**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/MmHzw7ckdvOFRjY.png)\n\n***\n***\n\n```sql\nnslookup XXX..github.io\n```\n\n***\n\n**å°‡å››å€‹IPåŠ å…¥NS A records**\n\n***\n\n![](https://s2.loli.net/2024/04/28/ZfPotYu8brWz4JV.png)\n\n***\n***\n\n\n**é¸æ“‡ `custom domain` å¡«å…¥è‡ªå·±çš„åŸŸåä¸¦ç­‰å¾…é©—è­‰ (sub domain)**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/YzFoPHcZGEqsdTO.png)\n\n***\n***\n\n**è¨­å®šå¼·åˆ¶ä½¿ç”¨ `https`**\n-----\n\n***\n\n**`Cloudflare` ä¸Šå³å´é¸æ“‡ `è¦å‰‡`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/qA6s3iJnGTbHpaE.png)\n\n***\n***\n\n**å¡«å…¥`URL`ä¸¦è¨­å®šç‚º`ä¸€å¾‹ä½¿ç”¨ HTTPS`**\n\n***\n***\n\n![](https://s2.loli.net/2024/04/28/m3PqDaIgfHuxtQj.png)\n\n***\n***\n\n**Github æ¨é€æ­¥é©Ÿ**\n-----\n\n***\n\n```sql\ncd public\n\ngit init\n\ngit remote add origin https://github.com/XXX.github.io.git\n\ngit add -A\n\ngit commit -m \"first commit\"\n\ngit push -u origin master\n```\n\n****\n\n\n\n\n***\n\n","tags":["GIT"],"categories":["GIT"]},{"title":"MySQL - å°‡åº«åŠè¡¨è½‰æˆ `SQLæª”` èªæ³•","url":"/blog.github.io/2022/08/09/Mysql-å°‡åº«åŠè¡¨è½‰æˆSQLæª”/","content":"\n***\n***\n\n**å°‡æŸåº«æŸè¡¨è½‰æˆ `SQLæª”`**\n=====\n\n***\n***\n\n```sql\nmysqldump -uroot -p UserAccount UserGame > /root/UserGame.sql\n```\n\n***\n***\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"Cacti - å®‰è£æ–¹æ³•","url":"/blog.github.io/2022/08/07/Cacti-å®‰è£æ–¹æ³•/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹å»ºç«‹ CACTI èªæ³•ï¼ŒåŒ…å«å»ºç«‹å‰ç½®ä½œæ¥­ LAMP\"\n\n```sql\n\n    rpm -qa | grep mariadb\n    rpm -qa | grep mysql\n \n    yum install mysql-community-server mysql-devel\n    \n    ./configure --prefix=/usr/local/web/apache2 --enable-ssl --enable-so  --enable-vhost-alias  --with-mpm=prefork\n    \n    './configure' '--prefix=/usr/local/web/php' '--with-apxs2=/usr/local/web/apache2/bin/apxs' '--with-mysql' '--with-mysqli' '--disable-cgi' '--with-iconv' '--disable-inline-optimization' '--enable-mbstring=tw' '--enable-sysvshm' '--enable-sysvsem' '--enable-sockets' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-zlib' '--with-curl' '--enable-zip' '--with-openssl-dir=/usr/lib/openssl' '--with-openssl' '--enable-opcache'\n    \n    tar zxvf cacti-0.8.7g.tar.gz\n    \n    mv cacti-0.8.7g /home/cacti\n    \n    yum install -y net-snmp  net-snmp-utils\n    \n    tar zxvf rrdtool-1.0.50.tar.gz\n    cd rrdtool-1.0.50\n    ./configure --prefix=/usr/local/rrdtool \n    make\n    make install\n    \n    #ln -s /usr/local/libpng/lib/libpng.so /usr/lib/ \n    #ln -s /usr/local/freetype/lib/libfreetype.so /usr/lib/\n    #yum -y install freetype-devel\n    #yum -y install libpng-devel\n    #yum -y install libart_lgpl-devel\n    \n    mysqld_safe &\n \n    mysqladmin -u root password 'å¯†ç¢¼' \n    \n    mysqladmin --user=root -p create cacti\n    \n    cd    /home/cacti/ \n    mysql -u root -p cacti < cacti.sql \n    \n    mysql    -u    root    -p \n    mysql> grant all on cacti.* to cactiuser@localhost identified by '123456'; \n    mysql> flush privileges; \n    mysql> exit \n    \n    vim /home/cacti/include/config.php \n    \n      26 $database_type: \"mysql\"; \n      27 $database_default: \"cacti\"; \n      28 $database_hostname: \"localhost\"; \n      29 $database_username: \"cactiuser\"; \n      30 $database_password: \"kiwi888\"; \n      31 $database_port: \"3306\";\n      \n    useradd cactiuser\n    \n    su - cactiuser\n    \n    crontab -e\n\n    */1 * * * * /usr/local/bin/php  /home/cacti/poller.php > /dev/null 2>&1\n    \n    exit\n    \n```\n    \n\n\n***\n\n","tags":["Cacti"],"categories":["Cacti"]},{"title":"CentOS - æ›´æ”¹ç³»çµ±èªè¨€","url":"/blog.github.io/2022/08/07/Centos-æ›´æ”¹ç³»çµ±èªè¨€/","content":"\n<!--more-->\n\"å¦‚ä½•æ›´æ”¹ CentOS ç³»çµ±èªè¨€\"\n\n\n  # æ›´æ”¹ç³»çµ±å¼•æ•¸\n\n \n```sql\n\nvim /etc/locale.conf\t\t# CentOS 7\nLANG=â€œzh_CN.UTF-8â€\nsource  /etc/locale.conf\n\n---\n\n    \nvim /etc/sysconfig/i18n\t        # CentOS6\nLANG=â€œzh_CN.UTF-8â€\nsource /etc/sysconfig/i18n\n```    \n\n ## é‡å•Ÿç³»çµ±\n    \n```sql\nreboot\n````    \n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"AWS - AMIs æˆæ¬Šçµ¦å…¶ä»–å¸³è™Ÿ","url":"/blog.github.io/2022/08/05/AWS-AMIsæˆæ¬Šçµ¦å…¶ä»–å¸³è™Ÿ/","content":"\n<!--nore-->\n\"æŠŠåŸå¸³è™Ÿçš„ AMIs æˆæ¬Šçµ¦æ–°å¸³è™Ÿï¼Œåˆ†äº« Images çµ¦æ–°å¸³è™Ÿä½¿ç”¨\"\n\n\n# AWS æ§åˆ¶å°\n\n    \n## é¸æ“‡AMIs > é»é¸ Modify Image Permissions    \n\n   ![](https://s2.loli.net/2024/04/25/UXS9frMPcnoKNVC.png)\n   \n## è¼¸å…¥ æ–°å¸³è™Ÿçš„ Account Id >> Add Permission >> ä¸‹é¢çš„å‹¾å‹¾æ‰“å‹¾ > save\n\n   ![](https://s2.loli.net/2024/04/25/s6Z9MUfbCkIDdgL.png)\n   \n## å†åˆ°æ–°å¸³è™Ÿçš„ AWS æ§åˆ¶å° >> EC2 >> AMIs >> private images å³å¯çœ‹åˆ°å‰›å‰›æˆæ¬Šçš„ AMIs\n    \n   ![](https://s2.loli.net/2024/04/25/G2YeCDdVL4ZomhH.png)\n   \n   [å®˜æ–¹æ–‡ä»¶](https://docs.aws.amazon.com/zh_tw/AWSEC2/latest/UserGuide/sharingamis-explicit.html)\n   \n   \n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - How to enable MFA for AWS Root user","url":"/blog.github.io/2022/08/05/AWS-How-to-enable-MFA-for-AWS-Root-user/","content":"\n<!--more-->\n\"å»ºç«‹ MFA äºŒéšæ®µé©—è­‰ä¾†åš root ç™»å…¥\"\n\n\n# è¨­ç½® AWS-MFA - äºŒéšæ®µèªè­‰ Authy\n\n\n## æœå°‹ `IAM` æœå‹™\n\n![](https://s2.loli.net/2024/04/25/lFJBoSsOVR12Kic.png)\n\n---\n\n## é¸æ“‡ `Add MFA` æ·»åŠ  MFA\n\n![](https://s2.loli.net/2024/04/25/NMahQTFqSr85fst.png)\n\n---\n\n## åœ¨é¸å–® `Multi-factor authentication (MFA)` ä¸­æ–°å¢è¨­å‚™ `Assign MFA device`\n\n![](https://s2.loli.net/2024/04/25/Zdfy2cNmSl4b3p6.png)\n\n---\n\n## é¸æ“‡è¦é©—è­‰MFAçš„æ–¹å¼ ( é€™é‚Šé¸æ“‡ä½¿ç”¨APP )\n\n![](https://s2.loli.net/2024/04/25/J3ajKprM1XHb5ny.png)\n\n---\n\n## é»æ“Š `show QR code` ä¸¦ä½¿ç”¨æ‰‹æ©ŸAPP (Authy) æƒæé©—è­‰ & ä¸¦å°‡é©—è­‰ç¢¼ä¾åºå¡«å…¥ `MFA code1 , MFA code2`\n\n![](https://s2.loli.net/2024/04/25/RUPgvDxuzle7oAV.png)\n\n---\n\n## æ·»åŠ æˆåŠŸ\n\n![](https://s2.loli.net/2024/04/25/nsMOVIjKPtzom3H.png)\n\n---\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - VPC å»ºç½®","url":"/blog.github.io/2022/08/05/AWS-VPCå»ºç½®/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹å»ºç«‹ VPC çš„æµç¨‹\"\n\n\n# 1. å»ºç«‹ VPC\n\n\n## é»é¸ Create VPC\n\n   ![](https://s2.loli.net/2024/04/25/ZEd2ljvNpicw4Ft.png)\n   \n   ---\n   \n## è¼¸å…¥åç¨±åŠç¶²æ®µ , é€™é‚Šè¨­ç½®ç‚º 172.25.0.0/16\n\n   ![](https://s2.loli.net/2024/04/25/vwbBJAMlk5jRqYK.png)\n   \n   ---\n   \n \n# 2. æ–°å¢4å€‹subnets (2å€‹Publicã€2å€‹private)  \n\n# ç”¨é€”:é é˜²AZå‡ºç¾æ•…éšœç„¡æ³•åˆ‡æ›\n\n\n## é»é¸ Create subnet \n\n   ![](https://s2.loli.net/2024/04/25/8V4CrZRPNsdbaGq.png)\n   \n   ---\n   \n## ç¢ºèª CIDR ç‚ºç›®å‰è¨­ç½®ç¶²æ®µ && é®ç½©ç‚º /16\n\n   ![](https://s2.loli.net/2024/04/25/kjzUF6bJ49vouGB.png)\n   \n   ---\n   \n## å»ºç«‹ public-a ç‚º 172.25.1.0/24\n\n   ![](https://s2.loli.net/2024/04/25/3dcpCLJU1YsglB8.png)\n   \n   ---\n   \n## å»ºç«‹ public-c ç‚º 172.25.2.0/24\n\n   ![](https://s2.loli.net/2024/04/25/gHwXVdRrTsh6kNM.png)\n   \n   ---\n   \n## å»ºç«‹ private-a ç‚º 172.25.3.0/24\n\n   ![](https://s2.loli.net/2024/04/25/HEm2fdegCi9tN7x.png)\n   \n   ---\n   \n## å»ºç«‹ private-c ç‚º 172.25.4.0/24\n\n   ![](https://s2.loli.net/2024/04/25/DWLFk2x7fERHMu9.png)\n \n   ---\n\n\n# 3. æ–°å¢Internet gatewaysï¼Œä¸¦å°‡IGWæ›ä¸ŠVPC\n\n\n\n## æ–°å¢Internet gateways (æ­¤æ­¥é©Ÿè¦å…ˆåšå®Œï¼Œæ‰èƒ½æ–°å¢ NAT GW)\n\n   ![](https://s2.loli.net/2024/04/25/H1BzL7ChDqFtQdK.png)\n   \n   ---\n   \n## è¼¸å…¥åç¨± > Create internet gateway\n\n   ![](https://s2.loli.net/2024/04/25/gCKyIZAdt9WFJRU.png)\n   \n   ---\n   \n## é¸å–å‰›å‰›å»ºç«‹çš„ internet gateway å³éµé»é¸ attach\n\n   ![](https://s2.loli.net/2024/04/25/89ZOcFAubtD7i5y.png)\n   \n   ---\n   \n## é¸æ“‡å‰›å‰›å»ºç«‹å¥½çš„ VPC\n\n   ![](https://s2.loli.net/2024/04/25/ayotuWqrQ9jfV4R.png)\n   \n   ---\n\n\n# 4.æ–°å¢NAT gatewaysï¼Œé¸æ“‡Public subnetï¼Œä¸¦çµ¦ä¸€å€‹å¤–ç¶²IP\n\n\n\n## æ–°å¢ NAT Gateways\n\n   ![](https://s2.loli.net/2024/04/25/f3nmAI1Nw2EiWY5.png)\n   \n   ---\n   \n## è¨­å®šåç¨±,subnet,Elastic IP é»é¸ Create\n\n   ![](https://s2.loli.net/2024/04/25/Zzg6YWatu2dM5Pe.png)\n   \n   ---\n   \n   \n# 5.æ–°å¢2å€‹route tableï¼Œ1å€‹å«igwã€1å€‹å«nat\n\n\n## æ–°å¢ route table\n\n   ![](https://s2.loli.net/2024/04/25/RDk9IzSVJW3tGq6.png)\n   \n   ---\n   \n## å»ºç«‹1å€‹ route for NAT gateway\n\n   ![](https://s2.loli.net/2024/04/25/wYmTGheOXP57lBL.png)\n   \n   ---\n   \n## é»é¸å‰›å‰›å»ºç«‹çš„ private-route-nat è¨­å®š route è¦å‰‡\n\n   ![](https://s2.loli.net/2024/04/25/TD7IFgilwQc38Bh.png)\n   \n   ---\n   \n## è¨­å®š NAT - route ç›®çš„ç‚ºå…¨é€š\n\n   ![](https://s2.loli.net/2024/04/25/HDawu9kGiv6WrzU.png)\n   \n   ---\n   \n## å»ºç«‹1å€‹ route for Internet gateway\n\n   ![](https://s2.loli.net/2024/04/25/7etzGgS5EO892X1.png)\n   \n   ---\n   \n## é»é¸å‰›å‰›å»ºç«‹çš„ public-route-igw è¨­å®š route è¦å‰‡\n\n   ![](https://s2.loli.net/2024/04/25/qei7ZBoEOu2kQh6.png)\n   \n   ---\n   \n## è¨­å®š IGW - route ç›®çš„ç‚ºå…¨é€š\n   \n   ![](https://s2.loli.net/2024/04/25/mZKthBQ28lIE3sb.png)\n   \n   ---\n\n\n# 6.subnets å¥—ç”¨route talbeï¼ŒPublicå¥—ç”¨igwï¼Œprivateå¥—ç”¨nat\n\n\n## å›åˆ° subnet é¸æ“‡ public-a é»é¸è¨­ç½® route table\n\n   ![](https://s2.loli.net/2024/04/25/8iT4JaZ2WvohpIm.png)\n   \n   ---\n   \n## public-a å¥—ç”¨ public-route-igw è¦å‰‡\n\n   ![](https://s2.loli.net/2024/04/25/d1D6aY4FJRtiSqb.png)\n   \n   ---\n   \n## å›åˆ° subnet é¸æ“‡ public-c é»é¸è¨­ç½® route table\n\n   ![](https://s2.loli.net/2024/04/25/sYgJn6Ih9oCGr81.png)\n   \n   ---\n\n## public-c å¥—ç”¨ public-route-igw è¦å‰‡\n\n   ![](https://s2.loli.net/2024/04/25/lC9ghNV7581ByAD.png)\n   \n   ---\n   \n## å›åˆ° subnet é¸æ“‡ pricate-a é»é¸è¨­ç½® route table\n\n   ![](https://s2.loli.net/2024/04/25/5WxlBVHzJPEaK7v.png)\n   \n   ---\n\n## private-a å¥—ç”¨ private-route-nat è¦å‰‡\n\n   ![](https://s2.loli.net/2024/04/25/LxdjgqACtuIbkVX.png)\n   \n   ---\n\n## å›åˆ° subnet é¸æ“‡ pricate-c é»é¸è¨­ç½® route table\n\n   ![](https://s2.loli.net/2024/04/25/2makjrdgFVyTKOp.png)\n   \n   ---\n   \n## private-c å¥—ç”¨ private-route-nat è¦å‰‡\n\n   ![](https://s2.loli.net/2024/04/25/XhrWDwuHPzE7J13.png)\n   \n   ---\n   \n   \n# VPC è¨­ç½®å®Œæˆ \n\n---\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - ä¸‹è¼‰ aws-cli && aws configure è¨­å®š","url":"/blog.github.io/2022/08/05/AWS-è¨­ç½®aws-cli/","content":"\n<!--more-->\n\"ä½¿ç”¨ AWS comaand å·¥å…· 'aws-cli' èˆ‡è¨­å®š 'aws configure' \"\n\n\n# AWS CLI å®‰è£åŠæ›´æ–° \n\n\n[ å®˜ç¶²: https://docs.aws.amazon.com/zh_tw/cli/latest/userguide/getting-started-install.html ]\n\n```sql\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\n\nunzip awscliv2.zip\n\nsudo ./aws/install\n\naws --version\n```\n\n\n# AWS CONFIGURE è¨­å®šæª”è¨­å®š\n\n\n\n`éœ€è¦å…ˆå»ºç«‹ IAM USER ä¸¦ create access key`\n\n\n# è¨­å®šæ­¥é©Ÿ: ( IAM download accesskey.csv )\n\n\n```sql\nAWS Access Key ID [None]: XXXXXXXXXXXXXXXXXXX\n    \nAWS Secret Access Key [None]: XXXXXXXXXXXXXXXXXXX\n    \nDefault region name [None]: ap-northeast-1\n    \nDefault output format [None]: \n```\n\n\n# è¨­å®šæª”è·¯å¾‘ :\n\n\n```sql\ncat ~/.aws/credentials\n\n\n[default]\n    \naws_access_key_id=XXXXXXXXXXXXXXXXXXXXXXXXXXX\n    \naws_secret_access_key=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n```\n\n\n```sql\ncat ~/.aws/config\n\n\n[default]\n    \nregion=us-west-2\n    \noutput=json\n```\n\n\nAWS æ†‘è­‰åŸç†:\n\nç•¶æ‚¨ä½¿ç”¨æŒ‡å®š AWS Identity and Access Management (IAM) è§’è‰²çš„å…±ç”¨è¨­å®šæª”æ™‚ï¼Œ\n    \nAWS CLI æœƒå‘¼å« AWS STS AssumeRole æ“ä½œä¾†æ“·å–è‡¨æ™‚æ†‘è­‰ã€‚ç„¶å¾Œæœƒå­˜æ”¾é€™äº›æ†‘è­‰ (åœ¨ ~/.aws/cli/cache ä¸­)ã€‚\n    \nå¾ŒçºŒçš„ AWS CLI å‘½ä»¤æœƒä½¿ç”¨å¿«å–çš„è‡¨æ™‚æ†‘è­‰ï¼Œç›´åˆ°éæœŸç‚ºæ­¢ï¼Œæ­¤æ™‚ AWS CLI æœƒè‡ªå‹•é‡æ–°æ•´ç†æ†‘è­‰\n\n    \n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - æ’ˆå‡º RDS çš„ binlog","url":"/blog.github.io/2022/08/05/AWS-æ’ˆå‡ºRDSçš„binlog/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹ä½¿ç”¨ mysql å·¥å…· æ’ˆå‡º RDS çš„ binlog\"\n\n\næ’ˆå‡º RDS binlog\n\n\n```sql\ncd /home/mariadb/binlog\n\nmysqlbinlog --base64-output=decode-rows -v --set-charset=\"utf8\" --start-datetime=\"2021-11-04 14:06:00\" --stop-datetime=\"2021-11-04 14:09:00\"   mysql-bin-changelog.450599 > /home/laurance/RDS-1104-1405-1410.sql\n```\n\n    \nå‚³è‡³å…¶ä»–æ©Ÿå™¨\n\n\n```sql\nscp RDS-1005-1330-1430.sql laurance@admin:~ \n```\n\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"AWS - configure è¨­ç½®","url":"/blog.github.io/2022/08/05/AWS-é…ç½®é‡‘é‘°åœ¨linuxç™»å…¥/","content":"\n```sql\naws configure\nAWS Access Key ID [None]: XXXXXXXXXXXXXXXXXXX\nAWS Secret Access Key [None]: XXXXXXXXXXXXXXXXXXX\nDefault region name [None]: ap-northeast-1\nDefault output format [None]: json\n```\n\n\n\n***\n\n","tags":["AWS"],"categories":["AWS"]},{"title":"SVN - error - SQLite compiled for 3.19.2, but running with 3.6.20","url":"/blog.github.io/2022/08/04/SVN-error_SQLite_compiled_for3_19_2_but_running_with_3_6_20/","content":"\n***\n***\n\n**svn: SQLite compiled for 3.19.2, but running with 3.6.20**\n    \n```sql\nsvn: E200029: Couldn't perform atomic initialization\n\nsvn: E200030: SQLite compiled for 3.19.2, but running with 3.6.20\n```\n    \n**é€™æ˜¯å› ç‚ºç·¨è­¯ SVN ç”¨çš„ç‰ˆæœ¬ `sqlite 3.19.2` å’Œç³»çµ±ä¸­å·²å®‰è£çš„ `sqlite 3.6.20` ç‰ˆæœ¬ä¸ä¸€è‡´å°è‡´**\n\n***\n***\n    \n**è§£æ±ºæ–¹æ³•**\n=====\n\n***\n***\n\n**å¾è¼¸å‡ºä¸­çœ‹å‡ºç›®å‰ä½¿ç”¨çš„ `sqlite ç‰ˆæœ¬`**\n\n```sql\ncd /usr/local/svn/bin\n\nldd svn\n```\n\n```sql\nlibsqlite3.so.0:> /usr/lib64/libsqlite3.so.0 (0x00007f0f8572d000)\n```\n\n***\n***\n\n**æ‰¾åˆ° `libsqlite3.so.0` ä¸¦å°‡å®ƒå¾æ–° link**\n\n```sql\nfind / -name libsqlite3.so.0 -print\n\n\n/usr/local/sqlite/lib/libsqlite3.so.0\n\n/usr/local/sqlite-autoconf-3190200/.libs/libsqlite3.so.0\n\n/usr/local/lib/libsqlite3.so.0\n\n/usr/lib64/libsqlite3.so.0\n```\n\n```sql\nmv libsqlite3.so.0 libsqlite3.so.0.old\n\nln -s /usr/local/lib/libsqlite3.so.0 libsqlite3.so.0\n```\n\n***\n***\n\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"SVN - error - undefined symbol: svn_fs_util__version","url":"/blog.github.io/2022/08/04/SVN-error_symbol_lookup/","content":"\n***\n***\n\n**svn: symbol lookup error: /usr/local/lib/libsvn_fs_x-1.so.0: undefined symbol: svn_fs_util__version**\n***\n**é€™æ˜¯å› ç‚ºç³»ç»Ÿä¸­è£…äº†`rpm ç‰ˆ` çš„ `subversion è·Ÿ APR` , å¼•èµ·ç‰ˆæœ¬æ··ä¹± , æ¸…ç†æ‰å³å¯**\n\n***\n***\n    \n```sql\nrpm -qa|grep subversion\n    \nrpm -e --nodeps subversion-libs-1.7.14-16.el7.x86_64\n    \nrpm -qa|grep apr\n    \necho '/usr/local/APR/lib'>>/etc/ld.so.conf\n    \necho '/usr/local/ARP-util/lib'>>/etc/ld.so.conf\n    \nldconfig\n    \nsvnadmin create --pre-1.6-compatible /home/svn/note\n```\n\n\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"Apache - å¦‚ä½•é€é rsyslog æœå‹™åŒæ­¥å¯« log","url":"/blog.github.io/2022/08/03/Apache-é€érsyslogåŒæ­¥log/","content":"\n<!--more-->\n\"Apache é€é rsyslog åŒæ­¥å¯« LOG åˆ°å…¶ä»–å°æ©Ÿå™¨\"\n\n## ç·¨è¼¯ Apache è¨­å®šæª”\n\n```sql\nvim /etc/httpd/conf/httpd.conf\n```\n\n\n    ErrorLogFormat \"[%{u}t] [%-m:%l] [pid %P:tid %T] %7F: %E: [client\\ %a] %M% ,\\ referer\\ %{Referer}i\"\n    <IfModule logio_module>\n    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %O %I %T %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" nreporter\n    </IfModule>\n    CustomLog \"logs/access-NReporter_log\" nreporter\n\n\n## é‡å•Ÿ Apache æœå‹™å’Œç¢ºèª Apache æœå‹™ç‹€æ…‹\n    \n```sql\nsystemctl restart httpd && systemctl status httpd\n```\n    \n## ç·¨è¼¯ rsyslog è¨­å®šæª”\n    \n```sql\nvim /etc/rsyslog.conf\n```    \n    \n   \n    ###MODULES###\n    $ModLoad imfile # provides support for file logging\n    # Send Apache log to N-Reporter\n    input(type=\"imfile\" File=\"/var/log/httpd/access-NReporter_log\" Tag=\"apache\" Severity=\"info\" Facility=\"local6\"\n    Ruleset=\"nreporter\")\n    input(type=\"imfile\" File=\"/var/log/httpd/error_log\" Tag=\"apache\" Severity=\"warning\" Facility=\"local6\"\n    Ruleset=\"nreporter\")\n    ruleset(name=\"nreporter\"){action(type=\"omfwd\" Target=\"192.168.2.69\" Port=\"514\" Protocol=\"udp\")}\n\n\n## é‡å•Ÿ Rsyslog æœå‹™å’Œç¢ºèª Rsyslog æœå‹™æ­£å¸¸\n    \n```sql\nsystemctl restart rsyslog && systemctl status rsyslog\n```\n\n\n***\n\n","tags":["Apache"],"categories":["Web"]},{"title":"CentOS - å®‰è£… speedtest-cli","url":"/blog.github.io/2022/08/03/CentOS-å®‰è£…speedtest-cli/","content":"\n<!--more-->\n\"(ç´€éŒ„ä¸€ä¸‹ Centos å®‰è£… speedtest-cli ç¶²é€Ÿæ¸¬è©¦)\"\n\n ```sql\n    \n    wget https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py\n\n    vim speedtest.py >> (ç¬¬ä¸€è¡Œ#æ”¹python3)\n\n    chmod a+rx speedtest.py\n\n    mv speedtest.py /usr/local/bin/speedtest-cli\n\n    chown root:root /usr/local/bin/speedtest-cli\n\n```\n\n\n  # å‘½ä»¤å¾Œè¿½åŠ  --share å¯ä»¥å¾—åˆ°æ¸¬è©¦ä¿¡æ¯åœ–ç‰‡\n    \n  # speedtest-cli --share\n\n\n\n  # è¿½åŠ  --list å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„æ¸¬è©¦æœå‹™å™¨\n    \n  # speedtest-cli --list\n\n\n\n # ä½¿ç”¨ â€“ server æ¸¬è©¦æŒ‡å®šæœå‹™å™¨çš„ä¸‹è¼‰æˆ–ä¸Šå‚³é€Ÿåº¦\n    \n # speedtest-cli --server 41009 (ç«™ç‚¹IDå¯é€šé --list ç²å–)\n\n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"CentOS - æ ¹ç›®éŒ„ç£å€æ“´å……","url":"/blog.github.io/2022/08/03/CentOS-æ ¹ç›®éŒ„ç£å€æ“´å……/","content":"\n<!--more-->\n\"(å°‡homeç£å€åˆ†å‰²ç‚º50Gä¸¦å°‡å…¶é¤˜ç©ºé–“æ“´å……åˆ°æ ¹ç›®éŒ„åº•ä¸‹)\"\n\n\n  # å®‰è£xfsdumpå·¥å…·\n\n```sql\nyum install xfsdump -y\n```\n\n\n\n  # å‚™ä»½/homeç£å€çš„æ›è¼‰å…§å®¹ (ä¸€è·¯æŒ‰ENTER)\n\n```sql\nxfsdump -f /home.xfsdump /home\n```\n\n   ![](https://s2.loli.net/2024/04/25/Sl4LnUIizd6YNZX.png)\n\n\n\n   \n  # é€™æ™‚å€™æœƒå†è·Ÿç›®éŒ„å‡ºç¾å‰›å‰›å‚™ä»½çš„ /home >> home.xfsdump\n\n   ![](https://s2.loli.net/2024/04/25/nRjxJir2HbELA1P.png)\n\n\n\n   \n # æˆåŠŸå‚™ä»½å¾Œï¼Œå°‡/homeç£å€ç§»é™¤æ›è¼‰ (å¿…é ˆä»¥rootèº«åˆ†ç™»å…¥æ‰èƒ½åŸ·è¡Œ)\n \n ```sql\n umount /home\n```\n   \n   ![](https://s2.loli.net/2024/04/25/GbmxeuiWDpVkJ17.png)\n\n\n\n\n # å°‡/homeç£å€å¤§å°å®šç¾©ç‚º50G\n   \n```sql\nlvreduce -L 50G /dev/mapper/centos-home\n```\n   \n   ![](https://s2.loli.net/2024/04/25/23FwxDrWj9OhXVo.png)\n\n\n\n\n # å°‡å…¶é¤˜ç©ºé–“æ“´å……åˆ°æ ¹ç›®éŒ„åº•ä¸‹\n\n```sql\nlvextend -l +100%FREE /dev/mapper/centos-root\n```\n\n   ![](https://s2.loli.net/2024/04/25/P4pByS5LUbsOa1v.png)\n\n\n\n\n# ä½¿æ ¹ç›®éŒ„æ“´å……ç”Ÿæ•ˆ\n  \n```sql\nxfs_growfs /dev/mapper/centos-root\n```\n   \n   ![](https://s2.loli.net/2024/04/25/3GScZhmDutT8BUI.png)\n\n\n\n\n # æ ¼å¼åŒ–/homeæ›è¼‰å°æ‡‰çš„ç£å€\n    \n```sql\nmkfs.xfs -f /dev/mapper/centos-home\n```\n   \n   ![](https://s2.loli.net/2024/04/25/VF8jDK9bGXP4uxt.png)\n\n\n\n\n# é‡æ–°æ›è¼‰/home\n\n```sql\nmount /home\n```\n   \n   ![](https://s2.loli.net/2024/04/25/KHg6rDo9lXzy2Ap.png)\n\n\n\n\n# å°‡åŸæœ¬å‚™ä»½çš„å…§å®¹å¯«å…¥/home\n    \n```sql\nxfsrestore -f /home.xfsdump /home\n```\n   \n   ![](https://s2.loli.net/2024/04/25/fIc6UHarNeq9tYS.png)\n\n\n\n   \n# å¯ä»¥çœ‹å€’å·²å°‡ç£å€å®¹é‡æ“´å……\n   \n   ![](https://s2.loli.net/2024/04/25/iqcUwgQSslRmWGb.png)\n\n\n\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"CentOS - ç›®éŒ„æ²’é¡¯ç¤ºé¡è‰²","url":"/blog.github.io/2022/08/03/CentOS-ç›®éŒ„æ²’é¡¯ç¤ºé¡è‰²/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹å¦‚ä½•æ›´æ”¹ Linux ç³»çµ±ç›®éŒ„é¡è‰²\"\n\n# èªæ³•:\n\n```sql\n\nyum install coreutils --allowerasing && or dnf install\n    \nscp DIR_COLORS root@172.17.0.2:~\n    \nmv DIR_COLORS ~/.dir_colors\n    \nreboot\n\n```\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"CentOS 6 - ä¿®æ”¹ yum æº","url":"/blog.github.io/2022/08/03/CentOS6-ä¿®æ”¹yumæº/","content":"\n<!--more-->\n\"ä½¿ç”¨ 'sed' æ›´æ”¹ 'yum æº' \"\n\n```sql\n\nsed -i -e \"s/^mirrorlist=http:\\/\\/mirrorlist.centos.org/#mirrorlist=http:\\/\\/mirrorlist.centos.org/g\" /etc/yum.repos.d/CentOS-Base.repo\n\nsed -i -e \"s/^#baseurl=http:\\/\\/mirror.centos.org/baseurl=http:\\/\\/vault.centos.org/g\" /etc/yum.repos.d/CentOS-Base.repo\n\n```\n\n***\n\n","tags":["CentOS"],"categories":["CentOS"]},{"title":"CentOS 6 - å®‰è£socks5ä»£ç†","url":"/blog.github.io/2022/08/03/CentOS6-å®‰è£socks5ä»£ç†/","content":"\n<!--more-->\n\"ç´€éŒ„ä¸€ä¸‹ å®‰è£ SS5ä»£ç† èªæ³•\"\n\n```sql\n\nwget https://nchc.dl.sourceforge.net/project/ss5/ss5/3.8.9-8/ss5-3.8.9-8.tar.gz\n    \nyum -y install gcc automake make\nyum -y install pam-devel openldap-devel cyrus-sasl-devel openssl-devel\n\ntar xvf ss5-3.8.9-8.tar.gz\ncd ss5-3.8.9\n./configure && make && make install\n    \nvi /etc/opt/ss5/ss5.conf\nauth    0.0.0.0/0               -              -\npermit -        0.0.0.0/0       -       0.0.0.0/0\n\n```\n\n\n# åŠ å…¥ç”¨æˆ¶ååŠå¯†ç¢¼ /etc/opt/ss5/ss5.passwd\n\n    \n## ä¿®æ”¹ ss5 å•Ÿå‹•çš„ port ( é»˜èªæ˜¯ 1080 )\n    \n```sql\n\nvi /etc/sysconfig/ss5\n    \n#SS5_OPTS=â€ -u rootâ€\n    \nè¨»è§£æ–°å¢\n    \nSS5_OPTS=\" -u root -b 0.0.0.0:8080\"\n\n```\n    \n## çµ¦äºˆ bash æª”å¢åŸ·è¡Œæ¬Šé™ /etc/rc.d/init.d/ss5\n\n```sql\n\nchmod 755 /etc/rc.d/init.d/ss5\n\nservice ss5 start # é‡å•Ÿ\n\n```\n\n\n***\n\n","tags":["Socket 5"],"categories":["CentOS"]},{"title":"DNS - æ­£è§£èˆ‡åè§£ ç´€éŒ„","url":"/blog.github.io/2022/08/03/DNS-æ­£è§£èˆ‡åè§£/","content":"\n\n\n    DNSæ­£è§£ï¼åè§£ ï¼šä¸»è¦æ˜¯ä¾†èªªæ˜ã€IPä½ç½®ã€èˆ‡ã€ç¶²å€ã€ä¹‹é–“é—œé€£çš„ç‹€æ³ã€‚\n    \n    â—DNSæ­£è§£ï¼šæ˜¯æŒ‡ã€ç¶²å€ã€å°æ‡‰åˆ°ã€ä¸»æ©ŸIPã€çš„é—œé€£ç‹€æ³ï¼Œäº¦ç‚ºä½¿ç”¨è€…åœ¨DNS Serverä¸Šï¼Œé€éA æŒ‡å‘ã€MX æŒ‡å‘ã€TXTæŒ‡å‘ã€NSæŒ‡å‘çš„è¨­å®šï¼Œç”¨ä¾†è¡¨ç¤ºé€£çµç¶²å€æ™‚æœƒé€šåˆ°çš„IPä½ç½®çš„ä¸»æ©Ÿï¼›æˆ–æ˜¯å¯„ä¿¡æ™‚è©²æŠ•éåˆ°ä¸»æ©Ÿä½ç½®\n    \n    â—DNSåè§£ï¼šæ˜¯æŒ‡ IP ä½å€å°æ˜ åˆ°ä¸»æ©Ÿçš„é—œé€£ç‹€æ³ï¼Œäº¦ç‚ºIPé€éPTRæŒ‡å‘è¨­å®šï¼Œç”¨ä¾†è¡¨ç¤ºIPå°æ‡‰åˆ°çš„ç¶²å€ï¼Œé€™å€‹é€šå¸¸æ˜¯è¨­å®šä¼ºæœå™¨åç¨±hostnameï¼Œä¸€èˆ¬æ­é…æ­£è§£çš„è¨­å®šä¾†é”åˆ°é©—è­‰æ•ˆæœï¼Œå¦‚ï¼šMAILçš„æ”¶ä¿¡æ–¹æœƒæª¢æŸ¥ç™¼ä¿¡IP ä¹‹åè§£è¨­å®šæ˜¯å¦èˆ‡æ­£è§£çš„NSæŒ‡å‘ä¸€è‡´ï¼›æˆ–ç³»çµ±æœ‰é©—è­‰åˆ°åè§£çš„è¨Šæ¯æ‰æœƒå¯„å‡ºç³»çµ±é€šçŸ¥ä¿¡ä»¶â€¦ç­‰\n    \n    æ­£è§£ï¼åè§£ çš„è¨­å®šå°è±¡ç‚ºä½•>>\n    \n    â—æ­£è§£éœ€æ±‚çš„è¨­å®šå°è±¡ï¼šç‚ºç¶²å€çš„æ“æœ‰è€…ã€‚\n    â—åè§£éœ€æ±‚çš„è¨­å®šå°è±¡ï¼šæœ‰ROOTæ¬Šé™çš„ä¸»æ©Ÿå•†ã€‚\n\n\n\n***\n\n","tags":["DNS"],"categories":["DNS"]},{"title":"Docker - å¸¸ç”¨æŒ‡ä»¤ && åƒæ•¸","url":"/blog.github.io/2022/08/03/Docker-å¸¸ç”¨æŒ‡ä»¤åŠåƒæ•¸/","content":"\n\n\n  # æŸ¥çœ‹ç›®å‰ä½¿ç”¨çš„æœå‹™\n    \n```sql\n\ndocker system df\n\n```\n    \n  # Docker passwdå­˜æ”¾ä½ç½®\n    \n```sql\n\n/root/.docker/config.json\n\n```\n\n# è¨­å®šdockerå•Ÿå‹•ï¼Œå®¹å™¨è‡ªå‹•å•Ÿå‹•\n    \n```sql\n\ndocker run å®¹å™¨  --restart=always \n\n```\n    \n # ä½¿ç”¨updateåƒæ•¸ä¿®æ”¹é…ç½® \n    \n```sql\n\ndocker update --restart=always ***(å®¹å™¨å)  \n\n```\n\n# é‡å•ŸDockerå¾Œï¼Œä¸å•Ÿå‹•è©²å®¹å™¨\n    \n```sql\n\ndocker update --restart=no mysqld-exporter\n\n```\n   \n# ä½¿ç”¨rootæ¬Šé™é€²å…¥å®¹å™¨ exec -u 0\n    \n```sql\n\ndocker  exec -ti -u 0 779afa4111c2 /bin/bash\n\n```\n    \n# å®Œå…¨åœæ­¢å®¹å™¨\n    \n```sql\n\ndocker stop $(docker ps -a -q)\n\n```\n    \n# å®Œå…¨åˆªé™¤å®¹å™¨\n    \n```sql\n\ndocker rm $(docker ps -a -q)\n\n```\n\n # docker é è¨­ç¶²æ®µä½ç½®\n \n```sql\n\n\"/etc/docker/daemon.json\" >> \n  {\n  \"bip\":\"192.168.0.1/24\"\n  }\n\n```\n\n\n\n\n\n# docker network :\n\n---\n\n## å‰µå»º network\n    \n```sql\n\ndocker network create influxdb\n\n```\n\n # å»ºç«‹è‡ªè¨‚ç¾© Network\n    \n```sql\n\ndocker network create --driver bridge --subnet 172.16.50.0/24 --gateway=172.16.50.1 --ip-range 172.16.50.0/24 <network name>\n\n```\n\n# æŸ¥çœ‹networkç´°ç¯€\n    \n```sql\n\ndocker network inspect influxdb\n\n```\n\n # æ‹‰å–containerè¨­å®šæª”\n    \n```sql\n\ndocker run --rm telegraf telegraf config > telegraf.conf\n\n```\n\n # é‹è¡Œå®¹å™¨ \n    \n```sql\n\ndocker run -di\n\n```\n\n# ä½¿å¾— Container è£¡é¢çš„æª”æ¡ˆè·¯å¾‘Mapping åˆ°å¯¦é«”ä¸»æ©Ÿçš„æª”æ¡ˆè·¯å¾‘\n    \n```sql\n\ndocker -v XXX\n\n```\n\n# æœå°‹é¡åƒ\n    \n```sql\n\ndocker search mariadb \n\n```\n    \n # æ‹‰å–é¡åƒ\n    \n```sql\n\ndocker pull mariadb \n\n```\n    \n # å•Ÿå‹•å®¹å™¨\n    \n```sql\n\ndocker run -d --name prometheus2022 prom/prometheus \n\n```\n    \n # è¤‡è£½å®¹å™¨å…§æª”æ›è¼‰åˆ°æœ¬æ©Ÿç›®éŒ„\n    \n```sql\n\ndocker cp -a prometheus2022:/etc/prometheus/ /root/docker-service/prometheus \n\n```\n    \n # ç æ‰å®¹å™¨\n    \n```sql\n\ndocker rm -f prometheus2020 \n\n```\n    \n # æ¸…ç†æ‰æ‰€æœ‰çš„container\n    \n```sql\n\ndocker rm -fv $(docker ps -a -q)\n\n```\n    \n # åˆªé™¤images\n    \n```sql\n\ndocker stop containerID\n    \ndocker rm containerID\n    \ndocker rmi imageID\n\n```\n\n # é‡æ–°å‘½åå®¹å™¨åç¨±\n    \n```sql\n\ndocker rename <my_container> <my_new_container>\n\n```\n\n\n\n    #############################################################\n\n\n***\n\n","tags":["Docker"],"categories":["Docker"]},{"title":"Docker - å»ºç«‹ Grafana ç›£æ§ä¸¦æ›è¼‰åœ¨æœ¬æ©Ÿ èªæ³•ç´€éŒ„","url":"/blog.github.io/2022/08/03/Docker-å»ºç«‹Grafanaç›£æ§/","content":"\n\n\n# æœå°‹é¡åƒ\n    \n    docker search mariadb\n    \n# æ‹‰å–é¡åƒ \n   \n    docker pull mariadb\n    \n# æœ¬åœ°å»ºç«‹ç›®éŒ„æ›è¼‰é€²dockerä¾†ç®¡ç†\n    \n    mkdir -p /root/docker-service/mysql/conf/ && mkdir -p /root/docker-service/mysql/data/\n    \n# è·‘èµ·æœå‹™\n    \n    docker run -d -p 3307:3306 -e MARIADB_ROOT_PASSWORD=123456 -v /root/docker-service/mysql/data/:/var/lib/mysql/ -v /root/docker-service/mysql/conf/:/etc/mysql/ --name mariadb mariadb:latest\n\n \n\n\n\n***\n\n","tags":["Grafana"],"categories":["Docker"]},{"title":"Docker - å»ºç«‹ MariaDB èªæ³•ç´€éŒ„","url":"/blog.github.io/2022/08/03/Docker-å»ºç«‹MariaDB/","content":"\n\n\n\n# å»ºç«‹æœ¬æ©Ÿé ˆæ›è¼‰çš„ç›®éŒ„\n    \n```sql\n\nmkdir -p /root/docker-service/grafana/etc\n    \nmkdir -p /root/docker-service/grafana/share\n\n```\n\n\n\n    \n    \n# æ‹‰å–æ˜ è±¡\n    \n```sql\n\ndocker pull grafana\n\n```\n\n\n\n    \n\n# åŸ·è¡Œæ˜ è±¡\n    \n```sql\n\ndocker run -d --name grafana -p 3000:3000 grafana/grafana\n\n```\n\n\n\n\n    \n# è¤‡è£½dockerè£¡çš„è¨­å®šæª”åˆ°æœ¬æ©Ÿ\n    \n```sql\n\ndocker cp -a 594649e64f24:/etc/grafana /root/docker-service/grafana/etc/\n  \ndocker cp -a 594649e64f24:/usr/share/grafana /root/docker-service/grafana/share/\n\n```\n\n\n\n    \n    \n# åˆªé™¤container\n    \n```sql\n\ndocker stop container_id\n    \ndocker rm container_id\n\n```\n\n\n\n\n    \n# é‡è·‘è¨­å®šæª” é‡è·‘æ›è¼‰\n    \n```sql\n\ndocker run -d -i -p 3000:3000 \\\n      -e \"GF_SERVER_ROOT_URL=http://grafana.server.name\"  \\\n      -e \"GF_SECURITY_ADMIN_PASSWORD=admin\"  \\\n      -v /root/docker-service/grafana/etc/grafana/grafana.ini:/etc/grafana/grafana.ini \\\n      -v /root/docker-service/grafana/share/grafana/conf/defaults.ini:/usr/share/grafana/conf/defaults.ini \\\n      --net=host \\\n      grafana/grafana\n\n```\n\n\n\n\n***\n\n","tags":["MariaDB"],"categories":["Docker"]},{"title":"Docker - å»ºç«‹ Zabbix åˆ†æ•£å¼ç›£æ§ èªæ³•ç´€éŒ„","url":"/blog.github.io/2022/08/03/Docker-å»ºç«‹Zabbixåˆ†æ•£å¼ç›£æ§/","content":"\n\n\n# å»ºç«‹ Namesppace >> zabbix-net\n    \n```sql\n\ndocker network create --subnet 172.20.0.0/16 --ip-range 172.20.240.0/20 zabbix-net\n\n```\n\n\n\n\n   \n# å»ºç«‹ docker å®¹å™¨å·¥ä½œç›®éŒ„\n    \n```sql\n\nmkdir -p /usr/local/docker/mysql\n\n```\n\n\n\n\n    \n# å»ºç«‹ mysql å®¹å™¨\n\n```sql\n\ndocker run --name mysql-server --hostname=mysql-server -t \\\n          -e MYSQL_DATABASE=\"zabbix\" \\\n          -e MYSQL_USER=\"zabbix\" \\\n          -e MYSQL_PASSWORD=\"zabbix\" \\\n          -e MYSQL_ROOT_PASSWORD=\"123456\" \\\n          --network=zabbix-net \\\n          -v /usr/local/docker/mysql:/var/lib/mysql \\\n          -v /etc/localtime:/etc/localtime \\\n          -d mysql:5.7\n\n```\n\n\n\n\n    \t \n# å»ºç«‹ zabbix-server-mysql å®¹å™¨\n    \n```sql\n\ndocker run --name zabbix-server-mysql --hostname=zabbix-server-mysql -t \\\n          -e DB_SERVER_HOST=\"mysql-server\" \\\n          -e MYSQL_DATABASE=\"zabbix\" \\\n          -e MYSQL_USER=\"zabbix\" \\\n          -e MYSQL_PASSWORD=\"zabbix\" \\\n          -e MYSQL_ROOT_PASSWORD=\"123456\" \\\n          --network=zabbix-net \\\n          --link mysql-server:mysql \\\n          -p 10051:10051 \\\n          -d zabbix/zabbix-server-mysql:alpine-4.0.24\n\n```\n\n\n\n\n \n# å»ºç«‹å‰ç«¯ zabbix-web-nginx-mysqlå®¹å™¨\n    \n```sql\n\ndocker run --name zabbix-web-nginx-mysql --hostname=zabbix-web-nginx-mysql -t \\\n          -e DB_SERVER_HOST=\"mysql-server\" \\\n          -e MYSQL_DATABASE=\"zabbix\" \\\n          -e MYSQL_USER=\"zabbix\" \\\n          -e MYSQL_PASSWORD=\"zabbix\" \\\n          -e MYSQL_ROOT_PASSWORD=\"123456\" \\\n          --network=zabbix-net \\\n          --link mysql-server:mysql \\\n          --link zabbix-server-mysql:zabbix-server \\\n          -p 85:8080 \\\n          -d zabbix/zabbix-web-nginx-mysql:alpine-4.0.24\n\n```\n\n\n\n\n    \n# å»ºç«‹Clientç«¯çš„æ§åˆ¶å…ƒä»¶\n    \n```sql\n\ndocker run --name some-zabbix-agent --hostname=some-zabbix-agent \\\n    \t   -e ZBX_HOSTNAME=\"zabbix-server-agent\" \\\n    \t   -e ZBX_SERVER_HOST=\"zabbix-server-mysql\" \\\n           -e ZBX_METADATA=\"zabbix-server-agent\" \\\n    \t   --network=zabbix-net \\\n    \t   --restart=always \\\n    \t   -p 10050:10050 \\\n    \t   -d zabbix/zabbix-agent\n\n```\n\n\n\n\n\n## ç™»å…¥æª¢æ¸¬ é è¨­:\n    \n## è³¬è™Ÿï¼šAdmin   å¯†ç¢¼ï¼šzabbix\n    \n```sql\n\nConfiguration > Hosts > Create host \n    \n    > Host name : some-zabbix-agent\n    > Groups : Linux servers\n    > IP : 172.20.240.4\n    > Port : 10050\n\n```\n\n\n\n\n***\n\n","tags":["Zabbix"],"categories":["Docker"]},{"title":"Docker - å»ºç«‹ exporter èªæ³•ç´€éŒ„","url":"/blog.github.io/2022/08/03/Docker-å»ºç«‹agent-exporter/","content":"\n\n```sql\n\n    [Node-exporter]\n    docker run -d -p 9100:9100 \\\n      -v \"/proc:/host/proc\" \\\n      -v \"/sys:/host/sys\" \\\n      -v \"/:/rootfs\" \\\n      --net=host \\\n      prom/node-exporter \\\n      --path.procfs /host/proc \\\n      --path.sysfs /host/sys \\\n      --collector.filesystem.ignored-mount-points \"^/(sys|proc|dev|host|etc)($|/)\"\n  \n    [Mysql-exporter]\n     docker run -d  --restart=always  --name mysqld-exporter -p 9104:9104   --net=host  --pid=\"host\" -e DATA_SOURCE_NAME=\"exporter:123456@(172.16.0.222:3307)/\"   bitnami/mysqld-exporter\n\n```\n\n\n***\n\n","tags":["exporter"],"categories":["Docker"]},{"title":"Docker - å»ºç«‹ Prometheus èªæ³•ç´€éŒ„","url":"/blog.github.io/2022/08/03/Docker-å»ºç«‹agent-prometheus/","content":"\n\n```sql\n\n    [prometheus]\n    \n    docker run -d -p 9090:9090 \\\n      -v /root/docker-service/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml \\\n      --name prometheus \\\n      --net=host \\\n      prom/prometheus\n\n```\n\n\n***\n\n","tags":["Prometheus"],"categories":["Docker"]},{"title":"Docker - å»ºç«‹ telegraf èªæ³•ç´€éŒ„","url":"/blog.github.io/2022/08/03/Docker-å»ºç«‹agent-telegraf/","content":"\n\n```sql\n\n    [prometheus]\n    \n    docker run -d -p 9090:9090 \\\n      -v /root/docker-service/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml \\\n      --name prometheus \\\n      --net=host \\\n      prom/prometheus\n\n```\n\n***\n\n","tags":["telegraf"],"categories":["Docker"]},{"title":"HTTP - å¸¸è¦‹ç‹€æ…‹éŒ¯èª¤ç¢¼","url":"/blog.github.io/2022/08/03/HTTP-å¸¸è¦‹ç‹€æ…‹éŒ¯èª¤ç¢¼/","content":"\n***\n***\n\n# HTTP-å¸¸è¦‹ç‹€æ…‹éŒ¯èª¤ç¢¼\n\n***\n***\n\n |  æ„æ€ä»£è¡¨  |  ç‹€æ…‹ç¢¼  |\n |  --------  |  ------  |\n |  è³‡è¨Šå›æ‡‰  |  100â€“199  |\n |  æˆåŠŸå›æ‡‰  |  200â€“299  |\n |  é‡å®šå‘  |  300â€“399  |\n |  ç”¨æˆ¶ç«¯éŒ¯èª¤  |  400â€“499  |\n |  ä¼ºæœå™¨ç«¯éŒ¯èª¤  |  500â€“599  |\n\n***\n***\n    \n\n\n100\t= æ­¤è‡¨æ™‚å›æ‡‰è¡¨æ˜ï¼Œç›®å‰ç‚ºæ­¢çš„ä¸€åˆ‡å®Œå¥½ï¼Œè€Œç”¨æˆ¶ç«¯æ‡‰ç•¶ç¹¼çºŒå®Œæˆè«‹æ±‚\n    \n101\t= æ­¤ç‹€æ…‹ç¢¼ä¹ƒç‚ºç”¨æˆ¶ç«¯ Upgrade (en-US) è«‹æ±‚æ¨™é ­ç™¼é€ä¹‹å›æ‡‰ã€ä¸”è¡¨æ˜ä¼ºæœå™¨äº¦åˆ‡æ›ä¸­ã€‚\n    \n102\t= æ­¤ç‹€æ…‹ç¢¼è¡¨æ˜ä¼ºæœå™¨æ”¶åˆ°ä¸¦è™•ç†è«‹æ±‚ä¸­ï¼Œä½†ç›®å‰æœªæœ‰å›æ‡‰ã€‚\n\n\n\n***\n***\n\n\n    \n200: OK\n    \n201\t= è«‹æ±‚æˆåŠŸä¸”æ–°çš„è³‡æºæˆåŠŸè¢«å‰µå»ºï¼Œé€šå¸¸ç”¨æ–¼ POST æˆ–ä¸€äº› PUT è«‹æ±‚å¾Œçš„å›æ‡‰ã€‚\n    \n202\t= æ­¤è«‹æ±‚å·²ç¶“è¢«æ¥å—ä½†å°šæœªè™•ç†ã€‚\n\n\n\n***\n***\n\n\n    \n300\t= è«‹æ±‚æ“æœ‰ä¸€å€‹ä»¥ä¸Šçš„å›æ‡‰ã€‚\n    \n301\t= è«‹æ±‚è³‡æºçš„ URI å·²è¢«æ”¹è®Šã€‚\n    \n302\t= æ­¤éŸ¿æ‡‰ä»£ç¢¼è¡¨ç¤ºè«‹æ±‚è³‡æºçš„ URI å·²è‡¨æ™‚æ›´æ”¹ã€‚\n\n\n\n***\n***\n\n\n    \n400: æ­¤å›æ‡‰æ„å‘³ä¼ºæœå™¨å› ç‚ºæ”¶åˆ°ç„¡æ•ˆèªæ³•ï¼Œè€Œç„¡æ³•ç†è§£è«‹æ±‚ã€‚\n    \n401\t= éœ€è¦æˆæ¬Šä»¥å›æ‡‰è«‹æ±‚ã€‚å®ƒæœ‰é»åƒ 403ï¼Œä½†é€™è£¡çš„æˆæ¬Šï¼Œæ˜¯æœ‰å¯èƒ½è¾¦åˆ°çš„ã€‚\n    \n403\t= ç”¨æˆ¶ç«¯ä¸¦ç„¡è¨ªå•æ¬Šé™ï¼Œä¾‹å¦‚æœªè¢«æˆæ¬Šï¼Œæ‰€ä»¥ä¼ºæœå™¨æ‹’çµ•çµ¦äºˆæ‡‰æœ‰çš„å›æ‡‰ã€‚ä¸åŒæ–¼ 401ï¼Œä¼ºæœç«¯çŸ¥é“ç”¨æˆ¶ç«¯çš„èº«ä»½ã€‚\n    \n404\t= ä¼ºæœå™¨æ‰¾ä¸åˆ°è«‹æ±‚çš„è³‡æºã€‚\n\n\n\n***\n***\n\n\n    \n500\t= è«‹æ±‚å·²é€²å…¥ä¼ºæœå™¨ï¼Œå¯èƒ½åŸå›  : ç¨‹å¼éŒ¯èª¤ php-error\n    \n501\t= ä¼ºæœå™¨ä¸æ”¯æ´è«‹æ±‚çš„æ–¹æ³•ï¼Œåƒ…æœ‰GETèˆ‡HEADæ˜¯ä¼ºæœå™¨å¿…é ˆæ”¯æ´çš„æ–¹æ³•ã€‚\n    \n502\t= ä½œç‚ºé–˜é“çš„ä¼ºæœå™¨ï¼Œåœ¨ç²å–è™•ç†è«‹æ±‚æ‰€éœ€çš„å›æ‡‰æ™‚ï¼Œå¾—åˆ°ç„¡æ•ˆå›æ‡‰ã€‚\n\n503\t= å¸¸è¦‹åŸå› æ˜¯æœå‹™å™¨å› ç¶­è­·è€Œåœæ©Ÿæˆ–éè¼‰ã€‚\n    \n504\t= ä¼ºæœå™¨ä½œç‚ºé–˜é“å™¨æ™‚ç„¡æ³•åŠæ™‚å¾—åˆ°å›æ‡‰ã€‚å¯èƒ½åŸå›  cloudfront ç¯€é»æœªæ›´æ–°\n    \n505\t= è«‹æ±‚ä½¿ç”¨çš„ HTTP ç‰ˆæœ¬ä¸è¢«ä¼ºæœå™¨æ”¯æ´ã€‚\n\n\n\n***\n***\n\n***\n\n","tags":["HTTP"],"categories":["Web"]},{"title":"InfluxDB - å¸¸ç”¨èªæ³•","url":"/blog.github.io/2022/08/03/InfluxDB-å¸¸ç”¨èªæ³•/","content":"\n\n### è¿”å›å…·æœ‰æœ€æ–°æ—¶é—´æˆ³çš„ç‚¹\n    \n```sql\nORDER BY time DESC\n``` \n\n### æ™‚é–“æ ¼å¼è¨­ç½®\n    \n```sql\n--precision rfc3339\n```\n    \n### åœ¨æŸ¥è©¢èªå¥çš„æœ€å¾ŒåŠ ä¸Štz('Asia/Shanghai')ï¼Œé€™æ¨£æŸ¥è©¢çš„æ™‚é–“çº”æ˜¯ç³¾æ­£çˆ²ä¸­åœ‹æ™‚å€é¡¯ç¤º tz('Asia/Taipei')\n    \n```sql\ntz('Asia/Shanghai')\n```\n    \n### æŸ¥è©¢æŸå€‹æ™‚é–“è¿”å›çš„æ•¸æ“šï¼Œè¨­ç½®æ™‚å€çˆ²ä¸Šæµ·æ™‚å€\n    \n```sql\nselect * from CPU_ALL where time >= '2018-11-23 14:30:39' and time <= '2019-11-23 14:32:32' tz('Asia/Shanghai')\n```\n    \n### æŸ¥è©¢ç‰¹å®šå­—æ®µæ•¸æ“š\n    \n```sql\nSELECT * FROM \"cpu\" WHERE time < now() - 5m and \"cpu\":~ /cpu0/\n```\n    \n### å‰µå»º measurement\n    \n```sql\ninsert myapp,host=127.0.0.1,service=app.service.index qps=1340,rt=1313,cpu=45.23,mem=\"4145m\",load=1.21 \n```\n    \n### æŸ¥çœ‹ä½¿ç”¨è€…\n    \n```sql\nSHOW USERS\n```\n    \n### åˆªé™¤ä½¿ç”¨è€…\n    \n```sql\nDROP USER \"admin-mysql\"\t\n```\n    \n### æ–°å¢ä½¿ç”¨è€…\n    \n```sql\nCREATE USER jdoe WITH PASSWORD '1337password'\n```\n    \n### æ–°å¢ä½¿ç”¨è€…ä¸¦çµ¦äºˆæœ€é«˜æ¬Šé™\n    \n```sql\nCREATE USER jdoe WITH PASSWORD '1337password' WITH ALL PRIVILEGES\n```\n    \n### å–æ¶ˆä½¿ç”¨è€…æœ€é«˜æ¬Šé™\n    \n```sql\nREVOKE ALL PRIVILEGES FROM \"mysql-server\"\n```\n    \n### çµ¦äºˆä½¿ç”¨è€…è®€ mydb çš„æ¬Šé™\n    \n```sql\nGRANT READ ON mydb TO \"mysql-server\"\n```\n    \n### æŸ¥è©¢ç•¶å‰è³‡æ–™åº«ä¸­å«æœ‰çš„è¡¨\n    \n```sql\nSHOW MEASUREMENTS\n```\n    \n### æŸ¥çœ‹ key æ•¸æ“š\n    \n```sql\nSHOW series from pay\n```\n    \n### åˆªé™¤ key\n    \n```sql\nDROP SERIES FROM  WHERE:''\n```    \n    \n### æŸ¥çœ‹è¡¨ä¸­çš„TAG\n    \n```sql\nSHOW TAG KEYS FROM \"system\"\n```\n    \n### æŸ¥çœ‹è¡¨ä¸­çš„TAG-host\n    \n```sql\nSHOW TAG VALUES FROM \"system\" WITH KEY: \"host\" \n```\n    \n### æŸ¥è©¢æ‰€æœ‰ç›£æ§é …ç›®\n    \n```sql\nshow field keys\n```\n    \n### æŸ¥è©¢ç•¶å‰è³‡æ–™åº«ä¸‹æ‰€æœ‰è¡¨çš„ç¬¬ä¸€è¡Œè¨˜éŒ„\n    \n```sql\nSELECT * FROM /.*/ LIMIT 1\n```\n\n\n\n***\n\n","tags":["InfluxDB"],"categories":["InfluxDB"]},{"title":"Iptables - åƒæ•¸ç´€éŒ„","url":"/blog.github.io/2022/08/03/Iptables-å¸¸ç”¨åƒæ•¸/","content":"\n***\n***\n    \n# åƒæ•¸èªªæ˜ï¼š\n\n***\n***\n\n\n    \n-F ï¼šæ¸…é™¤æ‰€æœ‰çš„å·²è¨‚å®šçš„è¦å‰‡ï¼›\n    \n-X ï¼šæ®ºæ‰æ‰€æœ‰ä½¿ç”¨è€…å»ºç«‹çš„ tables ï¼›\n    \n-Z ï¼šå°‡æ‰€æœ‰çš„ chain çš„è¨ˆæ•¸èˆ‡æµé‡çµ±è¨ˆéƒ½æ­¸é›¶ \n    \n-N ï¼šå»ºç«‹æ–°çš„è¦å‰‡éˆ(chain)\n    \n-E ï¼šæ›´æ”¹æŒ‡å®šçš„è¦å‰‡éˆ(chain)åç¨±\n    \n-A ï¼šè¿½åŠ è¦å‰‡:æ–°å¢è¦å‰‡åˆ°æŸå€‹è¦å‰‡éˆä¸­ï¼Œè©²è¦å‰‡å°‡æœƒæˆç‚ºè¦å‰‡éˆä¸­çš„æœ€å¾Œä¸€æ¢è¦å‰‡\n    \n-R ï¼šä¿®æ”¹è¦å‰‡-->iptables -R INPUT 1 -s 192.168.12.0 -j DROP å–ä»£ç¾è¡Œè¦å‰‡ï¼Œé †åºä¸è®Š(1æ˜¯ä½ç½®)\n    \n-I ï¼šæ’å…¥è¦å‰‡-->iptables -I INPUT 1 --dport 80 -j ACCEPT æ’å…¥ä¸€æ¢è¦å‰‡ï¼ŒåŸæœ¬ä½ç½®ä¸Šçš„è¦å‰‡å°‡æœƒå¾€å¾Œç§»å‹•ä¸€å€‹é †ä½\n    \n-L ï¼šæŸ¥çœ‹è¦å‰‡-->iptables -L INPUT åˆ—å‡ºè¦å‰‡éˆä¸­çš„æ‰€æœ‰è¦å‰‡\n    \n-P ï¼špolicy , å®šç¾©éæ¿¾æ”¿ç­–ã€‚ ä¹Ÿå°±æ˜¯æœªç¬¦åˆéæ¿¾æ¢ä»¶ä¹‹å°åŒ…ï¼Œé è¨­çš„è™•ç†æ–¹å¼\n    \n-t ï¼šåƒæ•¸å¾Œè·Ÿä¸Šè¦å–®ç¨æŸ¥çœ‹çš„è¡¨å $IPTABLES -F -t nat (æ¸…ç©ºnatè¡¨)\n    \n-p ï¼šå”å®šï¼štcpã€updã€icmp...\n\n\n\n***\n***\n\n\n    \n-m ï¼šæ¨¡çµ„ï¼šstateã€macã€limitã€ownerã€multiport...\n    \n-m state --state :\n    \næ–°çš„ï¼ˆNEWï¼‰ â€” æŸå€‹å°åŒ…è«‹æ±‚é–‹å•Ÿæ–°çš„é€£ç·šï¼Œä¾‹å¦‚ HTTP è«‹æ±‚ã€‚\n    \nå·²å»ºç«‹ï¼ˆESTABLISHEDï¼‰ â€” å±¬æ–¼æŸå€‹ç¾æœ‰é€£ç·šçš„å°åŒ…ã€‚\n    \nç›¸é—œçš„ï¼ˆRELATEDï¼‰ â€” å±¬æ–¼ç¾æœ‰é€£ç·šçš„å°åŒ…ï¼Œè«‹æ±‚é–‹å•Ÿä¸€å€‹æ–°çš„é€£ç·šï¼Œä¾‹å¦‚è¢«å‹•å¼ FTP çš„é€£ç·šï¼Œå…¶é€£æ¥åŸ ç‚º 20ï¼›ä½†è³‡æ–™å‚³è¼¸åŸ å‰‡æ˜¯ 1024 ä»¥ä¸Šï¼Œæœªä½¿ç”¨çš„é€£æ¥åŸ ã€‚\n    \nç„¡æ•ˆçš„ï¼ˆINVALIDï¼‰ â€” åœ¨é€£çµè¿½è¹¤è¡¨ä¸­ï¼Œä¸å±¬æ–¼ä»»ä½•é€£ç·šçš„å°åŒ…ã€‚\n    \n\n\n***\n***\n\n\n    \nlo  : åªè¦æ˜¯æœ¬æœºè¿›ç¨‹å†…ç›¸äº’è®¿é—®çš„ï¼Œéƒ½ä¼šå»åˆ°loè¿™å¼ ç½‘å¡ä¸Šï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨IPæ—¶å¯¹äºiptablesé€‰æ‹©çš„æ˜¯eth0è¿™æ ·çš„ç½‘å¡ï¼Œè¦æ•è·æœ¬æœºæ—¶æ˜¯loè¿™ä¸ªç½‘å¡\n    \n-o ï¼šç¶²è·¯ä»‹é¢ï¼š-o ç‚º out ç¶²è·¯ä»‹é¢å°±å¡« eth0... (ç”¨æ–¼ POSTROUTINGã€OUTPUTã€FORWARD)\n    \n-i ï¼šç¶²è·¯ä»‹é¢ï¼š-i ç‚º in ç¶²è·¯ä»‹é¢å°±å¡« eth0... (ç”¨æ–¼ PREROUTINGã€INPUTã€FORWARD)\n    \n-s ï¼šä¾†æºï¼šå¯ç‚º IP Addressã€IP ç¶²æ®µã€ç¶²åŸŸåç¨±\n    \n--sportï¼šæŒ‡å®šå°åŒ…ä¾†æº Portã€Port Range (é…åˆ -p tcpã€-p udp)\n    \n-d ï¼šç›®çš„åœ°ï¼šå¯ç‚º IPã€IP ç¶²æ®µã€ç¶²åŸŸåç¨±\n    \n--dportï¼šæŒ‡å®šå°åŒ…ç›®çš„åœ° Portã€Port Range (é…åˆ -p tcpã€-p udp)\n    \n-j ï¼šæ”¿ç­– / ç›®æ¨™ï¼šACCEPTã€DROPã€REJECTã€SNATã€DNATã€MASQUERADEã€REDIRECTã€RETURN...\n    \n\n\n***\n***\n\n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"Iptables - å¸¸ç”¨èªæ³•","url":"/blog.github.io/2022/08/03/Iptables-å¸¸ç”¨èªæ³•/","content":"\n    \n# iptables -A [è¦å‰‡] [-s è¦å‹•ä½œçš„IP] [-d ç›®çš„åœ°IP] [-p å”å®š] [-j å‹•ä½œ]\n\n    \n### æŸ¥çœ‹ç›®å‰è¨­å®š\n    \n```sql\niptables -nL\n```\n    \n### æ¸…é™¤æ‰€æœ‰è¦å‰‡éˆä¸­çš„è¦å‰‡\n\n`(ä¸èƒ½é€éSSHæ“ä½œ,ä¸ç„¶æœƒé–ä½)`    \n\n```sql\niptables -F\n```\n    \n### æ¸…é™¤ä½¿ç”¨è€…è‡ªè¨‚éˆä¸­çš„è¦å‰‡\n\n`(ä¸èƒ½é€éSSHæ“ä½œ,ä¸ç„¶æœƒé–ä½)`\n    \n```sql\niptables -X\n```\n    \n### æ¸…é™¤mangleè¡¨ä¸­ï¼Œæ‰€æœ‰è¦å‰‡éˆä¸­çš„è¦å‰‡\n\n`(ä¸èƒ½é€éSSHæ“ä½œ,ä¸ç„¶æœƒé–ä½)`\n    \n```sql\niptables -F -t mangle\n```\n    \n### æŸ¥çœ‹IPé–äº†å¹¾å€‹\n    \n```sql\niptables -n --list pig|wc -l\n```\n    \n### æŸ¥çœ‹æ­¤IPæœ‰æ²’æœ‰è¢«é–åœ¨è£¡é¢\n    \n```sql\niptables -nL |grep XXX\n```\n    \n### å¢åŠ è¦å‰‡exceptå…è¨±æ­¤IP 80 porté€šé\n    \n```sql\niptables -A except -p tcp -s XXX/32 --dport 80 -j ACCEPT\n```\n    \n### åˆªé™¤è¦å‰‡pigæ­¤IP\n    \n```sql\niptables -D pig -s XXX -j DROP\n```\n    \n### æŸ¥çœ‹INPUTè£¡çš„è¦å‰‡æ­¤IP\n    \n```sql\niptables -L INPUT -n --line-numbers |grep \"XXX\"\n```\n    \n### ä»¥æ•¸å­—çš„æ–¹å¼é¡¯ç¤ºpigçš„ç¸½æ•¸\n    \n```sql\niptables -n --list pig|wc -l\n```\n    \n### æ–°å»ºæ©Ÿå™¨åŸ·è¡Œå¢åŠ ç«ç‰†è¦å‰‡\n    \n```sql\n./root/iptables/ipfish.sh\n```\n    \n### iptables åˆªé™¤æŸè¡Œè¦å‰‡\n    \n### å¢åŠ æ­¤è¡Œè¦å‰‡\n    \n```sql\niptables -A INPUT -s 123.123.123.123 -j DROP # å°‡ 123.123.123.123 å…¨éƒ¨æ“‹æ‰\n```\n    \n### åˆ—å‡ºæ‰€æœ‰è¦å‰‡ï¼Œå‰é¢åŠ ä¸Šè¡Œè™Ÿ\n    \n```sql\niptables -L INPUT -n --line-numbers\n```\n    \n### è¦åˆªé™¤æŸä¸€è¡Œçš„è¦å‰‡\n    \n```sql\niptables -D INPUT 1 # è‹¥åªæœ‰ä¸Šè¿°é‚£è¡Œï¼Œé‚£å°±æ˜¯ 1\niptables -D INPUT 3 # è‹¥æœ‰å¤šè¡Œï¼Œåªè¦åˆªé™¤ç¬¬ä¸‰è¡Œ\n```\n    \n### ä¿å­˜iptablesè¦å‰‡\n    \n```sql\niptables-save >rules-0\n```\n\n***\n\n","tags":["Iptables"],"categories":["Iptables"]},{"title":"Linux - Logrotate åƒæ•¸","url":"/blog.github.io/2022/08/03/Linux-Logrotate_åƒæ•¸/","content":"\n***\n***\n\n`daily` **æŒ‡å®šè½‰å„²é€±æœŸçˆ²æ¯å¤©**\n\n***\n***\n\n`weekly` **æŒ‡å®šè½‰å„²é€±æœŸçˆ²æ¯é€±**\n\n***\n***\n\n`monthly` **æŒ‡å®šè½‰å„²é€±æœŸçˆ²æ¯æœˆ**\n\n***\n***\n\n`rotate count` **æŒ‡å®šæ—¥èªŒæ–‡ä»¶åˆªé™¤ä¹‹å‰è½‰å„²çš„æ¬¡æ•¸ï¼Œ0 æŒ‡æ²’æœ‰å‚™ä»½ï¼Œ5 æŒ‡ä¿ç•™ 5 å€‹å‚™ä»½**\n\n***\n***\n\n`tabooext [+] list` **è®“ logrotate ä¸è½‰å„²æŒ‡å®šæ“´å±•åçš„æ–‡ä»¶ï¼Œç¼ºçœçš„æ“´å±•åæ˜¯ï¼š.rpm-orig, .rpmsave, v, å’Œ ï½**\n\n***\n***\n\n`missingok` **åœ¨æ—¥èªŒè¼ªå¾ªæœŸé–“ï¼Œä»»ä½•éŒ¯èª¤å°‡è¢«å¿½ç•¥ï¼Œä¾‹å¦‚ â€œæ–‡ä»¶ç„¡æ³•æ‰¾åˆ°â€ ä¹‹é¡çš„éŒ¯èª¤ã€‚**\n\n***\n***\n\n`size size` **ç•¶æ—¥å¿—æ–‡ä»¶åˆ°é”æŒ‡å®šçš„å¤§å°æ™‚æ‰è½‰å„²ï¼Œbytes (ç¼ºçœ) åŠ KB (sizek) æˆ– MB (sizem)**\n\n***\n***\n\n`compress` **é€šé gzip å£“ç¸®è½‰å„²ä»¥å¾Œçš„æ—¥èªŒ**\n\n***\n***\n\n`nocompress` **ä¸å£“ç¸®**\n\n***\n***\n\n`copytruncate` **ç”¨æ–¼é‚„åœ¨æ‰“é–‹ä¸­çš„æ—¥èªŒæ–‡ä»¶ï¼ŒæŠŠç•¶å‰æ—¥èªŒå‚™ä»½ä¸¦æˆªæ–·**\n\n***\n***\n\n`nocopytruncate` **å‚™ä»½æ—¥èªŒæ–‡ä»¶ä½†æ˜¯ä¸æˆªæ–·**\n\n***\n***\n\n`create mode owner group`  **è½‰å„²æ–‡ä»¶ï¼Œä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼å‰µå»ºæ–°çš„æ—¥èªŒæ–‡ä»¶**\n\n***\n***\n\n`nocreate` **ä¸å»ºç«‹æ–°çš„æ—¥èªŒæ–‡ä»¶**\n\n***\n***\n\n`delaycompress` **å’Œ compress ä¸€èµ·ä½¿ç”¨æ™‚ï¼Œè½‰å„²çš„æ—¥èªŒæ–‡ä»¶åˆ°ä¸‹ä¸€æ¬¡è½‰å„²æ™‚æ‰å£“ç¸®**\n\n***\n***\n\n`nodelaycompress` **è¦†è“‹ delaycompress é¸é …ï¼Œè½‰å„²åŒæ™‚å£“ç¸®ã€‚**\n\n***\n***\n\n`errors address`  **å°ˆå„²æ™‚çš„éŒ¯èª¤ä¿¡æ¯ç™¼é€åˆ°æŒ‡å®šçš„ Email åœ°å€**\n\n***\n***\n\n`ifempty` **å³ä½¿æ˜¯ç©ºæ–‡ä»¶ä¹Ÿè½‰å„²ï¼Œé€™å€‹æ˜¯ logrotate çš„ç¼ºçœé¸é …ã€‚**\n\n***\n***\n\n`notifempty` **å¦‚æœæ˜¯ç©ºæ–‡ä»¶çš„è©±ï¼Œä¸è½‰å„²**\n\n***\n***\n\n`mail address`  **æŠŠè½‰å„²çš„æ—¥èªŒæ–‡ä»¶ç™¼é€åˆ°æŒ‡å®šçš„ E-mail åœ°å€**\n\n***\n***\n\n`nomail`  **è½‰å„²æ™‚ä¸ç™¼é€æ—¥èªŒæ–‡ä»¶**\n\n***\n***\n\n`olddir directory` **å„²å¾Œçš„æ—¥èªŒæ–‡ä»¶æ”¾å…¥æŒ‡å®šçš„ç›®éŒ„ï¼Œå¿…é ˆå’Œç•¶å‰æ—¥èªŒæ–‡ä»¶åœ¨åŒä¸€å€‹æ–‡ä»¶ç³»çµ±**\n\n***\n***\n\n`noolddir` **è½‰å„²å¾Œçš„æ—¥èªŒæ–‡ä»¶å’Œç•¶å‰æ—¥èªŒæ–‡ä»¶æ”¾åœ¨åŒä¸€å€‹ç›®éŒ„ä¸‹**\n\n***\n***\n\n`prerotate/endscript` **åœ¨è½‰å„²ä»¥å‰éœ€è¦åŸ·è¡Œçš„å‘½ä»¤å¯ä»¥æ”¾å…¥é€™å€‹å°ï¼Œé€™å…©å€‹é—œéµå­—å¿…é ˆå–®ç¨æˆè¡Œ**\n\n***\n***\n\n\n\n**Log ä¿ç•™ä¸‰å¤© , åŸ·è¡Œå®Œç•¢ , Nginx é‡å•Ÿ**\n\n\n    \n```sql\n/usr/local/web/nginx/logs/*.acc {\n        daily\n        rotate 3\n        create\n        sharedscripts\n        postrotate\n             /usr/local/web/nginx/sbin/nginx -s reload\n        endscript\n    }\n```\n\n\n\n\n***\n\n","tags":["Logrotate"],"categories":["Linux"]},{"title":"Linux - Crontab å¯¦ç¾ä»¥ç§’ç‚ºå–®ä½æ’ç¨‹","url":"/blog.github.io/2022/08/03/Linux-Crontabå¯¦ç¾ä»¥ç§’ç‚ºå–®ä½æ’ç¨‹/","content":"\n***\n***\n\n# æ–¹æ³•ä¸€\t(è¨­ç½®crontab)\n\n***\n***\n\n\n    \nEX:\t(æ¯10ç§’åŸ·è¡Œä¸€æ¬¡)\n * * * * * php /root/test/php/crontab/tolog.php\n * * * * * sleep 10; php /root/test/php/crontab/tolog.php\n * * * * * sleep 20; php /root/test/php/crontab/tolog.php\n * * * * * sleep 30; php /root/test/php/crontab/tolog.php\n * * * * * sleep 40; php /root/test/php/crontab/tolog.php\n * * * * * sleep 50; php /root/test/php/crontab/tolog.php\n \n\n\n***\n***\n    \n# æ–¹æ³•äºŒ   è¨­ç½®è…³æœ¬ shell-script\n\n***\n***\n    \n`EX:æœ€å¤šæ¯2ç§’åŸ·è¡Œ`\n    \n ```sql\n #/bin/bash\n    \nstep=2 #é–“éš”çš„ç§’æ•¸\nfor (( i=0; i < 60; i=(i+step) )); do\n    \nXXX å‹•ä½œ XXX\n    \nsleep $step\ndone\n    \nexit 0\n```\n\n***\n***\n\n***\n\n","tags":["Crontab"],"categories":["Linux"]},{"title":"Linux - Nodejs å®‰è£ç´€éŒ„","url":"/blog.github.io/2022/08/03/Linux-Nodejs-å®‰è£/","content":"\n***\n***\n\n```sql\nyum install epel-release\n\nyum install nodejs\n\nwget https://nodejs.org/download/release/v8.9.4/node-v8.9.4-linux-x64.tar.gz\n\ntar --strip-components 1 -xzvf node-v* -C /usr/local\n\nnode -v\n\nnpm -v\n```\n\n***\n***\n\n\n***\n\n","tags":["NodeJS"],"categories":["Linux"]},{"title":"Linux - VIM å¸¸ç”¨åƒæ•¸ & å¿«æ·éµ","url":"/blog.github.io/2022/08/03/Linux-VIMå¸¸ç”¨å‘½ä»¤/","content":"\n***\n***\n\n## æ°¸ä¹…æ–°å¢ æ¨™è¨»è¡Œæ•¸\n\n```sql\nvim /etc/vimrc\n```\n\n### åŠ ä¸Šåƒæ•¸ `set nu`\n\n```sql\nset nu\n```\n\n***\n***\n\n## VIM å¸¸ç”¨ç·¨è¼¯å¿«æ·éµ\n\n***\n***\n\n### è¤‡è£½ `y` å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹:\n\n| å¿«æ·å‘½ä»¤ | æ„æ€è§£èªª |\n| --- | --- |\n| y | åœ¨ä½¿ç”¨ v æ¨¡å¼é¸å®šäº†æŸä¸€å¡Šçš„æ™‚å€™,è¤‡è£½é¸å®šå¡Šåˆ°ç·©è¡å€ç”¨ |\n| yy | è¤‡è£½æ•´è¡Œ( nyy æˆ–è€… yny ,è¤‡è£½ n è¡Œ , n ç‚ºæ•¸å­—) |\n| y^ | è¤‡è£½ç•¶å‰åˆ°è¡Œé ­çš„å…§å®¹ |\n| y$ | è¤‡è£½ç•¶å‰åˆ°è¡Œå°¾çš„å…§å®¹ |\n| yw | è¤‡è£½ä¸€å€‹word (nyw æˆ–è€… ynw , è¤‡è£½ n å€‹ word , n ç‚ºæ•¸å­—) |\n| yG | è¤‡è£½è‡³æª”å°¾ (nyG æˆ–è€… ynG , è¤‡è£½åˆ°ç¬¬ n è¡Œ,ä¾‹å¦‚ 1yG æˆ–è€… y1G , è¤‡è£½åˆ°æª”å°¾)\n   \n***\n***\n\n### å‰ªä¸‹ `d` å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹:\n\n| å¿«æ·å‘½ä»¤ | æ„æ€è§£èªª |\n| --- | --- |\n| d | å‰ªä¸‹é¸å®šå¡Šåˆ°ç·©è¡å€ |\n| dd | å‰ªä¸‹æ•´è¡Œ |\n| d^ | å‰ªä¸‹è‡³è¡Œé¦– |\n| d$ | å‰ªä¸‹è‡³è¡Œå°¾ |\n| dw | å‰ªä¸‹ä¸€å€‹word |\n| dG | å‰ªä¸‹è‡³æª”å°¾ |\n\n***\n***\n\n### è²¼ä¸Š `p` å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹:\n    \n| å¿«æ·å‘½ä»¤ | æ„æ€è§£èªª |\n| --- | --- |\n| p | å°å¯« p ä»£è¡¨è²¼è‡³éŠæ¨™å¾Œ |\n| P | å¤§å¯«Pä»£è¡¨è²¼è‡³éŠæ¨™å‰ |    \n\n***\n***\n    \n\n  \n### æ³¨: \n    \n#### åœ¨æ­£å‰‡è¡¨ç¤ºå¼ä¸­,^è¡¨ç¤ºåŒ¹é…å­—ä¸²çš„é–‹å§‹ä½ç½®,$è¡¨ç¤ºåŒ¹é…å­—ä¸²çš„çµæŸä½ç½®ã€‚ \n    \n#### å‘½ä»¤å‰é¢åŠ æ•¸å­—è¡¨ç¤ºé‡è¤‡çš„æ¬¡æ•¸,åŠ å­—æ¯è¡¨ç¤ºä½¿ç”¨çš„ç·©è¡å€åç¨±ã€‚ä½¿ç”¨è‹±æ–‡å¥è™Ÿ\".\"å¯ä»¥é‡è¤‡ä¸Šä¸€å€‹å‘½ä»¤ã€‚ \n    \n#### åœ¨è¤‡è£½è²¼ä¸Šæ™‚,å¦ä¸€çµ„å¸¸ç”¨çš„å‘½ä»¤æ˜¯u(æ’¤éŠ·æ“ä½œ),U(æ’¤éŠ·æŸä¸€è¡Œæœ€è¿‘æ‰€æœ‰ä¿®æ”¹),Ctrl+R(é‡åš),é€™äº›åŠŸèƒ½ä¸»è¦æ˜¯vimä¸­çš„,viä¸­ç•¥æœ‰å·®åˆ¥\n    \n\n\n***\n\n","tags":["VIM"],"categories":["Linux"]},{"title":"Linux - ä½¿ç”¨ PuTTYgen ç”¢ç”Ÿ SSH é€£ç·šå…¬é‘°èˆ‡ç§é‘°","url":"/blog.github.io/2022/08/03/Linux-ä½¿ç”¨putty-keygenç”¢ç”ŸSSH-key/","content":"\n<!--more-->\nç”¨æ–¼ IDE ç·¨è¼¯å™¨çš„å¸³è™Ÿ (ç¨‹å¼é€£)\n\n***\n***\n\n### Linux æ©Ÿå™¨è£¡æ–°å¢ ` ä½¿ç”¨è€… ide å¸³è™Ÿ `\n\n```sql\n\nuseradd lauranceide\n    \nsu - lauranceide\n    \nssh-keygen\n\n```\n    \n` ssh-keygen ä¸€è·¯æŒ‰ `Enter` å³å¯`\n\n***\n***\n\n### (Windows ä»‹é¢) æ‰“é–‹ putty-keygen.exe ä¸¦æŒ‰ä¸‹ Generate \n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/QpLgnSe6OIi1ZD8.png)\n\n***\n***\n\n#### å°‡ç”¢ç”Ÿçš„ key è²¼å…¥å‰›å‰›å‰µå»º ide å¸³è™Ÿå®¶ç›®éŒ„ä¸­ .ssh çš„ç›®éŒ„è£¡ , ä¸¦å‘½åç‚º authorized_keys\n\n***\n***\n\n#### ä½¿ç”¨ putty-keygen.exe è£½ä½œ authorized_keyså…§å®¹ , æŒ‰ä¸‹ Generate (æ»‘é¼ åœ¨é€²åº¦èª¿ä¸Šæ¸¸ç§»æœƒå¿«ä¸€é»)\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/2C8QgMSd1GkxO7K.png)\n\n***\n***\n\n#### è·‘å®Œå¾Œ è¤‡è£½ä¸Šé¢çš„å…§å®¹è²¼é€²å¸³è™Ÿçš„ `.ssh/authorized_keys` å†çµ¦æ¬Šé™ 600\n\n```sql\nchmod 600 .ssh/authorized_keys\n```\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/NxDliY8PqfugZ4S.png)\n\n***\n***\n    \n#### æŒ‰ä¸‹ `save pubilc key` å„²å­˜æª”æ¡ˆ  `lauranceide.pub`\n\n#### æŒ‰ä¸‹ `save private key` å„²å­˜æª”æ¡ˆ  `lauranceide.ppk`\n\n***\n***\n\n\n    \n#### å°‡ `lauranceide.ppk` è½‰æª”æˆ `lauranceide.pem`\n\n##### ` å…ˆ import_key lauranceide.ppk å¾Œåœ¨ Export_key lauranceide.pem`\n\n\n    \n##### (root) ç™»å…¥ Linux å°‡å¸³è™Ÿç™»å…¥çš„æ¬Šé™æ”¹ç‚º nologin\n    \n```sql\nvim  /etc/passwd \t\n```\n\n##### å°‡ `/bin/bash` æ”¹ç‚º `/sbin/nologin`\n\n```sql\nlauranceide:x:1006:1009::/home/lauranceide: /sbin/nologin\n```\n\n\n***\n\n","tags":["PuTTYgen"],"categories":["Linux"]},{"title":"Linux - å¦‚ä½•åˆªé™¤æ®­å±ç¨‹åº","url":"/blog.github.io/2022/08/03/Linux-åˆªé™¤æ®­å±ç¨‹åº/","content":"\n***\n***\n\n### æ‰¾å‡ºæ®­å±ç¨‹åº\n\n```sql\nps -Al | grep -w Z\n```\n    \n***\n***\n    \n### å¾æ‰¾åˆ°çš„ç¨‹åºè³‡è¨Šä¸­ï¼Œåˆ†æå‡º `pid`\n    \n```sql\nps -Al | grep -w Z | awk '{print $4}'\n```\n\n***\n***\n    \n### å°‡åˆ†æå‡ºä¾†çš„ `pid` ä¸²é€£æˆä¸€å€‹é™£åˆ—\n    \n```sql\nps -Al | grep -w Z | awk '{print $4}' | xargs\n```\n\n***\n    ***\n        \n### å°‡é™£åˆ—ä¸­çš„æ¯ä¸€å€‹ pid çš„ç¨‹åºï¼Œåˆ©ç”¨ kill ä¾†çµ‚æ­¢ã€åˆªé™¤å®ƒå€‘\n    \n```sql\nps -Al | grep -w Z | awk '{print $4}' | xargs sudo kill -9\n```\n\n***\n***\n    \n### è‹¥å†è·‘ä¸€æ¬¡ ps -Al | grep -w Z é‚„æ˜¯çœ‹åˆ°æœ‰ zombie process\n\n***\n***\n    \n#### å…ˆç¢ºèªçˆ¶ç¨‹åºè³‡è¨Š\n    \n```sql\nps -Al | grep -w Z | awk '{print $5}' | xargs ps -lp\n```\n\n***\n***\n    \n#### å†ç¢ºèªç›¸ä¾çš„å­ç¨‹åºè³‡è¨Š\n    \n```sql\nps -Al | grep -w Z | awk '{print $5}' | xargs ps -l --ppid\n```\n\n***\n***\n    \n#### å¦‚æœå…¶ä¸­æ²’æœ‰é‡è¦ç¨‹åºæˆ–æ˜¯å…¶ä»–æ­£åœ¨åŸ·è¡Œä¸­ç¨‹åºçš„è©±ï¼Œå°±å¯ä»¥å®‰å¿ƒåœ°å°‡çˆ¶ç¨‹åºçµ¦åˆªé™¤æ‰\n    \n```sql\nps -Al | grep -w Z | awk '{print $5}' | xargs sudo kill -9\n```\n\n***\n***\n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Linux - æ–°å¢ SWAP è¨˜æ†¶é«”","url":"/blog.github.io/2022/08/03/Linux-æ–°å¢swapè¨˜æ†¶é«”/","content":"\n***\n***\n\n### è§£æ±º `RAM ä¸è¶³` å•é¡Œ - åœ¨ LINUX `æ–°å¢ SWAP è™›æ“¬è¨˜æ†¶é«”`\n\n***\n***\n    \n#### ä»¥ä¸€å° 1 Gb è¨˜æ†¶é«”çš„ä¸»æ©Ÿè€Œè¨€ï¼Œæˆ‘å€‘åœ¨é€™è£¡å»ºç«‹ 2Gçš„ Swap è™›æ“¬è¨˜æ†¶é«”å„²å­˜ç©ºé–“\n    \n```sql\ncd /\n  \nfallocate -l 2G swapfile\n    \nchmod 600 swap-sda1\n```\n\n***\n***\n    \n#### åˆå§‹åŒ– Swap ç©ºé–“\n\n***\n***\n    \n#### é€é `mkswap` å°‡ `/swapfile å»ºç«‹ç‚º Linux äº¤æ›å€`ï¼Œè®“é€™å€‹è³‡æ–™å¤¾è¢«åˆ†å‰²ç‚ºä¸€å€‹ç£ç¢Ÿå€\n    \n```sql\nmkswap /swapfile\n```\n\n***\n***\n    \n#### å•Ÿå‹•äº¤æ›å€\n    \n```sql\nswapon /swapfile\n```\n\n***\n***\n    \n#### é–‹æ©Ÿå•Ÿå‹•\n    \n```sql\nswapon -s\n```\n\n***\n***\n    \n#### å¦‚æœä¸ä½¿ç”¨ï¼Œå¯é€éä»¥ä¸‹æŒ‡ä»¤çµ‚æ­¢ï¼š\n    \n```sql\nswapoff /swapfile\n```\n\n***\n***\n    \n#### å¦‚æœæƒ³å…ˆä¸»è¦ä»¥å¯¦é«”è¨˜æ†¶é«”ç‚ºä¸»ï¼Œswap ç‚ºè¼”ï¼Œå¯ä»¥é€é `swappiness` ä¾†è¨­å®šåˆ†é…æ–¹å¼\n    \n```sql\nsysctl vm.swappiness=10 >> é è¨­é€šå¸¸æœƒæ˜¯ 60 ï¼ˆå€¼è¶Šé«˜ï¼Œè¡¨ç¤ºæœƒè¶Šå„ªå…ˆä½¿ç”¨ swapï¼Œç¯„åœ 0~100ï¼‰\n```\n\n***\n***\n    \n#### é–‹æ©Ÿè‡ªå‹•è¨­å®š\n    \n```sql\necho \"vm.swappiness=10\" >> /etc/sysctl.conf\"\n```\n\n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"Linux - å»ºç«‹ MFA äºŒéšæ®µèªè­‰","url":"/blog.github.io/2022/08/03/Linux-æ©Ÿå™¨ç™»å…¥äºŒéšæ®µèªè­‰MFA/","content":"\n***\n***\n\n## æ‰‹æ©Ÿå…ˆä¸‹è¼‰ APP\n    \n### app store æœç´¢ : Twilio Authy\n\n### googleplay store  æœç´¢ : Twilio Authy 2-Factor Authentication\n\n***\n***\n\n## è¼¸å…¥ä½¿ç”¨è¦è¨­å®šçš„å¸³è™Ÿè¼¸å…¥\n\n### åˆ‡æ›æˆä½¿ç”¨è€… laurance\n    \n```sql\nsu - nadal\n```\n\n### åŸ·è¡Œèªæ³• `google-authenticator`\n    \n### æŒ‰ `y` æŒ‰åˆ°çµæŸ > å¸³è™Ÿå®¶ç›®éŒ„ä¸‹é¢æœƒæœ‰ä¸€æ”¯ `.google_authenticator`\n\n```sql\ngoogle-authenticator\n\n>> y\n\n>> y\n\n>> y\n\n. . . . . \n```\n\n### å»ºç«‹è©²å¸³è™Ÿå­˜ `MFAé©—è­‰` çš„ç›®éŒ„\n\n```sql\nmkdir /home/gauth/laurance/\n```\n    \n### å°‡ `.google_authenticator` ç§»å‹•åˆ° `/home/gauth/laurance/` ä¸‹é¢\n\n```sql\nmv  /home/laurance/.google_authenticator /home/gauth/laurance/\n``` \n\n### æ¬Šé™æ”¹çµ¦ `root`\n\n```sql\nchown root.root /home/gauth/laurance/.google_authenticator\n```\n\n***\n***\n\n## å°‡ä¸Šé¢é¡¯ç¤ºçš„ç¶²å€ è¼¸å…¥åˆ°ç€è¦½å™¨å³å¯å¾—åˆ°ä¸€å¼µ `QR Code`\n\n***\n\n### ä½¿ç”¨ `APP` æƒç„é‚£å¼µ `QR Code` å³å¯æˆåŠŸåŠ å…¥è¨­å®š\n\n***\n***\n    \n## ä½¿ç”¨ `XShell` ç™»å…¥æ™‚\n\n***\n    \n### é¸æ“‡ä¸‹é¢çš„ keyboard Interactive ç™»å…¥\n\n***\n    \n### ç¬¬ä¸€æ¬¡è¼¸å…¥å¯†ç¢¼ ç¬¬äºŒæ¬¡è¼¸å…¥ APPé¡¯ç¤ºçš„å…­ä½æ•¸å­— å³å¯ç™»å…¥\n    \n***\n***        \n\n\n \n#### æ©Ÿå™¨æœå‹™å®‰è£æ•™å­¸åƒè€ƒ:\n\nhttps://shenyu.me/2016/09/05/centos-google-authenticator.html\n\n\n\n***\n***\n    \n## æ©Ÿå™¨æœå‹™å®‰è£æ­¥é©Ÿ\n\n***\n***\n    \n### å®‰è£ä¾è³´å¥—ä»¶\n    \n```sql\nyum -y install gcc make pam-devel libpng-devel libtool wget git\n```\n    \n### ç›´æ¥å®‰è£ `EPEL æº RPM åŒ…`\n\n***\n\n #### CentOS 6\n```sql\nrpm -Uvh http://mirrors.ustc.edu.cn/fedora/epel/epel-release-latest-6.noarch.rpm\n```\n    \n #### CentOS 7\n    \n```sql\nrpm -Uvh http://mirrors.ustc.edu.cn/fedora/epel/epel-release-latest-7.noarch.rpm\n```\n    \n### å®‰è£Qrencodeï¼Œè°·æ­Œèº«ä»½é©—è­‰å™¨éœ€è¦èª¿ç”¨è©²ç¨‹åºç”ŸæˆäºŒç¶­ç¢¼ä¸¦é¡¯ç¤º\n    \n```sql\nyum install -y qrencode\n```    \n    \n### å®‰è£è°·æ­Œèº«ä»½é©—è­‰å™¨\n    \n```sql\ngit clone https://github.com/google/google-authenticator-libpam.git\n    \ncd google-authenticator-libpam/\n```    \n    \n### ç·¨è­¯ä¸¦å®‰è£\n    \n```sql\n./bootstrap.sh\n  \n./configure --prefix=/usr/local/google-authenticator\n    \nmake && make install\n```    \n    \n### è¤‡è£½ google èº«ä»½é©—è­‰å™¨ pam æ¨¡å¡Šåˆ°ç³»çµ±ä¸‹\n    \n```sql\ncp /usr/local/google-authenticator/lib/security/pam_google_authenticator.so /lib64/security/\n```\n    \n### å»ºç«‹æŒ‡ä»¤é€£çµåˆ°ç’°å¢ƒè®Šæ•¸\n    \n```sql\nln -s /usr/local/google-authenticator/bin/google-authenticator  /usr/bin/\n```    \n    \n### é…ç½® `/etc/pam.d/sshd`\n\n### åœ¨ auth       substack     password-auth ä¸‹é¢\n    \n### æ–°å¢\n\n```sql    \nauth       required     pam_google_authenticator.so user=root secret=/home/gauth/${USER}/.google_authenticator  nullok\n```\n    \n### é…ç½® `SSHæœå‹™`\n    \n```sql\nvim /etc/ssh/sshd_config\n```    \n    \n### ä¿®æ”¹ä»¥ä¸‹åƒæ•¸\n    \n```sql\nChallengeResponseAuthentication yes\n    \nPasswordAuthentication no\n  \nPubkeyAuthentication yes\n\nUsePAM yes\n```\n    \n### é‡å•Ÿ `sshæœå‹™`\n    \n```sql\nservice sshd restart\n```\n\n\n\n\n***\n\n","tags":["MFA"],"categories":["Linux"]},{"title":"Linux - è¨­å®š logrotate è¼ªè©¢","url":"/blog.github.io/2022/08/03/Linux-è¨­å®šlogrotate_è¼ªè©¢/","content":"\n***\n***\n\n### å»ºç«‹ `logrotate` ç›®éŒ„\n\n```sql\nmkdir /root/logrotate/\n```\n\n***\n***\n\n### å»ºç«‹ `åŸ·è¡Œçš„ shell` \n\n\n\n`(åŠ å…¥åƒæ•¸ -f ç‚ºå¼·åˆ¶åŸ·è¡Œ)`\n\nEX:\n\n/usr/sbin/logrotate  -f /root/logrotate/weblog\n\n\n    \n```sql\nvim /root/logrotate/logrotate.sh\n```\n    \n```sql\n#!/bin/bash\n\n/usr/sbin/logrotate  /root/logrotate/weblog\n```\n\n***\n***\n     \n### å»ºç«‹è¦è¼ªè©¢çš„è¨­å®šæª”\n\n```sql\nvim /root/logrotate/weblog\n```\n    \n```sql\n\n/usr/local/web/nginx/logs/*.acc {\n        daily\n        rotate 3\n        create\n        sharedscripts\n        postrotate\n             /usr/local/web/nginx/sbin/nginx -s reload\n        endscript\n    }   \n```\n    \n***\n***\n    \n### å»ºç«‹æ’ç¨‹\n\n```sql\ncrontab -e\n```\n    \n```sql\n 10 05 * * * sh /root/logrotate/logrotate.sh\n```\n\n***\n***\n\n| åƒæ•¸ | èªªæ˜ |\n| --- | --- |\n| daily | è¡¨ç¤ºæ¯æ—¥ä¸€ä»½ |\n| create | è¼ªæ›¿ä¹‹å¾Œï¼Œè‡ªå‹•å»ºç«‹æ–°çš„è¨˜éŒ„æª” |\n| minsize | å¤§å°è¶…é100kï¼Œæ‰æœƒç™¼ç”Ÿæ»¾å‹•ï¼Œå³ä½¿æ™‚é–“æ²’åˆ°ä¸‹ä¸€å€‹æ»¾å‹•é€±æœŸå…§ï¼Œä¹Ÿä¸æœƒç™¼ç”Ÿæ»¾å‹• |\n| maxsize | å¤§å°è¶…é100kï¼Œå³ä½¿æ™‚é–“æ²’åˆ°ä¸‹ä¸€å€‹æ»¾å‹•é€±æœŸå…§ï¼Œä¹Ÿæœƒç™¼ç”Ÿæ»¾å‹• |\n| dateext | %Y%m%dä½œç‚ºå­—å°¾ |\n| rotate 5 | ä¿ç•™æœ€è¿‘çš„5å€‹å‚™ä»½ |\n| compress | åˆ‡æ›ä¹‹å¾Œå£“ç¸®.tar.gz |\n| create 644 root root | æ¬Šé™å£“644 root |\n| sharedscripts | æ•´å€‹æ—¥èªŒçµ„åŸ·è¡Œä¸€æ¬¡ |\n| postrotate | åœ¨èˆ‡ endscript çš„å€é–“å…§æ˜¯ rotate çµæŸå¾ŒæœƒåŸ·è¡Œçš„æŒ‡ä»¤ |\n| endscript | åŒä¸Š |\n| copytruncate | ç”¨æ–¼é‚„åœ¨æ‰“é–‹ä¸­çš„æ—¥èªŒæ–‡ä»¶ï¼ŒæŠŠç•¶å‰æ—¥èªŒå‚™ä»½ä¸¦æˆªæ–· |\n| missingok | å¤§å°è¶…é100kï¼Œæ‰æœƒç™¼ç”Ÿæ»¾å‹•ï¼Œå³ä½¿æ™‚é–“æ²’åˆ°ä¸‹ä¸€å€‹æ»¾å‹•é€±æœŸå…§ï¼Œä¹Ÿä¸æœƒç™¼ç”Ÿæ»¾å‹• |\n\n***\n***\n\n\n| åƒæ•¸ | èªªæ˜ |\n| --- | --- |\n| -d, --debug | debug æ¨¡å¼ï¼Œæ¸¬è©¦é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰éŒ¯èª¤ |\n| -f, --force | å¼·åˆ¶è½‰å„²æ–‡ä»¶ |\n| -m, --mail=command | å£“ç¸®æ—¥èªŒå¾Œï¼Œç™¼é€æ—¥èªŒåˆ°æŒ‡å®šéƒµç®± |\n| -s, --state=statefile | ä½¿ç”¨æŒ‡å®šçš„ç‹€æ…‹æ–‡ä»¶ |\n| -v, --verbose | é¡¯ç¤ºè½‰å„²éç¨‹ |\n\n***\n***\n\n\n### æŸ¥çœ‹åŸ·è¡Œç‹€æ…‹\n    \n```sql\ncat /var/lib/logrotate/logrotate.status\n```\n\n\n***\n***\n\n***\n\n","tags":["Logrotate"],"categories":["Linux"]},{"title":"Linux - æŸ¥çœ‹ç•¶å‰ç›®éŒ„å¤§å°èªæ³• ( du )","url":"/blog.github.io/2022/08/03/LinuxæŸ¥çœ‹ç•¶å‰æ–‡ä»¶ç›®éŒ„å¤§å°/","content":"\n***\n***\n\n### æŸ¥çœ‹ç•¶å‰æ–‡ä»¶ç›®éŒ„å„å€‹æ–‡ä»¶å¤¾å¤§å°\n    \n```sql\ndu -h --max-depth=1 |sort -hr\n```\n   \n***\n***\n \n### æŸ¥çœ‹æŒ‡å®šç›®éŒ„\n    \n```sql\ndu -h --max-depth=1 /path\n```\n\n***\n***\n    \n### æŸ¥çœ‹ç•¶å±¤ç›®éŒ„\n    \n```sql\ndu -h - .\n```\n\n***\n***\n    \n### æ·±å…¥åˆ°ç¬¬ä¸€å±¤ç›®éŒ„\n    \n```sql\n--max-depth=1\n```\n\n***\n***\n    \n### æŸ¥çœ‹ç•¶å‰ç›®éŒ„ä¸‹userç›®éŒ„çš„å¤§å°ï¼Œå¹¶ä¸æƒ³çœ‹å…¶ä»–ç›®éŒ„ä»¥åŠå…¶å­ç›®éŒ„\n    \n```sql\ndu -sh user\n```\n\n***\n***\n    \n### è¦é€šéä»¥1024å­—ç¯€ç‚ºå–®ä½é¡¯ç¤ºä¸€å€‹ç›®éŒ„æ¨¹åŠå…¶æ¯å€‹å­æ¨¹çš„ç£ç›¤ä½¿ç”¨æƒ…å†µ\n    \n```sql\ndu -k /home/linux\n```\n\n***\n***\n    \n### ä»¥MBç‚ºå–®ä½é¡¯ç¤ºä¸€å€‹ç›®éŒ„æ¨¹åŠå…¶æ¯å€‹å­æ¨¹çš„ç£ç›¤ä½¿ç”¨æƒ…å†µ\n    \n```sql\ndu -m /home/linux\n```\n\n***\n***\n    \n### ä»¥GBç‚ºå–®ä½é¡¯ç¤ºä¸€å€‹ç›®éŒ„æ¨¹åŠå…¶æ¯å€‹å­æ¨¹çš„ç£ç›¤ä½¿ç”¨æƒ…å†µ\n    \n```sql\ndu -g /home/linux\n```\n\n***\n***\n    \n### åˆ—å‡ºç•¶å‰ç›®éŒ„ä¸­çš„ç›®éŒ„åä¸åŒ…æ‹¬xyzå­—ç¬¦ä¸²çš„ç›®éŒ„çš„å¤§å°\n    \n```sql\ndu -h --exclude='*xyz*'\n```\n\n***\n***\n    \n### åªé¡¯ç¤ºä¸€å€‹ç›®éŒ„æ¨¹çš„å…¨éƒ¨ç£ç›¤ä½¿ç”¨æƒ…å†µ\n    \n```sql\ndu -s /home/linux\n```\n\n\n***\n\n","tags":["Linux"],"categories":["Linux"]},{"title":"MySQL dump - å‚™ä»½ & é‚„åŸè³‡æ–™åº«","url":"/blog.github.io/2022/08/03/Mysql-mysqldumpæ“ä½œ/","content":"\n***\n***\n\n**å‚™ä»½å–®ä¸€è³‡æ–™åº«**\n-----\n    \n```sql\nmysqldump -h hostname -u root -p database_name > backup.sql;\n```\n\n***\n***\n    \n**å‚™ä»½è³‡æ–™åº«ä¸­å–®ä¸€è³‡æ–™è¡¨**\n-----\n\n```sql\nmysqldump -u root -p database_name table_name > backup.sql;\n```\n\n***\n***\n    \n**åŒ¯å‡ºè³‡æ–™åº«ä¸­çš„æŸå¼µè³‡æ–™è¡¨çš„è¡¨çµæ§‹ï¼ˆä¸å«è³‡æ–™ï¼‰**\n-----\n    \n```sql\nmysqldump -u username -p -d dbname tablename > tablename.sql   \n```\n\n***\n***\n    \n**å‚™ä»½è³‡æ–™åº«ä¸­å¤šå¼µè³‡æ–™è¡¨**\n-----\n\n```sql\nmysqldump -u root -p database_name table1 table2 > backup.sql;\n```\n\n***\n***\n    \n**å‚™ä»½å¤šå€‹è³‡æ–™åº«**\n-----\n\n```sql\nmysqldump -u root -p --databases db1 db2 > backup.sql;\n```\n\n***\n***\n    \n**å‚™ä»½æ‰€æœ‰è³‡æ–™åº«**\n-----\n   \n```sql\nmysqldump -u root -p --all-databases > backup.sql;\n```\n\n***\n***\n    \n**åŒ¯å‡ºè³‡æ–™åº«çµæ§‹ï¼ˆä¸å«è³‡æ–™ï¼‰**\n-----\n    \n```sql\nmysqldump -u username -p -d dbname > dbname.sql    \n```\n\n***\n***\n    \n**å¾©åŸå–®ä¸€è³‡æ–™åº«**\n-----\n    \n```sql\nmysql -u root -p database_name < backup.sql\n```    \n\n***\n***\n    \n**å¾©åŸå¤šå€‹è³‡æ–™åº«**\n-----\n    \n```sql\nmysql -u root -p < backup.sql\n```\n\n***\n***\n\n\n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MySQL - Replication ä¸»å¾å¼è·Ÿéš¨æ¶æ§‹è¨­å®š","url":"/blog.github.io/2022/08/03/Mysql-ä¸»å¾è·Ÿéš¨/","content":"\n***\n***\n\n**Master Slave Replication çš„æ¶æ§‹**\n=====\n\n***\n***\n\n\n\n### åœ¨ master  server åŸ·è¡Œçš„ SQL command æœƒè¢«è¨˜éŒ„åœ¨ Binary Log è£¡é¢\n\n### master å°‡ Binary Log å‚³é€åˆ° slave çš„ Relay Log\n\n### slave ä¾æ“š Relay Log åšè³‡æ–™çš„è®Šæ›´\n\n\n\n***\n***\n\n![](https://s2.loli.net/2024/04/29/XOMVGwb8IKTUfPA.png)\n\n***\n***\n\n**å»ºç«‹ MySQL Replication å¯¦ä½œç´€éŒ„ [ Slave è¨­å®šç‚ºä¸å¯« binlog]**\n=====\n\n***\n***\n\n**Master server è¨­å®š :**\n-----\n\n***\n***\n\n**{ ä¿®æ”¹ Master è¨­å®šæª” }**\n=====\n\n```sql\nvim /etc/mysql/my.cnf\n```\n    \n```sql\n[mysqld]\nskip-external-locking\nsql_mode=NO_AUTO_Create_USER,NO_ENGINE_SUBSTITUTION\n\n#default-storage-engine=MYISAM\nexplicit_defaults_for_timestamp=true\n#--------------------------------------\n#default-tmp-storage-engine=MYISAM\ncharacter_set_server: utf8\ninnodb_buffer_pool_size: 1500M\ninnodb_log_buffer_size: 32M\ninnodb_log_file_size: 16M\ninnodb_flush_log_at_trx_commit: 2\ninnodb_buffer_pool_instances: 1\ninnodb_file_per_table=1\n#-------------------------------------\nmax_connections: 2000\nmax_allowed_packet: 64M\ntable_open_cache: 512\nsort_buffer_size: 4M\nnet_buffer_length: 8K\nread_buffer_size: 256K\nread_rnd_buffer_size: 512K\nmyisam_sort_buffer_size: 128M\n#key_buffer: 256M\n#-------------------------------------\nsocket: /var/lib/mysql/mysql.sock\npid-file: mysql.pid\nlog-error: mysql.err\nlog-slave-updates\nmax_binlog_size: 500M\nbinlog_format=\"MIXED\"\nlog-bin: log-bin\nserver_id: 999\n\nrelay-log-purge: 1\nmax-relay-log-size: 500M\nrelay-log-space-limit: 500M\n \nslow_query_log: 1\nslow_query_log_file: slow-queries.log\nlong_query_time: 1\n#---------------------------------------------\n[mysqld_multi]\nmysqld: /usr/bin/mysqld_safe\nmysqladmin: /usr/bin/mysqladmin\n```\n\n***\n***\n\n**é‡æ–°å•Ÿå‹• MySQL æœå‹™ [ä½¿è¨­å®šæª”ç”Ÿæ•ˆ]**\n-----\n\n```sql\nmysqladmin -uroot -p shutdown\n    \nmysqld_safe &\n```\n\n***\n***\n\n**ç™»é™¸ Master å»ºç«‹ Slave å¸³è™Ÿ**\n-----\n    \n```sql\nmysql -u root -p\n```\n    \n```sql\nSTOP SLAVE;\n\nGRANT REPLICATION SLAVE ON *.* TO 'è¼¸å…¥ä½¿ç”¨è€…åç¨±'@'è¼¸å…¥ä¾†æº + %' IDENTIFIED BY 'è¼¸å…¥å¯†ç¢¼';\n\nFLUSH PRIVILEGES;\n\nSHOW MASTER STATUS;\n\nexit;\n```\n\n***\n***\n\n**DUMP èªæ³•**\n-----\n    \n```sql\nmysqldump -uroot -p --all-databases > masterdatabase.sql\n```\n\n***\n***\n  \n**ç™»é™¸ Master æŸ¥çœ‹ Master è³‡è¨Š**\n-----\n    \n```sql\nmysql -u root -p\n```\n    \n```sql\nshow master status;\n\nexit;\n```\n\n***\n***\n    \n**å°‡ SQL æª” SCP è‡³ Slave**\n-----\n    \n```sql\nscp masterdatabase.sql root@slaveä¸»æ©Ÿä¾†æº:~\n```\n\n***\n***\n    \n**{ ä¿®æ”¹ Slave è¨­å®šæª” }**\n=====\n\n***\n***\n\n**Slave åœ DB**\n-----\n\n```sql\nmysqladmin -uroot -p shutdown\n```\n\n***\n***\n\n**å°‡ Master çš„ SQL æª”åŒ¯å…¥ Slave**\n-----\n\n```sql\nmysql -u root -p < /home/masterdatabase.sql\n```\n\n***\n***\n   \n**ä¿®æ”¹ Slave è¨­å®šæª”**\n=====\n\n```sql\nvim /etc/my.cnf\n```\n    \n```sql\n[mysqld]\nskip-external-locking\n#skip-innodb\n#skip-name-resolve\nsql_mode=NO_AUTO_Create_USER,NO_ENGINE_SUBSTITUTION\nserver_id: 998\n\ninnodb_buffer_pool_size: 1500M\ninnodb_log_buffer_size: 32M\ninnodb_log_file_size: 16M\ninnodb_flush_log_at_trx_commit: 2\ninnodb_buffer_pool_instances: 1\n\n#innodb_file_format: barracuda\n#innodb_file_format_max: barracuda\ninnodb_file_per_table: 1\n\nread-only: 1\n#-------------------------------------\nmax_connections: 2000\nmax_allowed_packet: 64M\ntable_open_cache: 512\nsort_buffer_size: 4M\nnet_buffer_length: 8K\nread_buffer_size: 256K\nread_rnd_buffer_size: 512K\nmyisam_sort_buffer_size: 128M\n#key_buffer: 256M\n#-------------------------------------\nsocket: /var/lib/mysql/mysql.sock\npid-file: mysql.pid\nlog-error: mysql.err\nlog-slave-updates\nport: 3306\nrelay-log-purge: 1\nmax-relay-log-size: 500M\nrelay-log-space-limit: 500M\n \nslow_query_log: 1\nslow_query_log_file: slow-queries.log\n#long_query_time: 1\n#---------------------------------------------\n[mysqld_multi]\nmysqld: /usr/bin/mysqld_safe\nmysqladmin: /usr/bin/mysqladmin\n```\n\n***\n***\n   \n**å•Ÿå‹• Slave DB**\n-----\n\n```sql\nmysqld_safe &\n```\n\n***\n***\n   \n**è¨­å®š SlaveDBï¼ŒæŒ‡å®š Master DB ç™»å…¥è³‡è¨Šï¼Œä¸¦å•Ÿå‹• Replication**\n-----\n    \n```sql\nmysql -u root -p\n```\n    \n```sql\nSTOP SLAVE;\n\nCHANGE MASTER TO MASTER_HOST='è¼¸å…¥Masterä¸»æ©Ÿip', MASTER_USER='è¼¸å…¥ä½¿ç”¨è€…åç¨±', MASTER_PASSWORD='è¼¸å…¥å¯†ç¢¼', MASTER_LOG_FILE='mariadb-bin.000001', MASTER_LOG_POS=479;\n\nstart slave;\n\nSHOW SLAVE STATUS \\G;\n```\n\n***\n***\n\n   ############################################\n\n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MariaDB - CentOS 7 yum å®‰è£æº ( yum_repo )","url":"/blog.github.io/2022/08/03/Mysql-yumå®‰è£/","content":"\n***\n***\n\n**{ yum repo }**\n-----\n\n```sql\ncat <<EOF | tee /etc/yum.repos.d/MariaDB.repo\n\n# MariaDB 10.5 CentOS repository\n\n# http://downloads.mariadb.org/mariadb/repositories/\n\n[mariadb]\n\nname: MariaDB\n\nbaseurl: http://yum.mariadb.org/10.5/centos7-amd64\n\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\n\ngpgcheck=1\n\nEOF\n```\n\n***\n***\n    \n**yum å®‰è£ ` MariaDB-10.5.14 `**\n-----\n    \n```sql\nyum install -y MariaDB-server MariaDB-client MariaDB-devel*\n```\n\n***\n***\n\n\n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"MySQL - å¸¸ç”¨èªæ³•æ•´ç†","url":"/blog.github.io/2022/08/03/Mysql-å¸¸ç”¨èªæ³•/","content":"\n***\n***\n\n**èƒŒæ™¯å•Ÿå‹•**\n---\n\n```sql\nmysqld_safe &\n```\n\n***\n***\n\n**åœæ‰æœå‹™**\n---\n\n```sql\nmysqladmin -u root -p shutdown \n```\n\n***\n***\n\n**å‰µå»ºå¯†ç¢¼**\n---\n\n```sql\nmysqladmin -u root password 'å¯†ç¢¼' \n```\n\n***\n***\n\n**åˆ—å‡ºè©² database_name æ‰€æœ‰è³‡æ–™è¡¨**\n---\n\n```sql\nmysqlshow -u user_name -p db_name\n```\n\n***\n***\n\n**æª¢è¦–ä¼ºæœå™¨åŸ **\n---\n\n```sql\nshow global variables like 'port'; \n```\n\n***\n***\n\n**æŸ¥è©¢ ID**\n---\n\n```sql\nSHOW VARIABLES LIKE '%server_%'; \n```\n\n***\n***\n\n**å¿˜è¨˜å¯†ç¢¼æ™‚åœ¨ `my.cnf` å¢åŠ åƒæ•¸**\n---\n\n```sql\nskip-grant-tables\n``` \n\n***\n***\n\n**åœ¨ mysql ä»‹é¢åŸ·è¡Œæ›´æ”¹å¯†ç¢¼**\n---\n\n```sql\nuse mysql;\n\nUPDATE user SET Password: password('123456') WHERE User: 'root'; \n```\n\n***\n***\n\n**æª¢æŸ¥æ˜¯å¦æœ‰æ”¯æ´ `Partition`**\n---\n\n```sql\nSHOW PLUGINS;\n\nSELECT PLUGIN_NAME as Name, PLUGIN_VERSION as Version, PLUGIN_STATUS as Status FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_TYPE='STORAGE ENGINE';\n```\n\n\n\n### è‹¥è¦é—œé–‰ partition æ”¯æ´ï¼Œå¯åœ¨ my.cnf åŠ ä¸Š `skip-partition` å†é‡æ–°å•Ÿå‹•\n\n\n\n***\n***\n\n**æŸ¥çœ‹ç‰ˆæœ¬ ( åœ¨ `Mysql ä»‹é¢` åŸ·è¡Œ )**\n---\n\n```sql\nmysql> select version(); \n```\n\n**æˆ–æ˜¯åœ¨ `Linux ä»‹é¢` åŸ·è¡Œ**\n\n```sql\nmysql -V\n```\n\n***\n***\n\n**æŸ¥çœ‹è¡¨çš„å­˜å‚¨å¼•æ“**\n---\n\n```sql\nshow create table proc \\G\n```\n\n***\n***\n\n**ç›´æ¥æ›´æ”¹å­˜å‚¨å¼•æ“**\n---\n\n```sql\nalter table UserConf engine=MyISAM;\t\n```\n\n***\n***\n\n**é¡¯ç¤ºæ•¸æ“šè¡¨çµæ§‹ï¼š**\n---\n \n```sql\ndescribe è¡¨å;\n```\n\n***\n***\n\n**æŸ¥çœ‹ MySQL çš„æ™‚é–“**\n---\n\n```sql\nselect now();\n```\n\n***\n***\n\n**æŸ¥çœ‹ MySQL æ™‚å€**\n---\n\n```sql\nshow variables like \"%time_zone%\";\n```\n\n***\n***\n\n**é¡¯ç¤ºå“ªå€‹åŸ·è¡Œç·’æ­£åœ¨é‹è¡Œ**\n---\n\n```sql\nSHOW PROCESSLIST;\n```\n\n***\n***\n\n**é¡¯ç¤ºè³‡æ–™è¡¨çš„æ¬„ä½**\n---\n \n```sql\nshow columns from è³‡æ–™è¡¨åç¨±;\n```\n\n***\n***\n\n**é¡¯ç¤ºuserè£¡çš„è³‡æ–™**\n---\n\n```sql\nSELECT * FROM user \\G\n```\n\n***\n***\n\n**æ–°å¢å¸³è™Ÿ**\n---\n\n```sql\nCREATE USER 'laurance'@'10.10.%.%' IDENTIFIED BY '123456';\n```\n\n***\n***\n\n**çµ¦äºˆå…¨éƒ¨æ¬Šé™**\n---\n\n```sql\ngrant all on *.* to 'laurance'@'10.10.%.%';\n```\n\n***\n***\n\n**ä¿®æ”¹ä½¿ç”¨è€…**\n---\n\n```sql\nupdate user set User='laurance' where User='root';\n```\n\n***\n***\n\n**åˆªé™¤ä½¿ç”¨è€…**\n---\n\n```sql\ndrop user 'laurance'@'localhost';\n```\n\n***\n***\n\n**æŸ¥çœ‹ä½¿ç”¨è€…æ¬Šé™**\n---\n\n```sql\nshow grants for 'laurance'@'localhost'; \n```\n\n***\n***\n\n**å®‰è£ MySQL å¯†ç¢¼å¼·åº¦æ’ä»¶**\n---\n\n```sql\nINSTALL PLUGIN validate_password SONAME 'validate_password.so';\n```\n\n***\n***\n\n**è‡¨æ™‚æ”¹å¯†ç¢¼å¼·åº¦è¦å‰‡**\n---\n\n```sql\nSET GLOBAL validate_password_policy=LOW;\n```\n\n***\n***\n\n**æŸ¥çœ‹å¯†ç¢¼å¼·åº¦è¦å‰‡**\n---\n\n```sql\nshow variables like 'validate_pass%';\n```\n\n***\n***\n\n**æŸ¥çœ‹å¯†ç¢¼é•·åº¦è¦å‰‡**\n---\n\n```sql\nselect @@validate_password_length;\n```\n\n***\n***\n\n**æ›´æ›ä¸»å¾èªæ³•**\n---\n\n```sql\nchange master to MASTER_HOST='10.10.10.10', MASTER_USER='laurance', MASTER_PASSWORD='123456', MASTER_LOG_FILE='log-bin.000018', MASTER_LOG_POS=815722;\n```\n\n***\n***\n\n**æŸ¥è©¢ MySQL å¯†ç¢¼**\n---\n\n```sql\nselect * from mysql.user \\G\n```\n\n\n\n**å°‡ * é–‹é ­çš„äº‚ç¢¼è²¼åˆ° MD5 è§£**\n\nhttps://www.cmd5.com/\n\n\n\n***\n***\n\n**é‡æ–°è¨­ç‚ºé è¨­è³‡æ–™åº«**\n---\n\n```sql\nmysql_install_db --datadir=/var/lib/mysql/master01/ --user=mysql &\n```\n\n***\n***\n\n**æ–°å¢ TABLE èªæ³•**\n---\n    \n```sql\nCREATE TABLE ithelp1007a(\nid INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\nclass CHAR(1) NOT NULL,\nname CHAR(20) NOT NULL,\nscore TINYINT UNSIGNED NOT NULL\n);\n```\n\n***\n***\n    \n**æ’å…¥ TABLE èªæ³•**\n---\n    \n```sql\nINSERT INTO ithelp1007a(class, name, score) VALUES\n('A', 'Tom', 78),\n('A', 'Mary', 25),\n('A', 'John', 65),\n('B', 'Hitomi', 95),\n('B', 'Asami', 84),\n('B', 'Keiko', 73);\n```\n\n***\n***\n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]},{"title":"Nginx - Location åƒæ•¸ç´€éŒ„","url":"/blog.github.io/2022/08/03/Nginx-Locationé…ç½®/","content":"\n\n***\n***\n    \n**Location çš„åŒ¹é…æ¨¡å¼**\n----\n\n| ç¬¦è™Ÿ | ä»£è¡¨æ„æ€ |\n| --- | --- |\n|: | ç²¾ç¡®åŒ¹é… |\n| ï½ | æ­£å‰‡åŒ¹é… , å¤§å°å¯«æ•æ„Ÿ |\n| ï½* | æ­£å‰‡åŒ¹é… , å¤§å°å¯«ä¸æ•æ„Ÿ |\n| ^~ | å¿½ç•¥æ­£å‰‡è¡¨é”å¼çš„å‰ç¶´åŒ¹é… |\n|    | æ²’æœ‰ä¿®é£¾ç¬¦ , å‰ç¶´åŒ¹é… |\n| @ | å‘½å location , å¯ç”¨ä¾†åšå…§éƒ¨é‡å®šå‘ |\n\n***\n***\n \n\n\n\n### å…¶ä¸­ `=` å’Œ `^~` ä¿®é¥°ç¬¦éƒ½å¯ä»¥èªç‚ºæ˜¯ç‰¹æ®Šå½¢å¼çš„å‰ç¼€åŒ¹é…\n\n\n\n\n\n\n```sql\n    Location Example * :\n    \n        server {\n            listen 80 default_server;\n            server_name _;\n            \n            # A\n            location: / {\n                    return 200 \"A\";\n            }\n    \n            # B\n            location / {\n                    return 200 \"B\";\n            }\n    \n            # C\n            location /docs {\n                    return 200 \"C\";\n            }\n    \n            # D\n            location ^~ /imgs {\n                    return 200 \"D\";\n            }\n            \n            # E\n            location ~* \\.(gif|jpg|png)$ {\n                    return 200 \"E\";\n            }\n    \n            # F\n            location ~ /a/.*$ {\n                    return 200 \"F\";\n            }\n        }\n```\n    \n\n\n***\n***\n \n\n    \n\n    \n|    \tinput\t\t    |   \t\toutput\t\t\t|  èªªæ˜     |\n|       ---             |           ---             |   ---     |    \n|    \thttp://127.0.0.1\t|\t      A\t\t    |   åŒ¹é…åˆ° A è·Ÿ B  ç²¾ç¡®åŒ¹é…ä¼˜å…ˆçº§è¾ƒé«˜ |    \n|    \thttp://127.0.0.1/test\t|\t  B\t\t|       åªåŒ¹é…åˆ°B |\n|    \thttp://127.0.0.1/docs/1\t\t|  C\t|\tåŒ¹é…åˆ° B è·Ÿ C , C å‰ç¼€æ¯” B é•¿ |    \n|    \thttp://127.0.0.1/docs/2.jpg\t | E\t|\tåŒ¹é…åˆ° B ã€ C ã€ E  æ­£åˆ™åŒ¹é…æ¯”æ™®é€šå‰ç¼€åŒ¹é…ä¼˜å…ˆçº§é«˜ |\n|    \thttp://127.0.0.1/imgs/1\t\t|  D\t|\tåªåŒ¹é…åˆ° B ã€ D , D å‰ç¼€æ¯” B é•¿ |    \n|        http://127.0.0.1/imgs/1.jpg |\t  D\t|\tåŒ¹é…åˆ° B ã€ D ã€ E ï¼Œç”±äº D æ˜¯æœ€é•¿åŒ¹é…ä¸”æœ‰ ^~ ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥ä¸ä¼šå†æ£€æŸ¥æ­£åˆ™åŒ¹é… |\n|    \thttp://127.0.0.1/docs/a/1\t|   F\t|\tåŒ¹é…åˆ° B ã€ C ã€ F |\n    \t\n    \t\n\n \n ***\n ***\n     \n**Location `@name` çš„ç”¨æ³•**\n-----\n\n\n    \n### `@` å‰ç¶´å¯ä»¥ç”¨ä¾†å®šç¾©ä¸€å€‹å‘½åçš„ `location` è©² `location` ä¸è™•ç†æ­£å¸¸çš„å¤–éƒ¨è«‹æ±‚,ä¸€èˆ¬ç”¨ä¾†ä¾›å…§éƒ¨é‡å®šå‘ä½¿ç”¨ã€‚\n    \n### å®ƒå€‘ä¸èƒ½åµŒå¥—,ä¹Ÿä¸èƒ½åŒ…å«åµŒå¥—çš„ `location`\n\n\n    \n```sql\nLocation Example *\n    \n    location /try {\n        try_files $uri $uri/ @name;\n    }\n    \n    location /error {\n        error_page 404: @name;\n        return 404;\n    }\n    \n    location @name {\n        return 200 \"@name\";\n    }\n```\n\n***\n    \n## é€™æ™‚è¨ªå• `/try` æˆ–è€… `/error` éƒ½æœƒè¿”å› `@name`\n\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"Nginx - log_format åƒæ•¸é…ç½®","url":"/blog.github.io/2022/08/03/Nginx-log_formaté…ç½®/","content":"\n***\n***\n***\n***\n\n\n|    å¼•æ•¸         |             èªªæ˜               |                           ç¤ºä¾‹ |\n| --- | --- | --- |   \n| $remote_addr |       å®¢æˆ¶ç«¯åœ°å€               |                      192.168.122.1 |\n| $remote_user |         å®¢æˆ¶ç«¯ä½¿ç”¨è€…åç¨±ç¨±           |                  -- |\n| $time_local |            è¨ªå•æ™‚é–“å’Œæ™‚å€                            |     17/Dec/2018:10:47:58 +0800 |\n| $request    |             è«‹æ±‚çš„ URI å’Œ HTTP å”è­°   |                            \"GET / HTTP/1.1\" |\n    |    $status      |            HTTP è«‹æ±‚ç‹€æ…‹                      |               304 |\n    | $upstream_status   |      upstream ç‹€æ…‹                   |                    0 |\n    | $body_bytes_sent    |     å‚³é€çµ¦å®¢æˆ¶ç«¯æª”æ¡ˆå…§å®¹å¤§å°        |                 - |\n    | $http_referer      |      url è·³è½‰ä¾†æº , ç”¨æ–¼è¨˜éŒ„æ˜¯å¾å“ªå€‹é é¢é€£çµè¨ªå•éä¾†çš„ |                                   \n    | $http_user_agent   |      ä½¿ç”¨è€…çµ‚ç«¯ç€è¦½å™¨ç­‰è³‡è¨Š,å³å®¢æˆ¶ç€è¦½å™¨çš„ç›¸é—œè³‡è¨Š    | \"Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0\" |\n    |   $http_host       |        è«‹æ±‚åœ°å€ï¼Œå³ç€è¦½å™¨ä¸­ä½ è¼¸å…¥çš„åœ°å€ï¼ˆIPæˆ–åŸŸåï¼‰   |    www.wang.com 192.168.100.100 |\n    | $ssl_protocol      |      SSLå”è­°ç‰ˆæœ¬                 |                       TLSv1 |\n    | $ssl_cipher       |       äº¤æ›è³‡æ–™ä¸­çš„æ¼”ç®—æ³•       |                          RC4-SHA |\n    | $upstream_addr   |        å¾Œè‡º upstream çš„åœ°å€ï¼Œå³çœŸæ­£æä¾›æœå‹™çš„ä¸»æ©Ÿåœ°å€  |     10.10.10.100:80 |\n    | $request_time     |       æ•´å€‹è«‹æ±‚çš„ç¸½æ™‚é–“              |                     0.205 |\n    | $upstream_response_time  |  è«‹æ±‚éç¨‹ä¸­ upstream éŸ¿æ‡‰æ™‚é–“        |               0.002 |\n    | $http_x_forwarded_for\t |  å®¢æˆ·ç«¯çš„çœŸå® ip å¦‚æœåŒ…å«å¤šå€‹ IP  |  X-Forwarded-For: client1, proxy1, proxy2, ... | \n\n***\n***\n***\n***\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"Nginx - åŠ å…¥ PageSpeed æ¨¡çµ„åŠ nginx-http-concat","url":"/blog.github.io/2022/08/03/Nginx-åŠ å…¥PageSpeedæ¨¡çµ„åŠnginx-http-concat/","content":"\n***\n***\n    \n**PageSpeedæ¨¡çµ„ (è‡ªå‹•å„ªåŒ–ç¶²ç«™å‹•æ…‹)ä¸‹è¼‰**\n----\n\n***\n***\n    \n```sql\nwget https://github.com/apache/incubator-pagespeed-ngx/archive/v1.13.35.2-stable.tar.gz\n    \ntar zxvf v1.13.35.2-stable.tar.gz\n    \ncd incubator-pagespeed-ngx-1.13.35.2-stable\n```\n\n***\n    \n**é€™ä¸€æ­¥ä¸€å®šè¦åš ä¸ç„¶ `nginx` æœƒç„¡æ³•åŠ å…¥æ¨¡çµ„ è§£å£“ç¸®æœƒåœ¨æ ¹ç›®éŒ„ä¸‹ç”Ÿæˆä¸€å€‹ `psol` çš„è³‡æ–™å¤¾ ( è§£å£“å¾Œå°‡`psol/`æ”¾åˆ°`incubator-pagespeed-ngx-1.13.35.2-stable/`è£¡ )**\n    \n```sql\ncat PSOL_BINARY_URL\n    \nwget https://dl.google.com/dl/page-speed/psol/1.13.35.2-x64.tar.gz\n    \ntar zxvf 1.13.35.2-x64.tar.gz\n    \ncd ../\n    \nmv incubator-pagespeed-ngx-1.13.35.2-stable /usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/\n```\n\n***\n***\n    \n**Nginx-http-concat æ¨¡çµ„(åˆä½µHTTPè«‹æ±‚)ä¸‹è¼‰**\n-----\n\n***\n    \n```sql\nwget https://github.com/alibaba/nginx-http-concat/archive/1.2.2.tar.gz\n    \ntar zxvf 1.2.2.tar.gz\n    \nmv nginx-http-concat-1.2.2/ /usr/local/nginx-http-concat/\n```\n\n***\n***\n    \n**ç·¨è­¯å®‰è£ Nginx**\n-----\n    \n```sql\ncd nginx-1.21.6/\n    \n./configure --user=nginx --group=nginx --prefix=/usr/local/web/nginx --sbin-path=/usr/local/web/nginx/sbin/nginx --conf-path=/usr/local/web/nginx/conf/nginx.conf --error-log-path=/usr/local/web/nginx/logs/error.log --http-log-path=/usr/local/web/nginx/logs/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/subsys/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_secure_link_module --with-http_v2_module --with-http_stub_status_module --with-http_sub_module --add-module=/usr/local/incubator-pagespeed-ngx-1.13.35.2-stable/ --add-module=/usr/local/nginx-http-concat/\n    \nmake && make install\n```\n\n`Ps é‡æ–°ç·¨è­¯çš„è©±ä¸éœ€è¦ make install`\n\n***\n***\n    \n**é‡æ–°ç·¨è­¯å®Œ Nginx åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿ**\n-----\n    \n```sql\n/usr/local/web/nginx/sbin/nginx -s stop\n    \ncp /usr/local/nginx/sbin/nginx/ /usr/local/nginx/sbin/nginx.bak\n    \ncp /root/installation/nginx-1.21.6/objs/nginx /usr/local/nginx/sbin/nginx\n```\n\n***\n***\n    \n**æª¢æŸ¥æ˜¯å¦æœ‰åŠ å…¥æ¨¡çµ„**\n    \n```sql\n/usr/local/web/nginx/sbin/nginx -V\n```    \n\n***\n***\n    \n**åœ¨è¨­å®šæª”ä¸­åŠ å…¥ä»¥ä¸‹ `pagespeed` åƒæ•¸**\n\n```sql\nvim /usr/local/web/nginx/conf/vhost/server.conf\n```\n    \n```sql\nserver {\n...\n  pagespeed on;\n  pagespeed FileCachePath /var/cache/nginx/ngx_pagespeed_cache;\n  \n  location ~ \"\\.pagespeed\\.([a-z]\\.)?[a-z]{2}\\.[^.]{10}\\.[^.]+\" {\n      add_header \"\" \"\";\n    }\n    location ~ \"^/pagespeed_static/\" { }\n    location ~ \"^/ngx_pagespeed_beacon$\" { }\n...\n}\n```\n\n***\n***\n\n**é‡å•Ÿ nginx**\n\n```sql\n/usr/local/web/nginx/sbin/nginx -s reload\n```\n\n***\n***\n    \n**æ›´è©³ç´°çš„è¨­å®š `PageSpeed åƒæ•¸`**\n    \n ```sql\n # Rewrite Level\npagespeed RewriteLevel CoreFilters;\n    \n# Minimize and optimize HTTP requests\npagespeed EnableFilters rewrite_css;\npagespeed EnableFilters rewrite_javascript;\npagespeed EnableFilters combine_css;\npagespeed EnableFilters combine_javascript;\npagespeed EnableFilters inline_css;\npagespeed CssInlineMaxBytes 4096;\npagespeed EnableFilters inline_javascript;\npagespeed JsInlineMaxBytes 4096;\n    \n# Image Optimization and lazy load\npagespeed EnableFilters rewrite_images;\npagespeed EnableFilters inline_images;\npagespeed EnableFilters resize_images;\npagespeed EnableFilters recompress_images;\n    \n# Controlling the use of beacons\npagespeed AvoidRenamingIntrospectiveJavascript off;\npagespeed CriticalImagesBeaconEnabled false;\n```\n\n***\n***\n    \n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"Nginx - å¸¸ç”¨çš„ LOG æœç´¢æŒ‡ä»¤","url":"/blog.github.io/2022/08/03/Nginx-å¸¸ç”¨çš„LOGæœç´¢æŒ‡ä»¤/","content":"\n***\n***\n\n**çµ±è¨ˆIPè¨ªå•é‡**\n-----\n\n```sql\nawk '{print $l}' /var/log/nginx-access.log | sort -n | uniq | wc -l\n```\n\n***\n\n**æŸ¥çœ‹æŸä¸€æ™‚é–“æ®µ IP çš„è¨ªå•é‡**\n----\n\n```sql\ngrep \"14/Jul/2021:0[2-10]\" /var/log/nginx-access.log | awk '{print $l}' | sort | uniq -c | sort -nr | wc -l\n```\n\n***\n\n**æŸ¥çœ‹è¨ªå•æ¬¡æ•¸æœ€é »ç¹çš„å‰100å€‹IP**\n-----\n\n```sql\nawk '{print $l}' /var/log/nginx-access.log | sort -n | uniq -c | sort -rn | head -n 100\n```\n\n***\n\n**æŸ¥çœ‹è¨ªå•æ¬¡æ•¸100ä»¥ä¸Šçš„IP**\n-----\n\n```sql\nawk '{print $l}' /var/log/nginx-access.log |sort -n |uniq -c |awk '{if($l >100) print $0 } ' | sort -rn\n```\n\n***\n\n**æŸ¥è©¢æŸå€‹IPçš„è©³ç´°è¨ªå•æƒ…æ³,æŒ‰è¨ªå•é »ç‡æ’åº**\n-----\n\n```sql\ngrep '172.16.0.6' /var/log/nginx-access.log |awk '{print $7}'|sort |uniq -c |sort -rn |head -n 100\n```\n\n***\n***\n\n**{{ é é¢è¨ªå•çµ±è¨ˆ }}**\n=====\n\n***\n***\n\n**æŸ¥çœ‹è¨ªå•æœ€é »ç¹çš„é é¢**\n----\n\n```sql\nawk '{print $7}' /var/log/nginx-access.log | sort | uniq -c | sort -rn | head -n 100\n```\n\n***\n\n**æŸ¥çœ‹è¨ªå•æœ€é »ç¹çš„é é¢(æ’é™¤PHPé é¢)**\n-----\n\n```sql\ngrep -v \".php\" /var/log/nginx-access.log |awk '{print $7}'|sort|uniq -c|sort -rn|head -n 100\n```\n\n***\n\n**æŸ¥çœ‹æœ€è¿‘1000æ¢ç´€éŒ„,è¨ªå•é‡æœ€é«˜çš„é é¢**\n----\n\n```sql\ntail -1000 /var/log/nginx-access.log | awk '{print $7} ' |sort|uniq -c|sort -nr|less\n```\n\n***\n\n**æ¯ç§’è«‹æ±‚é‡çµ±è¨ˆ**\n-----\n\n```sql\nawk '{print $4}' /var/log/nginx-access.log |cut -c 14-21|sort|uniq -c|sort -nr|head -n 100\n```\n\n***\n\n**æ¯åˆ†é˜è«‹æ±‚çµ±è¨ˆ**\n----\n\n```sql\nawk '{print $4}' /var/log/nginx-access.log|cut -c 14-18|sort|uniq -c|sort -nr|head -n 100\n```\n\n***\n\n**æ¯å°æ™‚è«‹æ±‚çµ±è¨ˆ**\n----\n\n```sql\nawk '{print $4}' /var/log/nginx-access.log |cut -c 14-15|sort|uniq -c|sort -nr|head -n 100\n```\n\n***\n***\n\n**{{ æ€§èƒ½åˆ†æ }}**\n=====\n\n***\n***\n\n\n**åˆ—å‡ºå‚³è¼¸æ™‚é–“è¶…é3ç§’çš„é é¢,é¡¯ç¤ºå‰20æ¢**\n-----\n\n```sql\ncat /var/log/nginx-access.log |awk '($NF > 3){print $7}'|sort -n|uniq -c|sort -nr|head -20\n```\n\n***\n\n**åˆ—å‡ºPHPé é¢è«‹æ±‚æ™‚é–“è¶…é3ç§’çš„é é¢,ä¸¦çµ±è¨ˆå…¶å‡ºç¾çš„æ¬¡æ•¸,é¡¯ç¤ºå‰100æ¢**\n-----\n\n```sql\ncat /var/log/nginx-access.log|awk '($NF > 1 &&  $7~/\\.php/){print $7}'|sort -n|uniq -c|sort -nr|head -100\n```\n\n***\n***\n\n\n**{{ èœ˜è››æŠ“å–çµ±è¨ˆ }}**\n=======\n\n***\n***\n\n\n**çµ±è¨ˆ æŠ“å–æ¬¡æ•¸**\n-----\n\n```sql\ngrep 'Baiduspider' /var/log/nginx-access.log |wc -l\n```\n\n***\n\n**çµ±è¨ˆ æŠ“å–404çš„æ¬¡æ•¸**\n-----\n\n```sql\ngrep 'Baiduspider' /var/log/nginx-access.log | grep '404' |wc -l\n```\n\n***\n***\n\n\n**{{ TCPé€£æ¥çµ±è¨ˆ }}**\n=====\n\n***\n***\n\n\n**æŸ¥çœ‹ç•¶å‰TCPé€£æ¥æ•¸**\n-----\n\n```sql\nnetstat -tan | grep \"ESTABLISHED\" | grep \":80\" | wc -l\n```\n\n***\n\n**ç”¨ Tcpdump å—…æ¢80ç«¯å£çš„è¨ªå•çœ‹èª°é«˜**\n-----\n\n```sql\ntcpdump -i enp0s3 -tnn dst port 80 -c 1000 | awk -F\".\" '{print $1\".\"$2\".\"$3\".\"$4}' | sort | uniq -c | sort -nr\n```\n\n***\n***\n\n\n\n| åƒæ•¸ | æ„æ€ |\n| --- | --- |\n| head -5 | \t\t# å‰äº”è¡ŒLOG æ•¸æ“š |\n| sort -k 1nr |\t\t# æŒ‰ç…§ç¬¬ä¸€å€‹å­—æ®µ , æ•¸å€¼æ’åº , ä¸”ç‚ºé€†åº |\n\n\n\n***\n***\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"Nginx - è¨­å®šç›®éŒ„å¯†ç¢¼ä¿è­·","url":"/blog.github.io/2022/08/03/Nginx-è¨­å®šç›®éŒ„å¯†ç¢¼ä¿è­·/","content":"\n***\n***\n\n**é¦–å…ˆéœ€è¦å»ºç«‹ä¸€å€‹å¯†ç¢¼æª”, è£¡é¢åŒ…å«äº†`ä½¿ç”¨è€…åç¨±` , ä»¥åŠ`åŠ å¯†äº†çš„å¯†ç¢¼` , å¦‚æœç³»çµ±æœ‰å®‰è£ Apache, å¯ä»¥ç”¨ä»¥ä¸‹èªæ³•å»ºç«‹å¯†ç¢¼æª”:**\n\n```sql\nhtpasswd -c /path/to/file/.htpasswd username\n```\n\n***\n***\n\n**å¦‚æœæ²’æœ‰ htpasswd æŒ‡ä»¤å¯ä»¥ä½¿ç”¨, é‚£ä¾¿è¦æ‰‹å‹•å»ºç«‹å¯†ç¢¼æª”, å¯†ç¢¼æª”çš„æ ¼å¼å¦‚ä¸‹:**\n\n```sql\nusername:encrypted-password:comment\n```\n\n`username æ˜¯ä½¿ç”¨è€…åç¨±, å¯ä»¥è‡ªè¡Œå®šç¾©, è€Œ encrypted-password å‰‡æ˜¯åŠ å¯†çš„å¯†ç¢¼`\n\n***\n***\n\n**å»ºç«‹å¯†ç¢¼æª”**\n\n```sql\nvim /home/opencli/.htpasswd\n```\n\n***\n***\n\n**å°‡è¦è¨­å®šçš„`ä½¿ç”¨è€…åç¨±`åŠä¸Šé¢çš„`åŠ å¯†å¯†ç¢¼`è¤‡è£½åˆ°æª”æ¡ˆ, å³ä»¥ä¸‹æ ¼å¼:**\n\n```sql\nusername:saoYYKpu2QSsA\n```\n\n***\n***\n\n**é–‹å•Ÿ Nginx çš„è¨­å®šæª”**\n\n```sql\nvim /etc/nginx/conf.d/default.conf\n```\n\n***\n***\n\n\n\n### å‡è¨­æˆ‘è¦è¨­å®šå¯†ç¢¼ä¿è­·çš„ç›®éŒ„æ˜¯ `/usr/share/nginx/html/admin` åœ¨ server æ®µè½åŠ å…¥ä»¥ä¸‹å¹¾è¡Œ:\n   \n***\n \n```sql\nlocation /admin/ {\n    auth_basic \"Restricted\";\n    auth_basic_user_file /home/opencli/.htpasswd;\n}\n```\n\n\n\n***\n***\n\n**å„²å­˜æª”æ¡ˆå¾Œéœ€è¦é‡æ–°å•Ÿå‹• `Nginx`**\n\n```sql\nsystemctl restart nginx\n```\n\n\n***\n\n","tags":["Nginx"],"categories":["Web"]},{"title":"PHP - è‡ªè¡Œç·¨è­¯å®‰è£ (ç‰ˆæœ¬:php-7.0.1)","url":"/blog.github.io/2022/08/03/PHP-ä½¿ç”¨tarballå®‰è£/","content":"\n***\n***\n\n**å®‰è£ä¾è³´**\n------\n\n***\n***\n\n```sql\nyum -y install dos2unix libzip libzip-devel libncurses*\nyum -y install gcc*\nyum -y install openssl openssl-devel\nyum -y install openldap openldap-devel\nyum -y install libjpeg-devel \nyum -y install libpng-devel\nyum -y install libxml2-devel\nyum -y install libevent-devel\nyum -y install curl-devel\nyum -y install freetype-devel\nyum -y install m4\nyum -y install autoconf\nyum -y install unzip\nyum -y install git \n\nyum -y update\nyum clean all\n```\n\n***\n***\n\n```sql\ntar zxvf libiconv-1.14.tar.gz\ncd libiconv-1.14/\n./configure --prefix=/usr/local/web\nmake\nmake install\ncd ../\n\ntar zxvf libmcrypt-2.5.8.tar.gz\ncd libmcrypt-2.5.8/\n./configure\nmake\nmake install\n/sbin/ldconfig\ncd libltdl/\n./configure --enable-ltdl-install\nmake\nmake install\ncd ../../\n\ntar zxvf mhash-0.9.9.9.tar.gz\ncd mhash-0.9.9.9/\n./configure\nmake\nmake install\ncd ../\n\ntar zxvf mcrypt-2.6.8.tar.gz\ncd mcrypt-2.6.8/\n/sbin/ldconfig\nexport LD_LIBRARY_PATH=/usr/local/lib: LD_LIBRARY_PATH\n./configure\nmake\nmake install\ncd ../\n\ntar zxvf libgd-2.2.5.tar.gz\ncd libgd-2.2.5\n./configure --bindir=/usr/sbin/ --sbindir=/usr/sbin/ --libexecdir=/usr/libexec --sysconfdir=/etc/ --localstatedir=/var --libdir=/usr/lib64/  --includedir=/usr/include/ --datarootdir=/usr/share --infodir=/usr/share/info --localedir=/usr/share/locale --mandir=/usr/share/man/ --docdir=/usr/share/doc/libgd\nmake\nmake install\ncd ../\n```\n\n***\n***\n\n```sql\nln -s /usr/local/lib/libmcrypt.la /usr/lib/libmcrypt.la\nln -s /usr/local/lib/libmcrypt.so /usr/lib/libmcrypt.so\nln -s /usr/local/lib/libmcrypt.so.4 /usr/lib/libmcrypt.so.4\nln -s /usr/local/lib/libmcrypt.so.4.4.8 /usr/lib/libmcrypt.so.4.4.8\nln -s /usr/local/lib/libmhash.a /usr/lib/libmhash.a\nln -s /usr/local/lib/libmhash.la /usr/lib/libmhash.la\nln -s /usr/local/lib/libmhash.so /usr/lib/libmhash.so\nln -s /usr/local/lib/libmhash.so.2 /usr/lib/libmhash.so.2\nln -s /usr/local/lib/libmhash.so.2.0.1 /usr/lib/libmhash.so.2.0.1\nln -s /usr/local/bin/libmcrypt-config /usr/bin/libmcrypt-config\n\ncp -frp /usr/lib64/libldap* /usr/lib/\n```\n\n***\n***\n\n**å®‰è£ php ( ç‰ˆæœ¬:7.0.1 )**\n------\n\n***\n***\n\n[å®˜ç¶²å®‰è£taråŒ…](https://www.php.net/releases/index.php)\n\n***\n***\n\n```sql\ntar -zxvf php-7.0.1.tar.gz\n\n'./configure' '--prefix=/usr/local/web/php' '--with-config-file-path=/usr/local/web/php/etc' '--with-mysqli' '--with-iconv-dir=/usr/local'  '--with-freetype-dir' '--with-jpeg-dir' '--with-gd' '--enable-gd-native-ttf' '--with-zlib' '--enable-libxml' '--enable-xml' '--disable-rpath' '--enable-bcmath' '--enable-shmop' '--enable-sysvsem' '--enable-inline-optimization' '--with-curl' '--enable-mbregex' '--enable-fpm' '--enable-mbstring'  '--with-openssl' '--with-mhash' '--enable-pcntl' '--enable-sockets' '--with-ldap' '--with-ldap-sasl' '--with-xmlrpc' '--enable-zip' '--enable-soap' '--enable-opcache' '--enable-ftp' '--enable-sysvshm' '--with-mcrypt' \n\nsed -i 's/-lcrypto -lcrypt.*/& -llber/g' Makefile\n\nmake && make install\n```\n\n***\n***\n\n```sql\ncp php.ini-production /usr/local/web/php/etc/php.ini\n\ncp sapi/fpm/php-fpm.service /usr/lib/systemd/system/\n\ncp /usr/local/web/php/etc/php-fpm.conf.default /usr/local/web/php/etc/php-fpm.conf\n\ncp /usr/local/web/php/etc/php-fpm.d/www.conf.default /usr/local/web/php/etc/php-fpm.d/www.conf\n```\n\n***\n***\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"PHP - æ·»åŠ åˆ°ç³»çµ±å•Ÿå‹• systemctl","url":"/blog.github.io/2022/08/03/PHP-æ·»åŠ ç³»çµ±é…ç½®/","content":"\n***\n***\n\n**Centos7 é…ç½® systemctl-php-fpm æœå‹™**\n=====\n\n***\n***\n\n**å¢åŠ  `php-fpm` çš„ `pid è¨­å®šæª”`**\n\n```sql\nvim /usr/local/php/etc/php-fpm.conf\n```\n\n```sql\n; Pid file\n; Note: the default prefix is /usr/local/php/var\n; Default Value: none\npid: /var/run/php-fpm.pid\n```\n\n***\n***\n\n**æ–°å¢ `php-fpm` ç³»çµ±æœå‹™**\n\n```sql\ntouch /usr/lib/systemd/system/php-fpm.service\n```\n\n***\n***\n\n**ç·¨è¼¯ `php-fpm` ç³»çµ±æœå‹™è¨­å®š**\n\n```sql\nvim /usr/lib/systemd/system/php-fpm.service\n```\n\n```sql\n[Unit]\nDescription=The PHP FastCGI Process Manager\nAfter=syslog.target network.target\n\n[Service]\nType=forking\nPIDFile=/var/run/php-fpm.pid\nExecStart=/usr/local/php/sbin/php-fpm\nExecReload=/bin/kill -USR2 $MAINPID\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n***\n***\n\n**é‡å•Ÿç³»çµ±ç®¡ç†é…ç½®æœå‹™**\n\n```sql\nsystemctl daemon-reload\n```\n\n***\n***\n\n**å•Ÿå‹•æœå‹™ `php-fpm`**\n\n```sql\nsystemctl start php-fpm\n```\n\n***\n***\n\n\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"PHP - å¦‚ä½•ä½¿ç”¨ YUM å®‰è£","url":"/blog.github.io/2022/08/03/PHP-ä½¿ç”¨yumå®‰è£/","content":"\n***\n***\n\n**å®‰è£…ä¾è³´**\n--------\n\n***\n***\n\n```sql\nyum -y install gcc gcc-c++\n```\n\n***\n***\n\n**å®‰è£ `EPEL` å’Œ `Remiå­˜å„²åº«`**\n\n```sql\nyum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n\nyum install http://rpms.remirepo.net/enterprise/remi-release-7.rpm\n```\n\n***\n***\n\n**å®‰è£… `yum-utils`**\n\n`é€™æ˜¯ä¸€çµ„ç”¨æ–¼ç®¡ç† yumå­˜å„²åº«å’ŒåŒ…çš„æœ‰ç”¨ç¨‹åºã€‚å®ƒæœ‰åŸºæœ¬ä¸Šæ“´å±• yumé»˜èªåŠŸèƒ½ çš„å·¥å…·`\n\n```sql\nyum -y install yum-utils\n```\n\n***\n***\n\n**ä½¿ç”¨ `yum ç®¡ç†` å•Ÿç”¨è©²ç‰ˆæœ¬ php**\n-----\n\n***\n***\n\n\n\n**[å®‰è£… `PHP 7.1`]**\n\n```sql\nyum-config-manager --enable remi-php71\n```\n\n**[ å®‰è£… `PHP 7.2` ]**\n\n```sql\nyum-config-manager --enable remi-php72 \n```\n\n**[ å®‰è£… `PHP 7.3` ]**\n\n```sql\nyum-config-manager --enable remi-php73\n```\n\n\n\n***\n***\n\n**å®‰è£ php**\n-----\n\n```sql\nyum -y install php php-mcrypt php-devel php-cli php-gd php-pear php-curl php-fpm php-mysql php-ldap php-zi\n```\n\n***\n***\n\n**æŸ¥çœ‹ php ç‰ˆæœ¬**\n\n```sql\n[root@VM_159_140_centos lnmp]# php -v\n```\n\n***\n***\n\n\n***\n\n","tags":["PHP"],"categories":["PHP"]},{"title":"SVN - ç¶ è‰²å‹¾å‹¾æ¶ˆå¤±è§£æ±ºæ–¹æ³•","url":"/blog.github.io/2022/08/03/SVN-ç¶ è‰²å‹¾å‹¾æ¶ˆå¤±/","content":"\n***\n***\n\n**åœ¨ `windows` ä¸Šæ“ä½œ**\n=====\n\n***\n***\n\n**æ‰“é–‹ windows ç™»é™¸ç·¨è¼¯ç¨‹å¼ä¸­çš„ `ShellIconOverlayIdentifiers`**\n\n```sql\nWin + R >> regedit >> HKEY_LOCAL_MACHINE -> SOFTWARE -> Microsoft -> Windows -> CurrentVersion -> Explorer -> ShellIconOverlayIdentifiers \n```\n\n***\n***\n\n**æŸ¥çœ‹è¨»å†Šè¡¨ä¸­æ˜¯å¦æœ‰ `Tortoisesvn` ç›¸é—œé¸é …,å¦‚æœæœ‰å‰‡å°‡ `Tortoisesvn` ç›¸é—œç§»åˆ°æœ€å‰ç«¯,å°‡é¦–å­—æ¯æ”¹çˆ²`æ•¸å­—`æˆ–è€…`ç©ºæ ¼`** \n\n***\n***\n\n\n\n**å¦‚æœè¨»å†Šè¡¨ä¸­æ²’æœ‰ `Tortoisesvn` å‰‡å°‡ `Tortoisesvnå°å…¥åˆ°è¨»å†Šè¡¨` , å…·é«”å…§å®¹çˆ²ä»¥ä¸‹**\n***\n\næ‰“é–‹è¨»å†Šè¡¨ ` HKEY_LOCAL_MACHINE -> SOFTWARE -> Microsoft -> Windows -> CurrentVersion -> Explorer -> ShellIconOverlayIdentifiers`\n\n***\n\nå°‡ `ShellIconOverlayIdentifiers` åŒ¯å‡º\n\n***\n\nä½¿ç”¨ç·¨è¼¯å™¨æ‰“é–‹åŒ¯å‡ºçš„æ–‡ä»¶ `xxx.reg` ä¸¦åŠ å…¥ä»¥ä¸‹å…§å®¹å„²å­˜:\n\n`Windows Registry Editor Version 5.00)`\n\n***\n \n```sql\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\1TortoiseNormal]\n@=\"{C5994560-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\2TortoiseModified]\n@=\"{C5994561-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\3TortoiseConflict]\n@=\"{C5994562-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\4TortoiseLocked]\n@=\"{C5994563-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\5TortoiseReadOnly]\n@=\"{C5994564-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\6TortoiseDeleted]\n@=\"{C5994565-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\7TortoiseAdded]\n@=\"{C5994566-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\8TortoiseIgnored]\n@=\"{C5994567-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\9TortoiseUnversioned]\n@=\"{C5994568-53D9-4125-87C9-F193FC689CB2}\"\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\Offline Files]\n@=\"{750fdf0e-2a26-11d1-a3ea-080036587f03}\"\n``` \n\n\n\n***\n***\n    \n**é‡å•“ `Explorer`** \n    \n```sql\nCND :  taskkill /f /im explorer.exe > start explorer.exe\n    \nPW :  stop-process -name explorer -force\n```\n\n***\n***\n\n\n    \n`HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\ShellIconOverlayIdentifiers\\` \n    \n```sql\n001Tortoise1Normal\n001Tortoise2Modified\n001Tortoise3Conflict\n001Tortoise4Locked\n001Tortoise5ReadOnly\n001Tortoise6Deleted\n001Tortoise7Added\n001Tortoise8Ignored\n001Tortoise9Unversioned\n```\n\n\n\n***\n***\n\n***\n\n","tags":["SVN"],"categories":["SVN"]},{"title":"XenServer - å¦‚ä½•æ“´å…… root ç£å€","url":"/blog.github.io/2022/08/03/XEN-æ“´å……rootç£å€/","content":"\n***\n***\n\n**Citrix XenCenter (Client)**\n=====\n\n***\n***\n\n**é€²å…¥ xencenter å¢åŠ è©²æ©Ÿå™¨ç¡¬ç¢Ÿå®¹é‡**\n-----\n\n***\n***\n\n**é¸æ“‡è¦å¢åŠ ç¡¬ç¢Ÿå®¹é‡çš„æ©Ÿå™¨,æ‰¾åˆ° `storage` é¸å–®**\n\n***\n\n**é¸æ“‡è©²ç£å€ `/dev/xvda` å³éµé»é¸ `Add...`**\n\n***\n\n**å¡«å…¥è¦æ–°å¢çš„å®¹é‡,ä¸¦æŒ‰ `add`**\n\n***\n***\n\n**é€²å…¥è©²å°æ©Ÿå™¨åˆ†é…ç£å€**\n-----\n\n***\n***\n\n**æŸ¥çœ‹å„å€ç¡¬ç¢Ÿ**\n\n```sql\ndf -h\n```\n\n***\n\n**æŸ¥çœ‹ç¸½ç¡¬ç¢Ÿæœ‰ç„¡æ–°å¢ `30G`**\n\n```sql\nfdisk -l\n```\n\n***\n\n**æª¢è¦–å·²ç¶“å­˜åœ¨çš„pvï¼ˆç‰©ç†å·ï¼‰**\n\n```sql\npvdisplay\n```\n\n***\n\n**æª¢è¦–ç•¶å‰å·²ç¶“å­˜åœ¨çš„vgï¼ˆé‚è¼¯å·çµ„ï¼‰**\n\n```sql\nvgdisplay\n```\n\n***\n\n**æª¢è¦–å·²ç¶“å­˜åœ¨çš„lvï¼ˆé‚è¼¯å·ï¼‰**\n\n```sql\nlvdisplay\n```\n\n***\n\n**æŠŠ/dev/xvdbåŠ å…¥èˆ‡/ç›®éŒ„ç›¸åŒçš„vgï¼ˆé‚è¼¯å·çµ„ï¼‰**\n\n```sql\nvgextend centos /dev/xvdb\n```\n\n***\n\n**æ“´å®¹lvï¼ˆé‚è¼¯å·ï¼‰**\n\n```sql\nlvextend -L +30.0GB -n /dev/mapper/centos-root\n```\n\n***\n\n**ä½¿å…¶ç”Ÿæ•ˆ**\n\n```sql\nxfs_growfs /dev/mapper/centos-root \n```\n\n***\n\n**å†æ¬¡æŸ¥çœ‹ç£å€å·²æ–°å¢**\n\n```sql\ndf -h\n```\n\n***\n***\n\n***\n\n","tags":["XenCenter"],"categories":["XenCenter"]},{"title":"XenServer - win10 ç„¡æ³•å‚³ ISO æ˜ åƒæª”å•é¡Œ","url":"/blog.github.io/2022/08/03/XEN-ç„¡æ³•å‚³ISOæ˜ åƒæª”/","content":"\n***\n***\n\n**é–‹å•Ÿ `windoes å…ƒä»¶`**\n=====\n\n***\n***\n\n`samba`\n=====\n\n***\n***\n\n\n***\n\n","tags":["XenCenter"],"categories":["XenCenter"]},{"title":"Shell-Script - åµæ¸¬ mysql æœå‹™æ˜¯å¦æ­£å¸¸é‹ä½œ","url":"/blog.github.io/2022/08/03/shell-script-åµæ¸¬mysqlæœå‹™æ˜¯å¦æ­£å¸¸é‹ä½œ/","content":"\n***\n***\n\n```sql\n#!/bin/bash\n\nstep=2    #é–“éš”çš„ç§’æ•¸\n\nTOKEN=\"XXX\" #LINE TOKEN\n\nMESSAGE1=\"Mysql Connection Failed!! TCP:3306 offline.\"\n\nMESSAGE2=\"Mysql Connection Failed!! TCP:3307 offline.\"\n\nfor (( i=0;i<60;i=(i+step) )); do\n\n        echo \"quit\" | telnet 127.0.0.1 3306 | grep \"Escape character is\"\n        code1=\"$?\"\n        echo \"quit\" | telnet 127.0.0.1 3307 | grep \"Escape character is\"\n        code2=\"$?\"\n                if [ \"$code1\" -ne 0 ]; then\n                        echo \"`date +%H:%M:%S` - TCP:3306 offline.\" >> /root/line/mysql/mysql-error.txt\n                        curl -X POST https://notify-api.line.me/api/notify -H \"Authorization: Bearer ${TOKEN}\" -d \"message=${MESSAGE1}\"\n                        \n                elif [ \"$code2\" -ne 0 ]; then\n                        echo \"`date +%H:%M:%S` - TCP:3307 offline.\" >> /root/line/mysql/mysql-error.txt\n                        curl -X POST https://notify-api.line.me/api/notify -H \"Authorization: Bearer ${TOKEN}\" -d \"message=${MESSAGE2}\"\n                fi\n                \n      sleep $step\n    \ndone\n         \nexit 0                           \n\n```\n\n***\n***\n\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"Shell-Script - åµæ¸¬ telegraf æœå‹™","url":"/blog.github.io/2022/08/03/shell-script-åµæ¸¬telegrafæœå‹™/","content":"\n***\n***\n\n```sql\nstep=2    #é–“éš”çš„ç§’æ•¸\n\nTOKEN=\"XXX\"\n\nmessage=\"%0D%0A TEST-222 Telegraf offline\"\n\nl_process=`ps aux |grep telegraf |grep -v 'grep'|awk '{print $2}'`\n\ncurl -i -XPOST 'http://localhost:8086/query?db=telegraf'   --data-urlencode \"q=drop series  FROM \"live\"  where \"host\"='222' \"\n\nfor (( i=0; i < 60; i=(i+step) )); do\n\n        if [ ! -n \"$l_process\" ]; then\n            curl -i -XPOST 'http://localhost:8086/write?db=telegraf'   --data-binary 'live,host=222 value=0'\n            curl https://notify-api.line.me/api/notify -H \"Authorization: Bearer ${TOKEN}\" -d \"message=${message}\"\n\n        else\n            curl -i -XPOST 'http://localhost:8086/write?db=telegraf'   --data-binary 'live,host=222 value=1'\n\n        fi\n\n    sleep $step\n\ndone\n\nexit 0\n\n\n```\n\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"Shell-Script - æ–°å¢ä½¿ç”¨è€…","url":"/blog.github.io/2022/08/03/shell-script-å»ºç«‹æ–°å¢ä½¿ç”¨è€…/","content":"\n***\n***\n\n```sql\n#!/bin/bash\n    \n    while [ \"i\" != \"1\" ]\n    do\n    echo -n new user name:\n    \n    read name\n    \n    useradd $name\n    \n    echo \"123456\" | passwd --stdin $name\n    \n    echo finish new user name is:$name\n    done\n    \n    \n    sed -i \"s/GSSAPIAuthentication yes/GSSAPIAuthentication no/g\" /etc/ssh/sshd_config\n    sed -i \"s/#UseDNS yes/UseDNS no/g\" /etc/ssh/sshd_config\n    service sshd restart\n```\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"Shell-Script - æŠ“ youtube å½±ç‰‡è…³æœ¬","url":"/blog.github.io/2022/08/03/shell-script-æŠ“youtubeå½±ç‰‡è…³æœ¬/","content":"\n# æŠ“å½±ç‰‡è…³æœ¬ (youtube,pornhhub ......)\n\n```sql\n#!/bin/bash\n\n#date=`date +%Y%m%d`\nbinpath=\"/usr/bin\"\nsavedpath=\"/home/videorecord\"\nyoutubedl=\"$binpath/python $savedpath/youtube_dl/__main__.py\"\n\nwhile [ \"$anser\" != \"y\" -a \"$anser\" != \"Y\" ]\ndo\n\n\twhile :\n\tdo\n\n\t\twhile :\n        do\n\n\t\t\twhile :\n\t\t\tdo\n\n\t\t\t\twhile :\n\t\t\t\tdo\n\n\t\t\t\t\techo \" \"    \n\t\t\t\t\tread -p \"è«‹è¼¸å…¥è¦ä¸‹è¼‰æˆ–è£åˆ‡å½±ç‰‡çš„æ—¥æœŸ   ex:20230226: \" datee\n\t\t\t\t\techo $datee | egrep -q '^[[:digit:]]{8}$'\n\n\t\t\t\t\tif [ \"$?\":= \"0\" ]; then\n\t\t\t\t\t\tbreak\n\t\t\t\t\telse\n\t\t\t\t\t\techo \" \"\n\t\t\t\t\t\techo \"æ—¥æœŸè¼¸å…¥éŒ¯èª¤ please try again...\"\n\t\t\t\t\t\techo \" \"\n\t\t\t\t\tfi\n\t\t\t\tdone\n\n\t\t\t\tif [ ! -f \"${datee}NSV.mp4\" ]; then\n\t\t\t\t\techo \" \"\n\t\t\t\t\tread -p \"è«‹è¼¸å…¥è¦ä¸‹è¼‰å½±ç‰‡çš„ \"m3u8\" : \" m3u8\n\t\t\t\t\techo \" \"\n\t\t\t\t\t$youtubedl -F $m3u8\n\n\t\t\t\t\tif [ \"$?\" != \"0\" ];then\n\t\t\t\t\t\texit\n\t\t\t\t\tfi\n\n\t\t\t\t\techo \" \"\n\t\t\t\t\tread -p \"è«‹è¼¸å…¥è¦ä¸‹è¼‰å½±ç‰‡çš„ format code : \" formatcode\n\t\t\t\t\techo \" \"\n\t\t\t\t\t$youtubedl $m3u8 -f $formatcode -o $savedpath/${datee}NSV.mp4\n\t\t\t\t\tcode3=\"$?\"\n\t\t\t\telse\n\t\t\t\t\tcode3=\"666\"\n\t\t\t\t\techo \" \"\n\t\t\t\t\techo \"${datee}NSV.mp4 å·²å­˜åœ¨ , æº–å‚™è£åˆ‡å½±ç‰‡\"\n\t\t\t\tfi\n\t\t\tbreak\n\t\t\tdone\n\n\t\t\tcase $code3 in\n\t\t\t\t\"0\")\n\t\t\t\t\tbreak\n\t\t\t\t\t;;\n\t\t\t\t\"666\")\n\t\t\t\t\tbreak\n\t\t\t\t\t;;\n\n\t\t\t*)\n\t\t\t\texit 1\n\t\t\t\t\t;;\n\t\t\tesac\n\n\t\t\tdone\n\t\t\n\n\t\techo \" \"        \n        \tread -p \"è«‹è¼¸å…¥é–‹å§‹è£åˆ‡æ™‚é–“   ex:00:00:00 : \" starting\n        \tread -p \"è«‹è¼¸å…¥çµæŸè£åˆ‡æ™‚é–“   ex:00:00:00 : \" ending\n        \techo $starting | egrep -q '^[[:digit:]]{2}\\:[[:digit:]]{2}\\:[[:digit:]]{2}$'\n        \tcode1=\"$?\"\n        \techo $ending | egrep -q '^[[:digit:]]{2}\\:[[:digit:]]{2}\\:[[:digit:]]{2}$'\n        \tcode2=\"$?\"\n#\t\techo \"$code1\"\n#\t\techo \"$code2\"\n\n        \tif [ \"$code1\" -a \"$code2\":= \"0\" ]; then\n\t\t\tbreak\n        \telse\n                \techo \" \"\n                \techo \"æ™‚é–“æ ¼å¼è¼¸å…¥éŒ¯èª¤ please try again...\"\n\t\t\tcontinue\n        \tfi\n        done\n\n\techo \" \"\n        echo \"===========================================\"\n        echo \"     è«‹ç¢ºèªé–‹å§‹è£åˆ‡æ™‚é–“ç‚º:   $starting\"\n        echo \"     è«‹ç¢ºèªçµæŸè£åˆ‡æ™‚é–“ç‚º:   $ending\"\n        echo \"===========================================\"\n        echo \" \"\n        read -p \"are you sure [y or n] :\" anser\n\ndone\n\nendd=$(date -d \"$ending\" +%s)\nstartt=$(date -d \"$starting\" +%s)\nsecond=$(($endd-$startt))\n\nif [ \"$second\" -gt \"0\" ]; then\n\t$binpath/ffmpeg -i $savedpath/${datee}NSV.mp4 -ss $starting -t $second -c copy $savedpath/${datee}TBL.mp4\n\n\techo -e \" \"\n\techo \"======================================================================\"\n\techo -e \" \"\n\techo -e \"è«‹ç¢ºèªå½±ç‰‡æ˜¯å¦ä¸Šå‚³: \"\n\techo -e \" \"\n\techo -e \"$VIDEOURL/$dateeTBL.mp4\"\n\techo -e \" \"\n\techo \"======================================================================\"\n\techo -e \" \"\n\nelse\n\techo \" \"\n\techo \"éŒ„è£½æ™‚é–“è¼¸å…¥éŒ¯èª¤ please try again...\"\n\techo \" \"\t\nfi\n```\n\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"Shell-Script - Linux æ¸…é™¤å…§éƒ¨è§£ææš«å­˜","url":"/blog.github.io/2022/08/03/shell-script-æ¸…é™¤å…§éƒ¨è§£ææš«å­˜/","content":"\n***\n***\n\n ```sql\n #!/bin/bash\n    \nrndc flush\n    \nservice named restart\n    \nrndc flush\n\n```\n\n\n\n***\n\n","tags":["Shell-Script"],"categories":["Shell-Script"]},{"title":"MySQL - å»ºç«‹ä¸»å¾ç›£æ§ - dbmonitor","url":"/blog.github.io/2022/01/27/Mysql-å»ºç«‹ä¸»å¾ç›£æ§-dbmonitor/","content":"\n<!--more-->\n[ å®‰è£å¥—ä»¶ apache + php + mysql ]\n\n***\n***\n\n# ç‰ˆæœ¬ [MySQL-5.1.73 + Apache-2.2.27 + PHP-5.5.16]\n\n***\n***\n\n**1. ç’°å¢ƒå®‰è£**\n=====\n\n***\n***\n\n**å®‰è£ { MySQL-5.1.73 } Centos6 é è¨­ mysql ç‰ˆæœ¬**\n-----\n\n***\n\n**å®‰è£æœå‹™**\n\n```sql\nyum install mysql-server mysql-client mysql-devel*\n```\n\n***\n\n**å•Ÿå‹•æœå‹™**\n\n```sql\nservice mysqld start\n```\n\n***\n    \n**è¨­ç½® root å¯†ç¢¼**\n\n```sql\nmysqladmin -u root password '123456'\n```\n\n***\n    \n**å»ºç«‹ database-newdb**\n\n```sql\nmysqladmin -uroot -p create \"newdb\"\n```\n \n***\n***\n \n**å®‰è£ {Apache-2.2.27}**\n-----\n\n***\n\n**å®‰è£ä¾è³´**\n\n```sql\nyum -y install gcc+ gcc-c++\n```\n\n***\n    \n**è§£å£“ & å®‰è£**\n\n```sql\ntar zxvf httpd-2.2.27.kiwi.tar.gz\n    \n./configure --prefix=/usr/local/web/apache2 --enable-ssl --enable-so  --enable-vhost-alias  --with-mpm=prefork\n    \nmake && make install\n```\n\n***\n    \n**å•Ÿå‹•æœå‹™**\n\n```sql\n/usr/local/web/apache2/bin/apachectl\n```\n\n***\n***\n\n**å®‰è£ {PHP-5.5.16}**\n-----\n\n***\n\n**å®‰è£ä¾è³´**\n\n```sql\nyum -y install gcc gcc-c++  make cmake automake autoconf kernel-devel ncurses-devel libxml2-devel openssl-devel curl-devel libjpeg-devel libpng-devel  pcre-devel libtool libtool-libs freetype-devel gd zlib-devel file bison patch mlocate flex diffutils   readline-devel glibc-devel glib2-devel bzip2-devel gettext-devel libcap-devel openldap openldap-devel libxslt-devel sqlite-devel\n```\n\n***\n    \n**è§£å£“ & å®‰è£**\n\n```sql\ntar zxvf php-5.5.16.kiwi.tar.gz\n    \n'./configure' '--prefix=/usr/local/web/php' '--with-apxs2=/usr/local/web/apache2/bin/apxs' '--with-mysql' '--with-mysqli' '--disable-cgi' '--with-iconv' '--disable-inline-optimization' '--enable-mbstring=tw' '--enable-sysvshm' '--enable-sysvsem' '--enable-sockets' '--with-jpeg-dir' '--with-png-dir' '--with-gd' '--with-zlib' '--with-curl' '--enable-zip' '--with-openssl-dir=/usr/lib/openssl' '--with-openssl' '--enable-opcache'\n    \nmake && make install\n```\n\n***\n    \n**è¤‡è£½è¨­å®šæª”åŠ link**\n\n```sql\ncp php.ini-development /usr/local/web/php/etc/php.ini\n        \ncp /usr/local/web/php/bin/* /usr/bin/\n        \nln -s /usr/local/web/php/etc/php.ini /etc/php.ini\n```\n\n***\n***\n   \n**2. è¨­å®š DB & WEB**\n======\n\n***\n***\n \n**è¨­å®š [mysql]**\n-----\n\n***\n\n**ä¸‹è¼‰æ¡†æ¶**\n\n```sql\ngit clone https://github.com/dingbangli/dbmonitor-case.git\n```\n\n***\n    \n**å°‡ SQL æ¡†æ¶åŒ¯å…¥ DB**\n\n```sql\nmysql -uroot -p newdb < dbmonitor_newdb.sql\n```\n\n***\n    \n**Mysql å»ºç«‹ä½¿ç”¨è€… & DB è³‡æ–™**\n\n```sql\nGRANT ALL PRIVILEGES ON *.* TO 'ckdb'@'localhost'   IDENTIFIED BY 'XXX'\n    \ninsert into dbwhere(wid,dbname,dbip,dbtype,id2,dbport) values('22','DB-22','172.16.0.222','m','2106','3306');\n    \ninsert into dbwhere(wid,dbname,dbip,dbtype,id2,dbport) values('23','DB-23','172.16.0.223','s','2107','3306');\n    \ninsert into web(wname,wid) values('lv22','22');\n    \ninsert into web(wname,wid) values('lv23','23');\n    \n\\q\n```\n\n***\n***\n \n**è¨­å®š [Apache]**\n-----\n\n***\n\n**å»ºç«‹è³‡æ–™å¤¾æ”¾ vhost**\n\n```sql\nmkdir /usr/local/web/apache2/conf/extra/vhost-list\n```\n\n***\n    \n**å°‡ git æ‹‰å‡ºçš„ web æ¡†æ¶ç§»è‡³ home**\n\n```sql\ntar zxvf dbmonitor.tar.gz -C /home/\n```\n\n***\n    \n**ç·¨è¼¯ web æ¡†æ¶è¨­å®š**\n\n```sql\nvim /home/dbmonitor/sys_config.php\n\nvim /home/dbmonitor/masinfo.php\n\nvim /home/dbmonitor/masinfo2.php\n\n```\n    \n```php\n<?php\nerror_reporting (16);\n$db_ip=\"localhost:/var/lib/mysql/mysql.sock\";\n$db_user=\"laurance\";\n$db_pas=\"123456\";\n\n$go_user=\"laurance\";\n$go_pas=\"123456\";\n?>\n```\n\n***\n\n**ç·¨è¼¯ httpd-vhost è¨­å®š**\n\n```sql\nvim httpd-vhosts.conf\n```\n    \n```sql\nNameVirtualHost *:80\nInclude conf/extra/vhost-list/*.conf\n```\n\n***\n***\n \n![](https://s2.loli.net/2024/04/29/49EhPaIuYBmtwUv.png)\n\n***\n***\n \n**ç·¨è¼¯ dbmonitor è¨­å®š**\n\n```sql\nvim  /usr/local/web/apache2/conf/extra/vhost-list/dbmonitor.conf\n```\n    \n```sql\n<VirtualHost *:80>\n    ServerAdmin root@localhost\n    DocumentRoot \"/home/dbmonitor/\"\n    ServerName dbmonitor.net\n    ServerAlias dbmonitor2.net\n    ErrorLog \"logs/dbmonitor.err\"\n    CustomLog \"logs/dbmonitor.acc\" common\n</VirtualHost>\n```\n\n***\n\n**ç·¨è¼¯ httpd ä¸»è¨­å®šæª”**\n\n```sql\nvim  /usr/local/web/apache2/conf/httpd.conf\n```\n    \n```sql\n#\n# This is the main Apache HTTP server configuration file.  It contains the\n# configuration directives that give the server its instructions.\n# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.\n# In particular, see \n# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>\n# for a discussion of each configuration directive.\n#\n# Do NOT simply read the instructions in here without understanding\n# what they do.  They're here only as hints or reminders.  If you are unsure\n# consult the online docs. You have been warned.  \n#\n# Configuration and logfile names: If the filenames you specify for many\n# of the server's control files begin with \"/\" (or \"drive:/\" for Win32), the\n# server will use that explicit path.  If the filenames do *not* begin\n# with \"/\", the value of ServerRoot is prepended -- so \"logs/foo_log\"\n# with ServerRoot set to \"/usr/local/web/apache2\" will be interpreted by the\n# server as \"/usr/local/web/apache2/logs/foo_log\".\n\n#\n# ServerRoot: The top of the directory tree under which the server's\n# configuration, error, and log files are kept.\n#\n# Do not add a slash at the end of the directory path.  If you point\n# ServerRoot at a non-local disk, be sure to point the LockFile directive\n# at a local disk.  If you wish to share the same ServerRoot for multiple\n# httpd daemons, you will need to change at least LockFile and PidFile.\n#\nServerRoot \"/usr/local/web/apache2\"\n\n#\n# Listen: Allows you to bind Apache to specific IP addresses and/or\n# ports, instead of the default. See also the <VirtualHost>\n# directive.\n#\n# Change this to Listen on specific IP addresses as shown below to \n# prevent Apache from glomming onto all bound IP addresses.\n#\n#Listen 12.34.56.78:80\nListen 80\n\n#\n# Dynamic Shared Object (DSO) Support\n#\n# To be able to use the functionality of a module which was built as a DSO you\n# have to place corresponding `LoadModule' lines at this location so the\n# directives contained in it are actually available _before_ they are used.\n# Statically compiled modules (those listed by `httpd -l') do not need\n# to be loaded here.\n#\n# Example:\n# LoadModule foo_module modules/mod_foo.so\nLoadModule php5_module        modules/libphp5.so\n#LoadModule proxy_module       modules/mod_proxy.so\n#LoadModule proxy_http_module  modules/mod_proxy_http.so\n#\n\n<IfModule !mpm_netware_module>\n<IfModule !mpm_winnt_module>\n#\n# If you wish httpd to run as a different user or group, you must run\n# httpd as root initially and it will switch.  \n#\n# User/Group: The name (or #number) of the user/group to run httpd as.\n# It is usually good practice to create a dedicated user and group for\n# running httpd, as with most system services.\n#\nUser daemon\nGroup daemon\n\n</IfModule>\n</IfModule>\n\n# 'Main' server configuration\n#\n# The directives in this section set up the values used by the 'main'\n# server, which responds to any requests that aren't handled by a\n# <VirtualHost> definition.  These values also provide defaults for\n# any <VirtualHost> containers you may define later in the file.\n#\n# All of these directives may appear inside <VirtualHost> containers,\n# in which case these default settings will be overridden for the\n# virtual host being defined.\n#\n\n#\n# ServerAdmin: Your address, where problems with the server should be\n# e-mailed.  This address appears on some server-generated pages, such\n# as error documents.  e.g. admin@your-domain.com\n#\nServerAdmin you@example.com\n\n#\n# ServerName gives the name and port that the server uses to identify itself.\n# This can often be determined automatically, but we recommend you specify\n# it explicitly to prevent problems during startup.\n#\n# If your host doesn't have a registered DNS name, enter its IP address here.\n#\nServerName www.example.com:80\n\n#\n# DocumentRoot: The directory out of which you will serve your\n# documents. By default, all requests are taken from this directory, but\n# symbolic links and aliases may be used to point to other locations.\n#\nDocumentRoot \"/usr/local/web/apache2//htdocs\"\n\n#DocumentRoot \"/home/dbmonitor\"\n#\n# Each directory to which Apache has access can be configured with respect\n# to which services and features are allowed and/or disabled in that\n# directory (and its subdirectories). \n#\n# First, we configure the \"default\" to be a very restrictive set of \n# features.  \n#\n<Directory />\n    Options FollowSymLinks\n    AllowOverride None\n    Order allow,deny\n    allow from all\n</Directory>\n\n#\n# Note that from this point forward you must specifically allow\n# particular features to be enabled - so if something's not working as\n# you might expect, make sure that you have specifically enabled it\n# below.\n#\n\n#\n# This should be changed to whatever you set DocumentRoot to.\n#\n<Directory \"/usr/local/web/apache2//htdocs\">\n    #\n    # Possible values for the Options directive are \"None\", \"All\",\n    # or any combination of:\n    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews\n    #\n    # Note that \"MultiViews\" must be named *explicitly* --- \"Options All\"\n    # doesn't give it to you.\n    #\n    # The Options directive is both complicated and important.  Please see\n    # http://httpd.apache.org/docs/2.2/mod/core.html#options\n    # for more information.\n    #\n    Options Indexes FollowSymLinks\n\n    #\n    # AllowOverride controls what directives may be placed in .htaccess files.\n    # It can be \"All\", \"None\", or any combination of the keywords:\n    #   Options FileInfo AuthConfig Limit\n    #\n    AllowOverride None\n\n    #\n    # Controls who can get stuff from this server.\n    #\n    Order allow,deny\n    Allow from all\n\n</Directory>\n\n#\n# DirectoryIndex: sets the file that Apache will serve if a directory\n# is requested.\n#\n<IfModule dir_module>\n    DirectoryIndex index.html index.php indexs.php\n</IfModule>\n\n#\n# The following lines prevent .htaccess and .htpasswd files from being \n# viewed by Web clients. \n#\n<FilesMatch \"^\\.ht\">\n    Order allow,deny\n    Deny from all\n    Satisfy All\n</FilesMatch>\n\n#\n# ErrorLog: The location of the error log file.\n# If you do not specify an ErrorLog directive within a <VirtualHost>\n# container, error messages relating to that virtual host will be\n# logged here.  If you *do* define an error logfile for a <VirtualHost>\n# container, that host's errors will be logged there and not here.\n#\nErrorLog \"logs/error_log\"\n\n#\n# LogLevel: Control the number of messages logged to the error_log.\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#\nLogLevel warn\n\n<IfModule log_config_module>\n    #\n    # The following directives define some format nicknames for use with\n    # a CustomLog directive (see below).\n    #\n    LogFormat \"%h \\\"%{x-forwarded-for}i\\\" %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\n\n    <IfModule logio_module>\n      # You need to enable mod_logio.c to use %I and %O\n      LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" %I %O\" combinedio\n    </IfModule>\n\n    #\n    # The location and format of the access logfile (Common Logfile Format).\n    # If you do not define any access logfiles within a <VirtualHost>\n    # container, they will be logged here.  Contrariwise, if you *do*\n    # define per-<VirtualHost> access logfiles, transactions will be\n    # logged therein and *not* in this file.\n    #\n    CustomLog \"logs/access_log\" common\n\n    #\n    # If you prefer a logfile with access, agent, and referer information\n    # (Combined Logfile Format) you can use the following directive.\n    #\n    #CustomLog \"logs/access_log\" combined\n</IfModule>\n\n<IfModule alias_module>\n    #\n    # Redirect: Allows you to tell clients about documents that used to \n    # exist in your server's namespace, but do not anymore. The client \n    # will make a new request for the document at its new location.\n    # Example:\n    # Redirect permanent /foo http://www.example.com/bar\n\n    #\n    # Alias: Maps web paths into filesystem paths and is used to\n    # access content that does not live under the DocumentRoot.\n    # Example:\n    # Alias /webpath /full/filesystem/path\n    #\n    # If you include a trailing / on /webpath then the server will\n    # require it to be present in the URL.  You will also likely\n    # need to provide a <Directory> section to allow access to\n    # the filesystem path.\n\n    #\n    # ScriptAlias: This controls which directories contain server scripts. \n    # ScriptAliases are essentially the same as Aliases, except that\n    # documents in the target directory are treated as applications and\n    # run by the server when requested rather than as documents sent to the\n    # client.  The same rules about trailing \"/\" apply to ScriptAlias\n    # directives as to Alias.\n    #\n    ScriptAlias /cgi-bin/ \"/usr/local/web/apache2//cgi-bin/\"\n\n</IfModule>\n\n<IfModule cgid_module>\n    #\n    # ScriptSock: On threaded servers, designate the path to the UNIX\n    # socket used to communicate with the CGI daemon of mod_cgid.\n    #\n    #Scriptsock logs/cgisock\n</IfModule>\n\n#\n# \"/usr/local/web/apache2/cgi-bin\" should be changed to whatever your ScriptAliased\n# CGI directory exists, if you have that configured.\n#\n<Directory \"/usr/local/web/apache2//cgi-bin\">\n    AllowOverride None\n    Options None\n    Order allow,deny\n    Allow from all\n</Directory>\n\n#\n# DefaultType: the default MIME type the server will use for a document\n# if it cannot otherwise determine one, such as from filename extensions.\n# If your server contains mostly text or HTML documents, \"text/plain\" is\n# a good value.  If most of your content is binary, such as applications\n# or images, you may want to use \"application/octet-stream\" instead to\n# keep browsers from trying to display binary files as though they are\n# text.\n#\nDefaultType text/plain\n\n<IfModule mime_module>\n    #\n    # TypesConfig points to the file containing the list of mappings from\n    # filename extension to MIME-type.\n    #\n    TypesConfig conf/mime.types\n\n    #\n    # AddType allows you to add to or override the MIME configuration\n    # file specified in TypesConfig for specific file types.\n    #\n    #AddType application/x-gzip .tgz\n    #\n    # AddEncoding allows you to have certain browsers uncompress\n    # information on the fly. Note: Not all browsers support this.\n    #\n    #AddEncoding x-compress .Z\n    #AddEncoding x-gzip .gz .tgz\n    #\n    # If the AddEncoding directives above are commented-out, then you\n    # probably should define those extensions to indicate media types:\n    #\n    AddType application/x-compress .Z\n    AddType application/x-gzip .gz .tgz\n    AddType application/x-httpd-php .php .phtml\n    AddType application/x-httpd-php-source .phps\n\n    #\n    # AddHandler allows you to map certain file extensions to \"handlers\":\n    # actions unrelated to filetype. These can be either built into the server\n    # or added with the Action directive (see below)\n    #\n    # To use CGI scripts outside of ScriptAliased directories:\n    # (You will also need to add \"ExecCGI\" to the \"Options\" directive.)\n    #\n    #AddHandler cgi-script .cgi\n\n    # For type maps (negotiated resources):\n    #AddHandler type-map var\n\n    #\n    # Filters allow you to process content before it is sent to the client.\n    #\n    # To parse .shtml files for server-side includes (SSI):\n    # (You will also need to add \"Includes\" to the \"Options\" directive.)\n    #\n    #AddType text/html .shtml\n    #AddOutputFilter INCLUDES .shtml\n</IfModule>\n\n#\n# The mod_mime_magic module allows the server to use various hints from the\n# contents of the file itself to determine its type.  The MIMEMagicFile\n# directive tells the module where the hint definitions are located.\n#\n#MIMEMagicFile conf/magic\n\n#\n# Customizable error responses come in three flavors:\n# 1) plain text 2) local redirects 3) external redirects\n#\n# Some examples:\n#ErrorDocument 500 \"The server made a boo boo.\"\n#ErrorDocument 404 /missing.html\n#ErrorDocument 404 \"/cgi-bin/missing_handler.pl\"\n#ErrorDocument 402 http://www.example.com/subscription_info.html\n#\n\n#\n# MaxRanges: Maximum number of Ranges in a request before\n# returning the entire resource, or one of the special\n# values 'default', 'none' or 'unlimited'.\n# Default setting is to accept 200 Ranges.\n#MaxRanges unlimited\n\n#\n# EnableMMAP and EnableSendfile: On systems that support it, \n# memory-mapping or the sendfile syscall is used to deliver\n# files.  This usually improves server performance, but must\n# be turned off when serving from networked-mounted \n# filesystems or if support for these functions is otherwise\n# broken on your system.\n#\n#EnableMMAP off\n#EnableSendfile off\n\n# Supplemental configuration\n#\n# The configuration files in the conf/extra/ directory can be \n# included to add extra features or to modify the default configuration of \n# the server, or you may simply copy their contents here and change as \n# necessary.\n\n# Server-pool management (MPM specific)\n#Include conf/extra/httpd-mpm.conf\n\n# Multi-language error messages\nInclude conf/extra/httpd-multilang-errordoc.conf\n\n# Fancy directory listings\n#Include conf/extra/httpd-autoindex.conf\n\n# Language settings\nInclude conf/extra/httpd-languages.conf\n\n# User home directories\n#Include conf/extra/httpd-userdir.conf\n\n# Real-time info on requests and configuration\n#Include conf/extra/httpd-info.conf\n\n# Virtual hosts\nInclude conf/extra/httpd-vhosts.conf\n\n# Local access to the Apache HTTP Server Manual\nInclude conf/extra/httpd-manual.conf\n\n# Distributed authoring and versioning (WebDAV)\n#Include conf/extra/httpd-dav.conf\n\n# Various default settings\nInclude conf/extra/httpd-default.conf\n\n# Secure (SSL/TLS) connections\n#Include conf/extra/httpd-ssl.conf\n#\n# Note: The following must must be present to support\n#       starting without SSL on platforms with no /dev/random equivalent\n#       but a statically compiled-in mod_ssl.\n#\n<IfModule ssl_module>\nSSLRandomSeed startup builtin\nSSLRandomSeed connect builtin\n</IfModule>\n\n# Virtual dir for programmer use\n#Include conf/httpd-vdir.conf\n\nAddDefaultCharset utf-8\n```\n\n***\n\n**é‡å•Ÿæœå‹™**\n\n```sql\n/usr/local/web/apache2/bin/apachectl  graceful\n```\n\n***\n***\n     \n**PHP ä¸ç”¨è¨­å®š**\n-----\n\n***\n***\n \n**é©—æ”¶ : ç›£æ§ä¸»å¾é€²åº¦åŠ binlog**\n-----\n\n***\n***\n \n![](https://s2.loli.net/2024/04/29/VhTXuAe6mqQNyHW.png)\n\n \n***\n***\n     \n\n\n***\n\n","tags":["MySQL"],"categories":["MySQL"]}]